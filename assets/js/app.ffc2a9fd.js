(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var o,r,s=e[0],c=e[1],l=e[2],p=0,u=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o]);for(d&&d(e);u.length;)u.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var n,e=0;e<i.length;e++){for(var t=i[e],o=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),n=r(r.s=t[0]))}return n}var o={},a={1:0},i=[];function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var o=new Promise((function(e,o){t=a[n]=[e,o]}));e.push(t[2]=o);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(n){return r.p+"assets/js/"+({}[n]||n)+"."+{2:"fbbdf61d",3:"8494f848",4:"cd0c8f84",5:"2d050595",6:"42e16043",7:"8e7e3e5a",8:"58eb5208",9:"79c3d2c0",10:"e97fa32e",11:"54d332e4",12:"f44a82d3",13:"6a997ef1",14:"91eebba8",15:"f0fe1a2f",16:"f6a93be8",17:"e69838fc",18:"b4d244df",19:"77ce86be",20:"522c38c6",21:"5ddc1ccf",22:"99e8ee68",23:"82c4363e",24:"be760363",25:"9cf1c272",26:"63cf55ed",27:"1b095ee3",28:"2eb24b37",29:"ed14162b",30:"5dcfd290",31:"3dc6860b",32:"5b6b946d",33:"b6c2eaeb",34:"60de0211",35:"12f403f4",36:"a30ab135",37:"83ffe510",38:"1465e967",39:"0e48601a",40:"6349f9cb"}[n]+".js"}(n);var c=new Error;i=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,t[1](c)}a[n]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(e)},r.m=n,r.c=o,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="/",r.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;i.push([95,0]),t()}([function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e,t){var o=t(25),a=Function.prototype,i=a.bind,r=a.call,s=o&&i.bind(r,r);n.exports=o?function(n){return n&&s(n)}:function(n){return n&&function(){return r.apply(n,arguments)}}},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var o=t(67),a="object"==typeof self&&self&&self.Object===Object&&self,i=o||a||Function("return this")();n.exports=i},function(n,e,t){"use strict";function o(n,e,t,o,a,i,r,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(r)},l._ssrRegister=c):a&&(c=s?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(n,e){return c.call(e),d(n,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return o}))},function(n,e,t){var o=t(3);n.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var o=t(2),a=t(57),i=o({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return i(a(n),e)}},function(n,e,t){var o=t(0);n.exports=function(n){return"object"==typeof n?null!==n:o(n)}},function(n,e,t){var o=t(155),a=t(158);n.exports=function(n,e){var t=a(n,e);return o(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return o})),t.d(e,"b",(function(){return i})),t.d(e,"j",(function(){return r})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return d})),t.d(e,"c",(function(){return p})),t.d(e,"f",(function(){return u})),t.d(e,"l",(function(){return h})),t.d(e,"m",(function(){return m})),t.d(e,"d",(function(){return g})),t.d(e,"k",(function(){return y})),t.d(e,"n",(function(){return v})),t.d(e,"a",(function(){return w}));const o=/#.*$/,a=/\.(md|html)$/,i=/\/$/,r=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(o,"").replace(a,"")}function c(n){return r.test(n)}function l(n){return/^mailto:/.test(n)}function d(n){return/^tel:/.test(n)}function p(n){if(c(n))return n;if(!n)return"404";const e=n.match(o),t=e?e[0]:"",a=s(n);return i.test(a)?n:a+".html"+t}function u(n,e){const t=n.hash,a=function(n){const e=n&&n.match(o);if(e)return e[0]}(e);if(a&&t!==a)return!1;return s(n.path)===s(e)}function h(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){const o=n.charAt(0);if("/"===o)return n;if("?"===o||"#"===o)return e+n;const a=e.split("/");t&&a[a.length-1]||a.pop();const i=n.replace(/^\//,"").split("/");for(let n=0;n<i.length;n++){const e=i[n];".."===e?a.pop():"."!==e&&a.push(e)}""!==a[0]&&a.unshift("");return a.join("/")}(e,t));const o=s(e);for(let e=0;e<n.length;e++)if(s(n[e].regularPath)===o)return Object.assign({},n[e],{type:"page",path:p(n[e].path)});return console.error(`[vuepress] No matching page found for sidebar item "${e}"`),{}}function m(n,e,t,o){const{pages:a,themeConfig:i}=t,r=o&&i.locales&&i.locales[o]||i;if("auto"===(n.frontmatter.sidebar||r.sidebar||i.sidebar))return f(n);const s=r.sidebar||i.sidebar;if(s){const{base:t,config:o}=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(const o in e)if(0===(t=n,/(\.html|\/)$/.test(t)?t:t+"/").indexOf(encodeURI(o)))return{base:o,config:e[o]};var t;return{}}(e,s);return"auto"===o?f(n):o?o.map(n=>function n(e,t,o,a=1){if("string"==typeof e)return h(t,e,o);if(Array.isArray(e))return Object.assign(h(t,e[0],o),{title:e[1]});{a>3&&console.error("[vuepress] detected a too deep nested sidebar group.");const i=e.children||[];return 0===i.length&&e.path?Object.assign(h(t,e.path,o),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:i.map(e=>n(e,t,o,a+1)),collapsable:!1!==e.collapsable}}}(n,a,t)):[]}return[]}function f(n){const e=g(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map(e=>({type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}))}]}function g(n){let e;return(n=n.map(n=>Object.assign({},n))).forEach(n=>{2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)}),n.filter(n=>2===n.level)}function y(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function v(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function b(n){let e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function w(n,e){return b(e)-b(n)}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var o=t(14),a=t(140),i=t(141),r=o?o.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":r&&r in Object(n)?a(n):i(n)}},function(n,e,t){var o=t(5).Symbol;n.exports=o},function(n,e,t){var o=t(1),a=t(0),i=function(n){return a(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?i(o[n]):o[n]&&o[n][e]}},function(n,e,t){var o=t(7),a=t(17),i=t(26);n.exports=o?function(n,e,t){return a.f(n,e,i(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var o=t(7),a=t(59),i=t(104),r=t(32),s=t(48),c=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor;e.f=o?i?function(n,e,t){if(r(n),e=s(e),r(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var o=d(n,e);o&&o.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:o.configurable,enumerable:"enumerable"in t?t.enumerable:o.enumerable,writable:!1})}return l(n,e,t)}:l:function(n,e,t){if(r(n),e=s(e),r(t),a)try{return l(n,e,t)}catch(n){}if("get"in t||"set"in t)throw c("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var o=t(145),a=t(146),i=t(147),r=t(148),s=t(149);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var o=n[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=r,c.prototype.set=s,n.exports=c},function(n,e,t){var o=t(69);n.exports=function(n,e){for(var t=n.length;t--;)if(o(n[t][0],e))return t;return-1}},function(n,e,t){var o=t(10)(Object,"create");n.exports=o},function(n,e,t){var o=t(167);n.exports=function(n,e){var t=n.__data__;return o(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var o=t(40);n.exports=function(n){if("string"==typeof n||o(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var o,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(a="function"==typeof(o=function(){var n,e,t={version:"0.2.0"},o=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(n,e,t){return n<e?e:n>t?t:n}function i(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(o[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=a(n,o.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(o.barSelector),d=o.speed,p=o.easing;return c.offsetWidth,r((function(e){""===o.positionUsing&&(o.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var a;return(a="translate3d"===o.positionUsing?{transform:"translate3d("+i(n)+"%,0,0)"}:"translate"===o.positionUsing?{transform:"translate("+i(n)+"%,0)"}:{"margin-left":i(n)+"%"}).transition="all "+e+"ms "+t,a}(n,d,p)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+d+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),d)}),d)):setTimeout(e,d)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),o.trickleSpeed)};return o.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*a(Math.random()*e,.1,.95)),e=a(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*o.trickleRate)},n=0,e=0,t.promise=function(o){return o&&"resolved"!==o.state()?(0===e&&t.start(),n++,e++,o.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=o.template;var a,r=e.querySelector(o.barSelector),c=n?"-100":i(t.status||0),d=document.querySelector(o.parent);return s(r,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),o.showSpinner||(a=e.querySelector(o.spinnerSelector))&&u(a),d!=document.body&&l(d,"nprogress-custom-parent"),d.appendChild(e),e},t.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(o.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&u(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var r=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var o,a=n.length,i=e.charAt(0).toUpperCase()+e.slice(1);a--;)if((o=n[a]+i)in t)return o;return e}(t))}function o(n,e,o){e=t(e),n.style[e]=o}return function(n,e){var t,a,i=arguments;if(2==i.length)for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&o(n,t,a);else o(n,i[1],i[2])}}();function c(n,e){return("string"==typeof n?n:p(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=p(n),o=t+e;c(t,e)||(n.className=o.substring(1))}function d(n,e){var t,o=p(n);c(n,e)&&(t=o.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function p(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function u(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?o.call(e,t,e,n):o)||(n.exports=a)},function(n,e,t){var o=t(25),a=Function.prototype.call;n.exports=o?a.bind(a):function(){return a.apply(a,arguments)}},function(n,e,t){var o=t(3);n.exports=!o((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){var o=t(46),a=t(47);n.exports=function(n){return o(a(n))}},function(n,e,t){var o=t(2),a=o({}.toString),i=o("".slice);n.exports=function(n){return i(a(n),8,-1)}},function(n,e,t){var o=t(1),a=t(55),i=t(8),r=t(58),s=t(52),c=t(51),l=a("wks"),d=o.Symbol,p=d&&d.for,u=c?d:d&&d.withoutSetter||r;n.exports=function(n){if(!i(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&i(d,n)?l[n]=d[n]:l[n]=c&&p?p(e):u(e)}return l[n]}},function(n,e,t){var o=t(1),a=t(31),i=o["__core-js_shared__"]||a("__core-js_shared__",{});n.exports=i},function(n,e,t){var o=t(1),a=Object.defineProperty;n.exports=function(n,e){try{a(o,n,{value:e,configurable:!0,writable:!0})}catch(t){o[n]=e}return e}},function(n,e,t){var o=t(9),a=String,i=TypeError;n.exports=function(n){if(o(n))return n;throw i(a(n)+" is not an object")}},function(n,e,t){var o=t(139),a=t(12),i=Object.prototype,r=i.hasOwnProperty,s=i.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(n){return a(n)&&r.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var o=t(10)(t(5),"Map");n.exports=o},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var o=t(159),a=t(166),i=t(168),r=t(169),s=t(170);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var o=n[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=r,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var o=t(4),a=t(40),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;n.exports=function(n,e){if(o(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!a(n))||(r.test(n)||!i.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var o=t(13),a=t(12);n.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==o(n)}},function(n,e){n.exports=function(n){return n}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,r=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),d=Object.prototype.toString,p=Math.max,u=Math.min,h=function(){return l.Date.now()};function m(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function f(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==d.call(n)}(n))return NaN;if(m(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=m(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=a.test(n);return s||i.test(n)?r(n.slice(2),s?2:8):o.test(n)?NaN:+n}n.exports=function(n,e,t){var o,a,i,r,s,c,l=0,d=!1,g=!1,y=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function v(e){var t=o,i=a;return o=a=void 0,l=e,r=n.apply(i,t)}function b(n){return l=n,s=setTimeout(k,e),d?v(n):r}function w(n){var t=n-c;return void 0===c||t>=e||t<0||g&&n-l>=i}function k(){var n=h();if(w(n))return x(n);s=setTimeout(k,function(n){var t=e-(n-c);return g?u(t,i-(n-l)):t}(n))}function x(n){return s=void 0,y&&o?v(n):(o=a=void 0,r)}function T(){var n=h(),t=w(n);if(o=arguments,a=this,c=n,t){if(void 0===s)return b(c);if(g)return s=setTimeout(k,e),v(c)}return void 0===s&&(s=setTimeout(k,e)),r}return e=f(e)||0,m(t)&&(d=!!t.leading,i=(g="maxWait"in t)?p(f(t.maxWait)||0,e):i,y="trailing"in t?!!t.trailing:y),T.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=a=s=void 0},T.flush=function(){return void 0===s?r:x(h())},T}},function(n,e,t){var o=t(1),a=t(45).f,i=t(16),r=t(105),s=t(31),c=t(62),l=t(120);n.exports=function(n,e){var t,d,p,u,h,m=n.target,f=n.global,g=n.stat;if(t=f?o:g?o[m]||s(m,{}):(o[m]||{}).prototype)for(d in e){if(u=e[d],p=n.dontCallGetSet?(h=a(t,d))&&h.value:t[d],!l(f?d:m+(g?".":"#")+d,n.forced)&&void 0!==p){if(typeof u==typeof p)continue;c(u,p)}(n.sham||p&&p.sham)&&i(u,"sham",!0),r(t,d,u,n)}}},function(n,e,t){var o=t(7),a=t(24),i=t(97),r=t(26),s=t(27),c=t(48),l=t(8),d=t(59),p=Object.getOwnPropertyDescriptor;e.f=o?p:function(n,e){if(n=s(n),e=c(e),d)try{return p(n,e)}catch(n){}if(l(n,e))return r(!a(i.f,n,e),n[e])}},function(n,e,t){var o=t(2),a=t(3),i=t(28),r=Object,s=o("".split);n.exports=a((function(){return!r("z").propertyIsEnumerable(0)}))?function(n){return"String"==i(n)?s(n,""):r(n)}:r},function(n,e){var t=TypeError;n.exports=function(n){if(null==n)throw t("Can't call method on "+n);return n}},function(n,e,t){var o=t(98),a=t(49);n.exports=function(n){var e=o(n,"string");return a(e)?e:e+""}},function(n,e,t){var o=t(15),a=t(0),i=t(50),r=t(51),s=Object;n.exports=r?function(n){return"symbol"==typeof n}:function(n){var e=o("Symbol");return a(e)&&i(e.prototype,s(n))}},function(n,e,t){var o=t(2);n.exports=o({}.isPrototypeOf)},function(n,e,t){var o=t(52);n.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var o=t(53),a=t(3);n.exports=!!Object.getOwnPropertySymbols&&!a((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},function(n,e,t){var o,a,i=t(1),r=t(99),s=i.process,c=i.Deno,l=s&&s.versions||c&&c.version,d=l&&l.v8;d&&(a=(o=d.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&r&&(!(o=r.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=r.match(/Chrome\/(\d+)/))&&(a=+o[1]),n.exports=a},function(n,e,t){var o=t(0),a=t(101),i=TypeError;n.exports=function(n){if(o(n))return n;throw i(a(n)+" is not a function")}},function(n,e,t){var o=t(56),a=t(30);(n.exports=function(n,e){return a[n]||(a[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.24.0",mode:o?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e){n.exports=!1},function(n,e,t){var o=t(47),a=Object;n.exports=function(n){return a(o(n))}},function(n,e,t){var o=t(2),a=0,i=Math.random(),r=o(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+r(++a+i,36)}},function(n,e,t){var o=t(7),a=t(3),i=t(103);n.exports=!o&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var o=t(2),a=t(0),i=t(30),r=o(Function.toString);a(i.inspectSource)||(i.inspectSource=function(n){return r(n)}),n.exports=i.inspectSource},function(n,e){n.exports={}},function(n,e,t){var o=t(8),a=t(111),i=t(45),r=t(17);n.exports=function(n,e,t){for(var s=a(e),c=r.f,l=i.f,d=0;d<s.length;d++){var p=s[d];o(n,p)||t&&o(t,p)||c(n,p,l(e,p))}}},function(n,e,t){var o=t(116);n.exports=function(n){var e=+n;return e!=e||0===e?0:o(e)}},function(n,e,t){var o=t(117);n.exports=function(n){return o(n.length)}},function(n,e,t){var o=t(2),a=t(32),i=t(127);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,o){return a(t),i(o),e?n(t,o):t.__proto__=o,t}}():void 0)},function(n,e){n.exports=function(n,e){for(var t=-1,o=e.length,a=n.length;++t<o;)n[a+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var o=t(18),a=t(150),i=t(151),r=t(152),s=t(153),c=t(154);function l(n){var e=this.__data__=new o(n);this.size=e.size}l.prototype.clear=a,l.prototype.delete=i,l.prototype.get=r,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var o=t(13),a=t(35);n.exports=function(n){if(!a(n))return!1;var e=o(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var o=t(171),a=t(12);n.exports=function n(e,t,i,r,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!=e&&t!=t:o(e,t,i,r,n,s))}},function(n,e,t){var o=t(74),a=t(174),i=t(75);n.exports=function(n,e,t,r,s,c){var l=1&t,d=n.length,p=e.length;if(d!=p&&!(l&&p>d))return!1;var u=c.get(n),h=c.get(e);if(u&&h)return u==e&&h==n;var m=-1,f=!0,g=2&t?new o:void 0;for(c.set(n,e),c.set(e,n);++m<d;){var y=n[m],v=e[m];if(r)var b=l?r(v,y,m,e,n,c):r(y,v,m,n,e,c);if(void 0!==b){if(b)continue;f=!1;break}if(g){if(!a(e,(function(n,e){if(!i(g,e)&&(y===n||s(y,n,t,r,c)))return g.push(e)}))){f=!1;break}}else if(y!==v&&!s(y,v,t,r,c)){f=!1;break}}return c.delete(n),c.delete(e),f}},function(n,e,t){var o=t(36),a=t(172),i=t(173);function r(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new o;++e<t;)this.add(n[e])}r.prototype.add=r.prototype.push=a,r.prototype.has=i,n.exports=r},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var o=t(184),a=t(190),i=t(80);n.exports=function(n){return i(n)?o(n):a(n)}},function(n,e,t){(function(n){var o=t(5),a=t(186),i=e&&!e.nodeType&&e,r=i&&"object"==typeof n&&n&&!n.nodeType&&n,s=r&&r.exports===i?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;n.exports=c}).call(this,t(42)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var o=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var o=t(187),a=t(188),i=t(189),r=i&&i.isTypedArray,s=r?a(r):o;n.exports=s},function(n,e,t){var o=t(70),a=t(38);n.exports=function(n){return null!=n&&a(n.length)&&!o(n)}},function(n,e,t){var o=t(10)(t(5),"Set");n.exports=o},function(n,e,t){var o=t(35);n.exports=function(n){return n==n&&!o(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var o=t(85),a=t(22);n.exports=function(n,e){for(var t=0,i=(e=o(e,n)).length;null!=n&&t<i;)n=n[a(e[t++])];return t&&t==i?n:void 0}},function(n,e,t){var o=t(4),a=t(39),i=t(201),r=t(204);n.exports=function(n,e){return o(n)?n:a(n,e)?[n]:i(r(n))}},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){var o=t(137),a=t(142),i=t(213),r=t(221),s=t(230),c=t(94),l=i((function(n){var e=c(n);return s(e)&&(e=void 0),r(o(n,1,s,!0),a(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var o=/["'&<>]/;n.exports=function(n){var e,t=""+n,a=o.exec(t);if(!a)return t;var i="",r=0,s=0;for(r=a.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==r&&(i+=t.substring(s,r)),s=r+1,i+=e}return s!==r?i+t.substring(s,r):i}},function(n,e,t){"use strict";t.r(e);var o={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},a=(t(233),t(6)),i=Object(a.a)(o,(function(){return(0,this._self._c)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=i.exports},function(n,e,t){"use strict";t.r(e);var o={name:"CodeGroup",data:()=>({codeTabs:[],activeCodeTabIndex:-1}),watch:{activeCodeTabIndex(n){this.codeTabs.forEach(n=>{n.elm.classList.remove("theme-code-block__active")}),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted(){this.codeTabs=(this.$slots.default||[]).filter(n=>Boolean(n.componentOptions)).map((n,e)=>(""===n.componentOptions.propsData.active&&(this.activeCodeTabIndex=e),{title:n.componentOptions.propsData.title,elm:n.elm})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab(n){this.activeCodeTabIndex=n}}},a=(t(234),t(6)),i=Object(a.a)(o,(function(){var n=this,e=n._self._c;return e("div",{staticClass:"theme-code-group"},[e("div",{staticClass:"theme-code-group__nav"},[e("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(t,o){return e("li",{key:t.title,staticClass:"theme-code-group__li"},[e("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":o===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(o)}}},[n._v("\n            "+n._s(t.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?e("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=i.exports},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){n.exports=t(239)},function(n,e,t){"use strict";var o=t(44),a=t(121).left,i=t(122),r=t(53),s=t(123);o({target:"Array",proto:!0,forced:!i("reduce")||!s&&r>79&&r<83},{reduce:function(n){var e=arguments.length;return a(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var o={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,i=a&&!o.call({1:2},1);e.f=i?function(n){var e=a(this,n);return!!e&&e.enumerable}:o},function(n,e,t){var o=t(24),a=t(9),i=t(49),r=t(100),s=t(102),c=t(29),l=TypeError,d=c("toPrimitive");n.exports=function(n,e){if(!a(n)||i(n))return n;var t,c=r(n,d);if(c){if(void 0===e&&(e="default"),t=o(c,n,e),!a(t)||i(t))return t;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(n,e)}},function(n,e,t){var o=t(15);n.exports=o("navigator","userAgent")||""},function(n,e,t){var o=t(54);n.exports=function(n,e){var t=n[e];return null==t?void 0:o(t)}},function(n,e){var t=String;n.exports=function(n){try{return t(n)}catch(n){return"Object"}}},function(n,e,t){var o=t(24),a=t(0),i=t(9),r=TypeError;n.exports=function(n,e){var t,s;if("string"===e&&a(t=n.toString)&&!i(s=o(t,n)))return s;if(a(t=n.valueOf)&&!i(s=o(t,n)))return s;if("string"!==e&&a(t=n.toString)&&!i(s=o(t,n)))return s;throw r("Can't convert object to primitive value")}},function(n,e,t){var o=t(1),a=t(9),i=o.document,r=a(i)&&a(i.createElement);n.exports=function(n){return r?i.createElement(n):{}}},function(n,e,t){var o=t(7),a=t(3);n.exports=o&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var o=t(0),a=t(17),i=t(106),r=t(31);n.exports=function(n,e,t,s){s||(s={});var c=s.enumerable,l=void 0!==s.name?s.name:e;if(o(t)&&i(t,l,s),s.global)c?n[e]=t:r(e,t);else{try{s.unsafe?n[e]&&(c=!0):delete n[e]}catch(n){}c?n[e]=t:a.f(n,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n}},function(n,e,t){var o=t(3),a=t(0),i=t(8),r=t(7),s=t(107).CONFIGURABLE,c=t(60),l=t(108),d=l.enforce,p=l.get,u=Object.defineProperty,h=r&&!o((function(){return 8!==u((function(){}),"length",{value:8}).length})),m=String(String).split("String"),f=n.exports=function(n,e,t){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!i(n,"name")||s&&n.name!==e)&&(r?u(n,"name",{value:e,configurable:!0}):n.name=e),h&&t&&i(t,"arity")&&n.length!==t.arity&&u(n,"length",{value:t.arity});try{t&&i(t,"constructor")&&t.constructor?r&&u(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch(n){}var o=d(n);return i(o,"source")||(o.source=m.join("string"==typeof e?e:"")),n};Function.prototype.toString=f((function(){return a(this)&&p(this).source||c(this)}),"toString")},function(n,e,t){var o=t(7),a=t(8),i=Function.prototype,r=o&&Object.getOwnPropertyDescriptor,s=a(i,"name"),c=s&&"something"===function(){}.name,l=s&&(!o||o&&r(i,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var o,a,i,r=t(109),s=t(1),c=t(2),l=t(9),d=t(16),p=t(8),u=t(30),h=t(110),m=t(61),f=s.TypeError,g=s.WeakMap;if(r||u.state){var y=u.state||(u.state=new g),v=c(y.get),b=c(y.has),w=c(y.set);o=function(n,e){if(b(y,n))throw new f("Object already initialized");return e.facade=n,w(y,n,e),e},a=function(n){return v(y,n)||{}},i=function(n){return b(y,n)}}else{var k=h("state");m[k]=!0,o=function(n,e){if(p(n,k))throw new f("Object already initialized");return e.facade=n,d(n,k,e),e},a=function(n){return p(n,k)?n[k]:{}},i=function(n){return p(n,k)}}n.exports={set:o,get:a,has:i,enforce:function(n){return i(n)?a(n):o(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=a(e)).type!==n)throw f("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){var o=t(1),a=t(0),i=t(60),r=o.WeakMap;n.exports=a(r)&&/native code/.test(i(r))},function(n,e,t){var o=t(55),a=t(58),i=o("keys");n.exports=function(n){return i[n]||(i[n]=a(n))}},function(n,e,t){var o=t(15),a=t(2),i=t(112),r=t(119),s=t(32),c=a([].concat);n.exports=o("Reflect","ownKeys")||function(n){var e=i.f(s(n)),t=r.f;return t?c(e,t(n)):e}},function(n,e,t){var o=t(113),a=t(118).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return o(n,a)}},function(n,e,t){var o=t(2),a=t(8),i=t(27),r=t(114).indexOf,s=t(61),c=o([].push);n.exports=function(n,e){var t,o=i(n),l=0,d=[];for(t in o)!a(s,t)&&a(o,t)&&c(d,t);for(;e.length>l;)a(o,t=e[l++])&&(~r(d,t)||c(d,t));return d}},function(n,e,t){var o=t(27),a=t(115),i=t(64),r=function(n){return function(e,t,r){var s,c=o(e),l=i(c),d=a(r,l);if(n&&t!=t){for(;l>d;)if((s=c[d++])!=s)return!0}else for(;l>d;d++)if((n||d in c)&&c[d]===t)return n||d||0;return!n&&-1}};n.exports={includes:r(!0),indexOf:r(!1)}},function(n,e,t){var o=t(63),a=Math.max,i=Math.min;n.exports=function(n,e){var t=o(n);return t<0?a(t+e,0):i(t,e)}},function(n,e){var t=Math.ceil,o=Math.floor;n.exports=Math.trunc||function(n){var e=+n;return(e>0?o:t)(e)}},function(n,e,t){var o=t(63),a=Math.min;n.exports=function(n){return n>0?a(o(n),9007199254740991):0}},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var o=t(3),a=t(0),i=/#|\.prototype\./,r=function(n,e){var t=c[s(n)];return t==d||t!=l&&(a(e)?o(e):!!e)},s=r.normalize=function(n){return String(n).replace(i,".").toLowerCase()},c=r.data={},l=r.NATIVE="N",d=r.POLYFILL="P";n.exports=r},function(n,e,t){var o=t(54),a=t(57),i=t(46),r=t(64),s=TypeError,c=function(n){return function(e,t,c,l){o(t);var d=a(e),p=i(d),u=r(d),h=n?u-1:0,m=n?-1:1;if(c<2)for(;;){if(h in p){l=p[h],h+=m;break}if(h+=m,n?h<0:u<=h)throw s("Reduce of empty array with no initial value")}for(;n?h>=0:u>h;h+=m)h in p&&(l=t(l,p[h],h,d));return l}};n.exports={left:c(!1),right:c(!0)}},function(n,e,t){"use strict";var o=t(3);n.exports=function(n,e){var t=[][n];return!!t&&o((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){var o=t(28),a=t(1);n.exports="process"==o(a.process)},function(n,e,t){var o=t(44),a=t(1),i=t(125),r=t(126),s=a.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=r(n,e,c),o({global:!0,constructor:!0,arity:1,forced:c},t)},d=function(n,e){if(s&&s[n]){var t={};t[n]=r("WebAssembly."+n,e,c),o({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:c},t)}};l("Error",(function(n){return function(e){return i(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return i(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return i(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return i(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return i(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return i(n,this,arguments)}})),l("URIError",(function(n){return function(e){return i(n,this,arguments)}})),d("CompileError",(function(n){return function(e){return i(n,this,arguments)}})),d("LinkError",(function(n){return function(e){return i(n,this,arguments)}})),d("RuntimeError",(function(n){return function(e){return i(n,this,arguments)}}))},function(n,e,t){var o=t(25),a=Function.prototype,i=a.apply,r=a.call;n.exports="object"==typeof Reflect&&Reflect.apply||(o?r.bind(i):function(){return r.apply(i,arguments)})},function(n,e,t){"use strict";var o=t(15),a=t(8),i=t(16),r=t(50),s=t(65),c=t(62),l=t(128),d=t(129),p=t(130),u=t(134),h=t(135),m=t(136),f=t(7),g=t(56);n.exports=function(n,e,t,y){var v=y?2:1,b=n.split("."),w=b[b.length-1],k=o.apply(null,b);if(k){var x=k.prototype;if(!g&&a(x,"cause")&&delete x.cause,!t)return k;var T=o("Error"),_=e((function(n,e){var t=p(y?e:n,void 0),o=y?new k(n):new k;return void 0!==t&&i(o,"message",t),m&&i(o,"stack",h(o.stack,2)),this&&r(x,this)&&d(o,this,_),arguments.length>v&&u(o,arguments[v]),o}));if(_.prototype=x,"Error"!==w?s?s(_,T):c(_,T,{name:!0}):f&&"stackTraceLimit"in k&&(l(_,k,"stackTraceLimit"),l(_,k,"prepareStackTrace")),c(_,k),!g)try{x.name!==w&&i(x,"name",w),x.constructor=_}catch(n){}return _}}},function(n,e,t){var o=t(0),a=String,i=TypeError;n.exports=function(n){if("object"==typeof n||o(n))return n;throw i("Can't set "+a(n)+" as a prototype")}},function(n,e,t){var o=t(17).f;n.exports=function(n,e,t){t in n||o(n,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}},function(n,e,t){var o=t(0),a=t(9),i=t(65);n.exports=function(n,e,t){var r,s;return i&&o(r=e.constructor)&&r!==t&&a(s=r.prototype)&&s!==t.prototype&&i(n,s),n}},function(n,e,t){var o=t(131);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:o(n)}},function(n,e,t){var o=t(132),a=String;n.exports=function(n){if("Symbol"===o(n))throw TypeError("Cannot convert a Symbol value to a string");return a(n)}},function(n,e,t){var o=t(133),a=t(0),i=t(28),r=t(29)("toStringTag"),s=Object,c="Arguments"==i(function(){return arguments}());n.exports=o?i:function(n){var e,t,o;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=s(n),r))?t:c?i(e):"Object"==(o=i(e))&&a(e.callee)?"Arguments":o}},function(n,e,t){var o={};o[t(29)("toStringTag")]="z",n.exports="[object z]"===String(o)},function(n,e,t){var o=t(9),a=t(16);n.exports=function(n,e){o(e)&&"cause"in e&&a(n,"cause",e.cause)}},function(n,e,t){var o=t(2),a=Error,i=o("".replace),r=String(a("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(r);n.exports=function(n,e){if(c&&"string"==typeof n&&!a.prepareStackTrace)for(;e--;)n=i(n,s,"");return n}},function(n,e,t){var o=t(3),a=t(26);n.exports=!o((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",a(1,7)),7!==n.stack)}))},function(n,e,t){var o=t(66),a=t(138);n.exports=function n(e,t,i,r,s){var c=-1,l=e.length;for(i||(i=a),s||(s=[]);++c<l;){var d=e[c];t>0&&i(d)?t>1?n(d,t-1,i,r,s):o(s,d):r||(s[s.length]=d)}return s}},function(n,e,t){var o=t(14),a=t(33),i=t(4),r=o?o.isConcatSpreadable:void 0;n.exports=function(n){return i(n)||a(n)||!!(r&&n&&n[r])}},function(n,e,t){var o=t(13),a=t(12);n.exports=function(n){return a(n)&&"[object Arguments]"==o(n)}},function(n,e,t){var o=t(14),a=Object.prototype,i=a.hasOwnProperty,r=a.toString,s=o?o.toStringTag:void 0;n.exports=function(n){var e=i.call(n,s),t=n[s];try{n[s]=void 0;var o=!0}catch(n){}var a=r.call(n);return o&&(e?n[s]=t:delete n[s]),a}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var o=t(143),a=t(199),i=t(41),r=t(4),s=t(210);n.exports=function(n){return"function"==typeof n?n:null==n?i:"object"==typeof n?r(n)?a(n[0],n[1]):o(n):s(n)}},function(n,e,t){var o=t(144),a=t(198),i=t(83);n.exports=function(n){var e=a(n);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(t){return t===n||o(t,n,e)}}},function(n,e,t){var o=t(68),a=t(72);n.exports=function(n,e,t,i){var r=t.length,s=r,c=!i;if(null==n)return!s;for(n=Object(n);r--;){var l=t[r];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++r<s;){var d=(l=t[r])[0],p=n[d],u=l[1];if(c&&l[2]){if(void 0===p&&!(d in n))return!1}else{var h=new o;if(i)var m=i(p,u,d,n,e,h);if(!(void 0===m?a(u,p,3,i,h):m))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var o=t(19),a=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=o(e,n);return!(t<0)&&(t==e.length-1?e.pop():a.call(e,t,1),--this.size,!0)}},function(n,e,t){var o=t(19);n.exports=function(n){var e=this.__data__,t=o(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var o=t(19);n.exports=function(n){return o(this.__data__,n)>-1}},function(n,e,t){var o=t(19);n.exports=function(n,e){var t=this.__data__,a=o(t,n);return a<0?(++this.size,t.push([n,e])):t[a][1]=e,this}},function(n,e,t){var o=t(18);n.exports=function(){this.__data__=new o,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var o=t(18),a=t(34),i=t(36);n.exports=function(n,e){var t=this.__data__;if(t instanceof o){var r=t.__data__;if(!a||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new i(r)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var o=t(70),a=t(156),i=t(35),r=t(71),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,d=c.toString,p=l.hasOwnProperty,u=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!i(n)||a(n))&&(o(n)?u:s).test(r(n))}},function(n,e,t){var o,a=t(157),i=(o=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";n.exports=function(n){return!!i&&i in n}},function(n,e,t){var o=t(5)["__core-js_shared__"];n.exports=o},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var o=t(160),a=t(18),i=t(34);n.exports=function(){this.size=0,this.__data__={hash:new o,map:new(i||a),string:new o}}},function(n,e,t){var o=t(161),a=t(162),i=t(163),r=t(164),s=t(165);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var o=n[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=r,c.prototype.set=s,n.exports=c},function(n,e,t){var o=t(20);n.exports=function(){this.__data__=o?o(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var o=t(20),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(o){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return a.call(e,n)?e[n]:void 0}},function(n,e,t){var o=t(20),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return o?void 0!==e[n]:a.call(e,n)}},function(n,e,t){var o=t(20);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=o&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var o=t(21);n.exports=function(n){var e=o(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var o=t(21);n.exports=function(n){return o(this,n).get(n)}},function(n,e,t){var o=t(21);n.exports=function(n){return o(this,n).has(n)}},function(n,e,t){var o=t(21);n.exports=function(n,e){var t=o(this,n),a=t.size;return t.set(n,e),this.size+=t.size==a?0:1,this}},function(n,e,t){var o=t(68),a=t(73),i=t(175),r=t(178),s=t(194),c=t(4),l=t(77),d=t(79),p="[object Object]",u=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,h,m,f){var g=c(n),y=c(e),v=g?"[object Array]":s(n),b=y?"[object Array]":s(e),w=(v="[object Arguments]"==v?p:v)==p,k=(b="[object Arguments]"==b?p:b)==p,x=v==b;if(x&&l(n)){if(!l(e))return!1;g=!0,w=!1}if(x&&!w)return f||(f=new o),g||d(n)?a(n,e,t,h,m,f):i(n,e,v,t,h,m,f);if(!(1&t)){var T=w&&u.call(n,"__wrapped__"),_=k&&u.call(e,"__wrapped__");if(T||_){var C=T?n.value():n,E=_?e.value():e;return f||(f=new o),m(C,E,t,h,f)}}return!!x&&(f||(f=new o),r(n,e,t,h,m,f))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,o=null==n?0:n.length;++t<o;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var o=t(14),a=t(176),i=t(69),r=t(73),s=t(177),c=t(37),l=o?o.prototype:void 0,d=l?l.valueOf:void 0;n.exports=function(n,e,t,o,l,p,u){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!p(new a(n),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var h=s;case"[object Set]":var m=1&o;if(h||(h=c),n.size!=e.size&&!m)return!1;var f=u.get(n);if(f)return f==e;o|=2,u.set(n,e);var g=r(h(n),h(e),o,l,p,u);return u.delete(n),g;case"[object Symbol]":if(d)return d.call(n)==d.call(e)}return!1}},function(n,e,t){var o=t(5).Uint8Array;n.exports=o},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,o){t[++e]=[o,n]})),t}},function(n,e,t){var o=t(179),a=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,i,r,s){var c=1&t,l=o(n),d=l.length;if(d!=o(e).length&&!c)return!1;for(var p=d;p--;){var u=l[p];if(!(c?u in e:a.call(e,u)))return!1}var h=s.get(n),m=s.get(e);if(h&&m)return h==e&&m==n;var f=!0;s.set(n,e),s.set(e,n);for(var g=c;++p<d;){var y=n[u=l[p]],v=e[u];if(i)var b=c?i(v,y,u,e,n,s):i(y,v,u,n,e,s);if(!(void 0===b?y===v||r(y,v,t,i,s):b)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var w=n.constructor,k=e.constructor;w==k||!("constructor"in n)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(f=!1)}return s.delete(n),s.delete(e),f}},function(n,e,t){var o=t(180),a=t(181),i=t(76);n.exports=function(n){return o(n,i,a)}},function(n,e,t){var o=t(66),a=t(4);n.exports=function(n,e,t){var i=e(n);return a(n)?i:o(i,t(n))}},function(n,e,t){var o=t(182),a=t(183),i=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,s=r?function(n){return null==n?[]:(n=Object(n),o(r(n),(function(e){return i.call(n,e)})))}:a;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,o=null==n?0:n.length,a=0,i=[];++t<o;){var r=n[t];e(r,t,n)&&(i[a++]=r)}return i}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var o=t(185),a=t(33),i=t(4),r=t(77),s=t(78),c=t(79),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=i(n),d=!t&&a(n),p=!t&&!d&&r(n),u=!t&&!d&&!p&&c(n),h=t||d||p||u,m=h?o(n.length,String):[],f=m.length;for(var g in n)!e&&!l.call(n,g)||h&&("length"==g||p&&("offset"==g||"parent"==g)||u&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||m.push(g);return m}},function(n,e){n.exports=function(n,e){for(var t=-1,o=Array(n);++t<n;)o[t]=e(t);return o}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var o=t(13),a=t(38),i=t(12),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,n.exports=function(n){return i(n)&&a(n.length)&&!!r[o(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var o=t(67),a=e&&!e.nodeType&&e,i=a&&"object"==typeof n&&n&&!n.nodeType&&n,r=i&&i.exports===a&&o.process,s=function(){try{var n=i&&i.require&&i.require("util").types;return n||r&&r.binding&&r.binding("util")}catch(n){}}();n.exports=s}).call(this,t(42)(n))},function(n,e,t){var o=t(191),a=t(192),i=Object.prototype.hasOwnProperty;n.exports=function(n){if(!o(n))return a(n);var e=[];for(var t in Object(n))i.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var o=t(193)(Object.keys,Object);n.exports=o},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var o=t(195),a=t(34),i=t(196),r=t(81),s=t(197),c=t(13),l=t(71),d=l(o),p=l(a),u=l(i),h=l(r),m=l(s),f=c;(o&&"[object DataView]"!=f(new o(new ArrayBuffer(1)))||a&&"[object Map]"!=f(new a)||i&&"[object Promise]"!=f(i.resolve())||r&&"[object Set]"!=f(new r)||s&&"[object WeakMap]"!=f(new s))&&(f=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,o=t?l(t):"";if(o)switch(o){case d:return"[object DataView]";case p:return"[object Map]";case u:return"[object Promise]";case h:return"[object Set]";case m:return"[object WeakMap]"}return e}),n.exports=f},function(n,e,t){var o=t(10)(t(5),"DataView");n.exports=o},function(n,e,t){var o=t(10)(t(5),"Promise");n.exports=o},function(n,e,t){var o=t(10)(t(5),"WeakMap");n.exports=o},function(n,e,t){var o=t(82),a=t(76);n.exports=function(n){for(var e=a(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,o(r)]}return e}},function(n,e,t){var o=t(72),a=t(200),i=t(207),r=t(39),s=t(82),c=t(83),l=t(22);n.exports=function(n,e){return r(n)&&s(e)?c(l(n),e):function(t){var r=a(t,n);return void 0===r&&r===e?i(t,n):o(e,r,3)}}},function(n,e,t){var o=t(84);n.exports=function(n,e,t){var a=null==n?void 0:o(n,e);return void 0===a?t:a}},function(n,e,t){var o=t(202),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,r=o((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(a,(function(n,t,o,a){e.push(o?a.replace(i,"$1"):t||n)})),e}));n.exports=r},function(n,e,t){var o=t(203);n.exports=function(n){var e=o(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var o=t(36);function a(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var o=arguments,a=e?e.apply(this,o):o[0],i=t.cache;if(i.has(a))return i.get(a);var r=n.apply(this,o);return t.cache=i.set(a,r)||i,r};return t.cache=new(a.Cache||o),t}a.Cache=o,n.exports=a},function(n,e,t){var o=t(205);n.exports=function(n){return null==n?"":o(n)}},function(n,e,t){var o=t(14),a=t(206),i=t(4),r=t(40),s=o?o.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(i(e))return a(e,n)+"";if(r(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,o=null==n?0:n.length,a=Array(o);++t<o;)a[t]=e(n[t],t,n);return a}},function(n,e,t){var o=t(208),a=t(209);n.exports=function(n,e){return null!=n&&a(n,e,o)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var o=t(85),a=t(33),i=t(4),r=t(78),s=t(38),c=t(22);n.exports=function(n,e,t){for(var l=-1,d=(e=o(e,n)).length,p=!1;++l<d;){var u=c(e[l]);if(!(p=null!=n&&t(n,u)))break;n=n[u]}return p||++l!=d?p:!!(d=null==n?0:n.length)&&s(d)&&r(u,d)&&(i(n)||a(n))}},function(n,e,t){var o=t(211),a=t(212),i=t(39),r=t(22);n.exports=function(n){return i(n)?o(r(n)):a(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var o=t(84);n.exports=function(n){return function(e){return o(e,n)}}},function(n,e,t){var o=t(41),a=t(214),i=t(216);n.exports=function(n,e){return i(a(n,e,o),n+"")}},function(n,e,t){var o=t(215),a=Math.max;n.exports=function(n,e,t){return e=a(void 0===e?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=a(i.length-e,0),c=Array(s);++r<s;)c[r]=i[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=i[r];return l[e]=t(c),o(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var o=t(217),a=t(220)(o);n.exports=a},function(n,e,t){var o=t(218),a=t(219),i=t(41),r=a?function(n,e){return a(n,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:i;n.exports=r},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var o=t(10),a=function(){try{var n=o(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=a},function(n,e){var t=Date.now;n.exports=function(n){var e=0,o=0;return function(){var a=t(),i=16-(a-o);if(o=a,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var o=t(74),a=t(222),i=t(227),r=t(75),s=t(228),c=t(37);n.exports=function(n,e,t){var l=-1,d=a,p=n.length,u=!0,h=[],m=h;if(t)u=!1,d=i;else if(p>=200){var f=e?null:s(n);if(f)return c(f);u=!1,d=r,m=new o}else m=e?[]:h;n:for(;++l<p;){var g=n[l],y=e?e(g):g;if(g=t||0!==g?g:0,u&&y==y){for(var v=m.length;v--;)if(m[v]===y)continue n;e&&m.push(y),h.push(g)}else d(m,y,t)||(m!==h&&m.push(y),h.push(g))}return h}},function(n,e,t){var o=t(223);n.exports=function(n,e){return!!(null==n?0:n.length)&&o(n,e,0)>-1}},function(n,e,t){var o=t(224),a=t(225),i=t(226);n.exports=function(n,e,t){return e==e?i(n,e,t):o(n,a,t)}},function(n,e){n.exports=function(n,e,t,o){for(var a=n.length,i=t+(o?1:-1);o?i--:++i<a;)if(e(n[i],i,n))return i;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var o=t-1,a=n.length;++o<a;)if(n[o]===e)return o;return-1}},function(n,e){n.exports=function(n,e,t){for(var o=-1,a=null==n?0:n.length;++o<a;)if(t(e,n[o]))return!0;return!1}},function(n,e,t){var o=t(81),a=t(229),i=t(37),r=o&&1/i(new o([,-0]))[1]==1/0?function(n){return new o(n)}:a;n.exports=r},function(n,e){n.exports=function(){}},function(n,e,t){var o=t(80),a=t(12);n.exports=function(n){return a(n)&&o(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(86)},function(n,e,t){"use strict";t(87)},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(88)},function(n,e,t){"use strict";t(89)},function(n,e,t){"use strict";t.r(e);
/*!
 * Vue.js v2.7.8
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var o=Object.freeze({}),a=Array.isArray;function i(n){return null==n}function r(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return"function"==typeof n}function d(n){return null!==n&&"object"==typeof n}var p=Object.prototype.toString;function u(n){return"[object Object]"===p.call(n)}function h(n){return"[object RegExp]"===p.call(n)}function m(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function f(n){return r(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function g(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===p?JSON.stringify(n,null,2):String(n)}function y(n){var e=parseFloat(n);return isNaN(e)?n:e}function v(n,e){for(var t=Object.create(null),o=n.split(","),a=0;a<o.length;a++)t[o[a]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}v("slot,component",!0);var b=v("key,ref,slot,slot-scope,is");function w(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var k=Object.prototype.hasOwnProperty;function x(n,e){return k.call(n,e)}function T(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var _=/-(\w)/g,C=T((function(n){return n.replace(_,(function(n,e){return e?e.toUpperCase():""}))})),E=T((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),S=/\B([A-Z])/g,A=T((function(n){return n.replace(S,"-$1").toLowerCase()}));var I=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var o=arguments.length;return o?o>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function j(n,e){e=e||0;for(var t=n.length-e,o=new Array(t);t--;)o[t]=n[t+e];return o}function P(n,e){for(var t in e)n[t]=e[t];return n}function z(n){for(var e={},t=0;t<n.length;t++)n[t]&&P(e,n[t]);return e}function M(n,e,t){}var O=function(n,e,t){return!1},$=function(n){return n};function B(n,e){if(n===e)return!0;var t=d(n),o=d(e);if(!t||!o)return!t&&!o&&String(n)===String(e);try{var a=Array.isArray(n),i=Array.isArray(e);if(a&&i)return n.length===e.length&&n.every((function(n,t){return B(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(a||i)return!1;var r=Object.keys(n),s=Object.keys(e);return r.length===s.length&&r.every((function(t){return B(n[t],e[t])}))}catch(n){return!1}}function L(n,e){for(var t=0;t<n.length;t++)if(B(n[t],e))return t;return-1}function U(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function D(n,e){return n===e?0===n&&1/n!=1/e:n==n||e==e}var W=["component","directive","filter"],R=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],N={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:M,parsePlatformTagName:$,mustUseProp:O,async:!0,_lifecycleHooks:R},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(n){var e=(n+"").charCodeAt(0);return 36===e||95===e}function F(n,e,t,o){Object.defineProperty(n,e,{value:t,enumerable:!!o,writable:!0,configurable:!0})}var q=new RegExp("[^".concat(G.source,".$_\\d]"));var V="__proto__"in{},X="undefined"!=typeof window,K=X&&window.navigator.userAgent.toLowerCase(),Z=K&&/msie|trident/.test(K),J=K&&K.indexOf("msie 9.0")>0,Y=K&&K.indexOf("edge/")>0;K&&K.indexOf("android");var Q=K&&/iphone|ipad|ipod|ios/.test(K);K&&/chrome\/\d+/.test(K),K&&/phantomjs/.test(K);var nn,en=K&&K.match(/firefox\/(\d+)/),tn={}.watch,on=!1;if(X)try{var an={};Object.defineProperty(an,"passive",{get:function(){on=!0}}),window.addEventListener("test-passive",null,an)}catch(n){}var rn=function(){return void 0===nn&&(nn=!X&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),nn},sn=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function cn(n){return"function"==typeof n&&/native code/.test(n.toString())}var ln,dn="undefined"!=typeof Symbol&&cn(Symbol)&&"undefined"!=typeof Reflect&&cn(Reflect.ownKeys);ln="undefined"!=typeof Set&&cn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var pn=null;function un(n){void 0===n&&(n=null),n||pn&&pn._scope.off(),pn=n,n&&n._scope.on()}var hn=function(){function n(n,e,t,o,a,i,r,s){this.tag=n,this.data=e,this.children=t,this.text=o,this.elm=a,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=r,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),mn=function(n){void 0===n&&(n="");var e=new hn;return e.text=n,e.isComment=!0,e};function fn(n){return new hn(void 0,void 0,void 0,String(n))}function gn(n){var e=new hn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var yn=0,vn=function(){function n(){this.id=yn++,this.subs=[]}return n.prototype.addSub=function(n){this.subs.push(n)},n.prototype.removeSub=function(n){w(this.subs,n)},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(n){var e=this.subs.slice();for(var t=0,o=e.length;t<o;t++){e[t].update()}},n}();vn.target=null;var bn=[];function wn(n){bn.push(n),vn.target=n}function kn(){bn.pop(),vn.target=bn[bn.length-1]}var xn=Array.prototype,Tn=Object.create(xn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=xn[n];F(Tn,n,(function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a,i=e.apply(this,t),r=this.__ob__;switch(n){case"push":case"unshift":a=t;break;case"splice":a=t.slice(2)}return a&&r.observeArray(a),r.dep.notify(),i}))}));var _n=Object.getOwnPropertyNames(Tn),Cn={},En=!0;function Sn(n){En=n}var An={notify:M,depend:M,addSub:M,removeSub:M},In=function(){function n(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.value=n,this.shallow=e,this.mock=t,this.dep=t?An:new vn,this.vmCount=0,F(n,"__ob__",this),a(n)){if(!t)if(V)n.__proto__=Tn;else for(var o=0,i=_n.length;o<i;o++){F(n,s=_n[o],Tn[s])}e||this.observeArray(n)}else{var r=Object.keys(n);for(o=0;o<r.length;o++){var s;Pn(n,s=r[o],Cn,void 0,e,t)}}}return n.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)jn(n[e],!1,this.mock)},n}();function jn(n,e,t){var o;if(!(!d(n)||Un(n)||n instanceof hn))return x(n,"__ob__")&&n.__ob__ instanceof In?o=n.__ob__:!En||!t&&rn()||!a(n)&&!u(n)||!Object.isExtensible(n)||n.__v_skip||(o=new In(n,e,t)),o}function Pn(n,e,t,o,i,r){var s=new vn,c=Object.getOwnPropertyDescriptor(n,e);if(!c||!1!==c.configurable){var l=c&&c.get,d=c&&c.set;l&&!d||t!==Cn&&2!==arguments.length||(t=n[e]);var p=!i&&jn(t,!1,r);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=l?l.call(n):t;return vn.target&&(s.depend(),p&&(p.dep.depend(),a(e)&&On(e))),Un(e)&&!i?e.value:e},set:function(e){var o=l?l.call(n):t;if(D(o,e)){if(d)d.call(n,e);else{if(l)return;if(!i&&Un(o)&&!Un(e))return void(o.value=e);t=e}p=!i&&jn(e,!1,r),s.notify()}}}),s}}function zn(n,e,t){if(!Ln(n)){var o=n.__ob__;return a(n)&&m(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),o&&!o.shallow&&o.mock&&jn(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||o&&o.vmCount?t:o?(Pn(o.value,e,t,void 0,o.shallow,o.mock),o.dep.notify(),t):(n[e]=t,t)}}function Mn(n,e){if(a(n)&&m(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||Ln(n)||x(n,e)&&(delete n[e],t&&t.dep.notify())}}function On(n){for(var e=void 0,t=0,o=n.length;t<o;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),a(e)&&On(e)}function $n(n){return Bn(n,!0),F(n,"__v_isShallow",!0),n}function Bn(n,e){if(!Ln(n)){jn(n,e,rn());0}}function Ln(n){return!(!n||!n.__v_isReadonly)}function Un(n){return!(!n||!0!==n.__v_isRef)}function Dn(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var n=e[t];if(Un(n))return n.value;var o=n&&n.__ob__;return o&&o.dep.depend(),n},set:function(n){var o=e[t];Un(o)&&!Un(n)?o.value=n:e[t]=n}})}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var Wn;var Rn=function(){function n(n){void 0===n&&(n=!1),this.active=!0,this.effects=[],this.cleanups=[],!n&&Wn&&(this.parent=Wn,this.index=(Wn.scopes||(Wn.scopes=[])).push(this)-1)}return n.prototype.run=function(n){if(this.active){var e=Wn;try{return Wn=this,n()}finally{Wn=e}}else 0},n.prototype.on=function(){Wn=this},n.prototype.off=function(){Wn=this.parent},n.prototype.stop=function(n){if(this.active){var e=void 0,t=void 0;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].teardown();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(this.parent&&!n){var o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}},n}();function Nn(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var Gn=T((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),o="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=o?n.slice(1):n,once:t,capture:o,passive:e}}));function Hn(n,e){function t(){var n=t.fns;if(!a(n))return Ee(n,null,arguments,e,"v-on handler");for(var o=n.slice(),i=0;i<o.length;i++)Ee(o[i],null,arguments,e,"v-on handler")}return t.fns=n,t}function Fn(n,e,t,o,a,r){var c,l,d,p;for(c in n)l=n[c],d=e[c],p=Gn(c),i(l)||(i(d)?(i(l.fns)&&(l=n[c]=Hn(l,r)),s(p.once)&&(l=n[c]=a(p.name,l,p.capture)),t(p.name,l,p.capture,p.passive,p.params)):l!==d&&(d.fns=l,n[c]=d));for(c in e)i(n[c])&&o((p=Gn(c)).name,e[c],p.capture)}function qn(n,e,t){var o;n instanceof hn&&(n=n.data.hook||(n.data.hook={}));var a=n[e];function c(){t.apply(this,arguments),w(o.fns,c)}i(a)?o=Hn([c]):r(a.fns)&&s(a.merged)?(o=a).fns.push(c):o=Hn([a,c]),o.merged=!0,n[e]=o}function Vn(n,e,t,o,a){if(r(e)){if(x(e,t))return n[t]=e[t],a||delete e[t],!0;if(x(e,o))return n[t]=e[o],a||delete e[o],!0}return!1}function Xn(n){return c(n)?[fn(n)]:a(n)?function n(e,t){var o,l,d,p,u=[];for(o=0;o<e.length;o++)i(l=e[o])||"boolean"==typeof l||(d=u.length-1,p=u[d],a(l)?l.length>0&&(Kn((l=n(l,"".concat(t||"","_").concat(o)))[0])&&Kn(p)&&(u[d]=fn(p.text+l[0].text),l.shift()),u.push.apply(u,l)):c(l)?Kn(p)?u[d]=fn(p.text+l):""!==l&&u.push(fn(l)):Kn(l)&&Kn(p)?u[d]=fn(p.text+l.text):(s(e._isVList)&&r(l.tag)&&i(l.key)&&r(t)&&(l.key="__vlist".concat(t,"_").concat(o,"__")),u.push(l)));return u}(n):void 0}function Kn(n){return r(n)&&r(n.text)&&!1===n.isComment}function Zn(n,e){var t,o,i,s,c=null;if(a(n)||"string"==typeof n)for(c=new Array(n.length),t=0,o=n.length;t<o;t++)c[t]=e(n[t],t);else if("number"==typeof n)for(c=new Array(n),t=0;t<n;t++)c[t]=e(t+1,t);else if(d(n))if(dn&&n[Symbol.iterator]){c=[];for(var l=n[Symbol.iterator](),p=l.next();!p.done;)c.push(e(p.value,c.length)),p=l.next()}else for(i=Object.keys(n),c=new Array(i.length),t=0,o=i.length;t<o;t++)s=i[t],c[t]=e(n[s],s,t);return r(c)||(c=[]),c._isVList=!0,c}function Jn(n,e,t,o){var a,i=this.$scopedSlots[n];i?(t=t||{},o&&(t=P(P({},o),t)),a=i(t)||(l(e)?e():e)):a=this.$slots[n]||(l(e)?e():e);var r=t&&t.slot;return r?this.$createElement("template",{slot:r},a):a}function Yn(n){return It(this.$options,"filters",n,!0)||$}function Qn(n,e){return a(n)?-1===n.indexOf(e):n!==e}function ne(n,e,t,o,a){var i=N.keyCodes[e]||t;return a&&o&&!N.keyCodes[e]?Qn(a,o):i?Qn(i,n):o?A(o)!==e:void 0===n}function ee(n,e,t,o,i){if(t)if(d(t)){a(t)&&(t=z(t));var r=void 0,s=function(a){if("class"===a||"style"===a||b(a))r=n;else{var s=n.attrs&&n.attrs.type;r=o||N.mustUseProp(e,s,a)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=C(a),l=A(a);c in r||l in r||(r[a]=t[a],i&&((n.on||(n.on={}))["update:".concat(a)]=function(n){t[a]=n}))};for(var c in t)s(c)}else;return n}function te(n,e){var t=this._staticTrees||(this._staticTrees=[]),o=t[n];return o&&!e||ae(o=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),"__static__".concat(n),!1),o}function oe(n,e,t){return ae(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function ae(n,e,t){if(a(n))for(var o=0;o<n.length;o++)n[o]&&"string"!=typeof n[o]&&ie(n[o],"".concat(e,"_").concat(o),t);else ie(n,e,t)}function ie(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function re(n,e){if(e)if(u(e)){var t=n.on=n.on?P({},n.on):{};for(var o in e){var a=t[o],i=e[o];t[o]=a?[].concat(a,i):i}}else;return n}function se(n,e,t,o){e=e||{$stable:!t};for(var i=0;i<n.length;i++){var r=n[i];a(r)?se(r,e,t):r&&(r.proxy&&(r.fn.proxy=!0),e[r.key]=r.fn)}return o&&(e.$key=o),e}function ce(n,e){for(var t=0;t<e.length;t+=2){var o=e[t];"string"==typeof o&&o&&(n[e[t]]=e[t+1])}return n}function le(n,e){return"string"==typeof n?e+n:n}function de(n){n._o=oe,n._n=y,n._s=g,n._l=Zn,n._t=Jn,n._q=B,n._i=L,n._m=te,n._f=Yn,n._k=ne,n._b=ee,n._v=fn,n._e=mn,n._u=se,n._g=re,n._d=ce,n._p=le}function pe(n,e){if(!n||!n.length)return{};for(var t={},o=0,a=n.length;o<a;o++){var i=n[o],r=i.data;if(r&&r.attrs&&r.attrs.slot&&delete r.attrs.slot,i.context!==e&&i.fnContext!==e||!r||null==r.slot)(t.default||(t.default=[])).push(i);else{var s=r.slot,c=t[s]||(t[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var l in t)t[l].every(ue)&&delete t[l];return t}function ue(n){return n.isComment&&!n.asyncFactory||" "===n.text}function he(n){return n.isComment&&n.asyncFactory}function me(n,e,t,a){var i,r=Object.keys(t).length>0,s=e?!!e.$stable:!r,c=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&a&&a!==o&&c===a.$key&&!r&&!a.$hasNormal)return a;for(var l in i={},e)e[l]&&"$"!==l[0]&&(i[l]=fe(n,t,l,e[l]))}else i={};for(var d in t)d in i||(i[d]=ge(t,d));return e&&Object.isExtensible(e)&&(e._normalized=i),F(i,"$stable",s),F(i,"$key",c),F(i,"$hasNormal",r),i}function fe(n,e,t,o){var i=function(){var e=pn;un(n);var t=arguments.length?o.apply(null,arguments):o({}),i=(t=t&&"object"==typeof t&&!a(t)?[t]:Xn(t))&&t[0];return un(e),t&&(!i||1===t.length&&i.isComment&&!he(i))?void 0:t};return o.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function ge(n,e){return function(){return n[e]}}function ye(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};F(e,"_v_attr_proxy",!0),ve(e,n.$attrs,o,n,"$attrs")}return n._attrsProxy},get listeners(){n._listenersProxy||ve(n._listenersProxy={},n.$listeners,o,n,"$listeners");return n._listenersProxy},get slots(){return function(n){n._slotsProxy||we(n._slotsProxy={},n.$scopedSlots);return n._slotsProxy}(n)},emit:I(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach((function(t){return Dn(n,e,t)}))}}}function ve(n,e,t,o,a){var i=!1;for(var r in e)r in n?e[r]!==t[r]&&(i=!0):(i=!0,be(n,r,o,a));for(var r in n)r in e||(i=!0,delete n[r]);return i}function be(n,e,t,o){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[o][e]}})}function we(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}var ke=null;function xe(n,e){return(n.__esModule||dn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),d(n)?e.extend(n):n}function Te(n){if(a(n))for(var e=0;e<n.length;e++){var t=n[e];if(r(t)&&(r(t.componentOptions)||he(t)))return t}}function _e(n,e,t,o,p,u){return(a(t)||c(t))&&(p=o,o=t,t=void 0),s(u)&&(p=2),function(n,e,t,o,c){if(r(t)&&r(t.__ob__))return mn();r(t)&&r(t.is)&&(e=t.is);if(!e)return mn();0;a(o)&&l(o[0])&&((t=t||{}).scopedSlots={default:o[0]},o.length=0);2===c?o=Xn(o):1===c&&(o=function(n){for(var e=0;e<n.length;e++)if(a(n[e]))return Array.prototype.concat.apply([],n);return n}(o));var p,u;if("string"==typeof e){var h=void 0;u=n.$vnode&&n.$vnode.ns||N.getTagNamespace(e),p=N.isReservedTag(e)?new hn(N.parsePlatformTagName(e),t,o,void 0,void 0,n):t&&t.pre||!r(h=It(n.$options,"components",e))?new hn(e,t,o,void 0,void 0,n):bt(h,t,n,o,e)}else p=bt(e,t,n,o);return a(p)?p:r(p)?(r(u)&&function n(e,t,o){e.ns=t,"foreignObject"===e.tag&&(t=void 0,o=!0);if(r(e.children))for(var a=0,c=e.children.length;a<c;a++){var l=e.children[a];r(l.tag)&&(i(l.ns)||s(o)&&"svg"!==l.tag)&&n(l,t,o)}}(p,u),r(t)&&function(n){d(n.style)&&Re(n.style);d(n.class)&&Re(n.class)}(t),p):mn()}(n,e,t,o,p)}function Ce(n,e,t){wn();try{if(e)for(var o=e;o=o.$parent;){var a=o.$options.errorCaptured;if(a)for(var i=0;i<a.length;i++)try{if(!1===a[i].call(o,n,e,t))return}catch(n){Se(n,o,"errorCaptured hook")}}Se(n,e,t)}finally{kn()}}function Ee(n,e,t,o,a){var i;try{(i=t?n.apply(e,t):n.call(e))&&!i._isVue&&f(i)&&!i._handled&&(i.catch((function(n){return Ce(n,o,a+" (Promise/async)")})),i._handled=!0)}catch(n){Ce(n,o,a)}return i}function Se(n,e,t){if(N.errorHandler)try{return N.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Ae(e,null,"config.errorHandler")}Ae(n,e,t)}function Ae(n,e,t){if(!X||"undefined"==typeof console)throw n;console.error(n)}var Ie,je=!1,Pe=[],ze=!1;function Me(){ze=!1;var n=Pe.slice(0);Pe.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&cn(Promise)){var Oe=Promise.resolve();Ie=function(){Oe.then(Me),Q&&setTimeout(M)},je=!0}else if(Z||"undefined"==typeof MutationObserver||!cn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ie="undefined"!=typeof setImmediate&&cn(setImmediate)?function(){setImmediate(Me)}:function(){setTimeout(Me,0)};else{var $e=1,Be=new MutationObserver(Me),Le=document.createTextNode(String($e));Be.observe(Le,{characterData:!0}),Ie=function(){$e=($e+1)%2,Le.data=String($e)},je=!0}function Ue(n,e){var t;if(Pe.push((function(){if(n)try{n.call(e)}catch(n){Ce(n,e,"nextTick")}else t&&t(e)})),ze||(ze=!0,Ie()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}function De(n){return function(e,t){if(void 0===t&&(t=pn),t)return function(n,e,t){var o=n.$options;o[e]=Ct(o[e],t)}(t,n,e)}}De("beforeMount"),De("mounted"),De("beforeUpdate"),De("updated"),De("beforeDestroy"),De("destroyed"),De("errorCaptured"),De("activated"),De("deactivated"),De("serverPrefetch"),De("renderTracked"),De("renderTriggered");var We=new ln;function Re(n){return function n(e,t){var o,i,r=a(e);if(!r&&!d(e)||Object.isFrozen(e)||e instanceof hn)return;if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(r)for(o=e.length;o--;)n(e[o],t);else if(Un(e))n(e.value,t);else for(i=Object.keys(e),o=i.length;o--;)n(e[i[o]],t)}(n,We),We.clear(),n}var Ne,Ge=0,He=function(){function n(n,e,t,o,a){var i,r;i=this,void 0===(r=Wn||(n?n._scope:void 0))&&(r=Wn),r&&r.active&&r.effects.push(i),(this.vm=n)&&a&&(n._watcher=this),o?(this.deep=!!o.deep,this.user=!!o.user,this.lazy=!!o.lazy,this.sync=!!o.sync,this.before=o.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++Ge,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ln,this.newDepIds=new ln,this.expression="",l(e)?this.getter=e:(this.getter=function(n){if(!q.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=M)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){var n;wn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Ce(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Re(n),kn(),this.cleanupDeps()}return n},n.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},n.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():pt(this)},n.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||d(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'.concat(this.expression,'"');Ee(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&w(this.vm._scope.effects,this),this.active){for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function Fe(n,e){Ne.$on(n,e)}function qe(n,e){Ne.$off(n,e)}function Ve(n,e){var t=Ne;return function o(){var a=e.apply(null,arguments);null!==a&&t.$off(n,o)}}function Xe(n,e,t){Ne=n,Fn(e,t||{},Fe,qe,Ve,n),Ne=void 0}var Ke=null;function Ze(n){var e=Ke;return Ke=n,function(){Ke=e}}function Je(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function Ye(n,e){if(e){if(n._directInactive=!1,Je(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)Ye(n.$children[t]);Qe(n,"activated")}}function Qe(n,e,t,o){void 0===o&&(o=!0),wn();var a=pn;o&&un(n);var i=n.$options[e],r="".concat(e," hook");if(i)for(var s=0,c=i.length;s<c;s++)Ee(i[s],n,t||null,n,r);n._hasHookEvent&&n.$emit("hook:"+e),o&&un(a),kn()}var nt=[],et=[],tt={},ot=!1,at=!1,it=0;var rt=0,st=Date.now;if(X&&!Z){var ct=window.performance;ct&&"function"==typeof ct.now&&st()>document.createEvent("Event").timeStamp&&(st=function(){return ct.now()})}var lt=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function dt(){var n,e;for(rt=st(),at=!0,nt.sort(lt),it=0;it<nt.length;it++)(n=nt[it]).before&&n.before(),e=n.id,tt[e]=null,n.run();var t=et.slice(),o=nt.slice();it=nt.length=et.length=0,tt={},ot=at=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,Ye(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],o=t.vm;o&&o._watcher===t&&o._isMounted&&!o._isDestroyed&&Qe(o,"updated")}}(o),sn&&N.devtools&&sn.emit("flush")}function pt(n){var e=n.id;if(null==tt[e]&&(n!==vn.target||!n.noRecurse)){if(tt[e]=!0,at){for(var t=nt.length-1;t>it&&nt[t].id>n.id;)t--;nt.splice(t+1,0,n)}else nt.push(n);ot||(ot=!0,Ue(dt))}}function ut(n,e){if(n){for(var t=Object.create(null),o=dn?Reflect.ownKeys(n):Object.keys(n),a=0;a<o.length;a++){var i=o[a];if("__ob__"!==i){var r=n[i].from;if(r in e._provided)t[i]=e._provided[r];else if("default"in n[i]){var s=n[i].default;t[i]=l(s)?s.call(e):s}else 0}}return t}}function ht(n,e,t,i,r){var c,l=this,d=r.options;x(i,"_uid")?(c=Object.create(i))._original=i:(c=i,i=i._original);var p=s(d._compiled),u=!p;this.data=n,this.props=e,this.children=t,this.parent=i,this.listeners=n.on||o,this.injections=ut(d.inject,i),this.slots=function(){return l.$slots||me(i,n.scopedSlots,l.$slots=pe(t,i)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return me(i,n.scopedSlots,this.slots())}}),p&&(this.$options=d,this.$slots=this.slots(),this.$scopedSlots=me(i,n.scopedSlots,this.$slots)),d._scopeId?this._c=function(n,e,t,o){var r=_e(c,n,e,t,o,u);return r&&!a(r)&&(r.fnScopeId=d._scopeId,r.fnContext=i),r}:this._c=function(n,e,t,o){return _e(c,n,e,t,o,u)}}function mt(n,e,t,o,a){var i=gn(n);return i.fnContext=t,i.fnOptions=o,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function ft(n,e){for(var t in e)n[C(t)]=e[t]}function gt(n){return n.name||n.__name||n._componentTag}de(ht.prototype);var yt={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;yt.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},o=n.data.inlineTemplate;r(o)&&(t.render=o.render,t.staticRenderFns=o.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ke)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,a,i){var r=a.data.scopedSlots,s=n.$scopedSlots,c=!!(r&&!r.$stable||s!==o&&!s.$stable||r&&n.$scopedSlots.$key!==r.$key||!r&&n.$scopedSlots.$key),l=!!(i||n.$options._renderChildren||c),d=n.$vnode;n.$options._parentVnode=a,n.$vnode=a,n._vnode&&(n._vnode.parent=a),n.$options._renderChildren=i;var p=a.data.attrs||o;n._attrsProxy&&ve(n._attrsProxy,p,d.data&&d.data.attrs||o,n,"$attrs")&&(l=!0),n.$attrs=p,t=t||o;var u=n.$options._parentListeners;if(n._listenersProxy&&ve(n._listenersProxy,t,u||o,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,Xe(n,t,u),e&&n.$options.props){Sn(!1);for(var h=n._props,m=n.$options._propKeys||[],f=0;f<m.length;f++){var g=m[f],y=n.$options.props;h[g]=jt(g,y,e,n)}Sn(!0),n.$options.propsData=e}l&&(n.$slots=pe(i,a.context),n.$forceUpdate())}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,o=n.componentInstance;o._isMounted||(o._isMounted=!0,Qe(o,"mounted")),n.data.keepAlive&&(t._isMounted?((e=o)._inactive=!1,et.push(e)):Ye(o,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Je(e))||e._inactive)){e._inactive=!0;for(var o=0;o<e.$children.length;o++)n(e.$children[o]);Qe(e,"deactivated")}}(e,!0):e.$destroy())}},vt=Object.keys(yt);function bt(n,e,t,c,l){if(!i(n)){var p=t.$options._base;if(d(n)&&(n=p.extend(n)),"function"==typeof n){var u;if(i(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&r(n.errorComp))return n.errorComp;if(r(n.resolved))return n.resolved;var t=ke;if(t&&r(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t),s(n.loading)&&r(n.loadingComp))return n.loadingComp;if(t&&!r(n.owners)){var o=n.owners=[t],a=!0,c=null,l=null;t.$on("hook:destroyed",(function(){return w(o,t)}));var p=function(n){for(var e=0,t=o.length;e<t;e++)o[e].$forceUpdate();n&&(o.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},u=U((function(t){n.resolved=xe(t,e),a?o.length=0:p(!0)})),h=U((function(e){r(n.errorComp)&&(n.error=!0,p(!0))})),m=n(u,h);return d(m)&&(f(m)?i(n.resolved)&&m.then(u,h):f(m.component)&&(m.component.then(u,h),r(m.error)&&(n.errorComp=xe(m.error,e)),r(m.loading)&&(n.loadingComp=xe(m.loading,e),0===m.delay?n.loading=!0:c=setTimeout((function(){c=null,i(n.resolved)&&i(n.error)&&(n.loading=!0,p(!1))}),m.delay||200)),r(m.timeout)&&(l=setTimeout((function(){l=null,i(n.resolved)&&h(null)}),m.timeout)))),a=!1,n.loading?n.loadingComp:n.resolved}}(u=n,p)))return function(n,e,t,o,a){var i=mn();return i.asyncFactory=n,i.asyncMeta={data:e,context:t,children:o,tag:a},i}(u,e,t,c,l);e=e||{},Ht(n),r(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",o=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var i=e.on||(e.on={}),s=i[o],c=e.model.callback;r(s)?(a(s)?-1===s.indexOf(c):s!==c)&&(i[o]=[c].concat(s)):i[o]=c}(n.options,e);var h=function(n,e,t){var o=e.options.props;if(!i(o)){var a={},s=n.attrs,c=n.props;if(r(s)||r(c))for(var l in o){var d=A(l);Vn(a,c,l,d,!0)||Vn(a,s,l,d,!1)}return a}}(e,n);if(s(n.options.functional))return function(n,e,t,i,s){var c=n.options,l={},d=c.props;if(r(d))for(var p in d)l[p]=jt(p,d,e||o);else r(t.attrs)&&ft(l,t.attrs),r(t.props)&&ft(l,t.props);var u=new ht(t,l,s,i,n),h=c.render.call(null,u._c,u);if(h instanceof hn)return mt(h,t,u.parent,c,u);if(a(h)){for(var m=Xn(h)||[],f=new Array(m.length),g=0;g<m.length;g++)f[g]=mt(m[g],t,u.parent,c,u);return f}}(n,h,e,t,c);var m=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var g=e.slot;e={},g&&(e.slot=g)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<vt.length;t++){var o=vt[t],a=e[o],i=yt[o];a===i||a&&a._merged||(e[o]=a?wt(i,a):i)}}(e);var y=gt(n.options)||l;return new hn("vue-component-".concat(n.cid).concat(y?"-".concat(y):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:h,listeners:m,tag:l,children:c},u)}}}function wt(n,e){var t=function(t,o){n(t,o),e(t,o)};return t._merged=!0,t}var kt=M,xt=N.optionMergeStrategies;function Tt(n,e){if(!e)return n;for(var t,o,a,i=dn?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++)"__ob__"!==(t=i[r])&&(o=n[t],a=e[t],x(n,t)?o!==a&&u(o)&&u(a)&&Tt(o,a):zn(n,t,a));return n}function _t(n,e,t){return t?function(){var o=l(e)?e.call(t,t):e,a=l(n)?n.call(t,t):n;return o?Tt(o,a):a}:e?n?function(){return Tt(l(e)?e.call(this,this):e,l(n)?n.call(this,this):n)}:e:n}function Ct(n,e){var t=e?n?n.concat(e):a(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Et(n,e,t,o){var a=Object.create(n||null);return e?P(a,e):a}xt.data=function(n,e,t){return t?_t(n,e,t):e&&"function"!=typeof e?n:_t(n,e)},R.forEach((function(n){xt[n]=Ct})),W.forEach((function(n){xt[n+"s"]=Et})),xt.watch=function(n,e,t,o){if(n===tn&&(n=void 0),e===tn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var i={};for(var r in P(i,n),e){var s=i[r],c=e[r];s&&!a(s)&&(s=[s]),i[r]=s?s.concat(c):a(c)?c:[c]}return i},xt.props=xt.methods=xt.inject=xt.computed=function(n,e,t,o){if(!n)return e;var a=Object.create(null);return P(a,n),e&&P(a,e),a},xt.provide=_t;var St=function(n,e){return void 0===e?n:e};function At(n,e,t){if(l(e)&&(e=e.options),function(n,e){var t=n.props;if(t){var o,i,r={};if(a(t))for(o=t.length;o--;)"string"==typeof(i=t[o])&&(r[C(i)]={type:null});else if(u(t))for(var s in t)i=t[s],r[C(s)]=u(i)?i:{type:i};else 0;n.props=r}}(e),function(n,e){var t=n.inject;if(t){var o=n.inject={};if(a(t))for(var i=0;i<t.length;i++)o[t[i]]={from:t[i]};else if(u(t))for(var r in t){var s=t[r];o[r]=u(s)?P({from:r},s):{from:s}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var o=e[t];l(o)&&(e[t]={bind:o,update:o})}}(e),!e._base&&(e.extends&&(n=At(n,e.extends,t)),e.mixins))for(var o=0,i=e.mixins.length;o<i;o++)n=At(n,e.mixins[o],t);var r,s={};for(r in n)c(r);for(r in e)x(n,r)||c(r);function c(o){var a=xt[o]||St;s[o]=a(n[o],e[o],t,o)}return s}function It(n,e,t,o){if("string"==typeof t){var a=n[e];if(x(a,t))return a[t];var i=C(t);if(x(a,i))return a[i];var r=E(i);return x(a,r)?a[r]:a[t]||a[i]||a[r]}}function jt(n,e,t,o){var a=e[n],i=!x(t,n),r=t[n],s=Ot(Boolean,a.type);if(s>-1)if(i&&!x(a,"default"))r=!1;else if(""===r||r===A(n)){var c=Ot(String,a.type);(c<0||s<c)&&(r=!0)}if(void 0===r){r=function(n,e,t){if(!x(e,"default"))return;var o=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return l(o)&&"Function"!==zt(e.type)?o.call(n):o}(o,a,n);var d=En;Sn(!0),jn(r),Sn(d)}return r}var Pt=/^\s*function (\w+)/;function zt(n){var e=n&&n.toString().match(Pt);return e?e[1]:""}function Mt(n,e){return zt(n)===zt(e)}function Ot(n,e){if(!a(e))return Mt(e,n)?0:-1;for(var t=0,o=e.length;t<o;t++)if(Mt(e[t],n))return t;return-1}var $t={enumerable:!0,configurable:!0,get:M,set:M};function Bt(n,e,t){$t.get=function(){return this[e][t]},$t.set=function(n){this[e][t]=n},Object.defineProperty(n,t,$t)}function Lt(n){var e=n.$options;if(e.props&&function(n,e){var t=n.$options.propsData||{},o=n._props=$n({}),a=n.$options._propKeys=[];n.$parent&&Sn(!1);var i=function(i){a.push(i);var r=jt(i,e,t,n);Pn(o,i,r),i in n||Bt(n,"_props",i)};for(var r in e)i(r);Sn(!0)}(n,e.props),function(n){var e=n.$options,t=e.setup;if(t){var o=n._setupContext=ye(n);un(n),wn();var a=Ee(t,null,[n._props||$n({}),o],n,"setup");if(kn(),un(),l(a))e.render=a;else if(d(a))if(n._setupState=a,a.__sfc){var i=n._setupProxy={};for(var r in a)"__sfc"!==r&&Dn(i,a,r)}else for(var r in a)H(r)||Dn(n,a,r);else 0}}(n),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?M:I(e[t],n)}(n,e.methods),e.data)!function(n){var e=n.$options.data;u(e=n._data=l(e)?function(n,e){wn();try{return n.call(e,e)}catch(n){return Ce(n,e,"data()"),{}}finally{kn()}}(e,n):e||{})||(e={});var t=Object.keys(e),o=n.$options.props,a=(n.$options.methods,t.length);for(;a--;){var i=t[a];0,o&&x(o,i)||H(i)||Bt(n,"_data",i)}var r=jn(e);r&&r.vmCount++}(n);else{var t=jn(n._data={});t&&t.vmCount++}e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),o=rn();for(var a in e){var i=e[a],r=l(i)?i:i.get;0,o||(t[a]=new He(n,r||M,M,Ut)),a in n||Dt(n,a,i)}}(n,e.computed),e.watch&&e.watch!==tn&&function(n,e){for(var t in e){var o=e[t];if(a(o))for(var i=0;i<o.length;i++)Nt(n,t,o[i]);else Nt(n,t,o)}}(n,e.watch)}var Ut={lazy:!0};function Dt(n,e,t){var o=!rn();l(t)?($t.get=o?Wt(e):Rt(t),$t.set=M):($t.get=t.get?o&&!1!==t.cache?Wt(e):Rt(t.get):M,$t.set=t.set||M),Object.defineProperty(n,e,$t)}function Wt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),vn.target&&e.depend(),e.value}}function Rt(n){return function(){return n.call(this,this)}}function Nt(n,e,t,o){return u(t)&&(o=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,o)}var Gt=0;function Ht(n){var e=n.options;if(n.super){var t=Ht(n.super);if(t!==n.superOptions){n.superOptions=t;var o=function(n){var e,t=n.options,o=n.sealedOptions;for(var a in t)t[a]!==o[a]&&(e||(e={}),e[a]=t[a]);return e}(n);o&&P(n.extendOptions,o),(e=n.options=At(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Ft(n){this._init(n)}function qt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,o=t.cid,a=n._Ctor||(n._Ctor={});if(a[o])return a[o];var i=gt(n)||gt(t.options);var r=function(n){this._init(n)};return(r.prototype=Object.create(t.prototype)).constructor=r,r.cid=e++,r.options=At(t.options,n),r.super=t,r.options.props&&function(n){var e=n.options.props;for(var t in e)Bt(n.prototype,"_props",t)}(r),r.options.computed&&function(n){var e=n.options.computed;for(var t in e)Dt(n.prototype,t,e[t])}(r),r.extend=t.extend,r.mixin=t.mixin,r.use=t.use,W.forEach((function(n){r[n]=t[n]})),i&&(r.options.components[i]=r),r.superOptions=t.options,r.extendOptions=n,r.sealedOptions=P({},r.options),a[o]=r,r}}function Vt(n){return n&&(gt(n.Ctor.options)||n.tag)}function Xt(n,e){return a(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!h(n)&&n.test(e)}function Kt(n,e){var t=n.cache,o=n.keys,a=n._vnode;for(var i in t){var r=t[i];if(r){var s=r.name;s&&!e(s)&&Zt(t,i,o,a)}}}function Zt(n,e,t,o){var a=n[e];!a||o&&a.tag===o.tag||a.componentInstance.$destroy(),n[e]=null,w(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=Gt++,e._isVue=!0,e.__v_skip=!0,e._scope=new Rn(!0),n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),o=e._parentVnode;t.parent=e.parent,t._parentVnode=o;var a=o.componentOptions;t.propsData=a.propsData,t._parentListeners=a.listeners,t._renderChildren=a.children,t._componentTag=a.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=At(Ht(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Xe(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,a=t&&t.context;n.$slots=pe(e._renderChildren,a),n.$scopedSlots=t?me(n.$parent,t.data.scopedSlots,n.$slots):o,n._c=function(e,t,o,a){return _e(n,e,t,o,a,!1)},n.$createElement=function(e,t,o,a){return _e(n,e,t,o,a,!0)};var i=t&&t.data;Pn(n,"$attrs",i&&i.attrs||o,null,!0),Pn(n,"$listeners",e._parentListeners||o,null,!0)}(e),Qe(e,"beforeCreate",void 0,!1),function(n){var e=ut(n.$options.inject,n);e&&(Sn(!1),Object.keys(e).forEach((function(t){Pn(n,t,e[t])})),Sn(!0))}(e),Lt(e),function(n){var e=n.$options.provide;if(e){var t=l(e)?e.call(n):e;if(!d(t))return;for(var o=Nn(n),a=dn?Reflect.ownKeys(t):Object.keys(t),i=0;i<a.length;i++){var r=a[i];Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))}}}(e),Qe(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Ft),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=zn,n.prototype.$delete=Mn,n.prototype.$watch=function(n,e,t){if(u(e))return Nt(this,n,e,t);(t=t||{}).user=!0;var o=new He(this,n,e,t);if(t.immediate){var a='callback for immediate watcher "'.concat(o.expression,'"');wn(),Ee(e,this,[o.value],this,a),kn()}return function(){o.teardown()}}}(Ft),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var o=this;if(a(n))for(var i=0,r=n.length;i<r;i++)o.$on(n[i],t);else(o._events[n]||(o._events[n]=[])).push(t),e.test(n)&&(o._hasHookEvent=!0);return o},n.prototype.$once=function(n,e){var t=this;function o(){t.$off(n,o),e.apply(t,arguments)}return o.fn=e,t.$on(n,o),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(a(n)){for(var o=0,i=n.length;o<i;o++)t.$off(n[o],e);return t}var r,s=t._events[n];if(!s)return t;if(!e)return t._events[n]=null,t;for(var c=s.length;c--;)if((r=s[c])===e||r.fn===e){s.splice(c,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?j(t):t;for(var o=j(arguments,1),a='event handler for "'.concat(n,'"'),i=0,r=t.length;i<r;i++)Ee(t[i],e,o,e,a)}return e}}(Ft),function(n){n.prototype._update=function(n,e){var t=this,o=t.$el,a=t._vnode,i=Ze(t);t._vnode=n,t.$el=a?t.__patch__(a,n):t.__patch__(t.$el,n,e,!1),i(),o&&(o.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){Qe(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||w(e.$children,n),n._scope.stop(),n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),Qe(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Ft),function(n){de(n.prototype),n.prototype.$nextTick=function(n){return Ue(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,o=t.render,i=t._parentVnode;i&&e._isMounted&&(e.$scopedSlots=me(e.$parent,i.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&we(e._slotsProxy,e.$scopedSlots)),e.$vnode=i;try{un(e),ke=e,n=o.call(e._renderProxy,e.$createElement)}catch(t){Ce(t,e,"render"),n=e._vnode}finally{ke=null,un()}return a(n)&&1===n.length&&(n=n[0]),n instanceof hn||(n=mn()),n.parent=i,n}}(Ft);var Jt=[String,RegExp,Array],Yt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Jt,exclude:Jt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,o=this.keyToCache;if(t){var a=t.tag,i=t.componentInstance,r=t.componentOptions;n[o]={name:Vt(r),tag:a,componentInstance:i},e.push(o),this.max&&e.length>parseInt(this.max)&&Zt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Zt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Kt(n,(function(n){return Xt(e,n)}))})),this.$watch("exclude",(function(e){Kt(n,(function(n){return!Xt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Te(n),t=e&&e.componentOptions;if(t){var o=Vt(t),a=this.include,i=this.exclude;if(a&&(!o||!Xt(a,o))||i&&o&&Xt(i,o))return e;var r=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;r[c]?(e.componentInstance=r[c].componentInstance,w(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return N}};Object.defineProperty(n,"config",e),n.util={warn:kt,extend:P,mergeOptions:At,defineReactive:Pn},n.set=zn,n.delete=Mn,n.nextTick=Ue,n.observable=function(n){return jn(n),n},n.options=Object.create(null),W.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,P(n.options.components,Yt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=j(arguments,1);return t.unshift(this),l(n.install)?n.install.apply(n,t):l(n)&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=At(this.options,n),this}}(n),qt(n),function(n){W.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&l(t)&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Ft),Object.defineProperty(Ft.prototype,"$isServer",{get:rn}),Object.defineProperty(Ft.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ft,"FunctionalRenderContext",{value:ht}),Ft.version="2.7.8";var Qt=v("style,class"),no=v("input,textarea,option,select,progress"),eo=v("contenteditable,draggable,spellcheck"),to=v("events,caret,typing,plaintext-only"),oo=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ao="http://www.w3.org/1999/xlink",io=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},ro=function(n){return io(n)?n.slice(6,n.length):""},so=function(n){return null==n||!1===n};function co(n){for(var e=n.data,t=n,o=n;r(o.componentInstance);)(o=o.componentInstance._vnode)&&o.data&&(e=lo(o.data,e));for(;r(t=t.parent);)t&&t.data&&(e=lo(e,t.data));return function(n,e){if(r(n)||r(e))return po(n,uo(e));return""}(e.staticClass,e.class)}function lo(n,e){return{staticClass:po(n.staticClass,e.staticClass),class:r(n.class)?[n.class,e.class]:e.class}}function po(n,e){return n?e?n+" "+e:n:e||""}function uo(n){return Array.isArray(n)?function(n){for(var e,t="",o=0,a=n.length;o<a;o++)r(e=uo(n[o]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):d(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var ho={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},mo=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),fo=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),go=function(n){return mo(n)||fo(n)};var yo=Object.create(null);var vo=v("text,number,password,search,email,tel,url");var bo=Object.freeze({__proto__:null,createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(ho[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),wo={create:function(n,e){ko(e)},update:function(n,e){n.data.ref!==e.data.ref&&(ko(n,!0),ko(e))},destroy:function(n){ko(n,!0)}};function ko(n,e){var t=n.data.ref;if(r(t)){var o=n.context,i=n.componentInstance||n.elm,s=e?null:i,c=e?void 0:i;if(l(t))Ee(t,o,[s],o,"template ref function");else{var d=n.data.refInFor,p="string"==typeof t||"number"==typeof t,u=Un(t),h=o.$refs;if(p||u)if(d){var m=p?h[t]:t.value;e?a(m)&&w(m,i):a(m)?m.includes(i)||m.push(i):p?(h[t]=[i],xo(o,t,h[t])):t.value=[i]}else if(p){if(e&&h[t]!==i)return;h[t]=c,xo(o,t,s)}else if(u){if(e&&t.value!==i)return;t.value=s}else 0}}}function xo(n,e,t){var o=n._setupState;o&&x(o,e)&&(Un(o[e])?o[e].value=t:o[e]=t)}var To=new hn("",{},[]),_o=["create","activate","update","remove","destroy"];function Co(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&r(n.data)===r(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,o=r(t=n.data)&&r(t=t.attrs)&&t.type,a=r(t=e.data)&&r(t=t.attrs)&&t.type;return o===a||vo(o)&&vo(a)}(n,e)||s(n.isAsyncPlaceholder)&&i(e.asyncFactory.error))}function Eo(n,e,t){var o,a,i={};for(o=e;o<=t;++o)r(a=n[o].key)&&(i[a]=o);return i}var So={create:Ao,update:Ao,destroy:function(n){Ao(n,To)}};function Ao(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,o,a,i=n===To,r=e===To,s=jo(n.data.directives,n.context),c=jo(e.data.directives,e.context),l=[],d=[];for(t in c)o=s[t],a=c[t],o?(a.oldValue=o.value,a.oldArg=o.arg,zo(a,"update",e,n),a.def&&a.def.componentUpdated&&d.push(a)):(zo(a,"bind",e,n),a.def&&a.def.inserted&&l.push(a));if(l.length){var p=function(){for(var t=0;t<l.length;t++)zo(l[t],"inserted",e,n)};i?qn(e,"insert",p):p()}d.length&&qn(e,"postpatch",(function(){for(var t=0;t<d.length;t++)zo(d[t],"componentUpdated",e,n)}));if(!i)for(t in s)c[t]||zo(s[t],"unbind",n,n,r)}(n,e)}var Io=Object.create(null);function jo(n,e){var t,o,a=Object.create(null);if(!n)return a;for(t=0;t<n.length;t++)(o=n[t]).modifiers||(o.modifiers=Io),a[Po(o)]=o,e._setupState&&e._setupState.__sfc&&(o.def=o.def||It(e,"_setupState","v-"+o.name)),o.def=o.def||It(e.$options,"directives",o.name);return a}function Po(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function zo(n,e,t,o,a){var i=n.def&&n.def[e];if(i)try{i(t.elm,n,t,o,a)}catch(o){Ce(o,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var Mo=[wo,So];function Oo(n,e){var t=e.componentOptions;if(!(r(t)&&!1===t.Ctor.options.inheritAttrs||i(n.data.attrs)&&i(e.data.attrs))){var o,a,c=e.elm,l=n.data.attrs||{},d=e.data.attrs||{};for(o in(r(d.__ob__)||s(d._v_attr_proxy))&&(d=e.data.attrs=P({},d)),d)a=d[o],l[o]!==a&&$o(c,o,a,e.data.pre);for(o in(Z||Y)&&d.value!==l.value&&$o(c,"value",d.value),l)i(d[o])&&(io(o)?c.removeAttributeNS(ao,ro(o)):eo(o)||c.removeAttribute(o))}}function $o(n,e,t,o){o||n.tagName.indexOf("-")>-1?Bo(n,e,t):oo(e)?so(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):eo(e)?n.setAttribute(e,function(n,e){return so(e)||"false"===e?"false":"contenteditable"===n&&to(e)?e:"true"}(e,t)):io(e)?so(t)?n.removeAttributeNS(ao,ro(e)):n.setAttributeNS(ao,e,t):Bo(n,e,t)}function Bo(n,e,t){if(so(t))n.removeAttribute(e);else{if(Z&&!J&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var o=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",o)};n.addEventListener("input",o),n.__ieph=!0}n.setAttribute(e,t)}}var Lo={create:Oo,update:Oo};function Uo(n,e){var t=e.elm,o=e.data,a=n.data;if(!(i(o.staticClass)&&i(o.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=co(e),c=t._transitionClasses;r(c)&&(s=po(s,uo(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var Do,Wo={create:Uo,update:Uo};function Ro(n,e,t){var o=Do;return function a(){var i=e.apply(null,arguments);null!==i&&Ho(n,a,t,o)}}var No=je&&!(en&&Number(en[1])<=53);function Go(n,e,t,o){if(No){var a=rt,i=e;e=i._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=a||n.timeStamp<=0||n.target.ownerDocument!==document)return i.apply(this,arguments)}}Do.addEventListener(n,e,on?{capture:t,passive:o}:t)}function Ho(n,e,t,o){(o||Do).removeEventListener(n,e._wrapper||e,t)}function Fo(n,e){if(!i(n.data.on)||!i(e.data.on)){var t=e.data.on||{},o=n.data.on||{};Do=e.elm||n.elm,function(n){if(r(n.__r)){var e=Z?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}r(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),Fn(t,o,Go,Ho,Ro,e.context),Do=void 0}}var qo,Vo={create:Fo,update:Fo,destroy:function(n){return Fo(n,To)}};function Xo(n,e){if(!i(n.data.domProps)||!i(e.data.domProps)){var t,o,a=e.elm,c=n.data.domProps||{},l=e.data.domProps||{};for(t in(r(l.__ob__)||s(l._v_attr_proxy))&&(l=e.data.domProps=P({},l)),c)t in l||(a[t]="");for(t in l){if(o=l[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),o===c[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=o;var d=i(o)?"":String(o);Ko(a,d)&&(a.value=d)}else if("innerHTML"===t&&fo(a.tagName)&&i(a.innerHTML)){(qo=qo||document.createElement("div")).innerHTML="<svg>".concat(o,"</svg>");for(var p=qo.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;p.firstChild;)a.appendChild(p.firstChild)}else if(o!==c[t])try{a[t]=o}catch(n){}}}}function Ko(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,o=n._vModifiers;if(r(o)){if(o.number)return y(t)!==y(e);if(o.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Zo={create:Xo,update:Xo},Jo=T((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var o=n.split(t);o.length>1&&(e[o[0].trim()]=o[1].trim())}})),e}));function Yo(n){var e=Qo(n.style);return n.staticStyle?P(n.staticStyle,e):e}function Qo(n){return Array.isArray(n)?z(n):"string"==typeof n?Jo(n):n}var na,ea=/^--/,ta=/\s*!important$/,oa=function(n,e,t){if(ea.test(e))n.style.setProperty(e,t);else if(ta.test(t))n.style.setProperty(A(e),t.replace(ta,""),"important");else{var o=ia(e);if(Array.isArray(t))for(var a=0,i=t.length;a<i;a++)n.style[o]=t[a];else n.style[o]=t}},aa=["Webkit","Moz","ms"],ia=T((function(n){if(na=na||document.createElement("div").style,"filter"!==(n=C(n))&&n in na)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<aa.length;t++){var o=aa[t]+e;if(o in na)return o}}));function ra(n,e){var t=e.data,o=n.data;if(!(i(t.staticStyle)&&i(t.style)&&i(o.staticStyle)&&i(o.style))){var a,s,c=e.elm,l=o.staticStyle,d=o.normalizedStyle||o.style||{},p=l||d,u=Qo(e.data.style)||{};e.data.normalizedStyle=r(u.__ob__)?P({},u):u;var h=function(n,e){var t,o={};if(e)for(var a=n;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&(t=Yo(a.data))&&P(o,t);(t=Yo(n.data))&&P(o,t);for(var i=n;i=i.parent;)i.data&&(t=Yo(i.data))&&P(o,t);return o}(e,!0);for(s in p)i(h[s])&&oa(c,s,"");for(s in h)(a=h[s])!==p[s]&&oa(c,s,null==a?"":a)}}var sa={create:ra,update:ra},ca=/\s+/;function la(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(ca).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function da(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(ca).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),o=" "+e+" ";t.indexOf(o)>=0;)t=t.replace(o," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function pa(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&P(e,ua(n.name||"v")),P(e,n),e}return"string"==typeof n?ua(n):void 0}}var ua=T((function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}})),ha=X&&!J,ma="transition",fa="transitionend",ga="animation",ya="animationend";ha&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ma="WebkitTransition",fa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ga="WebkitAnimation",ya="webkitAnimationEnd"));var va=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function ba(n){va((function(){va(n)}))}function wa(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),la(n,e))}function ka(n,e){n._transitionClasses&&w(n._transitionClasses,e),da(n,e)}function xa(n,e,t){var o=_a(n,e),a=o.type,i=o.timeout,r=o.propCount;if(!a)return t();var s="transition"===a?fa:ya,c=0,l=function(){n.removeEventListener(s,d),t()},d=function(e){e.target===n&&++c>=r&&l()};setTimeout((function(){c<r&&l()}),i+1),n.addEventListener(s,d)}var Ta=/\b(transform|all)(,|$)/;function _a(n,e){var t,o=window.getComputedStyle(n),a=(o[ma+"Delay"]||"").split(", "),i=(o[ma+"Duration"]||"").split(", "),r=Ca(a,i),s=(o[ga+"Delay"]||"").split(", "),c=(o[ga+"Duration"]||"").split(", "),l=Ca(s,c),d=0,p=0;return"transition"===e?r>0&&(t="transition",d=r,p=i.length):"animation"===e?l>0&&(t="animation",d=l,p=c.length):p=(t=(d=Math.max(r,l))>0?r>l?"transition":"animation":null)?"transition"===t?i.length:c.length:0,{type:t,timeout:d,propCount:p,hasTransform:"transition"===t&&Ta.test(o[ma+"Property"])}}function Ca(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return Ea(e)+Ea(n[t])})))}function Ea(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function Sa(n,e){var t=n.elm;r(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var o=pa(n.data.transition);if(!i(o)&&!r(t._enterCb)&&1===t.nodeType){for(var a=o.css,s=o.type,c=o.enterClass,p=o.enterToClass,u=o.enterActiveClass,h=o.appearClass,m=o.appearToClass,f=o.appearActiveClass,g=o.beforeEnter,v=o.enter,b=o.afterEnter,w=o.enterCancelled,k=o.beforeAppear,x=o.appear,T=o.afterAppear,_=o.appearCancelled,C=o.duration,E=Ke,S=Ke.$vnode;S&&S.parent;)E=S.context,S=S.parent;var A=!E._isMounted||!n.isRootInsert;if(!A||x||""===x){var I=A&&h?h:c,j=A&&f?f:u,P=A&&m?m:p,z=A&&k||g,M=A&&l(x)?x:v,O=A&&T||b,$=A&&_||w,B=y(d(C)?C.enter:C);0;var L=!1!==a&&!J,D=ja(M),W=t._enterCb=U((function(){L&&(ka(t,P),ka(t,j)),W.cancelled?(L&&ka(t,I),$&&$(t)):O&&O(t),t._enterCb=null}));n.data.show||qn(n,"insert",(function(){var e=t.parentNode,o=e&&e._pending&&e._pending[n.key];o&&o.tag===n.tag&&o.elm._leaveCb&&o.elm._leaveCb(),M&&M(t,W)})),z&&z(t),L&&(wa(t,I),wa(t,j),ba((function(){ka(t,I),W.cancelled||(wa(t,P),D||(Ia(B)?setTimeout(W,B):xa(t,s,W)))}))),n.data.show&&(e&&e(),M&&M(t,W)),L||D||W()}}}function Aa(n,e){var t=n.elm;r(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var o=pa(n.data.transition);if(i(o)||1!==t.nodeType)return e();if(!r(t._leaveCb)){var a=o.css,s=o.type,c=o.leaveClass,l=o.leaveToClass,p=o.leaveActiveClass,u=o.beforeLeave,h=o.leave,m=o.afterLeave,f=o.leaveCancelled,g=o.delayLeave,v=o.duration,b=!1!==a&&!J,w=ja(h),k=y(d(v)?v.leave:v);0;var x=t._leaveCb=U((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),b&&(ka(t,l),ka(t,p)),x.cancelled?(b&&ka(t,c),f&&f(t)):(e(),m&&m(t)),t._leaveCb=null}));g?g(T):T()}function T(){x.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),u&&u(t),b&&(wa(t,c),wa(t,p),ba((function(){ka(t,c),x.cancelled||(wa(t,l),w||(Ia(k)?setTimeout(x,k):xa(t,s,x)))}))),h&&h(t,x),b||w||x())}}function Ia(n){return"number"==typeof n&&!isNaN(n)}function ja(n){if(i(n))return!1;var e=n.fns;return r(e)?ja(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function Pa(n,e){!0!==e.data.show&&Sa(e)}var za=function(n){var e,t,o={},l=n.modules,d=n.nodeOps;for(e=0;e<_o.length;++e)for(o[_o[e]]=[],t=0;t<l.length;++t)r(l[t][_o[e]])&&o[_o[e]].push(l[t][_o[e]]);function p(n){var e=d.parentNode(n);r(e)&&d.removeChild(e,n)}function u(n,e,t,a,i,c,l){if(r(n.elm)&&r(c)&&(n=c[l]=gn(n)),n.isRootInsert=!i,!function(n,e,t,a){var i=n.data;if(r(i)){var c=r(n.componentInstance)&&i.keepAlive;if(r(i=i.hook)&&r(i=i.init)&&i(n,!1),r(n.componentInstance))return h(n,e),m(t,n.elm,a),s(c)&&function(n,e,t,a){var i,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,r(i=s.data)&&r(i=i.transition)){for(i=0;i<o.activate.length;++i)o.activate[i](To,s);e.push(s);break}m(t,n.elm,a)}(n,e,t,a),!0}}(n,e,t,a)){var p=n.data,u=n.children,g=n.tag;r(g)?(n.elm=n.ns?d.createElementNS(n.ns,g):d.createElement(g,n),b(n),f(n,u,e),r(p)&&y(n,e),m(t,n.elm,a)):s(n.isComment)?(n.elm=d.createComment(n.text),m(t,n.elm,a)):(n.elm=d.createTextNode(n.text),m(t,n.elm,a))}}function h(n,e){r(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,g(n)?(y(n,e),b(n)):(ko(n),e.push(n))}function m(n,e,t){r(n)&&(r(t)?d.parentNode(t)===n&&d.insertBefore(n,e,t):d.appendChild(n,e))}function f(n,e,t){if(a(e)){0;for(var o=0;o<e.length;++o)u(e[o],t,n.elm,null,!0,e,o)}else c(n.text)&&d.appendChild(n.elm,d.createTextNode(String(n.text)))}function g(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return r(n.tag)}function y(n,t){for(var a=0;a<o.create.length;++a)o.create[a](To,n);r(e=n.data.hook)&&(r(e.create)&&e.create(To,n),r(e.insert)&&t.push(n))}function b(n){var e;if(r(e=n.fnScopeId))d.setStyleScope(n.elm,e);else for(var t=n;t;)r(e=t.context)&&r(e=e.$options._scopeId)&&d.setStyleScope(n.elm,e),t=t.parent;r(e=Ke)&&e!==n.context&&e!==n.fnContext&&r(e=e.$options._scopeId)&&d.setStyleScope(n.elm,e)}function w(n,e,t,o,a,i){for(;o<=a;++o)u(t[o],i,n,e,!1,t,o)}function k(n){var e,t,a=n.data;if(r(a))for(r(e=a.hook)&&r(e=e.destroy)&&e(n),e=0;e<o.destroy.length;++e)o.destroy[e](n);if(r(e=n.children))for(t=0;t<n.children.length;++t)k(n.children[t])}function x(n,e,t){for(;e<=t;++e){var o=n[e];r(o)&&(r(o.tag)?(T(o),k(o)):p(o.elm))}}function T(n,e){if(r(e)||r(n.data)){var t,a=o.remove.length+1;for(r(e)?e.listeners+=a:e=function(n,e){function t(){0==--t.listeners&&p(n)}return t.listeners=e,t}(n.elm,a),r(t=n.componentInstance)&&r(t=t._vnode)&&r(t.data)&&T(t,e),t=0;t<o.remove.length;++t)o.remove[t](n,e);r(t=n.data.hook)&&r(t=t.remove)?t(n,e):e()}else p(n.elm)}function _(n,e,t,o){for(var a=t;a<o;a++){var i=e[a];if(r(i)&&Co(n,i))return a}}function C(n,e,t,a,c,l){if(n!==e){r(e.elm)&&r(a)&&(e=a[c]=gn(e));var p=e.elm=n.elm;if(s(n.isAsyncPlaceholder))r(e.asyncFactory.resolved)?A(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var h,m=e.data;r(m)&&r(h=m.hook)&&r(h=h.prepatch)&&h(n,e);var f=n.children,y=e.children;if(r(m)&&g(e)){for(h=0;h<o.update.length;++h)o.update[h](n,e);r(h=m.hook)&&r(h=h.update)&&h(n,e)}i(e.text)?r(f)&&r(y)?f!==y&&function(n,e,t,o,a){var s,c,l,p=0,h=0,m=e.length-1,f=e[0],g=e[m],y=t.length-1,v=t[0],b=t[y],k=!a;for(0;p<=m&&h<=y;)i(f)?f=e[++p]:i(g)?g=e[--m]:Co(f,v)?(C(f,v,o,t,h),f=e[++p],v=t[++h]):Co(g,b)?(C(g,b,o,t,y),g=e[--m],b=t[--y]):Co(f,b)?(C(f,b,o,t,y),k&&d.insertBefore(n,f.elm,d.nextSibling(g.elm)),f=e[++p],b=t[--y]):Co(g,v)?(C(g,v,o,t,h),k&&d.insertBefore(n,g.elm,f.elm),g=e[--m],v=t[++h]):(i(s)&&(s=Eo(e,p,m)),i(c=r(v.key)?s[v.key]:_(v,e,p,m))?u(v,o,n,f.elm,!1,t,h):Co(l=e[c],v)?(C(l,v,o,t,h),e[c]=void 0,k&&d.insertBefore(n,l.elm,f.elm)):u(v,o,n,f.elm,!1,t,h),v=t[++h]);p>m?w(n,i(t[y+1])?null:t[y+1].elm,t,h,y,o):h>y&&x(e,p,m)}(p,f,y,t,l):r(y)?(r(n.text)&&d.setTextContent(p,""),w(p,null,y,0,y.length-1,t)):r(f)?x(f,0,f.length-1):r(n.text)&&d.setTextContent(p,""):n.text!==e.text&&d.setTextContent(p,e.text),r(m)&&r(h=m.hook)&&r(h=h.postpatch)&&h(n,e)}}}function E(n,e,t){if(s(t)&&r(n.parent))n.parent.data.pendingInsert=e;else for(var o=0;o<e.length;++o)e[o].data.hook.insert(e[o])}var S=v("attrs,class,staticClass,staticStyle,key");function A(n,e,t,o){var a,i=e.tag,c=e.data,l=e.children;if(o=o||c&&c.pre,e.elm=n,s(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(a=c.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return h(e,t),!0;if(r(i)){if(r(l))if(n.hasChildNodes())if(r(a=c)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==n.innerHTML)return!1}else{for(var d=!0,p=n.firstChild,u=0;u<l.length;u++){if(!p||!A(p,l[u],t,o)){d=!1;break}p=p.nextSibling}if(!d||p)return!1}else f(e,l,t);if(r(c)){var m=!1;for(var g in c)if(!S(g)){m=!0,y(e,t);break}!m&&c.class&&Re(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,a){if(!i(e)){var c,l=!1,p=[];if(i(n))l=!0,u(e,p);else{var h=r(n.nodeType);if(!h&&Co(n,e))C(n,e,p,null,null,a);else{if(h){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&A(n,e,p))return E(e,p,!0),n;c=n,n=new hn(d.tagName(c).toLowerCase(),{},[],void 0,c)}var m=n.elm,f=d.parentNode(m);if(u(e,p,m._leaveCb?null:f,d.nextSibling(m)),r(e.parent))for(var y=e.parent,v=g(e);y;){for(var b=0;b<o.destroy.length;++b)o.destroy[b](y);if(y.elm=e.elm,v){for(var w=0;w<o.create.length;++w)o.create[w](To,y);var T=y.data.hook.insert;if(T.merged)for(var _=1;_<T.fns.length;_++)T.fns[_]()}else ko(y);y=y.parent}r(f)?x([n],0,0):r(n.tag)&&k(n)}}return E(e,p,l),e.elm}r(n)&&k(n)}}({nodeOps:bo,modules:[Lo,Wo,Vo,Zo,sa,X?{create:Pa,activate:Pa,remove:function(n,e){!0!==n.data.show?Aa(n,e):e()}}:{}].concat(Mo)});J&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&Wa(n,"input")}));var Ma={inserted:function(n,e,t,o){"select"===t.tag?(o.elm&&!o.elm._vOptions?qn(t,"postpatch",(function(){Ma.componentUpdated(n,e,t)})):Oa(n,e,t.context),n._vOptions=[].map.call(n.options,La)):("textarea"===t.tag||vo(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",Ua),n.addEventListener("compositionend",Da),n.addEventListener("change",Da),J&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){Oa(n,e,t.context);var o=n._vOptions,a=n._vOptions=[].map.call(n.options,La);if(a.some((function(n,e){return!B(n,o[e])})))(n.multiple?e.value.some((function(n){return Ba(n,a)})):e.value!==e.oldValue&&Ba(e.value,a))&&Wa(n,"change")}}};function Oa(n,e,t){$a(n,e,t),(Z||Y)&&setTimeout((function(){$a(n,e,t)}),0)}function $a(n,e,t){var o=e.value,a=n.multiple;if(!a||Array.isArray(o)){for(var i,r,s=0,c=n.options.length;s<c;s++)if(r=n.options[s],a)i=L(o,La(r))>-1,r.selected!==i&&(r.selected=i);else if(B(La(r),o))return void(n.selectedIndex!==s&&(n.selectedIndex=s));a||(n.selectedIndex=-1)}}function Ba(n,e){return e.every((function(e){return!B(e,n)}))}function La(n){return"_value"in n?n._value:n.value}function Ua(n){n.target.composing=!0}function Da(n){n.target.composing&&(n.target.composing=!1,Wa(n.target,"input"))}function Wa(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function Ra(n){return!n.componentInstance||n.data&&n.data.transition?n:Ra(n.componentInstance._vnode)}var Na={model:Ma,show:{bind:function(n,e,t){var o=e.value,a=(t=Ra(t)).data&&t.data.transition,i=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;o&&a?(t.data.show=!0,Sa(t,(function(){n.style.display=i}))):n.style.display=o?i:"none"},update:function(n,e,t){var o=e.value;!o!=!e.oldValue&&((t=Ra(t)).data&&t.data.transition?(t.data.show=!0,o?Sa(t,(function(){n.style.display=n.__vOriginalDisplay})):Aa(t,(function(){n.style.display="none"}))):n.style.display=o?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,o,a){a||(n.style.display=n.__vOriginalDisplay)}}},Ga={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Ha(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Ha(Te(e.children)):n}function Fa(n){var e={},t=n.$options;for(var o in t.propsData)e[o]=n[o];var a=t._parentListeners;for(var o in a)e[C(o)]=a[o];return e}function qa(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Va=function(n){return n.tag||he(n)},Xa=function(n){return"show"===n.name},Ka={name:"transition",props:Ga,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Va)).length){0;var o=this.mode;0;var a=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return a;var i=Ha(a);if(!i)return a;if(this._leaving)return qa(n,a);var r="__transition-".concat(this._uid,"-");i.key=null==i.key?i.isComment?r+"comment":r+i.tag:c(i.key)?0===String(i.key).indexOf(r)?i.key:r+i.key:i.key;var s=(i.data||(i.data={})).transition=Fa(this),l=this._vnode,d=Ha(l);if(i.data.directives&&i.data.directives.some(Xa)&&(i.data.show=!0),d&&d.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(i,d)&&!he(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var p=d.data.transition=P({},s);if("out-in"===o)return this._leaving=!0,qn(p,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),qa(n,a);if("in-out"===o){if(he(i))return l;var u,h=function(){u()};qn(s,"afterEnter",h),qn(s,"enterCancelled",h),qn(p,"delayLeave",(function(n){u=n}))}}return a}}},Za=P({tag:String,moveClass:String},Ga);function Ja(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Ya(n){n.data.newPos=n.elm.getBoundingClientRect()}function Qa(n){var e=n.data.pos,t=n.data.newPos,o=e.left-t.left,a=e.top-t.top;if(o||a){n.data.moved=!0;var i=n.elm.style;i.transform=i.WebkitTransform="translate(".concat(o,"px,").concat(a,"px)"),i.transitionDuration="0s"}}delete Za.mode;var ni={Transition:Ka,TransitionGroup:{props:Za,beforeMount:function(){var n=this,e=this._update;this._update=function(t,o){var a=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,a(),e.call(n,t,o)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),o=this.prevChildren=this.children,a=this.$slots.default||[],i=this.children=[],r=Fa(this),s=0;s<a.length;s++){if((d=a[s]).tag)if(null!=d.key&&0!==String(d.key).indexOf("__vlist"))i.push(d),t[d.key]=d,(d.data||(d.data={})).transition=r;else;}if(o){var c=[],l=[];for(s=0;s<o.length;s++){var d;(d=o[s]).data.transition=r,d.data.pos=d.elm.getBoundingClientRect(),t[d.key]?c.push(d):l.push(d)}this.kept=n(e,null,c),this.removed=l}return n(e,null,i)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Ja),n.forEach(Ya),n.forEach(Qa),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,o=t.style;wa(t,e),o.transform=o.WebkitTransform=o.transitionDuration="",t.addEventListener(fa,t._moveCb=function n(o){o&&o.target!==t||o&&!/transform$/.test(o.propertyName)||(t.removeEventListener(fa,n),t._moveCb=null,ka(t,e))})}})))},methods:{hasMove:function(n,e){if(!ha)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){da(t,n)})),la(t,e),t.style.display="none",this.$el.appendChild(t);var o=_a(t);return this.$el.removeChild(t),this._hasMove=o.hasTransform}}}};function ei(n,e){for(var t in e)n[t]=e[t];return n}Ft.config.mustUseProp=function(n,e,t){return"value"===t&&no(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Ft.config.isReservedTag=go,Ft.config.isReservedAttr=Qt,Ft.config.getTagNamespace=function(n){return fo(n)?"svg":"math"===n?"math":void 0},Ft.config.isUnknownElement=function(n){if(!X)return!0;if(go(n))return!1;if(n=n.toLowerCase(),null!=yo[n])return yo[n];var e=document.createElement(n);return n.indexOf("-")>-1?yo[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:yo[n]=/HTMLUnknownElement/.test(e.toString())},P(Ft.options.directives,Na),P(Ft.options.components,ni),Ft.prototype.__patch__=X?za:M,Ft.prototype.$mount=function(n,e){return function(n,e,t){var o;n.$el=e,n.$options.render||(n.$options.render=mn),Qe(n,"beforeMount"),o=function(){n._update(n._render(),t)},new He(n,o,M,{before:function(){n._isMounted&&!n._isDestroyed&&Qe(n,"beforeUpdate")}},!0),t=!1;var a=n._preWatchers;if(a)for(var i=0;i<a.length;i++)a[i].run();return null==n.$vnode&&(n._isMounted=!0,Qe(n,"mounted")),n}(this,n=n&&X?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},X&&setTimeout((function(){N.devtools&&sn&&sn.emit("init",Ft)}),0);var ti=/[!'()*]/g,oi=function(n){return"%"+n.charCodeAt(0).toString(16)},ai=/%2C/g,ii=function(n){return encodeURIComponent(n).replace(ti,oi).replace(ai,",")};function ri(n){try{return decodeURIComponent(n)}catch(n){0}return n}var si=function(n){return null==n||"object"==typeof n?n:String(n)};function ci(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),o=ri(t.shift()),a=t.length>0?ri(t.join("=")):null;void 0===e[o]?e[o]=a:Array.isArray(e[o])?e[o].push(a):e[o]=[e[o],a]})),e):e}function li(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return ii(e);if(Array.isArray(t)){var o=[];return t.forEach((function(n){void 0!==n&&(null===n?o.push(ii(e)):o.push(ii(e)+"="+ii(n)))})),o.join("&")}return ii(e)+"="+ii(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var di=/\/?$/;function pi(n,e,t,o){var a=o&&o.options.stringifyQuery,i=e.query||{};try{i=ui(i)}catch(n){}var r={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:i,params:e.params||{},fullPath:fi(e,a),matched:n?mi(n):[]};return t&&(r.redirectedFrom=fi(t,a)),Object.freeze(r)}function ui(n){if(Array.isArray(n))return n.map(ui);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=ui(n[t]);return e}return n}var hi=pi(null,{path:"/"});function mi(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function fi(n,e){var t=n.path,o=n.query;void 0===o&&(o={});var a=n.hash;return void 0===a&&(a=""),(t||"/")+(e||li)(o)+a}function gi(n,e,t){return e===hi?n===e:!!e&&(n.path&&e.path?n.path.replace(di,"")===e.path.replace(di,"")&&(t||n.hash===e.hash&&yi(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&yi(n.query,e.query)&&yi(n.params,e.params))))}function yi(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),o=Object.keys(e).sort();return t.length===o.length&&t.every((function(t,a){var i=n[t];if(o[a]!==t)return!1;var r=e[t];return null==i||null==r?i===r:"object"==typeof i&&"object"==typeof r?yi(i,r):String(i)===String(r)}))}function vi(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var o in t.instances){var a=t.instances[o],i=t.enteredCbs[o];if(a&&i){delete t.enteredCbs[o];for(var r=0;r<i.length;r++)a._isBeingDestroyed||i[r](a)}}}}var bi={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,o=e.children,a=e.parent,i=e.data;i.routerView=!0;for(var r=a.$createElement,s=t.name,c=a.$route,l=a._routerViewCache||(a._routerViewCache={}),d=0,p=!1;a&&a._routerRoot!==a;){var u=a.$vnode?a.$vnode.data:{};u.routerView&&d++,u.keepAlive&&a._directInactive&&a._inactive&&(p=!0),a=a.$parent}if(i.routerViewDepth=d,p){var h=l[s],m=h&&h.component;return m?(h.configProps&&wi(m,i,h.route,h.configProps),r(m,i,o)):r()}var f=c.matched[d],g=f&&f.components[s];if(!f||!g)return l[s]=null,r();l[s]={component:g},i.registerRouteInstance=function(n,e){var t=f.instances[s];(e&&t!==n||!e&&t===n)&&(f.instances[s]=e)},(i.hook||(i.hook={})).prepatch=function(n,e){f.instances[s]=e.componentInstance},i.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==f.instances[s]&&(f.instances[s]=n.componentInstance),vi(c)};var y=f.props&&f.props[s];return y&&(ei(l[s],{route:c,configProps:y}),wi(g,i,c,y)),r(g,i,o)}};function wi(n,e,t,o){var a=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,o);if(a){a=e.props=ei({},a);var i=e.attrs=e.attrs||{};for(var r in a)n.props&&r in n.props||(i[r]=a[r],delete a[r])}}function ki(n,e,t){var o=n.charAt(0);if("/"===o)return n;if("?"===o||"#"===o)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var i=n.replace(/^\//,"").split("/"),r=0;r<i.length;r++){var s=i[r];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function xi(n){return n.replace(/\/(?:\s*\/)+/g,"/")}var Ti=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},_i=Ui,Ci=ji,Ei=function(n,e){return zi(ji(n,e),e)},Si=zi,Ai=Li,Ii=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ji(n,e){for(var t,o=[],a=0,i=0,r="",s=e&&e.delimiter||"/";null!=(t=Ii.exec(n));){var c=t[0],l=t[1],d=t.index;if(r+=n.slice(i,d),i=d+c.length,l)r+=l[1];else{var p=n[i],u=t[2],h=t[3],m=t[4],f=t[5],g=t[6],y=t[7];r&&(o.push(r),r="");var v=null!=u&&null!=p&&p!==u,b="+"===g||"*"===g,w="?"===g||"*"===g,k=t[2]||s,x=m||f;o.push({name:h||a++,prefix:u||"",delimiter:k,optional:w,repeat:b,partial:v,asterisk:!!y,pattern:x?Oi(x):y?".*":"[^"+Mi(k)+"]+?"})}}return i<n.length&&(r+=n.substr(i)),r&&o.push(r),o}function Pi(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function zi(n,e){for(var t=new Array(n.length),o=0;o<n.length;o++)"object"==typeof n[o]&&(t[o]=new RegExp("^(?:"+n[o].pattern+")$",Bi(e)));return function(e,o){for(var a="",i=e||{},r=(o||{}).pretty?Pi:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,d=i[c.name];if(null==d){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Ti(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(l=r(d[p]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");a+=(0===p?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):r(d),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function Mi(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Oi(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function $i(n,e){return n.keys=e,n}function Bi(n){return n&&n.sensitive?"":"i"}function Li(n,e,t){Ti(e)||(t=e||t,e=[]);for(var o=(t=t||{}).strict,a=!1!==t.end,i="",r=0;r<n.length;r++){var s=n[r];if("string"==typeof s)i+=Mi(s);else{var c=Mi(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),i+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var d=Mi(t.delimiter||"/"),p=i.slice(-d.length)===d;return o||(i=(p?i.slice(0,-d.length):i)+"(?:"+d+"(?=$))?"),i+=a?"$":o&&p?"":"(?="+d+"|$)",$i(new RegExp("^"+i,Bi(t)),e)}function Ui(n,e,t){return Ti(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var o=0;o<t.length;o++)e.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return $i(n,e)}(n,e):Ti(n)?function(n,e,t){for(var o=[],a=0;a<n.length;a++)o.push(Ui(n[a],e,t).source);return $i(new RegExp("(?:"+o.join("|")+")",Bi(t)),e)}(n,e,t):function(n,e,t){return Li(ji(n,t),e,t)}(n,e,t)}_i.parse=Ci,_i.compile=Ei,_i.tokensToFunction=Si,_i.tokensToRegExp=Ai;var Di=Object.create(null);function Wi(n,e,t){e=e||{};try{var o=Di[n]||(Di[n]=_i.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),o(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function Ri(n,e,t,o){var a="string"==typeof n?{path:n}:n;if(a._normalized)return a;if(a.name){var i=(a=ei({},n)).params;return i&&"object"==typeof i&&(a.params=ei({},i)),a}if(!a.path&&a.params&&e){(a=ei({},a))._normalized=!0;var r=ei(ei({},e.params),a.params);if(e.name)a.name=e.name,a.params=r;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;a.path=Wi(s,r,e.path)}else 0;return a}var c=function(n){var e="",t="",o=n.indexOf("#");o>=0&&(e=n.slice(o),n=n.slice(0,o));var a=n.indexOf("?");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{path:n,query:t,hash:e}}(a.path||""),l=e&&e.path||"/",d=c.path?ki(c.path,l,t||a.append):l,p=function(n,e,t){void 0===e&&(e={});var o,a=t||ci;try{o=a(n||"")}catch(n){o={}}for(var i in e){var r=e[i];o[i]=Array.isArray(r)?r.map(si):si(r)}return o}(c.query,a.query,o&&o.options.parseQuery),u=a.hash||c.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:d,query:p,hash:u}}var Ni,Gi=function(){},Hi={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,o=this.$route,a=t.resolve(this.to,o,this.append),i=a.location,r=a.route,s=a.href,c={},l=t.options.linkActiveClass,d=t.options.linkExactActiveClass,p=null==l?"router-link-active":l,u=null==d?"router-link-exact-active":d,h=null==this.activeClass?p:this.activeClass,m=null==this.exactActiveClass?u:this.exactActiveClass,f=r.redirectedFrom?pi(null,Ri(r.redirectedFrom),null,t):r;c[m]=gi(o,f,this.exactPath),c[h]=this.exact||this.exactPath?c[m]:function(n,e){return 0===n.path.replace(di,"/").indexOf(e.path.replace(di,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(o,f);var g=c[m]?this.ariaCurrentValue:null,y=function(n){Fi(n)&&(e.replace?t.replace(i,Gi):t.push(i,Gi))},v={click:Fi};Array.isArray(this.event)?this.event.forEach((function(n){v[n]=y})):v[this.event]=y;var b={class:c},w=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:r,navigate:y,isActive:c[h],isExactActive:c[m]});if(w){if(1===w.length)return w[0];if(w.length>1||!w.length)return 0===w.length?n():n("span",{},w)}if("a"===this.tag)b.on=v,b.attrs={href:s,"aria-current":g};else{var k=function n(e){var t;if(e)for(var o=0;o<e.length;o++){if("a"===(t=e[o]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(k){k.isStatic=!1;var x=k.data=ei({},k.data);for(var T in x.on=x.on||{},x.on){var _=x.on[T];T in v&&(x.on[T]=Array.isArray(_)?_:[_])}for(var C in v)C in x.on?x.on[C].push(v[C]):x.on[C]=y;var E=k.data.attrs=ei({},k.data.attrs);E.href=s,E["aria-current"]=g}else b.on=v}return n(this.tag,b,this.$slots.default)}};function Fi(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var qi="undefined"!=typeof window;function Vi(n,e,t,o,a){var i=e||[],r=t||Object.create(null),s=o||Object.create(null);n.forEach((function(n){!function n(e,t,o,a,i,r){var s=a.path,c=a.name;0;var l=a.pathToRegexpOptions||{},d=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return xi(e.path+"/"+n)}(s,i,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var p={path:d,regex:Xi(d,l),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:c,parent:i,matchAs:r,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&a.children.forEach((function(a){var i=r?xi(r+"/"+a.path):void 0;n(e,t,o,a,p,i)}));t[p.path]||(e.push(p.path),t[p.path]=p);if(void 0!==a.alias)for(var u=Array.isArray(a.alias)?a.alias:[a.alias],h=0;h<u.length;++h){0;var m={path:u[h],children:a.children};n(e,t,o,m,i,p.path||"/")}c&&(o[c]||(o[c]=p))}(i,r,s,n,a)}));for(var c=0,l=i.length;c<l;c++)"*"===i[c]&&(i.push(i.splice(c,1)[0]),l--,c--);return{pathList:i,pathMap:r,nameMap:s}}function Xi(n,e){return _i(n,[],e)}function Ki(n,e){var t=Vi(n),o=t.pathList,a=t.pathMap,i=t.nameMap;function r(n,t,r){var s=Ri(n,t,!1,e),l=s.name;if(l){var d=i[l];if(!d)return c(null,s);var p=d.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var u in t.params)!(u in s.params)&&p.indexOf(u)>-1&&(s.params[u]=t.params[u]);return s.path=Wi(d.path,s.params),c(d,s,r)}if(s.path){s.params={};for(var h=0;h<o.length;h++){var m=o[h],f=a[m];if(Zi(f.regex,s.path,s.params))return c(f,s,r)}}return c(null,s)}function s(n,t){var o=n.redirect,a="function"==typeof o?o(pi(n,t,null,e)):o;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return c(null,t);var s=a,l=s.name,d=s.path,p=t.query,u=t.hash,h=t.params;if(p=s.hasOwnProperty("query")?s.query:p,u=s.hasOwnProperty("hash")?s.hash:u,h=s.hasOwnProperty("params")?s.params:h,l){i[l];return r({_normalized:!0,name:l,query:p,hash:u,params:h},void 0,t)}if(d){var m=function(n,e){return ki(n,e.parent?e.parent.path:"/",!0)}(d,n);return r({_normalized:!0,path:Wi(m,h),query:p,hash:u},void 0,t)}return c(null,t)}function c(n,t,o){return n&&n.redirect?s(n,o||t):n&&n.matchAs?function(n,e,t){var o=r({_normalized:!0,path:Wi(t,e.params)});if(o){var a=o.matched,i=a[a.length-1];return e.params=o.params,c(i,e)}return c(null,e)}(0,t,n.matchAs):pi(n,t,o,e)}return{match:r,addRoute:function(n,e){var t="object"!=typeof n?i[n]:void 0;Vi([e||n],o,a,i,t),t&&t.alias.length&&Vi(t.alias.map((function(n){return{path:n,children:[e]}})),o,a,i,t)},getRoutes:function(){return o.map((function(n){return a[n]}))},addRoutes:function(n){Vi(n,o,a,i)}}}function Zi(n,e,t){var o=e.match(n);if(!o)return!1;if(!t)return!0;for(var a=1,i=o.length;a<i;++a){var r=n.keys[a-1];r&&(t[r.name||"pathMatch"]="string"==typeof o[a]?ri(o[a]):o[a])}return!0}var Ji=qi&&window.performance&&window.performance.now?window.performance:Date;function Yi(){return Ji.now().toFixed(3)}var Qi=Yi();function nr(){return Qi}function er(n){return Qi=n}var tr=Object.create(null);function or(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=ei({},window.history.state);return t.key=nr(),window.history.replaceState(t,"",e),window.addEventListener("popstate",rr),function(){window.removeEventListener("popstate",rr)}}function ar(n,e,t,o){if(n.app){var a=n.options.scrollBehavior;a&&n.app.$nextTick((function(){var i=function(){var n=nr();if(n)return tr[n]}(),r=a.call(n,e,t,o?i:null);r&&("function"==typeof r.then?r.then((function(n){pr(n,i)})).catch((function(n){0})):pr(r,i))}))}}function ir(){var n=nr();n&&(tr[n]={x:window.pageXOffset,y:window.pageYOffset})}function rr(n){ir(),n.state&&n.state.key&&er(n.state.key)}function sr(n){return lr(n.x)||lr(n.y)}function cr(n){return{x:lr(n.x)?n.x:window.pageXOffset,y:lr(n.y)?n.y:window.pageYOffset}}function lr(n){return"number"==typeof n}var dr=/^#\d/;function pr(n,e){var t,o="object"==typeof n;if(o&&"string"==typeof n.selector){var a=dr.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(a){var i=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),o=n.getBoundingClientRect();return{x:o.left-t.left-e.x,y:o.top-t.top-e.y}}(a,i={x:lr((t=i).x)?t.x:0,y:lr(t.y)?t.y:0})}else sr(n)&&(e=cr(n))}else o&&sr(n)&&(e=cr(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var ur,hr=qi&&((-1===(ur=window.navigator.userAgent).indexOf("Android 2.")&&-1===ur.indexOf("Android 4.0")||-1===ur.indexOf("Mobile Safari")||-1!==ur.indexOf("Chrome")||-1!==ur.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function mr(n,e){ir();var t=window.history;try{if(e){var o=ei({},t.state);o.key=nr(),t.replaceState(o,"",n)}else t.pushState({key:er(Yi())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function fr(n){mr(n,!0)}function gr(n,e,t){var o=function(a){a>=n.length?t():n[a]?e(n[a],(function(){o(a+1)})):o(a+1)};o(0)}var yr={redirected:2,aborted:4,cancelled:8,duplicated:16};function vr(n,e){return wr(n,e,yr.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return kr.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function br(n,e){return wr(n,e,yr.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function wr(n,e,t,o){var a=new Error(o);return a._isRouter=!0,a.from=n,a.to=e,a.type=t,a}var kr=["params","query","hash"];function xr(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function Tr(n,e){return xr(n)&&n._isRouter&&(null==e||n.type===e)}function _r(n){return function(e,t,o){var a=!1,i=0,r=null;Cr(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){a=!0,i++;var c,l=Ar((function(e){var a;((a=e).__esModule||Sr&&"Module"===a[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:Ni.extend(e),t.components[s]=e,--i<=0&&o()})),d=Ar((function(n){var e="Failed to resolve async component "+s+": "+n;r||(r=xr(n)?n:new Error(e),o(r))}));try{c=n(l,d)}catch(n){d(n)}if(c)if("function"==typeof c.then)c.then(l,d);else{var p=c.component;p&&"function"==typeof p.then&&p.then(l,d)}}})),a||o()}}function Cr(n,e){return Er(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function Er(n){return Array.prototype.concat.apply([],n)}var Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Ar(n){var e=!1;return function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];if(!e)return e=!0,n.apply(this,t)}}var Ir=function(n,e){this.router=n,this.base=function(n){if(!n)if(qi){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=hi,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function jr(n,e,t,o){var a=Cr(n,(function(n,o,a,i){var r=function(n,e){"function"!=typeof n&&(n=Ni.extend(n));return n.options[e]}(n,e);if(r)return Array.isArray(r)?r.map((function(n){return t(n,o,a,i)})):t(r,o,a,i)}));return Er(o?a.reverse():a)}function Pr(n,e){if(e)return function(){return n.apply(e,arguments)}}Ir.prototype.listen=function(n){this.cb=n},Ir.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},Ir.prototype.onError=function(n){this.errorCbs.push(n)},Ir.prototype.transitionTo=function(n,e,t){var o,a=this;try{o=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var i=this.current;this.confirmTransition(o,(function(){a.updateRoute(o),e&&e(o),a.ensureURL(),a.router.afterHooks.forEach((function(n){n&&n(o,i)})),a.ready||(a.ready=!0,a.readyCbs.forEach((function(n){n(o)})))}),(function(n){t&&t(n),n&&!a.ready&&(Tr(n,yr.redirected)&&i===hi||(a.ready=!0,a.readyErrorCbs.forEach((function(e){e(n)}))))}))},Ir.prototype.confirmTransition=function(n,e,t){var o=this,a=this.current;this.pending=n;var i,r,s=function(n){!Tr(n)&&xr(n)&&(o.errorCbs.length?o.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=a.matched.length-1;if(gi(n,a)&&c===l&&n.matched[c]===a.matched[l])return this.ensureURL(),n.hash&&ar(this.router,a,n,!1),s(((r=wr(i=a,n,yr.duplicated,'Avoided redundant navigation to current location: "'+i.fullPath+'".')).name="NavigationDuplicated",r));var d=function(n,e){var t,o=Math.max(n.length,e.length);for(t=0;t<o&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),p=d.updated,u=d.deactivated,h=d.activated,m=[].concat(function(n){return jr(n,"beforeRouteLeave",Pr,!0)}(u),this.router.beforeHooks,function(n){return jr(n,"beforeRouteUpdate",Pr)}(p),h.map((function(n){return n.beforeEnter})),_r(h)),f=function(e,t){if(o.pending!==n)return s(br(a,n));try{e(n,a,(function(e){!1===e?(o.ensureURL(!0),s(function(n,e){return wr(n,e,yr.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(a,n))):xr(e)?(o.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(vr(a,n)),"object"==typeof e&&e.replace?o.replace(e):o.push(e)):t(e)}))}catch(n){s(n)}};gr(m,f,(function(){gr(function(n){return jr(n,"beforeRouteEnter",(function(n,e,t,o){return function(n,e,t){return function(o,a,i){return n(o,a,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),i(n)}))}}(n,t,o)}))}(h).concat(o.router.resolveHooks),f,(function(){if(o.pending!==n)return s(br(a,n));o.pending=null,e(n),o.router.app&&o.router.app.$nextTick((function(){vi(n)}))}))}))},Ir.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},Ir.prototype.setupListeners=function(){},Ir.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=hi,this.pending=null};var zr=function(n){function e(e,t){n.call(this,e,t),this._startLocation=Mr(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,o=hr&&t;o&&this.listeners.push(or());var a=function(){var t=n.current,a=Mr(n.base);n.current===hi&&a===n._startLocation||n.transitionTo(a,(function(n){o&&ar(e,n,t,!0)}))};window.addEventListener("popstate",a),this.listeners.push((function(){window.removeEventListener("popstate",a)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var o=this,a=this.current;this.transitionTo(n,(function(n){mr(xi(o.base+n.fullPath)),ar(o.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var o=this,a=this.current;this.transitionTo(n,(function(n){fr(xi(o.base+n.fullPath)),ar(o.router,n,a,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(Mr(this.base)!==this.current.fullPath){var e=xi(this.base+this.current.fullPath);n?mr(e):fr(e)}},e.prototype.getCurrentLocation=function(){return Mr(this.base)},e}(Ir);function Mr(n){var e=window.location.pathname,t=e.toLowerCase(),o=n.toLowerCase();return!n||t!==o&&0!==t.indexOf(xi(o+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var Or=function(n){function e(e,t,o){n.call(this,e,t),o&&function(n){var e=Mr(n);if(!/^\/#/.test(e))return window.location.replace(xi(n+"/#"+e)),!0}(this.base)||$r()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=hr&&e;t&&this.listeners.push(or());var o=function(){var e=n.current;$r()&&n.transitionTo(Br(),(function(o){t&&ar(n.router,o,e,!0),hr||Dr(o.fullPath)}))},a=hr?"popstate":"hashchange";window.addEventListener(a,o),this.listeners.push((function(){window.removeEventListener(a,o)}))}},e.prototype.push=function(n,e,t){var o=this,a=this.current;this.transitionTo(n,(function(n){Ur(n.fullPath),ar(o.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var o=this,a=this.current;this.transitionTo(n,(function(n){Dr(n.fullPath),ar(o.router,n,a,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;Br()!==e&&(n?Ur(e):Dr(e))},e.prototype.getCurrentLocation=function(){return Br()},e}(Ir);function $r(){var n=Br();return"/"===n.charAt(0)||(Dr("/"+n),!1)}function Br(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function Lr(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function Ur(n){hr?mr(Lr(n)):window.location.hash=n}function Dr(n){hr?fr(Lr(n)):window.location.replace(Lr(n))}var Wr=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var o=this;this.transitionTo(n,(function(n){o.stack=o.stack.slice(0,o.index+1).concat(n),o.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var o=this;this.transitionTo(n,(function(n){o.stack=o.stack.slice(0,o.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var o=this.stack[t];this.confirmTransition(o,(function(){var n=e.current;e.index=t,e.updateRoute(o),e.router.afterHooks.forEach((function(e){e&&e(o,n)}))}),(function(n){Tr(n,yr.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Ir),Rr=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Ki(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!hr&&!1!==n.fallback,this.fallback&&(e="hash"),qi||(e="abstract"),this.mode=e,e){case"history":this.history=new zr(this,n.base);break;case"hash":this.history=new Or(this,n.base,this.fallback);break;case"abstract":this.history=new Wr(this,n.base);break;default:0}},Nr={currentRoute:{configurable:!0}};function Gr(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}Rr.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Nr.currentRoute.get=function(){return this.history&&this.history.current},Rr.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof zr||t instanceof Or){var o=function(n){t.setupListeners(),function(n){var o=t.current,a=e.options.scrollBehavior;hr&&a&&"fullPath"in n&&ar(e,n,o,!1)}(n)};t.transitionTo(t.getCurrentLocation(),o,o)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},Rr.prototype.beforeEach=function(n){return Gr(this.beforeHooks,n)},Rr.prototype.beforeResolve=function(n){return Gr(this.resolveHooks,n)},Rr.prototype.afterEach=function(n){return Gr(this.afterHooks,n)},Rr.prototype.onReady=function(n,e){this.history.onReady(n,e)},Rr.prototype.onError=function(n){this.history.onError(n)},Rr.prototype.push=function(n,e,t){var o=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){o.history.push(n,e,t)}));this.history.push(n,e,t)},Rr.prototype.replace=function(n,e,t){var o=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){o.history.replace(n,e,t)}));this.history.replace(n,e,t)},Rr.prototype.go=function(n){this.history.go(n)},Rr.prototype.back=function(){this.go(-1)},Rr.prototype.forward=function(){this.go(1)},Rr.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},Rr.prototype.resolve=function(n,e,t){var o=Ri(n,e=e||this.history.current,t,this),a=this.match(o,e),i=a.redirectedFrom||a.fullPath;return{location:o,route:a,href:function(n,e,t){var o="hash"===t?"#"+e:e;return n?xi(n+"/"+o):o}(this.history.base,i,this.mode),normalizedTo:o,resolved:a}},Rr.prototype.getRoutes=function(){return this.matcher.getRoutes()},Rr.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==hi&&this.history.transitionTo(this.history.getCurrentLocation())},Rr.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==hi&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Rr.prototype,Nr),Rr.install=function n(e){if(!n.installed||Ni!==e){n.installed=!0,Ni=e;var t=function(n){return void 0!==n},o=function(n,e){var o=n.$options._parentVnode;t(o)&&t(o=o.data)&&t(o=o.registerRouteInstance)&&o(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,o(this,this)},destroyed:function(){o(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",bi),e.component("RouterLink",Hi);var a=e.config.optionMergeStrategies;a.beforeRouteEnter=a.beforeRouteLeave=a.beforeRouteUpdate=a.created}},Rr.version="3.5.4",Rr.isNavigationFailure=Tr,Rr.NavigationFailureType=yr,Rr.START_LOCATION=hi,qi&&window.Vue&&window.Vue.use(Rr);var Hr=Rr;t(96);t(124);var Fr={NotFound:()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,313)),Layout:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,312))},qr={"v-59ee63fe":()=>t.e(7).then(t.bind(null,314)),"v-77c5ce9c":()=>t.e(8).then(t.bind(null,315)),"v-6a22f932":()=>t.e(9).then(t.bind(null,316)),"v-455f0d94":()=>t.e(10).then(t.bind(null,317)),"v-3dac3e03":()=>t.e(11).then(t.bind(null,318)),"v-15a9f55e":()=>t.e(12).then(t.bind(null,319)),"v-72b8a039":()=>t.e(13).then(t.bind(null,320)),"v-7d704a16":()=>t.e(14).then(t.bind(null,321)),"v-18a6fca4":()=>t.e(15).then(t.bind(null,322)),"v-1dc56f77":()=>t.e(16).then(t.bind(null,323)),"v-3ce102e1":()=>t.e(17).then(t.bind(null,324)),"v-3d087b67":()=>t.e(18).then(t.bind(null,325)),"v-e0ad2bb2":()=>t.e(19).then(t.bind(null,326)),"v-973514f8":()=>t.e(20).then(t.bind(null,327)),"v-2c9acafa":()=>t.e(21).then(t.bind(null,328)),"v-5d10c0ed":()=>t.e(22).then(t.bind(null,329)),"v-50562bab":()=>t.e(23).then(t.bind(null,330)),"v-640dd7dc":()=>t.e(24).then(t.bind(null,331)),"v-17cedb24":()=>t.e(25).then(t.bind(null,332)),"v-58f5998e":()=>t.e(26).then(t.bind(null,333)),"v-4ed835a8":()=>t.e(27).then(t.bind(null,334)),"v-3bf5446e":()=>t.e(28).then(t.bind(null,335)),"v-49b0f2aa":()=>t.e(29).then(t.bind(null,336)),"v-3bddb7a2":()=>t.e(30).then(t.bind(null,337)),"v-fdfe0ef0":()=>t.e(31).then(t.bind(null,338)),"v-075f2a06":()=>t.e(32).then(t.bind(null,339)),"v-0d66cacc":()=>t.e(33).then(t.bind(null,340)),"v-0cd550e5":()=>t.e(34).then(t.bind(null,341)),"v-4d16eb48":()=>t.e(35).then(t.bind(null,342)),"v-708b622a":()=>t.e(36).then(t.bind(null,343)),"v-8d136732":()=>t.e(37).then(t.bind(null,344)),"v-96f85bb2":()=>t.e(38).then(t.bind(null,345)),"v-5b320bc2":()=>t.e(39).then(t.bind(null,346)),"v-4ec77c26":()=>t.e(6).then(t.bind(null,347)),"v-36c869aa":()=>t.e(40).then(t.bind(null,348)),"v-7d4c8dc4":()=>Promise.all([t.e(0),t.e(5)]).then(t.bind(null,349))};function Vr(n){const e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}const Xr=/-(\w)/g,Kr=Vr(n=>n.replace(Xr,(n,e)=>e?e.toUpperCase():"")),Zr=/\B([A-Z])/g,Jr=Vr(n=>n.replace(Zr,"-$1").toLowerCase()),Yr=Vr(n=>n.charAt(0).toUpperCase()+n.slice(1));function Qr(n,e){if(!e)return;if(n(e))return n(e);return e.includes("-")?n(Yr(Kr(e))):n(Yr(e))||n(Jr(e))}const ns=Object.assign({},Fr,qr),es=n=>ns[n],ts=n=>qr[n],os=n=>Fr[n],as=n=>Ft.component(n);function is(n){return Qr(ts,n)}function rs(n){return Qr(os,n)}function ss(n){return Qr(es,n)}function cs(n){return Qr(as,n)}function ls(...n){return Promise.all(n.filter(n=>n).map(async n=>{if(!cs(n)&&ss(n)){const e=await ss(n)();Ft.component(n,e.default)}}))}function ds(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var ps=t(90),us=t.n(ps),hs=t(91),ms=t.n(hs),fs={created(){if(this.siteMeta=this.$site.headTags.filter(([n])=>"meta"===n).map(([n,e])=>e),this.$ssrContext){const e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map(n=>{let e="<meta";return Object.keys(n).forEach(t=>{e+=` ${t}="${ms()(n[t])}"`}),e+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=ys(this.$canonicalUrl)}var n},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const n=this.getMergedMetaTags();this.currentMetaTags=vs(n,this.currentMetaTags)},getMergedMetaTags(){const n=this.$page.frontmatter.meta||[];return us()([{name:"description",content:this.$description}],n,this.siteMeta,bs)},updateCanonicalLink(){gs(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",ys(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){vs(null,this.currentMetaTags),gs()}};function gs(){const n=document.querySelector("link[rel='canonical']");n&&n.remove()}function ys(n=""){return n?`<link href="${n}" rel="canonical" />`:""}function vs(n,e){if(e&&[...e].filter(n=>n.parentNode===document.head).forEach(n=>document.head.removeChild(n)),n)return n.map(n=>{const e=document.createElement("meta");return Object.keys(n).forEach(t=>{e.setAttribute(t,n[t])}),document.head.appendChild(e),e})}function bs(n){for(const e of["name","property","itemprop"])if(n.hasOwnProperty(e))return n[e]+e;return JSON.stringify(n)}var ws=t(43),ks={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(ws)()((function(){this.setActiveHash()}),300),setActiveHash(){const n=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter(e=>n.some(n=>n.hash===e.hash)),t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=window.innerHeight+t;for(let n=0;n<e.length;n++){const i=e[n],r=e[n+1],s=0===n&&0===t||t>=i.parentElement.offsetTop+10&&(!r||t<r.parentElement.offsetTop-10),c=decodeURIComponent(this.$route.hash);if(s&&c!==decodeURIComponent(i.hash)){const t=i;if(a===o)for(let t=n+1;t<e.length;t++)if(c===decodeURIComponent(e[t].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(t.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},xs=t(23),Ts=t.n(xs),_s={mounted(){Ts.a.configure({showSpinner:!1}),this.$router.beforeEach((n,e,t)=>{n.path===e.path||Ft.component(n.name)||Ts.a.start(),t()}),this.$router.afterEach(()=>{Ts.a.done(),this.isSidebarOpen=!1})}};t(231),t(232);class Cs{constructor(){this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}show({text:n="",duration:e=3e3}){let t=document.createElement("div");t.className="message move-in",t.innerHTML=`\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">${n}</div>\n    `,this.containerEl.appendChild(t),e>0&&setTimeout(()=>{this.close(t)},e)}close(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",()=>{n.remove()})}}var Es={mounted(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy(){setTimeout(()=>{(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach(n=>{document.querySelectorAll(n).forEach(this.generateCopyButton)})},1e3)},generateCopyButton(n){if(n.classList.contains("codecopy-enabled"))return;const e=document.createElement("i");e.className="code-copy",e.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',e.title="Copy to clipboard",e.addEventListener("click",()=>{this.copyToClipboard(n.innerText)}),n.appendChild(e),n.classList.add("codecopy-enabled")},copyToClipboard(n){const e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy");(new Cs).show({text:"å¤å¶æå",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var Ss={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},As={},Is=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},js=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:Ss[n]},Ps=function n(e,t,o){var a=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))a[n]=t[n];else{var e=n.replace("data","");a.dataset[e]=t[n]}})),o&&o.forEach((function(e){var t=e.tag,o=e.attrs,i=e.children;a.appendChild(n(t,o,i))})),a},zs=function(n,e,t){var o,a=(o=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(o));return 1!==a.length||t?a:a[0]},Ms=function(n,e){var t,o,a=n.match(/<style>([\s\S]+)<\/style>/),i=n.match(/<template>([\s\S]+)<\/template>/),r=n.match(/<script>([\s\S]+)<\/script>/),s={css:a&&a[1].replace(/^\n|\n$/g,""),html:i&&i[1].replace(/^\n|\n$/g,""),js:r&&r[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=Is(s.html),s.jsTpl=(t=s.js,o=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(o,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),o="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),a=window.Babel?window.Babel.transform(o,{presets:["es2015"]}).code:o,i=[eval][0](a);return i.template=e,i}(s.js,s.html);var c=js("vue");return s.jsLib.unshift(c),s},Os=function(n,e){var t,o=n.match(/<style>([\s\S]+)<\/style>/),a=n.match(/<html>([\s\S]+)<\/html>/),i=n.match(/<script>([\s\S]+)<\/script>/),r={css:o&&o[1].replace(/^\n|\n$/g,""),html:a&&a[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return r.htmlTpl=r.html,r.jsTpl=r.js,r.script=(t=r.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),r},$s=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function Bs(){var n=zs(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=zs(n,"vuepress-plugin-demo-block__code"),t=zs(n,"vuepress-plugin-demo-block__display"),o=zs(n,"vuepress-plugin-demo-block__footer"),a=zs(t,"vuepress-plugin-demo-block__app"),i=decodeURIComponent(n.dataset.code),r=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);r=r?JSON.parse(r):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,o="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),a=new Function("return ".concat(o))(),i={js:a,css:a.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:$s(n),htmlTpl:Is("")},r=js("react"),s=js("reactDOM");return i.jsLib.unshift(r,s),i}(i,r):"vanilla"===s?Os(i,r):Ms(i,r),d=Ps("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(o.appendChild(d),d.addEventListener("click",Ls.bind(null,d,c,e,o)),js("jsfiddle")&&o.appendChild(function(n){var e=n.css,t=n.htmlTpl,o=n.jsTpl,a=n.jsLib,i=n.cssLib,r=a.concat(i).concat(js("cssLib")).concat(js("jsLib")).join(",");return Ps("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:o}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:r}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),js("codepen")&&o.appendChild(function(n){var e=n.css,t=n.htmlTpl,o=n.jsTpl,a=n.jsLib,i=n.cssLib,r=JSON.stringify({css:e,html:t,js:o,js_external:a.concat(js("jsLib")).join(";"),css_external:i.concat(js("cssLib")).join(";"),layout:js("codepenLayout"),js_pre_processor:js("codepenJsProcessor"),editors:js("codepenEditors")});return Ps("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:r}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==r.horizontal?r.horizontal:js("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var p=e.firstChild.cloneNode(!0);p.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(p)}if(l.css&&function(n){if(!As[n]){var e=Ps("style",{innerHTML:n});document.body.appendChild(e),As[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),a);else if("vue"===s){var u=(new(Vue.extend(l.script))).$mount();a.appendChild(u.$el)}else"vanilla"===s&&(a.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){Bs()}),300)}function Ls(n,e,t,o){var a="1"!==n.dataset.isExpand;t.style.height=a?"".concat(e,"px"):0,a?o.classList.add("vuepress-plugin-demo-block__show-link"):o.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=a?"1":"0"}var Us={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},Bs()},updated:function(){Bs()}},Ds="auto",Ws="zoom-in",Rs="zoom-out",Ns="grab",Gs="move";function Hs(n,e,t){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={passive:!1};o?n.addEventListener(e,t,a):n.removeEventListener(e,t,a)}function Fs(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function qs(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Vs(n,e,t){!function(n){var e=Xs,t=Ks;if(n.transition){var o=n.transition;delete n.transition,n[e]=o}if(n.transform){var a=n.transform;delete n.transform,n[t]=a}}(e);var o=n.style,a={};for(var i in e)t&&(a[i]=o[i]||""),o[i]=e[i];return a}var Xs="transition",Ks="transform",Zs="transform",Js="transitionend";var Ys=function(){},Qs={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Ys,onClose:Ys,onGrab:Ys,onMove:Ys,onRelease:Ys,onBeforeOpen:Ys,onBeforeClose:Ys,onBeforeGrab:Ys,onBeforeRelease:Ys,onImageLoading:Ys,onImageLoaded:Ys},nc={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),tc(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var o=this.lastScrollPosition.x-e,a=this.lastScrollPosition.y-t,i=this.options.scrollThreshold;(Math.abs(a)>=i||Math.abs(o)>=i)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(ec(n)&&!tc(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){ec(n)&&!tc(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,o=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,o)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,o=e.clientY;this.move(t,o)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function ec(n){return 0===n.button}function tc(n){return n.metaKey||n.ctrlKey}var oc={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Vs(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Hs(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Vs(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ic=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),rc=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},sc={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=qs(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,o=n.transitionDuration,a=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Ns:Rs,transition:Zs+"\n        "+o+"s\n        "+a,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Vs(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Vs(this.el,{transform:"none"})},grab:function(n,e,t){var o=cc(),a=o.x-n,i=o.y-e;Vs(this.el,{cursor:Gs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var o=cc(),a=o.x-n,i=o.y-e;Vs(this.el,{transition:Zs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Vs(this.el,this.styleClose)},restoreOpenStyle:function(){Vs(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=cc(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,o=this.instance.options,a=o.customSize,i=o.scaleBase;if(!a&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(a&&"object"===(void 0===a?"undefined":ac(a)))return{x:a.width/this.rect.width,y:a.height/this.rect.height};var r=this.rect.width/2,s=this.rect.height/2,c=cc(),l={x:c.x-r,y:c.y-s},d=l.x/r,p=l.y/s,u=i+Math.min(d,p);if(a&&"string"==typeof a){var h=t||this.el.naturalWidth,m=e||this.el.naturalHeight,f=parseFloat(a)*h/(100*this.rect.width),g=parseFloat(a)*m/(100*this.rect.height);if(u>f||u>g)return{x:f,y:g}}return{x:u,y:u}}};function cc(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function lc(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(o){Hs(n,o,e[o],t)}))}var dc=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(sc),this.overlay=Object.create(oc),this.handler=Object.create(nc),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=rc({},Qs,e),this.overlay.init(this),this.handler.init(this)}return ic(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=Ws,Hs(n,"click",this.handler.click),this.options.preloadImage&&Fs(qs(n)));return this}},{key:"config",value:function(n){return n?(rc(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var o="string"==typeof n?document.querySelector(n):n;if("IMG"===o.tagName){if(this.options.onBeforeOpen(o),this.target.init(o,this),!this.options.preloadImage){var a=this.target.srcOriginal;null!=a&&(this.options.onImageLoading(o),Fs(a,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Hs(document,"scroll",this.handler.scroll),Hs(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Hs(window,"resize",this.handler.resizeWindow);var i=function n(){Hs(o,Js,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&lc(document,e.handler,!0),t(o)};return Hs(o,Js,i),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=Ds,this.overlay.fadeOut(),this.target.zoomOut(),Hs(document,"scroll",this.handler.scroll,!1),Hs(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Hs(window,"resize",this.handler.resizeWindow,!1);var o=function o(){Hs(t,Js,o,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&lc(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Hs(t,Js,o),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var a=this.target.el;this.options.onBeforeGrab(a),this.released=!1,this.target.grab(n,e,t);var i=function n(){Hs(a,Js,n,!1),o(a)};return Hs(a,Js,i),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Gs,this.target.move(n,e,t);var a=this.target.el,i=function n(){Hs(a,Js,n,!1),o(a)};return Hs(a,Js,i),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=Ds,this.target.restoreOpenStyle();var o=function o(){Hs(t,Js,o,!1),n.lock=!1,n.released=!0,e(t)};return Hs(t,Js,o),this}}}]),n}();const pc=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),uc=Number("500");class hc{constructor(){this.instance=new dc(pc)}update(n=".theme-vdoing-content img:not(.no-zoom)"){"undefined"!=typeof window&&this.instance.listen(n)}updateDelay(n=".theme-vdoing-content img:not(.no-zoom)",e=uc){setTimeout(()=>this.update(n),e)}}var mc=[fs,ks,_s,Es,Us,{watch:{"$page.path"(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted(){this.$vuepress.zooming=new hc,this.$vuepress.zooming.updateDelay()}}],fc={name:"GlobalLayout",computed:{layout(){const n=this.getLayout();return ds("layout",n),Ft.component(n)}},methods:{getLayout(){if(this.$page.path){const n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},gc=t(6),yc=Object(gc.a)(fc,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),n[e].push(...t);break;default:throw new Error("Unknown option name.")}}(yc,"mixins",mc);const vc=[{name:"v-59ee63fe",path:"/pages/a2f161/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-59ee63fe").then(t)}},{path:"/pages/a2f161/index.html",redirect:"/pages/a2f161/"},{path:"/01.æå/01.ETBbook_ä¸­æ/01.ä»ç».html",redirect:"/pages/a2f161/"},{name:"v-77c5ce9c",path:"/pages/52d5c3/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-77c5ce9c").then(t)}},{path:"/pages/52d5c3/index.html",redirect:"/pages/52d5c3/"},{path:"/01.æå/01.ETBbook_ä¸­æ/02.1.1è¿è¡æå.html",redirect:"/pages/52d5c3/"},{name:"v-6a22f932",path:"/pages/ff62ec/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-6a22f932").then(t)}},{path:"/pages/ff62ec/index.html",redirect:"/pages/ff62ec/"},{path:"/01.æå/01.ETBbook_ä¸­æ/03.ç®å½ç»æ.html",redirect:"/pages/ff62ec/"},{name:"v-455f0d94",path:"/pages/f62a4d/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-455f0d94").then(t)}},{path:"/pages/f62a4d/index.html",redirect:"/pages/f62a4d/"},{path:"/01.æå/01.ETBbook_ä¸­æ/12.1.2ä¸ºä»ä¹ä½¿ç¨.net core.html",redirect:"/pages/f62a4d/"},{name:"v-3dac3e03",path:"/pages/500d39/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-3dac3e03").then(t)}},{path:"/pages/500d39/index.html",redirect:"/pages/500d39/"},{path:"/01.æå/01.ETBbook_ä¸­æ/21.2.1CSharpçåç¨.html",redirect:"/pages/500d39/"},{name:"v-15a9f55e",path:"/pages/0f0a88/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-15a9f55e").then(t)}},{path:"/pages/0f0a88/index.html",redirect:"/pages/0f0a88/"},{path:"/01.æå/01.ETBbook_ä¸­æ/22.2.2æ´å¥½çåç¨.html",redirect:"/pages/0f0a88/"},{name:"v-72b8a039",path:"/pages/d3ef38/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-72b8a039").then(t)}},{path:"/pages/d3ef38/index.html",redirect:"/pages/d3ef38/"},{path:"/01.æå/01.ETBbook_ä¸­æ/23.2.3åçº¿ç¨å¼æ­¥.html",redirect:"/pages/d3ef38/"},{name:"v-7d704a16",path:"/pages/037ea6/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-7d704a16").then(t)}},{path:"/pages/037ea6/index.html",redirect:"/pages/037ea6/"},{path:"/01.æå/01.ETBbook_ä¸­æ/32.3.2å¼ºå¤§çMongoBsonåº.html",redirect:"/pages/037ea6/"},{name:"v-18a6fca4",path:"/pages/81bdb3/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-18a6fca4").then(t)}},{path:"/pages/81bdb3/index.html",redirect:"/pages/81bdb3/"},{path:"/01.æå/01.ETBbook_ä¸­æ/33.3.3ä¸åçç»ä»¶.html",redirect:"/pages/81bdb3/"},{name:"v-1dc56f77",path:"/pages/c77b6a/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-1dc56f77").then(t)}},{path:"/pages/c77b6a/index.html",redirect:"/pages/c77b6a/"},{path:"/01.æå/01.ETBbook_ä¸­æ/34.3.3ä¸åçå®ä½.html",redirect:"/pages/c77b6a/"},{name:"v-3ce102e1",path:"/pages/e49330/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-3ce102e1").then(t)}},{path:"/pages/e49330/index.html",redirect:"/pages/e49330/"},{path:"/01.æå/01.ETBbook_ä¸­æ/35.3.4äºä»¶æºå¶EventSystem.html",redirect:"/pages/e49330/"},{name:"v-3d087b67",path:"/pages/002c9b/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-3d087b67").then(t)}},{path:"/pages/002c9b/index.html",redirect:"/pages/002c9b/"},{path:"/01.æå/01.ETBbook_ä¸­æ/41.4.1ç»ä»¶å¼è®¾è®¡.html",redirect:"/pages/002c9b/"},{name:"v-e0ad2bb2",path:"/pages/96869e/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-e0ad2bb2").then(t)}},{path:"/pages/96869e/index.html",redirect:"/pages/96869e/"},{path:"/01.æå/01.ETBbook_ä¸­æ/54.5.4Actoræ¨¡å.html",redirect:"/pages/96869e/"},{name:"v-973514f8",path:"/pages/9f7296/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-973514f8").then(t)}},{path:"/pages/9f7296/index.html",redirect:"/pages/9f7296/"},{path:"/01.æå/01.ETBbook_ä¸­æ/55.5.5Actor Location-ZH.html",redirect:"/pages/9f7296/"},{name:"v-2c9acafa",path:"/pages/1dc51a/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-2c9acafa").then(t)}},{path:"/pages/1dc51a/index.html",redirect:"/pages/1dc51a/"},{path:"/01.æå/01.ETBbook_ä¸­æ/56.5.6æ°å¼ç»ä»¶è®¾è®¡.html",redirect:"/pages/1dc51a/"},{name:"v-5d10c0ed",path:"/pages/d9bb29/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-5d10c0ed").then(t)}},{path:"/pages/d9bb29/index.html",redirect:"/pages/d9bb29/"},{path:"/01.æå/01.ETBbook_ä¸­æ/61.6.1AIæ¡æ¶.html",redirect:"/pages/d9bb29/"},{name:"v-50562bab",path:"/pages/1e1b9a/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-50562bab").then(t)}},{path:"/pages/1e1b9a/index.html",redirect:"/pages/1e1b9a/"},{path:"/02.Guide/01.ETBook_English/02.1.1RunGuide.html",redirect:"/pages/1e1b9a/"},{name:"v-640dd7dc",path:"/pages/f9f601/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-640dd7dc").then(t)}},{path:"/pages/f9f601/index.html",redirect:"/pages/f9f601/"},{path:"/02.Guide/01.ETBook_English/12.1.2Why use .net core.html",redirect:"/pages/f9f601/"},{name:"v-17cedb24",path:"/pages/97d2cf/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-17cedb24").then(t)}},{path:"/pages/97d2cf/index.html",redirect:"/pages/97d2cf/"},{path:"/02.Guide/01.ETBook_English/21.2.1CSharp Coroutine.html",redirect:"/pages/97d2cf/"},{name:"v-58f5998e",path:"/pages/e03bce/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-58f5998e").then(t)}},{path:"/pages/e03bce/index.html",redirect:"/pages/e03bce/"},{path:"/02.Guide/01.ETBook_English/22.2.2Better Coroutine.html",redirect:"/pages/e03bce/"},{name:"v-4ed835a8",path:"/pages/735741/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-4ed835a8").then(t)}},{path:"/pages/735741/index.html",redirect:"/pages/735741/"},{path:"/02.Guide/01.ETBook_English/23.2.3Single-threaded asynchronous.html",redirect:"/pages/735741/"},{name:"v-3bf5446e",path:"/pages/947d76/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-3bf5446e").then(t)}},{path:"/pages/947d76/index.html",redirect:"/pages/947d76/"},{path:"/02.Guide/01.ETBook_English/32.3.2The powerful MongoBson library.html",redirect:"/pages/947d76/"},{name:"v-49b0f2aa",path:"/pages/b631b2/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-49b0f2aa").then(t)}},{path:"/pages/b631b2/index.html",redirect:"/pages/b631b2/"},{path:"/02.Guide/01.ETBook_English/33.3.3Everything is Entity.html",redirect:"/pages/b631b2/"},{name:"v-3bddb7a2",path:"/pages/53296b/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-3bddb7a2").then(t)}},{path:"/pages/53296b/index.html",redirect:"/pages/53296b/"},{path:"/02.Guide/01.ETBook_English/35.3.4EventSystem.html",redirect:"/pages/53296b/"},{name:"v-fdfe0ef0",path:"/pages/66fec6/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-fdfe0ef0").then(t)}},{path:"/pages/66fec6/index.html",redirect:"/pages/66fec6/"},{path:"/02.Guide/01.ETBook_English/41.4.1Component-based design.html",redirect:"/pages/66fec6/"},{name:"v-075f2a06",path:"/pages/a3279e/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-075f2a06").then(t)}},{path:"/pages/a3279e/index.html",redirect:"/pages/a3279e/"},{path:"/02.Guide/01.ETBook_English/54.5.4Actor Model.html",redirect:"/pages/a3279e/"},{name:"v-0d66cacc",path:"/pages/d00821/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-0d66cacc").then(t)}},{path:"/pages/d00821/index.html",redirect:"/pages/d00821/"},{path:"/02.Guide/01.ETBook_English/55.5.5Actor Location-EN.html",redirect:"/pages/d00821/"},{name:"v-0cd550e5",path:"/pages/ae8fe0/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-0cd550e5").then(t)}},{path:"/pages/ae8fe0/index.html",redirect:"/pages/ae8fe0/"},{path:"/02.Guide/01.ETBook_English/56.5.6Numerical component design.html",redirect:"/pages/ae8fe0/"},{name:"v-4d16eb48",path:"/pages/58cf5c/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-4d16eb48").then(t)}},{path:"/pages/58cf5c/index.html",redirect:"/pages/58cf5c/"},{path:"/02.Guide/01.ETBook_English/61.6.1.AI Framwork.html",redirect:"/pages/58cf5c/"},{name:"v-708b622a",path:"/pages/b70448/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-708b622a").then(t)}},{path:"/pages/b70448/index.html",redirect:"/pages/b70448/"},{path:"/02.Guide/01.ETBook_English/98.test2.html",redirect:"/pages/b70448/"},{name:"v-8d136732",path:"/pages/578b97/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-8d136732").then(t)}},{path:"/pages/578b97/index.html",redirect:"/pages/578b97/"},{path:"/02.Guide/01.ETBook_English/99.test.html",redirect:"/pages/578b97/"},{name:"v-96f85bb2",path:"/doc/todo/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-96f85bb2").then(t)}},{path:"/doc/todo/index.html",redirect:"/doc/todo/"},{path:"/30.ææ¡£/01.Todo.html",redirect:"/doc/todo/"},{name:"v-5b320bc2",path:"/doc/todo_en/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-5b320bc2").then(t)}},{path:"/doc/todo_en/index.html",redirect:"/doc/todo_en/"},{path:"/31.Doc/01.Todo.html",redirect:"/doc/todo_en/"},{name:"v-4ec77c26",path:"/doc/notes/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-4ec77c26").then(t)}},{path:"/doc/notes/index.html",redirect:"/doc/notes/"},{path:"/99.ææ¡£ç¼å/01.ææ¡£ä»åºæäº¤è¯´æ.html",redirect:"/doc/notes/"},{name:"v-36c869aa",path:"/blog/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-36c869aa").then(t)}},{path:"/blog/index.html",redirect:"/blog/"},{path:"/@pages/archivesPage.html",redirect:"/blog/"},{name:"v-7d4c8dc4",path:"/",component:yc,beforeEnter:(n,e,t)=>{ls("Layout","v-7d4c8dc4").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:yc}],bc={title:"ET",description:"ETæ¯ä¸ä¸ªå¼æºçæ¸¸æå®¢æ·ç«¯åºäºãunity3dãæå¡ç«¯åç«¯æ¡æ¶",base:"/",headTags:[["link",{rel:"icon",href:"/img/logo1.png"}],["meta",{name:"keywords",content:"ET,et,game,framework,ECS,Server"}],["meta",{name:"theme-color",content:"#11a8cd"}]],pages:[{title:"ä»ç»",frontmatter:{title:"ä»ç»",date:"2020-05-11T13:54:03.000Z",permalink:"/pages/a2f161",article:!1},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/01.%E4%BB%8B%E7%BB%8D.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/01.ä»ç».md",key:"v-59ee63fe",path:"/pages/a2f161/",headers:[{level:3,title:"1.å¯ç¨VSåæ­¥è°è¯çåå¸å¼æå¡ç«¯ï¼Nå1",slug:"_1-å¯ç¨vsåæ­¥è°è¯çåå¸å¼æå¡ç«¯-nå1",normalizedTitle:"1.å¯ç¨vsåæ­¥è°è¯çåå¸å¼æå¡ç«¯ï¼nå1",charIndex:1521},{level:3,title:"2.éæå¯æååè½çåå¸å¼æå¡ç«¯ï¼1åN",slug:"_2-éæå¯æååè½çåå¸å¼æå¡ç«¯-1ån",normalizedTitle:"2.éæå¯æååè½çåå¸å¼æå¡ç«¯ï¼1ån",charIndex:1973},{level:3,title:"3.è·¨å¹³å°çåå¸å¼æå¡ç«¯",slug:"_3-è·¨å¹³å°çåå¸å¼æå¡ç«¯",normalizedTitle:"3.è·¨å¹³å°çåå¸å¼æå¡ç«¯",charIndex:2343},{level:3,title:"4.æä¾åç¨æ¯æ",slug:"_4-æä¾åç¨æ¯æ",normalizedTitle:"4.æä¾åç¨æ¯æ",charIndex:2643},{level:3,title:"5.æä¾ç±»ä¼¼erlangçactoræ¶æ¯æºå¶",slug:"_5-æä¾ç±»ä¼¼erlangçactoræ¶æ¯æºå¶",normalizedTitle:"5.æä¾ç±»ä¼¼erlangçactoræ¶æ¯æºå¶",charIndex:3175},{level:3,title:"6.æä¾æå¡å¨ä¸åæå¨ææ´æ°é»è¾åè½",slug:"_6-æä¾æå¡å¨ä¸åæå¨ææ´æ°é»è¾åè½",normalizedTitle:"6.æä¾æå¡å¨ä¸åæå¨ææ´æ°é»è¾åè½",charIndex:3510},{level:3,title:"7.å®¢æ·ç«¯ä½¿ç¨C#ç­æ´æ°ï¼ç­æ´æ°ä¸é®åæ¢",slug:"_7-å®¢æ·ç«¯ä½¿ç¨c-ç­æ´æ°-ç­æ´æ°ä¸é®åæ¢",normalizedTitle:"7.å®¢æ·ç«¯ä½¿ç¨c#ç­æ´æ°ï¼ç­æ´æ°ä¸é®åæ¢",charIndex:3625},{level:3,title:"8.å®¢æ·ç«¯ç­éè½½",slug:"_8-å®¢æ·ç«¯ç­éè½½",normalizedTitle:"8.å®¢æ·ç«¯ç­éè½½",charIndex:3735},{level:3,title:"9.å®¢æ·ç«¯æå¡ç«¯ç¨åä¸ç§è¯­è¨ï¼å¹¶ä¸å±äº«ä»£ç ",slug:"_9-å®¢æ·ç«¯æå¡ç«¯ç¨åä¸ç§è¯­è¨-å¹¶ä¸å±äº«ä»£ç ",normalizedTitle:"9.å®¢æ·ç«¯æå¡ç«¯ç¨åä¸ç§è¯­è¨ï¼å¹¶ä¸å±äº«ä»£ç ",charIndex:3777},{level:3,title:"10.KCP ENET TCP Websocketåè®®æ ç¼åæ¢",slug:"_10-kcp-enet-tcp-websocketåè®®æ ç¼åæ¢",normalizedTitle:"10.kcp enet tcp websocketåè®®æ ç¼åæ¢",charIndex:3902},{level:3,title:"11. 3D Recastå¯»è·¯åè½",slug:"_11-3d-recastå¯»è·¯åè½",normalizedTitle:"11. 3d recastå¯»è·¯åè½",charIndex:4162},{level:3,title:"12. æå¡ç«¯æ¯æreplï¼ä¹å¯ä»¥å¨ææ§è¡ä¸æ®µæ°ä»£ç ",slug:"_12-æå¡ç«¯æ¯ærepl-ä¹å¯ä»¥å¨ææ§è¡ä¸æ®µæ°ä»£ç ",normalizedTitle:"12. æå¡ç«¯æ¯æreplï¼ä¹å¯ä»¥å¨ææ§è¡ä¸æ®µæ°ä»£ç ",charIndex:4239},{level:3,title:"13.æä¾å®¢æ·ç«¯æºå¨äººæ¡æ¶æ¯æ",slug:"_13-æä¾å®¢æ·ç«¯æºå¨äººæ¡æ¶æ¯æ",normalizedTitle:"13.æä¾å®¢æ·ç«¯æºå¨äººæ¡æ¶æ¯æ",charIndex:4342},{level:3,title:"14.AIæ¡æ¶",slug:"_14-aiæ¡æ¶",normalizedTitle:"14.aiæ¡æ¶",charIndex:4426},{level:3,title:"15.æµè¯ç¨ä¾æ¡æ¶",slug:"_15-æµè¯ç¨ä¾æ¡æ¶",normalizedTitle:"15.æµè¯ç¨ä¾æ¡æ¶",charIndex:4458},{level:3,title:"16.è¿æå¾å¤å¾å¤åè½ï¼æå°±ä¸è¯¦ç»ä»ç»äº",slug:"_16-è¿æå¾å¤å¾å¤åè½-æå°±ä¸è¯¦ç»ä»ç»äº",normalizedTitle:"16.è¿æå¾å¤å¾å¤åè½ï¼æå°±ä¸è¯¦ç»ä»ç»äº",charIndex:4533}],headersStr:"1.å¯ç¨VSåæ­¥è°è¯çåå¸å¼æå¡ç«¯ï¼Nå1 2.éæå¯æååè½çåå¸å¼æå¡ç«¯ï¼1åN 3.è·¨å¹³å°çåå¸å¼æå¡ç«¯ 4.æä¾åç¨æ¯æ 5.æä¾ç±»ä¼¼erlangçactoræ¶æ¯æºå¶ 6.æä¾æå¡å¨ä¸åæå¨ææ´æ°é»è¾åè½ 7.å®¢æ·ç«¯ä½¿ç¨C#ç­æ´æ°ï¼ç­æ´æ°ä¸é®åæ¢ 8.å®¢æ·ç«¯ç­éè½½ 9.å®¢æ·ç«¯æå¡ç«¯ç¨åä¸ç§è¯­è¨ï¼å¹¶ä¸å±äº«ä»£ç  10.KCP ENET TCP Websocketåè®®æ ç¼åæ¢ 11. 3D Recastå¯»è·¯åè½ 12. æå¡ç«¯æ¯æreplï¼ä¹å¯ä»¥å¨ææ§è¡ä¸æ®µæ°ä»£ç  13.æä¾å®¢æ·ç«¯æºå¨äººæ¡æ¶æ¯æ 14.AIæ¡æ¶ 15.æµè¯ç¨ä¾æ¡æ¶ 16.è¿æå¾å¤å¾å¤åè½ï¼æå°±ä¸è¯¦ç»ä»ç»äº",content:'English\n\n\n# è®¨è®ºQQç¾¤ : 474643097\n\n\n# ETè®ºå\n\n\n# ETååº\n\n\n# ET6.0è§é¢æç¨ä¸çº¿\n\n\n# è¿è¡æå\n\néå¤§æ³¨æäºé¡¹\n\n 1. Hotfixè·HotfixViewæ¯çº¯é»è¾çï¼ç±»ä¸­ä¸è¦å¸¦æä»»ä½å­æ®µï¼å¦åç­æ´å°±ä¼ä¸¢å¤±\n 2. ETTaskè·è¦ä¹è°ç¨Coroutineè¦ä¹å°±awaitï¼æå¼VSä¸­çéè¯¯åè¡¨çªå£ï¼æ²¡æä½¿ç¨è¿ä¸¤ç§çä¼æ¥åºé®é¢ï¼è½ç¶æ¢ä¸awaitä¹ä¸Coroutineçè¯è½å¤ç¼è¯éè¿ï¼ä½æ¯ä¼ä¸¢å¤±å¼å¸¸ï¼ååå±é©\n 3. è¯·ä¸è¦ä½¿ç¨ä»»ä½èå½æ°ï¼ç¨é»è¾ååæ¿ä»£\n 4. è¯·ä¸è¦ä½¿ç¨ä»»ä½ç»§æ¿ï¼é¤äºç»§æ¿Entityï¼ç¨ç»ä»¶æ¿ä»£\n\næµè¯!\n\n\n# ET6 åå¸ï¼ET6ç¸æ¯ET5æå·¨å¤§ååï¼å¯ä»¥è¯´æ¯å¤å§åäº¦è²ï¼6.0æ¥æå¦ä¸æäººçç¹ç¹\n\n 1. å®¢æ·ç«¯é»è¾å¨ç­æ´æ°ï¼åºäºILRuntimeï¼ï¼æ²¡æä¸è½æ´çé¨å\n 2. å®¢æ·ç«¯æå¡ç«¯åå¯ç­éè½½ï¼å¼åä¸ç¨éå¯å®¢æ·ç«¯æå¡ç«¯å³å¯ä¿®æ¹é»è¾ä»£ç ï¼å¼åæå¶æ¹ä¾¿\n 3. æºå¨äººæ¡æ¶ï¼ET6çå®¢æ·ç«¯çé»è¾è·è¡¨ç°åç¦»ï¼æºå¨äººç¨åºç´æ¥å±äº«å©ç¨å®¢æ·ç«¯çé»è¾å±ä»£ç ååæµï¼åªéè¦æå°ä»£ç å³å¯ååºæºå¨äººï¼æ¹ä¾¿åæµæå¡ç«¯\n 4. æµè¯ç¨ä¾æ¡æ¶ï¼å©ç¨å®¢æ·ç«¯çé»è¾å±ä»£ç åååæµè¯ï¼æ¯ä¸ªååæµè¯é½æ¯å®æ´çæ¸¸æç¯å¢ï¼æ éåç§æ¶å¿çmock\n 5. AIæ¡æ¶ï¼æ¯è¡ä¸ºæ æ´å æ¹ä¾¿ï¼åAIæ¯åUIè¿ç®å\n 6. æ°çæå¡ç«¯æ¶æï¼æå¶ä¼ç¾\n 7. åå¤ç½kcpç½ç»ï¼æ§è½å¼ºå²ï¼æ­éè½¯è·¯ç±æ¨¡åï¼å¯ä»¥é²åç§ç½ç»æ»å»\n\n\n# ETå¼åçåä¸mmoé¡¹ç®åå¤é£æµæåä¸çº¿\n\n> 64æ ¸128Gåå­çåæåç©çæº1.5Wå¨çº¿ï¼å®éçº¿ä¸ç­åä¸ºäºçæéå¶ä¸ºåæ6000äººåæ¶å¨çº¿ï¼6000äººçè¯cpuæ¶èçº¦ä¸º30%ï¼ã ä¸ºäºå æ è¡å·æ­£å¸¸ï¼çº¿ä¸è·å¾æ¯Debugçï¼å¦æä½¿ç¨Releaseçå¼å¯ä¼åï¼æ§è½è¿è½ç¿»ä¸åï¼è¾¾å°åç©çæº3Wå¨çº¿ï¼ä¸çº¿5ä¸ªææ¥ååç¨³å®ã åå¤é£æµä½¿ç¨äºETæ¡æ¶ä»é¶å¼åï¼ç¨æ¶ä¸¤å¹´ï¼è¿ä¸ªå¼åéåº¦å¯ä»¥è¯´æ äººåºå¶å³ã åå¤é£æµçæåä¸çº¿è¯æäºETå·å¤å¼åä»»ä½å¤§åæ¸¸æçè½åï¼å¼åéåº¦ï¼å¼åæçé½ä»¤äººå¹ä¸ºè§æ­¢ï¼åå¤é£æµä½¿ç¨å°çå®¢æ·ç«¯æå¡å¨ææ¯ï¼\n\n 1.  å¨æå¯æ¬è·åçº¿ï¼æéåéï¼ç¨å®åæ¶\n 2.  åçº¿åçº¿ï¼åçº¿äººæ°è¾å°ä¼æå¤æ¡çº¿åå¹¶ãåçº¿åè½åºæ¬ä¸å¶å®mmoæ¸¸æå¾å°è§å°\n 3.  å®¢æ·ç«¯æå¡ç«¯åºæ¯æ ç¼åæ¢ï¼ä¹å°±æ¯æ ç¼å¤§ä¸çææ¯\n 4.  è·¨æå¯æ¬ï¼è·¨ææåº\n 5.  ååç«¯ä¸ä½åï¼å©ç¨å®¢æ·ç«¯ä»£ç å¼åæå¡å¨åæµæºå¨äººï¼4å°24æ ¸æºå¨è½»æ¾æ¨¡æ1Wäººåä»»å¡\n 6.  åå¤é£æµåç§aiè®¾è®¡ï¼ä½¿ç¨ETçå¨æ°å¼åçaiæ¡æ¶ï¼ä½¿aiå¼åç®åå°è·åuiä¸æ ·ç®å\n 7.  æµè¯ç¨ä¾æ¡æ¶ï¼å¤§é¨åéè¦ç³»ç»ï¼åå¤é£æµé½åäºæµè¯ç¨ä¾ï¼è·å¸é¢ä¸çæµè¯ç¨ä¾ä¸åï¼æ¯ä¸ªåå¤é£æµçæµè¯ç¨ä¾é½æ¯ä¸ä¸ªå®æ´çæ¸¸æç¯å¢ï¼éå¯¹åè®®çº§å«ï¼ä¸éè¦æåç§æ¥å£å»mockãåèµ·æ¥éå¸¸å¿«éã\n 8.  ä¹å®«æ ¼çaoiå®ç°ï¼å¨æè°æ´çè§çç©å®¶ï¼éä½æå¡å¨è´è½½\n 9.  é²æ»å»ï¼åå¤é£æµå¼åäºè½¯è·¯ç±åè½ï¼å³ä½¿æ»å»ä¹åªè½æ»å»å°è½¯è·¯ç±ï¼ä¸æ¦è¢«æ»å»ï¼ç©å®¶å®¢æ·ç«¯åç°å ç§éæ ååºï¼å³å¯å¨æåæ¢å°å¶å®è½¯è·¯ç±ï¼ç¨æ·å ä¹æ æç¥ãæ´ä¸ªè¿ç¨å®¢æ·ç«¯ç½ç»è¿æ¥ä¸æ­å¼ï¼æ°æ®ä¸ä¸¢å¤±ã\n 10. è¿æå¾å¤å¾å¤ï¼è¿éå°±ä¸å°å¦äº\n\n\n# ETçä»ç»ï¼\n\nETæ¯ä¸ä¸ªå¼æºçæ¸¸æå®¢æ·ç«¯ï¼åºäºunity3dï¼æå¡ç«¯åç«¯æ¡æ¶ï¼æå¡ç«¯æ¯ä½¿ç¨C# .net coreå¼åçåå¸å¼æ¸¸ææå¡ç«¯ï¼å¶ç¹ç¹æ¯å¼åæçé«ï¼æ§è½å¼ºï¼åç«¯å±äº«é»è¾ä»£ç ï¼å®¢æ·ç«¯æå¡ç«¯ç­æ´æºå¶å®åï¼åæ¶æ¯æå¯é udp tcp websocketåè®®ï¼æ¯ææå¡ç«¯3D recastå¯»è·¯ç­ç­\n\n\n# ETçåè½ï¼\n\n\n# 1.å¯ç¨VSåæ­¥è°è¯çåå¸å¼æå¡ç«¯ï¼Nå1\n\nä¸è¬æ¥è¯´ï¼åå¸å¼æå¡ç«¯è¦å¯å¨å¾å¤è¿ç¨ï¼ä¸æ¦è¿ç¨å¤äºï¼åæ­¥è°è¯å°±åå¾éå¸¸å°é¾ï¼å¯¼è´æå¡ç«¯å¼ååºæ¬ä¸é ælogæ¥æ¥æ¾é®é¢ãå¹³å¸¸å¼åæ¸¸æé»è¾ä¹å¾å¼å¯ä¸å¤§å è¿ç¨ï¼ä¸ä»å¯å¨æ¢ï¼èä¸æ¥æ¾é®é¢åå¶ä¸æ¹ä¾¿ï¼è¦å¨ä¸å å æ¥å¿éé¢æ¥é®é¢ï¼è¿æè§éå¸¸ç³ç³ï¼è¿ä¹å¤å¹´ä¹æ²¡äººè§£å³è¿ä¸ªé®é¢ãETæ¡æ¶ä½¿ç¨äºç±»ä¼¼å®æåéçç»ä»¶è®¾è®¡ï¼æææå¡ç«¯åå®¹é½ææäºä¸ä¸ªä¸ªç»ä»¶ï¼å¯å¨æ¶æ ¹æ®æå¡å¨ç±»åæè½½èªå·±æéè¦çç»ä»¶ãè¿æç¹ç±»ä¼¼çµèï¼çµèé½æ¨¡ååçææäºåå­ï¼CPUï¼ä¸»æ¿ç­ç­é¶ä»¶ï¼æ­éä¸åçé¶ä»¶å°±è½ç»è£æä¸å°ä¸åççµèï¼ä¾å¦å®¶ç¨å°å¼æºéè¦åå­ï¼CPUï¼ä¸»æ¿ï¼æ¾å¡ï¼æ¾ç¤ºå¨ï¼ç¡¬çãèå¬å¸ç¨çæå¡å¨å´ä¸éè¦æ¾ç¤ºå¨åæ¾å¡ï¼ç½å§ççµèå¯è½ä¸éè¦ç¡¬çç­ãæ­£å ä¸ºè¿æ ·çè®¾è®¡ï¼ETæ¡æ¶å¯ä»¥å°ææçæå¡å¨ç»ä»¶é½æå¨ä¸ä¸ªæå¡å¨è¿ç¨ä¸ï¼é£ä¹è¿ä¸ªæå¡å¨è¿ç¨å°±æäºæææå¡å¨çåè½ï¼ä¸ä¸ªè¿ç¨å°±å¯ä»¥ä½ä¸ºæ´ç»åå¸å¼æå¡å¨ä½¿ç¨ãè¿ä¹ç±»ä¼¼çµèï¼å°å¼æºæææççµèç»ä»¶ï¼é£å®ä¹å®å¨å¯ä»¥å½ä½å¬å¸æå¡å¨ä½¿ç¨ï¼ä¹å¯ä»¥å½ä½ç½å§çµèã\n\n\n# 2.éæå¯æååè½çåå¸å¼æå¡ç«¯ï¼1åN\n\nåå¸å¼æå¡ç«¯è¦å¼åå¤ç§ç±»åçæå¡å¨è¿ç¨ï¼æ¯å¦Login serverï¼gate serverï¼battle serverï¼chat server friend serverç­ç­ä¸å¤§å åç§serverï¼ä¼ ç»å¼åæ¹å¼éè¦é¢åç¥éå½åçåè½è¦æ¾å¨åªä¸ªæå¡å¨ä¸ï¼å½åè½è¶æ¥è¶å¤çæ¶åï¼æ¯å¦èå¤©åè½ä¹åå¨ä¸ä¸ªä¸­å¿æå¡å¨ä¸ï¼ä¹åéè¦æåºæ¥åç¬åæä¸ä¸ªæå¡å¨ï¼è¿æ¶ä¼çµæ¯å°å¤§éè¿ç§»ä»£ç çå·¥ä½ï¼ç¦ä¸èç¦ãETæ¡æ¶å¨å¹³å¸¸å¼åçæ¶åæ ¹æ¬ä¸å¤ªéè¦å³å¿å½åå¼åçè¿ä¸ªåè½ä¼æ¾å¨ä»ä¹serverä¸ï¼åªç¨ä¸ä¸ªè¿ç¨è¿è¡å¼åï¼åè½å¼åæç»ä»¶çå½¢å¼ãåå¸çæ¶åä½¿ç¨ä¸ä»½å¤è¿ç¨çéç½®å³å¯åå¸æå¤è¿ç¨çå½¢å¼ï¼æ¯ä¸æ¯å¾æ¹ä¾¿å¢ï¼éä¾¿ä½ æä¹æåæå¡å¨ãåªéè¦ä¿®æ¹æå°çä»£ç å°±å¯ä»¥è¿è¡æåãä¸åçserveræä¸ä¸åçç»ä»¶å°±è¡äºåï¼\n\n\n# 3.è·¨å¹³å°çåå¸å¼æå¡ç«¯\n\nETæ¡æ¶ä½¿ç¨C#åæå¡ç«¯ï¼ç°å¨C#æ¯å®å¨å¯ä»¥è·¨å¹³å°çï¼å¨linuxä¸å®è£.netcoreï¼å³å¯ï¼ä¸éè¦ä¿®æ¹ä»»ä½ä»£ç ï¼å°±è½è·èµ·æ¥ãæ§è½æ¹é¢ï¼ç°å¨.netcoreçæ§è½éå¸¸å¼ºï¼æ¯luaï¼pythonï¼jsä»ä¹å¿«çå¤äºãåæ¸¸ææå¡ç«¯å®å¨ä¸å¨è¯ä¸ãå¹³å¸¸æä»¬å¼åçæ¶åç¨VSå¨windowsä¸å¼åè°è¯ï¼åå¸çæ¶ååå¸å°linuxä¸å³å¯ãETæ¡æ¶è¿æä¾äºä¸é®åæ­¥å·¥å·ï¼æå¼unity->tools->rsyncåæ­¥ï¼å³å¯åæ­¥ä»£ç å°linuxä¸\n\n./Run.sh Config/StartConfig/192.168.12.188.txt \n\n\n1\n\n\nå³å¯ç¼è¯å¯å¨æå¡å¨ã\n\n\n# 4.æä¾åç¨æ¯æ\n\nC#å¤©çæ¯æå¼æ­¥ååæ­¥è¯­æ³ asyncåawaitï¼æ¯luaï¼pythonçåç¨å¼ºå¤§çå¤ï¼æ°çpythonä»¥åjavascriptè¯­è¨çè³ç§æ¬äºC#çåç¨è¯­æ³ãåå¸å¼æå¡ç«¯å¤§éæå¡å¨ä¹é´çè¿ç¨è°ç¨ï¼æ²¡æå¼æ­¥è¯­æ³çæ¯æï¼å¼åå°éå¸¸éº»ç¦ãæä»¥javaæ²¡æå¼æ­¥è¯­æ³ï¼ååæè¿è¡ï¼ä¸éååå¤§ååå¸å¼æ¸¸ææå¡ç«¯ãä¾å¦ï¼\n\n// åéC2R_Pingå¹¶ä¸ç­å¾ååºæ¶æ¯R2C_Ping\nR2C_Ping pong = await session.Call(new C2R_Ping()) as R2C_Ping;\nLog.Debug("æ¶å°R2C_Ping");\n\n// åmongodbæ¥è¯¢ä¸ä¸ªidä¸º1çPlayerï¼å¹¶ä¸ç­å¾è¿å\nPlayer player = await Game.Scene.GetComponent<DBProxyComponent>().Query<Player>(1);\nLog.Debug($"æå°player name: {player.Name}")\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¯ä»¥çåºï¼æäºasync awaitï¼ææçæå¡å¨é´çå¼æ­¥æä½å°åå¾éå¸¸è¿è´¯ï¼ä¸ç¨åææå¤æ®µé»è¾ãå¤§å¤§ç®åäºåå¸å¼æå¡å¨å¼å\n\n\n# 5.æä¾ç±»ä¼¼erlangçactoræ¶æ¯æºå¶\n\nerlangè¯­è¨ä¸å¤§ä¼å¿å°±æ¯ä½ç½®éæçæ¶æ¯æºå¶ï¼ç¨æ·å®å¨ä¸ç¨å³å¿å¯¹è±¡å¨åªä¸ªè¿ç¨ï¼æ¿å°idå°±å¯ä»¥å¯¹å¯¹è±¡åéæ¶æ¯ãETæ¡æ¶ä¹æä¾äºactoræ¶æ¯æºå¶ï¼å®ä½å¯¹è±¡åªéè¦æä¸MailBoxComponentç»ä»¶ï¼è¿ä¸ªå®ä½å¯¹è±¡å°±æäºä¸ä¸ªActorï¼ä»»ä½æå¡å¨åªéè¦ç¥éè¿ä¸ªå®ä½å¯¹è±¡çidå°±å¯ä»¥åå¶åéæ¶æ¯ï¼å®å¨ä¸ç¨å³å¿è¿ä¸ªå®ä½å¯¹è±¡å¨åªä¸ªserverï¼å¨åªå°ç©çæºå¨ä¸ãå¶å®ç°åçä¹å¾ç®åï¼ETæ¡æ¶æä¾äºä¸ä¸ªä½ç½®æå¡å¨ï¼æææè½½MailBoxComponentçå®ä½å¯¹è±¡é½ä¼å°èªå·±çidè·ä½ç½®æ³¨åå°è¿ä¸ªä½ç½®æå¡å¨ï¼å¶å®æå¡å¨åè¿ä¸ªå®ä½å¯¹è±¡åéæ¶æ¯çæ¶åå¦æä¸ç¥éè¿ä¸ªå®ä½å¯¹è±¡çä½ç½®ï¼ä¼åå»ä½ç½®æå¡å¨æ¥è¯¢ï¼æ¥è¯¢å°ä½ç½®åè¿è¡åéã\n\n\n# 6.æä¾æå¡å¨ä¸åæå¨ææ´æ°é»è¾åè½\n\nç­æ´æ¯æ¸¸ææå¡å¨ä¸å¯ç¼ºå°çåè½ï¼ETæ¡æ¶ä½¿ç¨çç»ä»¶è®¾è®¡ï¼å¯ä»¥åæå®æåéçè®¾è®¡ï¼ç»ä»¶åªææåï¼æ æ¹æ³ï¼å°æææ¹æ³åææ©å±æ¹æ³æ¾å°ç­æ´dllä¸­ï¼è¿è¡æ¶éæ°å è½½dllå³å¯ç­æ´ææé»è¾ã\n\n\n# 7.å®¢æ·ç«¯ä½¿ç¨C#ç­æ´æ°ï¼ç­æ´æ°ä¸é®åæ¢\n\nå¯ä»¥ä½¿ç¨csharp.luaæèILRuntimeç¨å æ¹é å³å¯åå®¢æ·ç«¯ç­æ´ãåä¹ä¸ç¨ä½¿ç¨çå±luaäºï¼å®¢æ·ç«¯å¯ä»¥å®ç°ææé»è¾ç­æ´æ°ï¼åæ¬åè®®ï¼configï¼uiç­ç­ã\n\n\n# 8.å®¢æ·ç«¯ç­éè½½\n\nå¼åä¸ç¨éå¯å®¢æ·ç«¯å³å¯ä¿®æ¹å®¢æ·ç«¯é»è¾ä»£ç ï¼å¼åæå¶æ¹ä¾¿\n\n\n# 9.å®¢æ·ç«¯æå¡ç«¯ç¨åä¸ç§è¯­è¨ï¼å¹¶ä¸å±äº«ä»£ç \n\nä¸è½½ETæ¡æ¶ï¼æå¼æå¡ç«¯å·¥ç¨ï¼å¯ä»¥çå°æå¡ç«¯å¼ç¨äºå®¢æ·ç«¯å¾å¤ä»£ç ï¼éè¿å¼ç¨å®¢æ·ç«¯ä»£ç çæ¹å¼å®ç°äºåç«¯å±äº«ä»£ç ãä¾å¦å®¢æ·ç«¯æå¡ç«¯ä¹é´çç½ç»æ¶æ¯ä¸¤è¾¹å®å¨å±ç¨ä¸ä¸ªæä»¶å³å¯ï¼æ·»å ä¸ä¸ªæ¶æ¯åªéè¦ä¿®æ¹ä¸éã\n\n\n# 10.KCP ENET TCP Websocketåè®®æ ç¼åæ¢\n\nETæ¡æ¶ä¸ä½æ¯æTCPï¼èä¸æ¯æå¯é çUDPåè®®ï¼ENETè·KCPï¼ï¼ENetæ¯è±éèçæä½¿ç¨çç½ç»åºï¼å¶ç¹ç¹æ¯å¿«éï¼å¹¶ä¸ç½ç»ä¸¢åçæåµä¸æ§è½ä¹éå¸¸å¥½ï¼è¿ä¸ªæä»¬åè¿æµè¯TCPå¨ä¸¢å5%çæåµä¸ï¼mobaæ¸¸æå°±å¡çä¸è¡äºï¼ä½æ¯ä½¿ç¨ENetï¼ä¸¢å20%ä»ç¶ä¸ä¼æå°å¡ãéå¸¸å¼ºå¤§ãæ¡æ¶è¿æ¯æä½¿ç¨KCPåè®®ï¼KCPä¹æ¯å¯é UDPåè®®ï¼æ®è¯´æ¯ENETæ§è½æ´å¥½ï¼ä½¿ç¨kcpè¯·æ³¨æï¼éè¦èªå·±å å¿è·³æºå¶ï¼å¦å20ç§æ²¡æ¶å°åï¼æå¡ç«¯å°æ­å¼è¿æ¥ãåè®®å¯ä»¥æ ç¼åæ¢ã\n\n\n# 11. 3D Recastå¯»è·¯åè½\n\nå¯ä»¥Unityå¯¼åºåºæ¯æ°æ®ï¼ç»æå¡ç«¯årecastå¯»è·¯ãåMMOéå¸¸æ¹ä¾¿ï¼demoæ¼ç¤ºäºæå¡ç«¯3då¯»è·¯åè½\n\n\n# 12. æå¡ç«¯æ¯æreplï¼ä¹å¯ä»¥å¨ææ§è¡ä¸æ®µæ°ä»£ç \n\nè¿æ ·å°±å¯ä»¥æå°åºè¿ç¨ä¸­ä»»ä½æ°æ®ï¼å¤§å¤§ç®åäºæå¡ç«¯æ¥æ¾é®é¢çé¾åº¦ï¼å¼å¯replæ¹æ³ï¼ç´æ¥å¨consoleä¸­è¾å¥replåè½¦å³å¯è¿å¥replæ¨¡å¼\n\n\n# 13.æä¾å®¢æ·ç«¯æºå¨äººæ¡æ¶æ¯æ\n\nå è¡ä»£ç å³å¯åå»ºæºå¨äººç»å½æ¸¸æãæºå¨äººåæµè½»èæä¸¾ï¼æºå¨äººè·æ­£å¸¸çç©å®¶å®å¨ä¸æ ·ï¼ä¸çº¿åç¨æºå¨äººåå¥½åæµï¼å¤§å¤§éä½ä¸çº¿å´©æºå ç\n\n\n# 14.AIæ¡æ¶\n\nETçAIæ¡æ¶è®©AIç¼åæ¯UIè¿ç®å\n\n\n# 15.æµè¯ç¨ä¾æ¡æ¶\n\nè·å¸é¢ä¸çæµè¯ç¨ä¾ä¸åï¼ETçæµè¯ç¨ä¾é½æ¯ä¸ä¸ªå®æ´çæ¸¸æç¯å¢ï¼éå¯¹åè®®çº§å«ï¼ä¸éè¦æåç§æ¥å£å»mockãåèµ·æ¥éå¸¸å¿«é\n\n\n# 16.è¿æå¾å¤å¾å¤åè½ï¼æå°±ä¸è¯¦ç»ä»ç»äº\n\na.åå¶æ¹ä¾¿æ£æ¥CPUå ç¨ååå­æ³æ¼æ£æ¥ï¼vsèªå¸¦åæå·¥å·ï¼ä¸ç¨åä¸ºæ§è½ååå­æ³æ¼æ£æ¥èç¦æ¼\nb.ä½¿ç¨NLogåºï¼ælogåå¶æ¹ä¾¿ï¼å¹³å¸¸å¼åæ¶ï¼å¯ä»¥å°æææå¡å¨logæå°ä¸ä¸ªæä»¶ä¸­ï¼åä¹ä¸ç¨ä¸ä¸ªä¸ªæä»¶æç´¢logäº\nc.ç»ä¸ä½¿ç¨Mongodbçbsonååºååï¼æ¶æ¯åéç½®æä»¶å¨é¨é½æ¯bsonæèjsonï¼å¹¶ä¸ä»¥åä½¿ç¨mongodbåæ°æ®åºï¼åä¹ä¸ç¨åæ ¼å¼è½¬æ¢äºã\nd.æä¾ä¸ä¸ªåæ­¥å·¥å·\n\nETæ¡æ¶æ¯ä¸ä¸ªå¼ºå¤§çµæ´»çåå¸å¼æå¡ç«¯æ¶æï¼å®å¨å¯ä»¥æ»¡è¶³ç»å¤§é¨åå¤§åæ¸¸æéæ±ãä½¿ç¨è¿å¥æ¡æ¶ï¼å®¢æ·ç«¯å¼åèå°±å¯ä»¥èªå·±å®æåç«¯å¼åï¼èçå¤§éäººåç©åï¼èçå¤§éæ²éæ¶é´ã\n\nç¸å³ç½ç«:\nETè®ºå\n\nç¾¤ååäº«ï¼\nè¡ä¸ºæ ä¸fguiåæ¯(Duke Chiangå¼åç»´æ¤)\nETå­¦ä¹ ç¬è®°ç³»å(çé¨è¿·ç¦»åä¸æ®å)\nETå­¦ä¹ ç¬è®°ç³»å(å²å¤è©©å)\næ¡æ¶æå¡ç«¯è¿è¡æµç¨\nETå¯å¨éç½®\næ¡æ¶demoä»ç»\nlinuxé¨ç½²\nlinuxé¨ç½²ï¼mongoå®è£ï¼èµæºææ­å»º\nETæ¡æ¶å¿è·³åç»ä»¶å¼å\nETæ¡æ¶Actorä½¿ç¨ä¸å¿å¾\nåºäºETæ¡æ¶åUGUIçç®åUIæ¡æ¶å®ç°ï¼æ¸æ¸åï¼\nETæ¡æ¶ç¬è®° (ç¬è§ä¸çå)\nETæ¡æ¶å¦ä½ç¨MACå¼å\nETçå¨ææ·»å äºä»¶åè§¦åç»ä»¶\n\nåä¸é¡¹ç®:\n\n 1. åå¤é£æµ\n 2. é­æ³ç¹ç¹2\n 3. å»ä¸å¤§\n 4. å¤©å¤©èº²ç«ç«2ï¼ios2019æ¥èä¸è½½æè¡19ï¼\n 5. çèæ£ç\n 6. äºæéº»å°\n\nç¾¤ådemoï¼\n\n 1. æå°ä¸»ï¼å®¢æ·ç«¯æå¡ç«¯ï¼\n 2. èåç³»ç»\n 3. ETå°æ¸¸æåé\n\nè§é¢æç¨ï¼\nå­æ¯å¥ET6.0æç¨\nèé¥¼èå¸ä¸»è®²\nå®åé­ä¸»è®²\nETæ°ææç¨-åè§ä¸»è®² å¯ç : ru1j\nETæ°ææç¨æ°ç-åè§ä¸»è®²\nETå¨Macä¸è¿è¡æå-Lä¸»è®² å¯ç : l3e3\nETæ¡æ¶ç³»åæç¨-çé¨ä¸»è®²-6.0çæ¬\n\n.net core æ¸¸æèµæºåäº«\nåç§dotnet coreé¡¹ç®æ¶é\n\nè®¨è®ºQQç¾¤ : 474643097\n\n\n# æ¯ä»å®æèµ \n\n\n\n\n# åæé¾æ¥\n\nBox2DSharp box2dçC#ç§»æ¤çï¼æ§è½å¾å¼º\nxasset è´åäºä¸º Unity é¡¹ç®æä¾äºä¸å¥ ç²¾ç®ç¨³å¥ çèµæºç®¡çç¯å¢\nQFramework Your first K.I.S.S Unity3d Framework\nET UIæ¡æ¶ å­æ¯å¥å®ç°çUIæ¡æ¶ï¼ETé£æ ¼ï¼åç§äºä»¶åå\nETCsharpToXLua å­æ¯å¥ä½¿ç¨csharp.luaå®ç°çETå®¢æ·ç«¯ç­æ´æ°\net-6-with-ilruntime çé¨ä½¿ç¨ILRuntimeå®ç°çETå®¢æ·ç«¯ç­æ´æ°\nLuban éç¨äºå¤§ä¸­åé¡¹ç®çæ¸¸æéç½®è§£å³æ¹æ¡',normalizedContent:'english\n\n\n# è®¨è®ºqqç¾¤ : 474643097\n\n\n# etè®ºå\n\n\n# etååº\n\n\n# et6.0è§é¢æç¨ä¸çº¿\n\n\n# è¿è¡æå\n\néå¤§æ³¨æäºé¡¹\n\n 1. hotfixè·hotfixviewæ¯çº¯é»è¾çï¼ç±»ä¸­ä¸è¦å¸¦æä»»ä½å­æ®µï¼å¦åç­æ´å°±ä¼ä¸¢å¤±\n 2. ettaskè·è¦ä¹è°ç¨coroutineè¦ä¹å°±awaitï¼æå¼vsä¸­çéè¯¯åè¡¨çªå£ï¼æ²¡æä½¿ç¨è¿ä¸¤ç§çä¼æ¥åºé®é¢ï¼è½ç¶æ¢ä¸awaitä¹ä¸coroutineçè¯è½å¤ç¼è¯éè¿ï¼ä½æ¯ä¼ä¸¢å¤±å¼å¸¸ï¼ååå±é©\n 3. è¯·ä¸è¦ä½¿ç¨ä»»ä½èå½æ°ï¼ç¨é»è¾ååæ¿ä»£\n 4. è¯·ä¸è¦ä½¿ç¨ä»»ä½ç»§æ¿ï¼é¤äºç»§æ¿entityï¼ç¨ç»ä»¶æ¿ä»£\n\næµè¯!\n\n\n# et6 åå¸ï¼et6ç¸æ¯et5æå·¨å¤§ååï¼å¯ä»¥è¯´æ¯å¤å§åäº¦è²ï¼6.0æ¥æå¦ä¸æäººçç¹ç¹\n\n 1. å®¢æ·ç«¯é»è¾å¨ç­æ´æ°ï¼åºäºilruntimeï¼ï¼æ²¡æä¸è½æ´çé¨å\n 2. å®¢æ·ç«¯æå¡ç«¯åå¯ç­éè½½ï¼å¼åä¸ç¨éå¯å®¢æ·ç«¯æå¡ç«¯å³å¯ä¿®æ¹é»è¾ä»£ç ï¼å¼åæå¶æ¹ä¾¿\n 3. æºå¨äººæ¡æ¶ï¼et6çå®¢æ·ç«¯çé»è¾è·è¡¨ç°åç¦»ï¼æºå¨äººç¨åºç´æ¥å±äº«å©ç¨å®¢æ·ç«¯çé»è¾å±ä»£ç ååæµï¼åªéè¦æå°ä»£ç å³å¯ååºæºå¨äººï¼æ¹ä¾¿åæµæå¡ç«¯\n 4. æµè¯ç¨ä¾æ¡æ¶ï¼å©ç¨å®¢æ·ç«¯çé»è¾å±ä»£ç åååæµè¯ï¼æ¯ä¸ªååæµè¯é½æ¯å®æ´çæ¸¸æç¯å¢ï¼æ éåç§æ¶å¿çmock\n 5. aiæ¡æ¶ï¼æ¯è¡ä¸ºæ æ´å æ¹ä¾¿ï¼åaiæ¯åuiè¿ç®å\n 6. æ°çæå¡ç«¯æ¶æï¼æå¶ä¼ç¾\n 7. åå¤ç½kcpç½ç»ï¼æ§è½å¼ºå²ï¼æ­éè½¯è·¯ç±æ¨¡åï¼å¯ä»¥é²åç§ç½ç»æ»å»\n\n\n# etå¼åçåä¸mmoé¡¹ç®åå¤é£æµæåä¸çº¿\n\n> 64æ ¸128gåå­çåæåç©çæº1.5wå¨çº¿ï¼å®éçº¿ä¸ç­åä¸ºäºçæéå¶ä¸ºåæ6000äººåæ¶å¨çº¿ï¼6000äººçè¯cpuæ¶èçº¦ä¸º30%ï¼ã ä¸ºäºå æ è¡å·æ­£å¸¸ï¼çº¿ä¸è·å¾æ¯debugçï¼å¦æä½¿ç¨releaseçå¼å¯ä¼åï¼æ§è½è¿è½ç¿»ä¸åï¼è¾¾å°åç©çæº3wå¨çº¿ï¼ä¸çº¿5ä¸ªææ¥ååç¨³å®ã åå¤é£æµä½¿ç¨äºetæ¡æ¶ä»é¶å¼åï¼ç¨æ¶ä¸¤å¹´ï¼è¿ä¸ªå¼åéåº¦å¯ä»¥è¯´æ äººåºå¶å³ã åå¤é£æµçæåä¸çº¿è¯æäºetå·å¤å¼åä»»ä½å¤§åæ¸¸æçè½åï¼å¼åéåº¦ï¼å¼åæçé½ä»¤äººå¹ä¸ºè§æ­¢ï¼åå¤é£æµä½¿ç¨å°çå®¢æ·ç«¯æå¡å¨ææ¯ï¼\n\n 1.  å¨æå¯æ¬è·åçº¿ï¼æéåéï¼ç¨å®åæ¶\n 2.  åçº¿åçº¿ï¼åçº¿äººæ°è¾å°ä¼æå¤æ¡çº¿åå¹¶ãåçº¿åè½åºæ¬ä¸å¶å®mmoæ¸¸æå¾å°è§å°\n 3.  å®¢æ·ç«¯æå¡ç«¯åºæ¯æ ç¼åæ¢ï¼ä¹å°±æ¯æ ç¼å¤§ä¸çææ¯\n 4.  è·¨æå¯æ¬ï¼è·¨ææåº\n 5.  ååç«¯ä¸ä½åï¼å©ç¨å®¢æ·ç«¯ä»£ç å¼åæå¡å¨åæµæºå¨äººï¼4å°24æ ¸æºå¨è½»æ¾æ¨¡æ1wäººåä»»å¡\n 6.  åå¤é£æµåç§aiè®¾è®¡ï¼ä½¿ç¨etçå¨æ°å¼åçaiæ¡æ¶ï¼ä½¿aiå¼åç®åå°è·åuiä¸æ ·ç®å\n 7.  æµè¯ç¨ä¾æ¡æ¶ï¼å¤§é¨åéè¦ç³»ç»ï¼åå¤é£æµé½åäºæµè¯ç¨ä¾ï¼è·å¸é¢ä¸çæµè¯ç¨ä¾ä¸åï¼æ¯ä¸ªåå¤é£æµçæµè¯ç¨ä¾é½æ¯ä¸ä¸ªå®æ´çæ¸¸æç¯å¢ï¼éå¯¹åè®®çº§å«ï¼ä¸éè¦æåç§æ¥å£å»mockãåèµ·æ¥éå¸¸å¿«éã\n 8.  ä¹å®«æ ¼çaoiå®ç°ï¼å¨æè°æ´çè§çç©å®¶ï¼éä½æå¡å¨è´è½½\n 9.  é²æ»å»ï¼åå¤é£æµå¼åäºè½¯è·¯ç±åè½ï¼å³ä½¿æ»å»ä¹åªè½æ»å»å°è½¯è·¯ç±ï¼ä¸æ¦è¢«æ»å»ï¼ç©å®¶å®¢æ·ç«¯åç°å ç§éæ ååºï¼å³å¯å¨æåæ¢å°å¶å®è½¯è·¯ç±ï¼ç¨æ·å ä¹æ æç¥ãæ´ä¸ªè¿ç¨å®¢æ·ç«¯ç½ç»è¿æ¥ä¸æ­å¼ï¼æ°æ®ä¸ä¸¢å¤±ã\n 10. è¿æå¾å¤å¾å¤ï¼è¿éå°±ä¸å°å¦äº\n\n\n# etçä»ç»ï¼\n\netæ¯ä¸ä¸ªå¼æºçæ¸¸æå®¢æ·ç«¯ï¼åºäºunity3dï¼æå¡ç«¯åç«¯æ¡æ¶ï¼æå¡ç«¯æ¯ä½¿ç¨c# .net coreå¼åçåå¸å¼æ¸¸ææå¡ç«¯ï¼å¶ç¹ç¹æ¯å¼åæçé«ï¼æ§è½å¼ºï¼åç«¯å±äº«é»è¾ä»£ç ï¼å®¢æ·ç«¯æå¡ç«¯ç­æ´æºå¶å®åï¼åæ¶æ¯æå¯é udp tcp websocketåè®®ï¼æ¯ææå¡ç«¯3d recastå¯»è·¯ç­ç­\n\n\n# etçåè½ï¼\n\n\n# 1.å¯ç¨vsåæ­¥è°è¯çåå¸å¼æå¡ç«¯ï¼nå1\n\nä¸è¬æ¥è¯´ï¼åå¸å¼æå¡ç«¯è¦å¯å¨å¾å¤è¿ç¨ï¼ä¸æ¦è¿ç¨å¤äºï¼åæ­¥è°è¯å°±åå¾éå¸¸å°é¾ï¼å¯¼è´æå¡ç«¯å¼ååºæ¬ä¸é ælogæ¥æ¥æ¾é®é¢ãå¹³å¸¸å¼åæ¸¸æé»è¾ä¹å¾å¼å¯ä¸å¤§å è¿ç¨ï¼ä¸ä»å¯å¨æ¢ï¼èä¸æ¥æ¾é®é¢åå¶ä¸æ¹ä¾¿ï¼è¦å¨ä¸å å æ¥å¿éé¢æ¥é®é¢ï¼è¿æè§éå¸¸ç³ç³ï¼è¿ä¹å¤å¹´ä¹æ²¡äººè§£å³è¿ä¸ªé®é¢ãetæ¡æ¶ä½¿ç¨äºç±»ä¼¼å®æåéçç»ä»¶è®¾è®¡ï¼æææå¡ç«¯åå®¹é½ææäºä¸ä¸ªä¸ªç»ä»¶ï¼å¯å¨æ¶æ ¹æ®æå¡å¨ç±»åæè½½èªå·±æéè¦çç»ä»¶ãè¿æç¹ç±»ä¼¼çµèï¼çµèé½æ¨¡ååçææäºåå­ï¼cpuï¼ä¸»æ¿ç­ç­é¶ä»¶ï¼æ­éä¸åçé¶ä»¶å°±è½ç»è£æä¸å°ä¸åççµèï¼ä¾å¦å®¶ç¨å°å¼æºéè¦åå­ï¼cpuï¼ä¸»æ¿ï¼æ¾å¡ï¼æ¾ç¤ºå¨ï¼ç¡¬çãèå¬å¸ç¨çæå¡å¨å´ä¸éè¦æ¾ç¤ºå¨åæ¾å¡ï¼ç½å§ççµèå¯è½ä¸éè¦ç¡¬çç­ãæ­£å ä¸ºè¿æ ·çè®¾è®¡ï¼etæ¡æ¶å¯ä»¥å°ææçæå¡å¨ç»ä»¶é½æå¨ä¸ä¸ªæå¡å¨è¿ç¨ä¸ï¼é£ä¹è¿ä¸ªæå¡å¨è¿ç¨å°±æäºæææå¡å¨çåè½ï¼ä¸ä¸ªè¿ç¨å°±å¯ä»¥ä½ä¸ºæ´ç»åå¸å¼æå¡å¨ä½¿ç¨ãè¿ä¹ç±»ä¼¼çµèï¼å°å¼æºæææççµèç»ä»¶ï¼é£å®ä¹å®å¨å¯ä»¥å½ä½å¬å¸æå¡å¨ä½¿ç¨ï¼ä¹å¯ä»¥å½ä½ç½å§çµèã\n\n\n# 2.éæå¯æååè½çåå¸å¼æå¡ç«¯ï¼1ån\n\nåå¸å¼æå¡ç«¯è¦å¼åå¤ç§ç±»åçæå¡å¨è¿ç¨ï¼æ¯å¦login serverï¼gate serverï¼battle serverï¼chat server friend serverç­ç­ä¸å¤§å åç§serverï¼ä¼ ç»å¼åæ¹å¼éè¦é¢åç¥éå½åçåè½è¦æ¾å¨åªä¸ªæå¡å¨ä¸ï¼å½åè½è¶æ¥è¶å¤çæ¶åï¼æ¯å¦èå¤©åè½ä¹åå¨ä¸ä¸ªä¸­å¿æå¡å¨ä¸ï¼ä¹åéè¦æåºæ¥åç¬åæä¸ä¸ªæå¡å¨ï¼è¿æ¶ä¼çµæ¯å°å¤§éè¿ç§»ä»£ç çå·¥ä½ï¼ç¦ä¸èç¦ãetæ¡æ¶å¨å¹³å¸¸å¼åçæ¶åæ ¹æ¬ä¸å¤ªéè¦å³å¿å½åå¼åçè¿ä¸ªåè½ä¼æ¾å¨ä»ä¹serverä¸ï¼åªç¨ä¸ä¸ªè¿ç¨è¿è¡å¼åï¼åè½å¼åæç»ä»¶çå½¢å¼ãåå¸çæ¶åä½¿ç¨ä¸ä»½å¤è¿ç¨çéç½®å³å¯åå¸æå¤è¿ç¨çå½¢å¼ï¼æ¯ä¸æ¯å¾æ¹ä¾¿å¢ï¼éä¾¿ä½ æä¹æåæå¡å¨ãåªéè¦ä¿®æ¹æå°çä»£ç å°±å¯ä»¥è¿è¡æåãä¸åçserveræä¸ä¸åçç»ä»¶å°±è¡äºåï¼\n\n\n# 3.è·¨å¹³å°çåå¸å¼æå¡ç«¯\n\netæ¡æ¶ä½¿ç¨c#åæå¡ç«¯ï¼ç°å¨c#æ¯å®å¨å¯ä»¥è·¨å¹³å°çï¼å¨linuxä¸å®è£.netcoreï¼å³å¯ï¼ä¸éè¦ä¿®æ¹ä»»ä½ä»£ç ï¼å°±è½è·èµ·æ¥ãæ§è½æ¹é¢ï¼ç°å¨.netcoreçæ§è½éå¸¸å¼ºï¼æ¯luaï¼pythonï¼jsä»ä¹å¿«çå¤äºãåæ¸¸ææå¡ç«¯å®å¨ä¸å¨è¯ä¸ãå¹³å¸¸æä»¬å¼åçæ¶åç¨vså¨windowsä¸å¼åè°è¯ï¼åå¸çæ¶ååå¸å°linuxä¸å³å¯ãetæ¡æ¶è¿æä¾äºä¸é®åæ­¥å·¥å·ï¼æå¼unity->tools->rsyncåæ­¥ï¼å³å¯åæ­¥ä»£ç å°linuxä¸\n\n./run.sh config/startconfig/192.168.12.188.txt \n\n\n1\n\n\nå³å¯ç¼è¯å¯å¨æå¡å¨ã\n\n\n# 4.æä¾åç¨æ¯æ\n\nc#å¤©çæ¯æå¼æ­¥ååæ­¥è¯­æ³ asyncåawaitï¼æ¯luaï¼pythonçåç¨å¼ºå¤§çå¤ï¼æ°çpythonä»¥åjavascriptè¯­è¨çè³ç§æ¬äºc#çåç¨è¯­æ³ãåå¸å¼æå¡ç«¯å¤§éæå¡å¨ä¹é´çè¿ç¨è°ç¨ï¼æ²¡æå¼æ­¥è¯­æ³çæ¯æï¼å¼åå°éå¸¸éº»ç¦ãæä»¥javaæ²¡æå¼æ­¥è¯­æ³ï¼ååæè¿è¡ï¼ä¸éååå¤§ååå¸å¼æ¸¸ææå¡ç«¯ãä¾å¦ï¼\n\n// åéc2r_pingå¹¶ä¸ç­å¾ååºæ¶æ¯r2c_ping\nr2c_ping pong = await session.call(new c2r_ping()) as r2c_ping;\nlog.debug("æ¶å°r2c_ping");\n\n// åmongodbæ¥è¯¢ä¸ä¸ªidä¸º1çplayerï¼å¹¶ä¸ç­å¾è¿å\nplayer player = await game.scene.getcomponent<dbproxycomponent>().query<player>(1);\nlog.debug($"æå°player name: {player.name}")\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nå¯ä»¥çåºï¼æäºasync awaitï¼ææçæå¡å¨é´çå¼æ­¥æä½å°åå¾éå¸¸è¿è´¯ï¼ä¸ç¨åææå¤æ®µé»è¾ãå¤§å¤§ç®åäºåå¸å¼æå¡å¨å¼å\n\n\n# 5.æä¾ç±»ä¼¼erlangçactoræ¶æ¯æºå¶\n\nerlangè¯­è¨ä¸å¤§ä¼å¿å°±æ¯ä½ç½®éæçæ¶æ¯æºå¶ï¼ç¨æ·å®å¨ä¸ç¨å³å¿å¯¹è±¡å¨åªä¸ªè¿ç¨ï¼æ¿å°idå°±å¯ä»¥å¯¹å¯¹è±¡åéæ¶æ¯ãetæ¡æ¶ä¹æä¾äºactoræ¶æ¯æºå¶ï¼å®ä½å¯¹è±¡åªéè¦æä¸mailboxcomponentç»ä»¶ï¼è¿ä¸ªå®ä½å¯¹è±¡å°±æäºä¸ä¸ªactorï¼ä»»ä½æå¡å¨åªéè¦ç¥éè¿ä¸ªå®ä½å¯¹è±¡çidå°±å¯ä»¥åå¶åéæ¶æ¯ï¼å®å¨ä¸ç¨å³å¿è¿ä¸ªå®ä½å¯¹è±¡å¨åªä¸ªserverï¼å¨åªå°ç©çæºå¨ä¸ãå¶å®ç°åçä¹å¾ç®åï¼etæ¡æ¶æä¾äºä¸ä¸ªä½ç½®æå¡å¨ï¼æææè½½mailboxcomponentçå®ä½å¯¹è±¡é½ä¼å°èªå·±çidè·ä½ç½®æ³¨åå°è¿ä¸ªä½ç½®æå¡å¨ï¼å¶å®æå¡å¨åè¿ä¸ªå®ä½å¯¹è±¡åéæ¶æ¯çæ¶åå¦æä¸ç¥éè¿ä¸ªå®ä½å¯¹è±¡çä½ç½®ï¼ä¼åå»ä½ç½®æå¡å¨æ¥è¯¢ï¼æ¥è¯¢å°ä½ç½®åè¿è¡åéã\n\n\n# 6.æä¾æå¡å¨ä¸åæå¨ææ´æ°é»è¾åè½\n\nç­æ´æ¯æ¸¸ææå¡å¨ä¸å¯ç¼ºå°çåè½ï¼etæ¡æ¶ä½¿ç¨çç»ä»¶è®¾è®¡ï¼å¯ä»¥åæå®æåéçè®¾è®¡ï¼ç»ä»¶åªææåï¼æ æ¹æ³ï¼å°æææ¹æ³åææ©å±æ¹æ³æ¾å°ç­æ´dllä¸­ï¼è¿è¡æ¶éæ°å è½½dllå³å¯ç­æ´ææé»è¾ã\n\n\n# 7.å®¢æ·ç«¯ä½¿ç¨c#ç­æ´æ°ï¼ç­æ´æ°ä¸é®åæ¢\n\nå¯ä»¥ä½¿ç¨csharp.luaæèilruntimeç¨å æ¹é å³å¯åå®¢æ·ç«¯ç­æ´ãåä¹ä¸ç¨ä½¿ç¨çå±luaäºï¼å®¢æ·ç«¯å¯ä»¥å®ç°ææé»è¾ç­æ´æ°ï¼åæ¬åè®®ï¼configï¼uiç­ç­ã\n\n\n# 8.å®¢æ·ç«¯ç­éè½½\n\nå¼åä¸ç¨éå¯å®¢æ·ç«¯å³å¯ä¿®æ¹å®¢æ·ç«¯é»è¾ä»£ç ï¼å¼åæå¶æ¹ä¾¿\n\n\n# 9.å®¢æ·ç«¯æå¡ç«¯ç¨åä¸ç§è¯­è¨ï¼å¹¶ä¸å±äº«ä»£ç \n\nä¸è½½etæ¡æ¶ï¼æå¼æå¡ç«¯å·¥ç¨ï¼å¯ä»¥çå°æå¡ç«¯å¼ç¨äºå®¢æ·ç«¯å¾å¤ä»£ç ï¼éè¿å¼ç¨å®¢æ·ç«¯ä»£ç çæ¹å¼å®ç°äºåç«¯å±äº«ä»£ç ãä¾å¦å®¢æ·ç«¯æå¡ç«¯ä¹é´çç½ç»æ¶æ¯ä¸¤è¾¹å®å¨å±ç¨ä¸ä¸ªæä»¶å³å¯ï¼æ·»å ä¸ä¸ªæ¶æ¯åªéè¦ä¿®æ¹ä¸éã\n\n\n# 10.kcp enet tcp websocketåè®®æ ç¼åæ¢\n\netæ¡æ¶ä¸ä½æ¯ætcpï¼èä¸æ¯æå¯é çudpåè®®ï¼enetè·kcpï¼ï¼enetæ¯è±éèçæä½¿ç¨çç½ç»åºï¼å¶ç¹ç¹æ¯å¿«éï¼å¹¶ä¸ç½ç»ä¸¢åçæåµä¸æ§è½ä¹éå¸¸å¥½ï¼è¿ä¸ªæä»¬åè¿æµè¯tcpå¨ä¸¢å5%çæåµä¸ï¼mobaæ¸¸æå°±å¡çä¸è¡äºï¼ä½æ¯ä½¿ç¨enetï¼ä¸¢å20%ä»ç¶ä¸ä¼æå°å¡ãéå¸¸å¼ºå¤§ãæ¡æ¶è¿æ¯æä½¿ç¨kcpåè®®ï¼kcpä¹æ¯å¯é udpåè®®ï¼æ®è¯´æ¯enetæ§è½æ´å¥½ï¼ä½¿ç¨kcpè¯·æ³¨æï¼éè¦èªå·±å å¿è·³æºå¶ï¼å¦å20ç§æ²¡æ¶å°åï¼æå¡ç«¯å°æ­å¼è¿æ¥ãåè®®å¯ä»¥æ ç¼åæ¢ã\n\n\n# 11. 3d recastå¯»è·¯åè½\n\nå¯ä»¥unityå¯¼åºåºæ¯æ°æ®ï¼ç»æå¡ç«¯årecastå¯»è·¯ãåmmoéå¸¸æ¹ä¾¿ï¼demoæ¼ç¤ºäºæå¡ç«¯3då¯»è·¯åè½\n\n\n# 12. æå¡ç«¯æ¯æreplï¼ä¹å¯ä»¥å¨ææ§è¡ä¸æ®µæ°ä»£ç \n\nè¿æ ·å°±å¯ä»¥æå°åºè¿ç¨ä¸­ä»»ä½æ°æ®ï¼å¤§å¤§ç®åäºæå¡ç«¯æ¥æ¾é®é¢çé¾åº¦ï¼å¼å¯replæ¹æ³ï¼ç´æ¥å¨consoleä¸­è¾å¥replåè½¦å³å¯è¿å¥replæ¨¡å¼\n\n\n# 13.æä¾å®¢æ·ç«¯æºå¨äººæ¡æ¶æ¯æ\n\nå è¡ä»£ç å³å¯åå»ºæºå¨äººç»å½æ¸¸æãæºå¨äººåæµè½»èæä¸¾ï¼æºå¨äººè·æ­£å¸¸çç©å®¶å®å¨ä¸æ ·ï¼ä¸çº¿åç¨æºå¨äººåå¥½åæµï¼å¤§å¤§éä½ä¸çº¿å´©æºå ç\n\n\n# 14.aiæ¡æ¶\n\netçaiæ¡æ¶è®©aiç¼åæ¯uiè¿ç®å\n\n\n# 15.æµè¯ç¨ä¾æ¡æ¶\n\nè·å¸é¢ä¸çæµè¯ç¨ä¾ä¸åï¼etçæµè¯ç¨ä¾é½æ¯ä¸ä¸ªå®æ´çæ¸¸æç¯å¢ï¼éå¯¹åè®®çº§å«ï¼ä¸éè¦æåç§æ¥å£å»mockãåèµ·æ¥éå¸¸å¿«é\n\n\n# 16.è¿æå¾å¤å¾å¤åè½ï¼æå°±ä¸è¯¦ç»ä»ç»äº\n\na.åå¶æ¹ä¾¿æ£æ¥cpuå ç¨ååå­æ³æ¼æ£æ¥ï¼vsèªå¸¦åæå·¥å·ï¼ä¸ç¨åä¸ºæ§è½ååå­æ³æ¼æ£æ¥èç¦æ¼\nb.ä½¿ç¨nlogåºï¼ælogåå¶æ¹ä¾¿ï¼å¹³å¸¸å¼åæ¶ï¼å¯ä»¥å°æææå¡å¨logæå°ä¸ä¸ªæä»¶ä¸­ï¼åä¹ä¸ç¨ä¸ä¸ªä¸ªæä»¶æç´¢logäº\nc.ç»ä¸ä½¿ç¨mongodbçbsonååºååï¼æ¶æ¯åéç½®æä»¶å¨é¨é½æ¯bsonæèjsonï¼å¹¶ä¸ä»¥åä½¿ç¨mongodbåæ°æ®åºï¼åä¹ä¸ç¨åæ ¼å¼è½¬æ¢äºã\nd.æä¾ä¸ä¸ªåæ­¥å·¥å·\n\netæ¡æ¶æ¯ä¸ä¸ªå¼ºå¤§çµæ´»çåå¸å¼æå¡ç«¯æ¶æï¼å®å¨å¯ä»¥æ»¡è¶³ç»å¤§é¨åå¤§åæ¸¸æéæ±ãä½¿ç¨è¿å¥æ¡æ¶ï¼å®¢æ·ç«¯å¼åèå°±å¯ä»¥èªå·±å®æåç«¯å¼åï¼èçå¤§éäººåç©åï¼èçå¤§éæ²éæ¶é´ã\n\nç¸å³ç½ç«:\netè®ºå\n\nç¾¤ååäº«ï¼\nè¡ä¸ºæ ä¸fguiåæ¯(duke chiangå¼åç»´æ¤)\netå­¦ä¹ ç¬è®°ç³»å(çé¨è¿·ç¦»åä¸æ®å)\netå­¦ä¹ ç¬è®°ç³»å(å²å¤è©©å)\næ¡æ¶æå¡ç«¯è¿è¡æµç¨\netå¯å¨éç½®\næ¡æ¶demoä»ç»\nlinuxé¨ç½²\nlinuxé¨ç½²ï¼mongoå®è£ï¼èµæºææ­å»º\netæ¡æ¶å¿è·³åç»ä»¶å¼å\netæ¡æ¶actorä½¿ç¨ä¸å¿å¾\nåºäºetæ¡æ¶åuguiçç®åuiæ¡æ¶å®ç°ï¼æ¸æ¸åï¼\netæ¡æ¶ç¬è®° (ç¬è§ä¸çå)\netæ¡æ¶å¦ä½ç¨macå¼å\netçå¨ææ·»å äºä»¶åè§¦åç»ä»¶\n\nåä¸é¡¹ç®:\n\n 1. åå¤é£æµ\n 2. é­æ³ç¹ç¹2\n 3. å»ä¸å¤§\n 4. å¤©å¤©èº²ç«ç«2ï¼ios2019æ¥èä¸è½½æè¡19ï¼\n 5. çèæ£ç\n 6. äºæéº»å°\n\nç¾¤ådemoï¼\n\n 1. æå°ä¸»ï¼å®¢æ·ç«¯æå¡ç«¯ï¼\n 2. èåç³»ç»\n 3. etå°æ¸¸æåé\n\nè§é¢æç¨ï¼\nå­æ¯å¥et6.0æç¨\nèé¥¼èå¸ä¸»è®²\nå®åé­ä¸»è®²\netæ°ææç¨-åè§ä¸»è®² å¯ç : ru1j\netæ°ææç¨æ°ç-åè§ä¸»è®²\netå¨macä¸è¿è¡æå-lä¸»è®² å¯ç : l3e3\netæ¡æ¶ç³»åæç¨-çé¨ä¸»è®²-6.0çæ¬\n\n.net core æ¸¸æèµæºåäº«\nåç§dotnet coreé¡¹ç®æ¶é\n\nè®¨è®ºqqç¾¤ : 474643097\n\n\n# æ¯ä»å®æèµ \n\n\n\n\n# åæé¾æ¥\n\nbox2dsharp box2dçc#ç§»æ¤çï¼æ§è½å¾å¼º\nxasset è´åäºä¸º unity é¡¹ç®æä¾äºä¸å¥ ç²¾ç®ç¨³å¥ çèµæºç®¡çç¯å¢\nqframework your first k.i.s.s unity3d framework\net uiæ¡æ¶ å­æ¯å¥å®ç°çuiæ¡æ¶ï¼eté£æ ¼ï¼åç§äºä»¶åå\netcsharptoxlua å­æ¯å¥ä½¿ç¨csharp.luaå®ç°çetå®¢æ·ç«¯ç­æ´æ°\net-6-with-ilruntime çé¨ä½¿ç¨ilruntimeå®ç°çetå®¢æ·ç«¯ç­æ´æ°\nluban éç¨äºå¤§ä¸­åé¡¹ç®çæ¸¸æéç½®è§£å³æ¹æ¡',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"è¿è¡æå",frontmatter:{title:"è¿è¡æå",date:"2020-05-11T13:59:38.000Z",permalink:"/pages/52d5c3",article:!1},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/02.1.1%E8%BF%90%E8%A1%8C%E6%8C%87%E5%8D%97.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/02.1.1è¿è¡æå.md",key:"v-77c5ce9c",path:"/pages/52d5c3/",headersStr:null,content:'# è¿è¡æ­¥éª¤\n\n 1.  visual studioç¨æ·é¡»ç¥ï¼\n     \n     * çæ¬ï¼\n       * Win10åä»¥ä¸ç¨æ·ï¼ä½¿ç¨.net6, VS çæ¬ï¼å¿é¡»ä½¿ç¨2022åä»¥ä¸ãæ³¨æï¼VS 2019 ä¸æ¯æ .net6ï¼ä¸è½ä½¿ç¨ã\n       * Win7 ç¨æ·ï¼æ æ³å®è£ VS 2022ï¼éè¦ä½¿ç¨ .net 5 å VS 2019ï¼ä½æ³¨æéè¦é¢å¤è®¾ç½®ä»¥æ¯æETç¼è¯ã\n     * ä¾èµï¼\n       * éè¦å®è£"ä½¿ç¨Unityçæ¸¸æå¼å"æ©å±ã\n       * éè¦å¨"å·¥å·-éé¡¹-éç¨äºUnityçå·¥å·-å¸¸è§"éï¼ææé¡¹éçç¦æ­¢å®æ´çæé¡¹ç®æ¹ä¸ºFalseï¼å¦åå¯¼è´ä½ Codesç®å½éçä»£ç æ¥éã\n\n 2.  ä½¿ç¨Rider2021.2.2ï¼æ´æ°å°ææ°çï¼, éè¦å®è£ä»¥ä¸åå®¹:\n     \n     * RiderçUnityæä»¶\n     * å®è£ .net6\n     * 2021.2.2 ä¼æ¥".NET SDK 6.0.101 is not fully supported in Rider"ï¼ä½å®éä¸å½±åç¼è¯(2021.12.21)\n     * 2021.3.x å®å¨æ¯æ .net6\n\n 3.  masteråæ¯éè¦unity2020.3çï¼ç¨å°äºC#8çè¯­æ³ï¼\n\n 4.  å¯å¨Unityï¼ èå File -> Open Project... -> Open éä¸­ET/Unityæä»¶å¤¹ï¼ç¹å»éæ©æä»¶å¤¹æé®ã\n\n 5.  ç¹å»Unityèå Assets -> Open C# Project å¯å¨vs\n\n 6.  è¿è¡Unityèåä¸ç Tools->BuildCodeï¼è¿ä¸æ­¥å°ç¼è¯å®¢æ·ç«¯ä»£ç \n\n 7.  ç¨Rideræå¼ ET/Client-Server.sln ç¼è¯ï¼ä¸å®è¦å¨é¨å·¥ç¨ç¼è¯ï¼å³é®VSè§£å³æ¹æ¡ï¼å¨é¨ç¼è¯ï¼ è¿éæ¥çº¢åç°å¼ç¨éè¯¯ï¼æ¯å ä¸ºUnityçåºè¿æ²¡ç¼è¯å°Unity/Temp/Debugç®å½ä¸é¢ï¼ä¸è¬ä¸ç¨ç®¡ï¼å¿é¡»ä¿è¯Unityæ¯å¼å¯çï¼ç¶ååªéè¦ç´æ¥ç¼è¯Client-Serverå³å¯ï¼ Client-Serverä¼ç¼è¯Unity.MonoãUnity.Monoä¼æèªå·±ä¾èµçUnityçåºå¤å¶å°Unity/Temp/Debugä¸­ãUnity.Model Unity.Hotfix Unity.ModelView UnityHotfix.Viewé½ä¼ä¾èµUnity/Temp/Debugä¸çåºãå¦æè¿æ¯ççº¢ï¼å³é­vsæèriderï¼åæå¼unityï¼åæå¼Client-Server.slnï¼å ç¼è¯Client-Server\n\n 8.  å¯¼è¡¨å·¥å·ï¼ç¼è¯å®æåå½ä»¤è¡è¿å¥ Bin ç®å½ï¼æ§è¡ dotnet Tools.dll --AppType=ExcelExporter\n\n 9.  å¯¼åºåè®®å·¥å·ï¼ç¼è¯å®æåè¿å¥ Bin ç®å½ï¼æ§è¡ dotnet Tools.dll --AppType=Proto2CS\n\n 10. å¯å¨æå¡å¨: dotnet Server.dll --Process=1 --Console=1\n\n 11. Unityä¸­åå»Scenesç®å½ä¸­çInitåºæ¯ï¼ç¹å»Playå³å¯è¿è¡\n\n\n# æµè¯ç¶æåæ­¥demo\n\n 1. æ³ä¿®æ¹éç½®å°±è¿å¥ Excel ç®å½ä¿®æ¹å¯¹åºçè¡¨æ ¼ï¼åè¿è¡æ­¥éª¤çç¬¬6æ­¥ï¼ç¶åéæ°è¿è¡ Server.Appå·¥ç¨æ¥å¯å¨æå¡ç«¯ã\n\n 2. Unity->toolsèå->æåå·¥å·ï¼éæ©PCï¼å¾éæ¯å¦æåexeï¼ç¹å»å¼å§æåï¼æåºä¸ä¸ªPCåå¨Releaseç®å½ä¸ã\n\n 3. è¿è¡Unity ç»å½ è¿å¥å¤§å è¿å¥åºæ¯\n\n 4. è¿è¡PCå ç»å½ è¿å¥å¤§å\n\n 5. ç¹å»é¼ æ å³é®å³å¯ç§»å¨äººç©\n\n\n# æ³¨æäºé¡¹ï¼\n\nä¸. åºéåå é½æ¯ï¼\n\n 1.  ä¸­æç®å½ã\n 2.  VS çæ¬ä½\n 3.  Rideræ²¡æå®è£ç¸å³ç»ä»¶\n 4.  æ²¡å®è£ .net6\n 5.  æ²¡ç¼è¯æå¡ç«¯ææå·¥ç¨\n 6.  Riderè¦æ´æ°å°ææ°çæ¬\n 7.  Unityçæ¬å¤ªä½\n 8.  Win7 ç¨æ·ï¼æ²¡æç¹å«è®¾ç½®\n 9.  *ç¼è¯è¿ç¨ä¸­å¦æåºç°ä¾èµé®é¢ï¼ä¹æå¯è½æ¯ Unity - External Tools - Generate .csproj files for: å½ä¸­å¾éäº\n     1. Registry packages\n     2. Build-in packages\n 10. *å¦ææåæ¥éç¼ºå°"StreamingAsset"ï¼èªå·±å¨ ET\\Unity\\Assets ä¸æ°å»ºä¸ä¸ª StreamingAsset æä»¶å¤¹å³å¯ã',normalizedContent:'# è¿è¡æ­¥éª¤\n\n 1.  visual studioç¨æ·é¡»ç¥ï¼\n     \n     * çæ¬ï¼\n       * win10åä»¥ä¸ç¨æ·ï¼ä½¿ç¨.net6, vs çæ¬ï¼å¿é¡»ä½¿ç¨2022åä»¥ä¸ãæ³¨æï¼vs 2019 ä¸æ¯æ .net6ï¼ä¸è½ä½¿ç¨ã\n       * win7 ç¨æ·ï¼æ æ³å®è£ vs 2022ï¼éè¦ä½¿ç¨ .net 5 å vs 2019ï¼ä½æ³¨æéè¦é¢å¤è®¾ç½®ä»¥æ¯æetç¼è¯ã\n     * ä¾èµï¼\n       * éè¦å®è£"ä½¿ç¨unityçæ¸¸æå¼å"æ©å±ã\n       * éè¦å¨"å·¥å·-éé¡¹-éç¨äºunityçå·¥å·-å¸¸è§"éï¼ææé¡¹éçç¦æ­¢å®æ´çæé¡¹ç®æ¹ä¸ºfalseï¼å¦åå¯¼è´ä½ codesç®å½éçä»£ç æ¥éã\n\n 2.  ä½¿ç¨rider2021.2.2ï¼æ´æ°å°ææ°çï¼, éè¦å®è£ä»¥ä¸åå®¹:\n     \n     * riderçunityæä»¶\n     * å®è£ .net6\n     * 2021.2.2 ä¼æ¥".net sdk 6.0.101 is not fully supported in rider"ï¼ä½å®éä¸å½±åç¼è¯(2021.12.21)\n     * 2021.3.x å®å¨æ¯æ .net6\n\n 3.  masteråæ¯éè¦unity2020.3çï¼ç¨å°äºc#8çè¯­æ³ï¼\n\n 4.  å¯å¨unityï¼ èå file -> open project... -> open éä¸­et/unityæä»¶å¤¹ï¼ç¹å»éæ©æä»¶å¤¹æé®ã\n\n 5.  ç¹å»unityèå assets -> open c# project å¯å¨vs\n\n 6.  è¿è¡unityèåä¸ç tools->buildcodeï¼è¿ä¸æ­¥å°ç¼è¯å®¢æ·ç«¯ä»£ç \n\n 7.  ç¨rideræå¼ et/client-server.sln ç¼è¯ï¼ä¸å®è¦å¨é¨å·¥ç¨ç¼è¯ï¼å³é®vsè§£å³æ¹æ¡ï¼å¨é¨ç¼è¯ï¼ è¿éæ¥çº¢åç°å¼ç¨éè¯¯ï¼æ¯å ä¸ºunityçåºè¿æ²¡ç¼è¯å°unity/temp/debugç®å½ä¸é¢ï¼ä¸è¬ä¸ç¨ç®¡ï¼å¿é¡»ä¿è¯unityæ¯å¼å¯çï¼ç¶ååªéè¦ç´æ¥ç¼è¯client-serverå³å¯ï¼ client-serverä¼ç¼è¯unity.monoãunity.monoä¼æèªå·±ä¾èµçunityçåºå¤å¶å°unity/temp/debugä¸­ãunity.model unity.hotfix unity.modelview unityhotfix.viewé½ä¼ä¾èµunity/temp/debugä¸çåºãå¦æè¿æ¯ççº¢ï¼å³é­vsæèriderï¼åæå¼unityï¼åæå¼client-server.slnï¼å ç¼è¯client-server\n\n 8.  å¯¼è¡¨å·¥å·ï¼ç¼è¯å®æåå½ä»¤è¡è¿å¥ bin ç®å½ï¼æ§è¡ dotnet tools.dll --apptype=excelexporter\n\n 9.  å¯¼åºåè®®å·¥å·ï¼ç¼è¯å®æåè¿å¥ bin ç®å½ï¼æ§è¡ dotnet tools.dll --apptype=proto2cs\n\n 10. å¯å¨æå¡å¨: dotnet server.dll --process=1 --console=1\n\n 11. unityä¸­åå»scenesç®å½ä¸­çinitåºæ¯ï¼ç¹å»playå³å¯è¿è¡\n\n\n# æµè¯ç¶æåæ­¥demo\n\n 1. æ³ä¿®æ¹éç½®å°±è¿å¥ excel ç®å½ä¿®æ¹å¯¹åºçè¡¨æ ¼ï¼åè¿è¡æ­¥éª¤çç¬¬6æ­¥ï¼ç¶åéæ°è¿è¡ server.appå·¥ç¨æ¥å¯å¨æå¡ç«¯ã\n\n 2. unity->toolsèå->æåå·¥å·ï¼éæ©pcï¼å¾éæ¯å¦æåexeï¼ç¹å»å¼å§æåï¼æåºä¸ä¸ªpcåå¨releaseç®å½ä¸ã\n\n 3. è¿è¡unity ç»å½ è¿å¥å¤§å è¿å¥åºæ¯\n\n 4. è¿è¡pcå ç»å½ è¿å¥å¤§å\n\n 5. ç¹å»é¼ æ å³é®å³å¯ç§»å¨äººç©\n\n\n# æ³¨æäºé¡¹ï¼\n\nä¸. åºéåå é½æ¯ï¼\n\n 1.  ä¸­æç®å½ã\n 2.  vs çæ¬ä½\n 3.  rideræ²¡æå®è£ç¸å³ç»ä»¶\n 4.  æ²¡å®è£ .net6\n 5.  æ²¡ç¼è¯æå¡ç«¯ææå·¥ç¨\n 6.  riderè¦æ´æ°å°ææ°çæ¬\n 7.  unityçæ¬å¤ªä½\n 8.  win7 ç¨æ·ï¼æ²¡æç¹å«è®¾ç½®\n 9.  *ç¼è¯è¿ç¨ä¸­å¦æåºç°ä¾èµé®é¢ï¼ä¹æå¯è½æ¯ unity - external tools - generate .csproj files for: å½ä¸­å¾éäº\n     1. registry packages\n     2. build-in packages\n 10. *å¦ææåæ¥éç¼ºå°"streamingasset"ï¼èªå·±å¨ et\\unity\\assets ä¸æ°å»ºä¸ä¸ª streamingasset æä»¶å¤¹å³å¯ã',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"ç®å½ç»æ",frontmatter:{title:"ç®å½ç»æ",date:"2022-05-30T17:12:34.000Z",permalink:"/pages/ff62ec/",author:{name:"å°å¼",href:"https://www.yuque.com/et-xd/docs"}},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/03.%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/03.ç®å½ç»æ.md",key:"v-6a22f932",path:"/pages/ff62ec/",headersStr:null,content:"\n\n\n1\n",normalizedContent:"\n\n\n1\n",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"1.2ä¸ºä»ä¹ä½¿ç¨.net core",frontmatter:{title:"1.2ä¸ºä»ä¹ä½¿ç¨.net core",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/f62a4d/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/12.1.2%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8.net%20core.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/12.1.2ä¸ºä»ä¹ä½¿ç¨.net core.md",key:"v-455f0d94",path:"/pages/f62a4d/",headers:[{level:6,title:"1. è¯­è¨çç¨³å®æ§ï¼è´å½æ§ï¼",slug:"_1-è¯­è¨çç¨³å®æ§-è´å½æ§",normalizedTitle:"1. è¯­è¨çç¨³å®æ§ï¼è´å½æ§ï¼",charIndex:237},{level:6,title:"2. è¿è¡æ¶ç­æ´ï¼è´å½æ§ï¼",slug:"_2-è¿è¡æ¶ç­æ´-è´å½æ§",normalizedTitle:"2. è¿è¡æ¶ç­æ´ï¼è´å½æ§ï¼",charIndex:311},{level:6,title:"3. æ¯å¦æåç¨æ¯æï¼éè¦æ§5æï¼",slug:"_3-æ¯å¦æåç¨æ¯æ-éè¦æ§5æ",normalizedTitle:"3. æ¯å¦æåç¨æ¯æï¼éè¦æ§5æï¼",charIndex:413},{level:6,title:"4. ç¼è¯éåº¦ï¼éè¦æ§5æï¼",slug:"_4-ç¼è¯éåº¦-éè¦æ§5æ",normalizedTitle:"4. ç¼è¯éåº¦ï¼éè¦æ§5æï¼",charIndex:520},{level:6,title:"5. è·¨å¹³å°ï¼4æï¼",slug:"_5-è·¨å¹³å°-4æ",normalizedTitle:"5. è·¨å¹³å°ï¼4æï¼",charIndex:587},{level:6,title:"6. å¯éè¯»æ§ï¼å¯éææ§ï¼3æï¼",slug:"_6-å¯éè¯»æ§-å¯éææ§-3æ",normalizedTitle:"6. å¯éè¯»æ§ï¼å¯éææ§ï¼3æï¼",charIndex:691},{level:6,title:"7. åºæ¯å¦é½å¨ï¼çææ¯å¦å®åï¼3æï¼",slug:"_7-åºæ¯å¦é½å¨-çææ¯å¦å®å-3æ",normalizedTitle:"7. åºæ¯å¦é½å¨ï¼çææ¯å¦å®åï¼3æï¼",charIndex:730},{level:6,title:"8.è·å®¢æ·ç«¯ç»ä¸è¯­è¨ï¼3æï¼",slug:"_8-è·å®¢æ·ç«¯ç»ä¸è¯­è¨-3æ",normalizedTitle:"8.è·å®¢æ·ç«¯ç»ä¸è¯­è¨ï¼3æï¼",charIndex:773},{level:6,title:"9. IDEçæ¯æï¼3æï¼",slug:"_9-ideçæ¯æ-3æ",normalizedTitle:"9. ideçæ¯æï¼3æï¼",charIndex:867},{level:6,title:"10. è¯­è¨çæ§è½ï¼1æï¼",slug:"_10-è¯­è¨çæ§è½-1æ",normalizedTitle:"10. è¯­è¨çæ§è½ï¼1æï¼",charIndex:914}],headersStr:"1. è¯­è¨çç¨³å®æ§ï¼è´å½æ§ï¼ 2. è¿è¡æ¶ç­æ´ï¼è´å½æ§ï¼ 3. æ¯å¦æåç¨æ¯æï¼éè¦æ§5æï¼ 4. ç¼è¯éåº¦ï¼éè¦æ§5æï¼ 5. è·¨å¹³å°ï¼4æï¼ 6. å¯éè¯»æ§ï¼å¯éææ§ï¼3æï¼ 7. åºæ¯å¦é½å¨ï¼çææ¯å¦å®åï¼3æï¼ 8.è·å®¢æ·ç«¯ç»ä¸è¯­è¨ï¼3æï¼ 9. IDEçæ¯æï¼3æï¼ 10. è¯­è¨çæ§è½ï¼1æï¼",content:"# ä¸ºä»ä¹ä½¿ç¨C# .net coreåæå¡ç«¯ï¼\n\næ¸¸ææå¡ç«¯ä»æ©æçåæå°åå¸å¼ï¼å¼åè¶æ¥è¶å¤æï¼å¯¹ç¨³å®æ§ï¼å¼åæçè¦æ±è¶æ¥è¶é«ãå¼åè¯­è¨çéæ©ä¹éæ­¥åçäºååï¼C å° C++ å° C++ + PYTHON æèC++ + LUA å°ç°å¨ å¾å¤å¬å¸å¼å§ä½¿ç¨erlangï¼goï¼javaï¼c#ãç®åæ¯ä¸ä¸ªç¾è±é½æ¾çå±é¢ã\n\nä½æ¯å¦ææ¯è¦ä½ éæ°åä¸ä¸ªç½æ¸¸serverï¼ä¸èèå¯¹å¬å¸æèå·²æçä¸è¥¿å¼å®¹æ§ï¼ä½ ä¼æä¹éæ©ï¼æä»ç»æ³äºä¸ä¸è¿ä¸ªé®é¢ï¼å¤§æ¦æè¿ä¸ªå ä¸ªæ¹é¢éè¦èèï¼\n\n# 1. è¯­è¨çç¨³å®æ§ï¼è´å½æ§ï¼\n\næ¸¸ææå¡å¨çç¹ç¹æ¯é«è´è½½ä½å»¶æ¶ãæä»¥ä¸è¬æå¡ç«¯è¿ç¨é½æ¯å¸¦ç¶æçï¼ä¸æ¦ææå°±æå³çæ°æ®ä¸¢å¤±ï¼è¿ç¹æ¯æ æ³å®¹å¿çã\n\n# 2. è¿è¡æ¶ç­æ´ï¼è´å½æ§ï¼\n\næ¸¸ææå¡å¨é»è¾æå¶å¤æï¼å¾å®¹æåºç°bugï¼ä½æ¯åä¸è½ç»å¸¸åæï¼æä»¥ç­æ´ä¿®å¤bugå°±æ¾å¾ååå¿è¦ãåºç°éè¯¯å¼åäººåå¯ä»¥ç«å³ç¼åä»£ç ï¼ç¶åç­æ´ä¿®å¤ï¼çº¿ä¸ç¨æ·å®å¨æè§ä¸å°ã\n\n# 3. æ¯å¦æåç¨æ¯æï¼éè¦æ§5æï¼\n\nåå¸å¼æå¡å¨æ¶æï¼è¿ç¨ä¸è¿ç¨ä¹é´å¿ç¶ä¼æå¤§éäº¤äºãç±äºæ¸¸æé»è¾å¾é¾æåæå¤çº¿ç¨ï¼æä»¥ä¸è¬æ¥è¯´é½æ¯é»è¾åçº¿ç¨ãå¦ææ²¡æåç¨æ¯æï¼å¿ç¶äº§çå¤§éåè°ï¼ä»£ç ç»´æ¤ä¼åå¾éå¸¸å°é¾ã\n\n# 4. ç¼è¯éåº¦ï¼éè¦æ§5æï¼\n\nä½¿ç¨c++å¼åï¼30%çæ¶é´é½æµªè´¹å¨ç¼è¯ä¸ãåå¦ç¼è¯å¾å¿«æèä¸éè¦ç¼è¯ï¼å¿å®å¤§å¤§æé«å¼åæçã\n\n# 5. è·¨å¹³å°ï¼4æï¼\n\nä¸è¬æ¸¸ææå¡å¨é½æ¶è®¾å¨linuxä¸é¢ãä½æ¯å¹³å¸¸å¼åï¼ä½¿ç¨windowsä¼æ´å æ¹ä¾¿ï¼å¦æè·¨å¹³å°ï¼å¼åä»¥åæµè¯æçä¼å¤§å¤§æåï¼å¹¶ä¸ä¸éè¦åç¬æä¸ä¸ªå¼åæºï¼æ¬æºçµèå°±å¯ä»¥æ»¡è¶³å¹³å¸¸å¼å\n\n# 6. å¯éè¯»æ§ï¼å¯éææ§ï¼3æï¼\n\nä»£ç å¯ä»¥éæè½å¤§å¤§åè½»åä»£ç çé¾åº¦\n\n# 7. åºæ¯å¦é½å¨ï¼çææ¯å¦å®åï¼3æï¼\n\nåºé½å¨ï¼çæå¥½ï¼èªå·±éè¦é çè½®å­å°±å°\n\n# 8.è·å®¢æ·ç«¯ç»ä¸è¯­è¨ï¼3æï¼\n\nå®¢æ·ç«¯æå¡ç«¯å±ç¨è¯­è¨ï¼ä¼å¿ååææ¾ï¼å¾å¤ä»£ç å¯ä»¥å¤ç¨ï¼é»è¾ç¨åºåä¸åéè¦åºåååç«¯ï¼åç«¯é½å¯ä»¥åï¼ä¸ä¸ªäººå³å¯å®æä¸ä¸ªåè½ï¼å¤§å¤§åå°äºæ²éçæ¶é´ææ¬ã\n\n# 9. IDEçæ¯æï¼3æï¼\n\nä»£ç æç¤ºï¼éæç­æ¯æï¼ä¼ç§çIDEè½æé«å åçå¼åæçã\n\n# 10. è¯­è¨çæ§è½ï¼1æï¼\n\nç®åæå¡å¨æ§è½é½ä¸æ¯å¤ªå¤§é®é¢ï¼ä¸è¿æ§è½å¥½æ»æ¯æ§è½å·®è¦å¼ºã\n\nè¯­è¨        C#      C/C++       JAVA   GO    LUA         PYTHON   ERLANG\nç¨³å®æ§       ç¨³å®      å®¹ææ         ç¨³å®     ç¨³å®    ç¨³å®          ç¨³å®       ç¨³å®\nè¿è¡æ¶ç­æ´     æ¯æ      è¾é¾æ¯æ        æ¯æ     ä¸æ¯æ   æ¯æ          æ¯æ       æ¯æ\nè·¨å¹³å°       æ¯æ      è¾é¾æ¯æ        æ¯æ     æ¯æ    è¾é¾æ¯æ        æ¯æ       æ¯æ\nåç¨        æ       éè¦èªå·±å®ç°      æ¯æä¸å¥½   æ¯æ    æ¯æ          æ¯æ       æ¯æ\nç¼è¯éåº¦      å¿«       æ¢           å¿«      å¿«     ä¸éè¦ç¼è¯       ä¸éè¦ç¼è¯    ä¸éè¦ç¼è¯\néè¯»æ§éææ§    å¥½       ä¸è¬          å¥½      ä¸è¬    å·®           å·®        å·®\næ¸¸æåºè·çæ    å¥½       å¥½           ä¸è¬     ä¸è¬    å·®           å¥½        ä¸è¬\nå®¢æ·ç«¯ç»ä¸è¯­è¨   Unity   UnityãUE4   ææ      ææ     UnityãUE4   UE4      ææ \nIDEçæ¯æ    å¥½       å¥½           å¥½      æ®é    å·®           å·®        å·®\nè¯­è¨çæ§è½     å¥½       æå¥½          å¥½      å¥½     å·®           å¾å·®       å·®\n\nä»è¡¨æ ¼å¯ä»¥çåº:\n\n 1. C/C++ç¨³å®æ§å·®ï¼ç¼è¯éåº¦æ¢ï¼å­å¨è´å½ç¼ºé·\n 2. Goä¸æ¯æç­æ´ï¼ç±äºä¸æ¯ææ³åï¼éææ§è¾å·®ï¼æ æ³è·å®¢æ·ç«¯å±äº«ä»£ç ï¼å­å¨è´å½ç¼ºé·\n 3. Javaåç¨æ¯æå·®ï¼æ æ³è·å®¢æ·ç«¯å±äº«ä»£ç \n 4. Luaåºå°ï¼æ§è½å·®ï¼ä»£ç å¯éè¯»æ§å¯éææ§å·®ï¼è·¨å¹³å°å®å¨ä¾èµC/C++ï¼å¤çèµ·æ¥éº»ç¦ï¼ideæ¯æå·®\n 5. Python æ§è½å¾å·®ï¼ä»£ç å¯éè¯»æ§å¯éææ§å·®ï¼æ æ³è·å®¢æ·ç«¯å±äº«ä»£ç ï¼ideæ¯æå·®\n 6. Erlang æ§è½å·®ï¼å½æ°å¼é£æ ¼ä¸å¥½ä¸æï¼ideæ¯æå·®\n 7. C# .net coreåä¸ªæ¹ä¾¿é½éå¸¸ä¼ç§ï¼ä¸è¿è·UE4æ æ³å±äº«ä»£ç \n\nå½åUnityæ¯æç«çæ¸¸æå¼æï¼C#æå¡ç«¯æ­éUnityå®å¨æ¯å¤©ä½ä¹åï¼åºæ¬ä¸æ¾ä¸å°ç¼ºé·ã",normalizedContent:"# ä¸ºä»ä¹ä½¿ç¨c# .net coreåæå¡ç«¯ï¼\n\næ¸¸ææå¡ç«¯ä»æ©æçåæå°åå¸å¼ï¼å¼åè¶æ¥è¶å¤æï¼å¯¹ç¨³å®æ§ï¼å¼åæçè¦æ±è¶æ¥è¶é«ãå¼åè¯­è¨çéæ©ä¹éæ­¥åçäºååï¼c å° c++ å° c++ + python æèc++ + lua å°ç°å¨ å¾å¤å¬å¸å¼å§ä½¿ç¨erlangï¼goï¼javaï¼c#ãç®åæ¯ä¸ä¸ªç¾è±é½æ¾çå±é¢ã\n\nä½æ¯å¦ææ¯è¦ä½ éæ°åä¸ä¸ªç½æ¸¸serverï¼ä¸èèå¯¹å¬å¸æèå·²æçä¸è¥¿å¼å®¹æ§ï¼ä½ ä¼æä¹éæ©ï¼æä»ç»æ³äºä¸ä¸è¿ä¸ªé®é¢ï¼å¤§æ¦æè¿ä¸ªå ä¸ªæ¹é¢éè¦èèï¼\n\n# 1. è¯­è¨çç¨³å®æ§ï¼è´å½æ§ï¼\n\næ¸¸ææå¡å¨çç¹ç¹æ¯é«è´è½½ä½å»¶æ¶ãæä»¥ä¸è¬æå¡ç«¯è¿ç¨é½æ¯å¸¦ç¶æçï¼ä¸æ¦ææå°±æå³çæ°æ®ä¸¢å¤±ï¼è¿ç¹æ¯æ æ³å®¹å¿çã\n\n# 2. è¿è¡æ¶ç­æ´ï¼è´å½æ§ï¼\n\næ¸¸ææå¡å¨é»è¾æå¶å¤æï¼å¾å®¹æåºç°bugï¼ä½æ¯åä¸è½ç»å¸¸åæï¼æä»¥ç­æ´ä¿®å¤bugå°±æ¾å¾ååå¿è¦ãåºç°éè¯¯å¼åäººåå¯ä»¥ç«å³ç¼åä»£ç ï¼ç¶åç­æ´ä¿®å¤ï¼çº¿ä¸ç¨æ·å®å¨æè§ä¸å°ã\n\n# 3. æ¯å¦æåç¨æ¯æï¼éè¦æ§5æï¼\n\nåå¸å¼æå¡å¨æ¶æï¼è¿ç¨ä¸è¿ç¨ä¹é´å¿ç¶ä¼æå¤§éäº¤äºãç±äºæ¸¸æé»è¾å¾é¾æåæå¤çº¿ç¨ï¼æä»¥ä¸è¬æ¥è¯´é½æ¯é»è¾åçº¿ç¨ãå¦ææ²¡æåç¨æ¯æï¼å¿ç¶äº§çå¤§éåè°ï¼ä»£ç ç»´æ¤ä¼åå¾éå¸¸å°é¾ã\n\n# 4. ç¼è¯éåº¦ï¼éè¦æ§5æï¼\n\nä½¿ç¨c++å¼åï¼30%çæ¶é´é½æµªè´¹å¨ç¼è¯ä¸ãåå¦ç¼è¯å¾å¿«æèä¸éè¦ç¼è¯ï¼å¿å®å¤§å¤§æé«å¼åæçã\n\n# 5. è·¨å¹³å°ï¼4æï¼\n\nä¸è¬æ¸¸ææå¡å¨é½æ¶è®¾å¨linuxä¸é¢ãä½æ¯å¹³å¸¸å¼åï¼ä½¿ç¨windowsä¼æ´å æ¹ä¾¿ï¼å¦æè·¨å¹³å°ï¼å¼åä»¥åæµè¯æçä¼å¤§å¤§æåï¼å¹¶ä¸ä¸éè¦åç¬æä¸ä¸ªå¼åæºï¼æ¬æºçµèå°±å¯ä»¥æ»¡è¶³å¹³å¸¸å¼å\n\n# 6. å¯éè¯»æ§ï¼å¯éææ§ï¼3æï¼\n\nä»£ç å¯ä»¥éæè½å¤§å¤§åè½»åä»£ç çé¾åº¦\n\n# 7. åºæ¯å¦é½å¨ï¼çææ¯å¦å®åï¼3æï¼\n\nåºé½å¨ï¼çæå¥½ï¼èªå·±éè¦é çè½®å­å°±å°\n\n# 8.è·å®¢æ·ç«¯ç»ä¸è¯­è¨ï¼3æï¼\n\nå®¢æ·ç«¯æå¡ç«¯å±ç¨è¯­è¨ï¼ä¼å¿ååææ¾ï¼å¾å¤ä»£ç å¯ä»¥å¤ç¨ï¼é»è¾ç¨åºåä¸åéè¦åºåååç«¯ï¼åç«¯é½å¯ä»¥åï¼ä¸ä¸ªäººå³å¯å®æä¸ä¸ªåè½ï¼å¤§å¤§åå°äºæ²éçæ¶é´ææ¬ã\n\n# 9. ideçæ¯æï¼3æï¼\n\nä»£ç æç¤ºï¼éæç­æ¯æï¼ä¼ç§çideè½æé«å åçå¼åæçã\n\n# 10. è¯­è¨çæ§è½ï¼1æï¼\n\nç®åæå¡å¨æ§è½é½ä¸æ¯å¤ªå¤§é®é¢ï¼ä¸è¿æ§è½å¥½æ»æ¯æ§è½å·®è¦å¼ºã\n\nè¯­è¨        c#      c/c++       java   go    lua         python   erlang\nç¨³å®æ§       ç¨³å®      å®¹ææ         ç¨³å®     ç¨³å®    ç¨³å®          ç¨³å®       ç¨³å®\nè¿è¡æ¶ç­æ´     æ¯æ      è¾é¾æ¯æ        æ¯æ     ä¸æ¯æ   æ¯æ          æ¯æ       æ¯æ\nè·¨å¹³å°       æ¯æ      è¾é¾æ¯æ        æ¯æ     æ¯æ    è¾é¾æ¯æ        æ¯æ       æ¯æ\nåç¨        æ       éè¦èªå·±å®ç°      æ¯æä¸å¥½   æ¯æ    æ¯æ          æ¯æ       æ¯æ\nç¼è¯éåº¦      å¿«       æ¢           å¿«      å¿«     ä¸éè¦ç¼è¯       ä¸éè¦ç¼è¯    ä¸éè¦ç¼è¯\néè¯»æ§éææ§    å¥½       ä¸è¬          å¥½      ä¸è¬    å·®           å·®        å·®\næ¸¸æåºè·çæ    å¥½       å¥½           ä¸è¬     ä¸è¬    å·®           å¥½        ä¸è¬\nå®¢æ·ç«¯ç»ä¸è¯­è¨   unity   unityãue4   ææ      ææ     unityãue4   ue4      ææ \nideçæ¯æ    å¥½       å¥½           å¥½      æ®é    å·®           å·®        å·®\nè¯­è¨çæ§è½     å¥½       æå¥½          å¥½      å¥½     å·®           å¾å·®       å·®\n\nä»è¡¨æ ¼å¯ä»¥çåº:\n\n 1. c/c++ç¨³å®æ§å·®ï¼ç¼è¯éåº¦æ¢ï¼å­å¨è´å½ç¼ºé·\n 2. goä¸æ¯æç­æ´ï¼ç±äºä¸æ¯ææ³åï¼éææ§è¾å·®ï¼æ æ³è·å®¢æ·ç«¯å±äº«ä»£ç ï¼å­å¨è´å½ç¼ºé·\n 3. javaåç¨æ¯æå·®ï¼æ æ³è·å®¢æ·ç«¯å±äº«ä»£ç \n 4. luaåºå°ï¼æ§è½å·®ï¼ä»£ç å¯éè¯»æ§å¯éææ§å·®ï¼è·¨å¹³å°å®å¨ä¾èµc/c++ï¼å¤çèµ·æ¥éº»ç¦ï¼ideæ¯æå·®\n 5. python æ§è½å¾å·®ï¼ä»£ç å¯éè¯»æ§å¯éææ§å·®ï¼æ æ³è·å®¢æ·ç«¯å±äº«ä»£ç ï¼ideæ¯æå·®\n 6. erlang æ§è½å·®ï¼å½æ°å¼é£æ ¼ä¸å¥½ä¸æï¼ideæ¯æå·®\n 7. c# .net coreåä¸ªæ¹ä¾¿é½éå¸¸ä¼ç§ï¼ä¸è¿è·ue4æ æ³å±äº«ä»£ç \n\nå½åunityæ¯æç«çæ¸¸æå¼æï¼c#æå¡ç«¯æ­éunityå®å¨æ¯å¤©ä½ä¹åï¼åºæ¬ä¸æ¾ä¸å°ç¼ºé·ã",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"2.1CSharpçåç¨",frontmatter:{title:"2.1CSharpçåç¨",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/500d39/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/21.2.1CSharp%E7%9A%84%E5%8D%8F%E7%A8%8B.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/21.2.1CSharpçåç¨.md",key:"v-3dac3e03",path:"/pages/500d39/",headersStr:null,content:'# ä»ä¹æ¯åç¨\n\nè¯´å°åç¨ï¼æä»¬åäºè§£ä»ä¹æ¯å¼æ­¥ï¼å¼æ­¥ç®åè¯´æ¥å°±æ¯ï¼æè¦åèµ·ä¸ä¸ªè°ç¨ï¼ä½æ¯è¿ä¸ªè¢«è°ç¨æ¹ï¼å¯è½æ¯å¶å®çº¿ç¨ï¼ä¹å¯è½æ¯IOï¼åºç»æéè¦ä¸æ®µæ¶é´ï¼æä¸æ³è®©è¿ä¸ªè°ç¨é»å¡ä½è°ç¨æ¹çæ´ä¸ªçº¿ç¨ï¼å æ­¤ä¼ ç»è¢«è°ç¨æ¹ä¸ä¸ªåè°å½æ°ï¼è¢«è°ç¨æ¹è¿è¡å®æååè°è¿ä¸ªåè°å½æ°å°±è½éç¥è°ç¨æ¹ç»§ç»­å¾ä¸æ§è¡ãä¸¾ä¸ªä¾å­:\nä¸é¢çä»£ç ï¼ä¸»çº¿ç¨ä¸ç´å¾ªç¯ï¼æ¯å¾ªç¯ä¸æ¬¡sleep 1æ¯«ç§ï¼è®¡æ°å ä¸ï¼æ¯10000æ¬¡æå°ä¸æ¬¡ã\n\n        private static void Main()\n        {\n            int loopCount = 0;\n            while (true)\n            {\n                int temp = watcherValue;\n                \n                Thread.Sleep(1);\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nè¿æ¶æéè¦å ä¸ªåè½ï¼å¨ç¨åºä¸å¼å§ï¼æå¸æå¨5ç§éä¹åæå°åºloopCountçå¼ãçå°5ç§åæä»¬å¯ä»¥æ³å°Sleepæ¹æ³ï¼å®ä¼é»å¡çº¿ç¨ä¸å®æ¶é´ç¶åç»§ç»­æ§è¡ãæä»¬æ¾ç¶ä¸è½å¨ä¸»çº¿ç¨ä¸­Sleepï¼å ä¸ºä¼ç ´åææ¯10000æ¬¡è®¡æ°æå°ä¸æ¬¡çé»è¾ã\n\n    // example2_1\n    class Program\n    {\n        private static int loopCount = 0;\n\n        private static void Main()\n        {\n            OneThreadSynchronizationContext _ = OneThreadSynchronizationContext.Instance;\n            \n            WaitTimeAsync(5000, WaitTimeFinishCallback);\n            \n            while (true)\n            {\n                OneThreadSynchronizationContext.Instance.Update();\n                \n                Thread.Sleep(1);\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n\n        private static void WaitTimeAsync(int waitTime, Action action)\n        {\n            Thread thread = new Thread(()=>WaitTime(waitTime, action));\n            thread.Start();\n        }\n        \n        private static void WaitTimeFinishCallback()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n        }\n\n        /// <summary>\n        /// å¨å¦å¤ççº¿ç¨ç­å¾\n        /// </summary>\n        private static void WaitTime(int waitTime, Action action)\n        {\n            Thread.Sleep(waitTime);\n            \n            // å°actionæåä¸»çº¿ç¨æ§è¡\n            OneThreadSynchronizationContext.Instance.Post((o)=>action(), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\næä»¬å¨è¿éè®¾è®¡äºä¸ä¸ªWaitTimeAsyncæ¹æ³ï¼WaitTimeAsyncå¶å®å°±æ¯ä¸ä¸ªå¸åçå¼æ­¥æ¹æ³ï¼å®ä»ä¸»çº¿ç¨åèµ·è°ç¨ï¼ä¼ å¥äºä¸ä¸ªWaitTimeFinishCallbackåè°æ¹æ³ååæ°ï¼å¼å¯äºä¸ä¸ªçº¿ç¨ï¼çº¿ç¨Sleepä¸å®æ¶é´åï¼å°ä¼ è¿æ¥çåè°æåå°ä¸»çº¿ç¨æ§è¡ãOneThreadSynchronizationContextæ¯ä¸ä¸ªè·¨çº¿ç¨éåï¼ä»»ä½çº¿ç¨å¯ä»¥å¾éé¢æå§æï¼OneThreadSynchronizationContextçUpdateæ¹æ³å¨ä¸»çº¿ç¨ä¸­è°ç¨ï¼ä¼å°è¿äºå§æååºæ¥æ¾å°ä¸»çº¿ç¨æ§è¡ãä¸ºä»ä¹åè°æ¹æ³éè¦æåå°ä¸»çº¿ç¨æ§è¡å¢ï¼å ä¸ºåè°æ¹æ³ä¸­è¯»åäºloopCountï¼loopCountå¨ä¸»çº¿ç¨ä¸­ä¹æè¯»åï¼æä»¥è¦ä¹å éï¼è¦ä¹æ°¸è¿ä¿è¯åªå¨ä¸»çº¿ç¨ä¸­è¯»åãå éæ¯ä¸ªä¸å¥½çåæ³ï¼ä»£ç ä¸­å°å¤æ¯éä¼å¯¼è´éè¯»è·ç»´æ¤å°é¾ï¼å¾å®¹æäº§çå¤çº¿ç¨bugãè¿ç§å°é»è¾æåæå§æç¶åæåå¦å¤ä¸ä¸ªçº¿ç¨æ¯å¤çº¿ç¨å¼åä¸­å¸¸ç¨çæå·§ã\n\næä»¬å¯è½åæä¸ªæ°éæ±ï¼WaitTimeFinishCallbackæ§è¡å®æä¹åï¼åæ³ç­3ç§ï¼åæå°ä¸ä¸loopCountã\n\n        private static void WaitTimeAsync(int waitTime, Action action)\n        {\n            Thread thread = new Thread(()=>WaitTime(waitTime, action));\n            thread.Start();\n        }\n        private static void WaitTimeFinishCallback()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            WaitTimeAsync(3000, WaitTimeFinishCallback2);\n        }\n        \n        private static void WaitTimeFinishCallback2()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\næä»¬è¿æ¶è¿å¯è½æ¹éæ±ï¼éè¦å¨ç¨åºå¯å¨5ç§åï¼æ¥ä¸æ¥4ç§ï¼åæ¥ä¸æ¥3ç§ï¼æå°loopCountï¼ä¹å°±æ¯ä¸é¢çé»è¾ä¸­é´åæå¥ä¸ä¸ª3ç§ç­å¾ã\n\n        private static void WaitTimeAsync(int waitTime, Action action)\n        {\n            Thread thread = new Thread(()=>WaitTime(waitTime, action));\n            thread.Start();\n        }\n        \n        private static void WaitTimeFinishCallback()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            WaitTimeAsync(4000, WaitTimeFinishCallback3);\n        }\n        \n        private static void WaitTimeFinishCallback3()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            WaitTimeAsync(3000, WaitTimeFinishCallback2);\n        }\n        \n        private static void WaitTimeFinishCallback2()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\nè¿æ ·ä¸­é´æå¥ä¸æ®µä»£ç ï¼æ¾å¾éå¸¸éº»ç¦ãè¿éå¯ä»¥åç­ä»ä¹æ¯åç¨äºï¼å¶å®è¿ä¸ä¸²ä¸²åè°å°±æ¯åç¨ã',normalizedContent:'# ä»ä¹æ¯åç¨\n\nè¯´å°åç¨ï¼æä»¬åäºè§£ä»ä¹æ¯å¼æ­¥ï¼å¼æ­¥ç®åè¯´æ¥å°±æ¯ï¼æè¦åèµ·ä¸ä¸ªè°ç¨ï¼ä½æ¯è¿ä¸ªè¢«è°ç¨æ¹ï¼å¯è½æ¯å¶å®çº¿ç¨ï¼ä¹å¯è½æ¯ioï¼åºç»æéè¦ä¸æ®µæ¶é´ï¼æä¸æ³è®©è¿ä¸ªè°ç¨é»å¡ä½è°ç¨æ¹çæ´ä¸ªçº¿ç¨ï¼å æ­¤ä¼ ç»è¢«è°ç¨æ¹ä¸ä¸ªåè°å½æ°ï¼è¢«è°ç¨æ¹è¿è¡å®æååè°è¿ä¸ªåè°å½æ°å°±è½éç¥è°ç¨æ¹ç»§ç»­å¾ä¸æ§è¡ãä¸¾ä¸ªä¾å­:\nä¸é¢çä»£ç ï¼ä¸»çº¿ç¨ä¸ç´å¾ªç¯ï¼æ¯å¾ªç¯ä¸æ¬¡sleep 1æ¯«ç§ï¼è®¡æ°å ä¸ï¼æ¯10000æ¬¡æå°ä¸æ¬¡ã\n\n        private static void main()\n        {\n            int loopcount = 0;\n            while (true)\n            {\n                int temp = watchervalue;\n                \n                thread.sleep(1);\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nè¿æ¶æéè¦å ä¸ªåè½ï¼å¨ç¨åºä¸å¼å§ï¼æå¸æå¨5ç§éä¹åæå°åºloopcountçå¼ãçå°5ç§åæä»¬å¯ä»¥æ³å°sleepæ¹æ³ï¼å®ä¼é»å¡çº¿ç¨ä¸å®æ¶é´ç¶åç»§ç»­æ§è¡ãæä»¬æ¾ç¶ä¸è½å¨ä¸»çº¿ç¨ä¸­sleepï¼å ä¸ºä¼ç ´åææ¯10000æ¬¡è®¡æ°æå°ä¸æ¬¡çé»è¾ã\n\n    // example2_1\n    class program\n    {\n        private static int loopcount = 0;\n\n        private static void main()\n        {\n            onethreadsynchronizationcontext _ = onethreadsynchronizationcontext.instance;\n            \n            waittimeasync(5000, waittimefinishcallback);\n            \n            while (true)\n            {\n                onethreadsynchronizationcontext.instance.update();\n                \n                thread.sleep(1);\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n\n        private static void waittimeasync(int waittime, action action)\n        {\n            thread thread = new thread(()=>waittime(waittime, action));\n            thread.start();\n        }\n        \n        private static void waittimefinishcallback()\n        {\n            console.writeline($"waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n        }\n\n        /// <summary>\n        /// å¨å¦å¤ççº¿ç¨ç­å¾\n        /// </summary>\n        private static void waittime(int waittime, action action)\n        {\n            thread.sleep(waittime);\n            \n            // å°actionæåä¸»çº¿ç¨æ§è¡\n            onethreadsynchronizationcontext.instance.post((o)=>action(), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\næä»¬å¨è¿éè®¾è®¡äºä¸ä¸ªwaittimeasyncæ¹æ³ï¼waittimeasyncå¶å®å°±æ¯ä¸ä¸ªå¸åçå¼æ­¥æ¹æ³ï¼å®ä»ä¸»çº¿ç¨åèµ·è°ç¨ï¼ä¼ å¥äºä¸ä¸ªwaittimefinishcallbackåè°æ¹æ³ååæ°ï¼å¼å¯äºä¸ä¸ªçº¿ç¨ï¼çº¿ç¨sleepä¸å®æ¶é´åï¼å°ä¼ è¿æ¥çåè°æåå°ä¸»çº¿ç¨æ§è¡ãonethreadsynchronizationcontextæ¯ä¸ä¸ªè·¨çº¿ç¨éåï¼ä»»ä½çº¿ç¨å¯ä»¥å¾éé¢æå§æï¼onethreadsynchronizationcontextçupdateæ¹æ³å¨ä¸»çº¿ç¨ä¸­è°ç¨ï¼ä¼å°è¿äºå§æååºæ¥æ¾å°ä¸»çº¿ç¨æ§è¡ãä¸ºä»ä¹åè°æ¹æ³éè¦æåå°ä¸»çº¿ç¨æ§è¡å¢ï¼å ä¸ºåè°æ¹æ³ä¸­è¯»åäºloopcountï¼loopcountå¨ä¸»çº¿ç¨ä¸­ä¹æè¯»åï¼æä»¥è¦ä¹å éï¼è¦ä¹æ°¸è¿ä¿è¯åªå¨ä¸»çº¿ç¨ä¸­è¯»åãå éæ¯ä¸ªä¸å¥½çåæ³ï¼ä»£ç ä¸­å°å¤æ¯éä¼å¯¼è´éè¯»è·ç»´æ¤å°é¾ï¼å¾å®¹æäº§çå¤çº¿ç¨bugãè¿ç§å°é»è¾æåæå§æç¶åæåå¦å¤ä¸ä¸ªçº¿ç¨æ¯å¤çº¿ç¨å¼åä¸­å¸¸ç¨çæå·§ã\n\næä»¬å¯è½åæä¸ªæ°éæ±ï¼waittimefinishcallbackæ§è¡å®æä¹åï¼åæ³ç­3ç§ï¼åæå°ä¸ä¸loopcountã\n\n        private static void waittimeasync(int waittime, action action)\n        {\n            thread thread = new thread(()=>waittime(waittime, action));\n            thread.start();\n        }\n        private static void waittimefinishcallback()\n        {\n            console.writeline($"waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            waittimeasync(3000, waittimefinishcallback2);\n        }\n        \n        private static void waittimefinishcallback2()\n        {\n            console.writeline($"waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\næä»¬è¿æ¶è¿å¯è½æ¹éæ±ï¼éè¦å¨ç¨åºå¯å¨5ç§åï¼æ¥ä¸æ¥4ç§ï¼åæ¥ä¸æ¥3ç§ï¼æå°loopcountï¼ä¹å°±æ¯ä¸é¢çé»è¾ä¸­é´åæå¥ä¸ä¸ª3ç§ç­å¾ã\n\n        private static void waittimeasync(int waittime, action action)\n        {\n            thread thread = new thread(()=>waittime(waittime, action));\n            thread.start();\n        }\n        \n        private static void waittimefinishcallback()\n        {\n            console.writeline($"waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            waittimeasync(4000, waittimefinishcallback3);\n        }\n        \n        private static void waittimefinishcallback3()\n        {\n            console.writeline($"waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            waittimeasync(3000, waittimefinishcallback2);\n        }\n        \n        private static void waittimefinishcallback2()\n        {\n            console.writeline($"waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\nè¿æ ·ä¸­é´æå¥ä¸æ®µä»£ç ï¼æ¾å¾éå¸¸éº»ç¦ãè¿éå¯ä»¥åç­ä»ä¹æ¯åç¨äºï¼å¶å®è¿ä¸ä¸²ä¸²åè°å°±æ¯åç¨ã',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"2.2æ´å¥½çåç¨",frontmatter:{title:"2.2æ´å¥½çåç¨",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/0f0a88/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/22.2.2%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%8D%8F%E7%A8%8B.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/22.2.2æ´å¥½çåç¨.md",key:"v-15a9f55e",path:"/pages/0f0a88/",headersStr:null,content:'# æ´å¥½çåç¨\n\nä¸æè®²äºä¸ä¸²åè°å°±æ¯åç¨ï¼æ¾ç¶è¿æ ·åä»£ç ï¼å¢å é»è¾ï¼æå¥é»è¾éå¸¸å®¹æåºéãæä»¬éè¦å©ç¨å¼æ­¥è¯­æ³æè¿ä¸ªå¼æ­¥åè°çå½¢å¼æ¹æåæ­¥çå½¢å¼ï¼å¹¸å¥½C#å·²ç»å¸®æä»¬è®¾è®¡å¥½äºï¼çä»£ç \n\n    // example2_2\n    class Program\n    {\n        private static int loopCount = 0;\n        \n        static void Main(string[] args)\n        {\n            OneThreadSynchronizationContext _ = OneThreadSynchronizationContext.Instance;\n\n            Console.WriteLine($"ä¸»çº¿ç¨: {Thread.CurrentThread.ManagedThreadId}");\n            \n            Crontine();\n            \n            while (true)\n            {\n                OneThreadSynchronizationContext.Instance.Update();\n                \n                Thread.Sleep(1);\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n\n        private static async void Crontine()\n        {\n            await WaitTimeAsync(5000);\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            await WaitTimeAsync(4000);\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            await WaitTimeAsync(3000);\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n        }\n        \n        private static Task WaitTimeAsync(int waitTime)\n        {\n            TaskCompletionSource<bool> tcs = new TaskCompletionSource<bool>();\n            Thread thread = new Thread(()=>WaitTime(waitTime, tcs));\n            thread.Start();\n            return tcs.Task;\n        }\n        \n        /// <summary>\n        /// å¨å¦å¤ççº¿ç¨ç­å¾\n        /// </summary>\n        private static void WaitTime(int waitTime, TaskCompletionSource<bool> tcs)\n        {\n            Thread.Sleep(waitTime);\n            \n            // å°tcsæåä¸»çº¿ç¨æ§è¡\n            OneThreadSynchronizationContext.Instance.Post(o=>tcs.SetResult(true), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n\n\nå¨è¿æ®µä»£ç éé¢ï¼WaitTimeAsyncæ¹æ³ä¸­ï¼æä»¬å©ç¨äºTaskCompletionSourceç±»æ¿ä»£äºä¹åä¼ å¥çActionåæ°ï¼WaitTimeAsyncæ¹æ³è¿åäºä¸ä¸ªTaskç±»åçç»æãWaitTimeä¸­æä»¬æaction()æ¿æ¢æäºtcs.SetResult(true),WaitTimeAsyncæ¹æ³åä½¿ç¨awaitå³é®å­ï¼è¿æ ·å¯ä»¥å°ä¸è¿ä¸²çåè°æ¹æåæ­¥çå½¢å¼ãè¿æ ·ä¸æ¥ä»£ç æ¾å¾ååç®æ´ï¼å¼åèµ·æ¥ä¹æ¹ä¾¿å¤äºã\n\nè¿éè¿æä¸ªæå·§ï¼æä»¬åç°WaitTimeä¸­éè¦å°tcs.SetResultæåå°ä¸»çº¿ç¨æ§è¡ï¼å¾®è½¯ç»æä»¬æä¾äºä¸ç§ç®åçæ¹æ³ï¼åèexample2_2_2ï¼å¨ä¸»çº¿ç¨è®¾ç½®å¥½åæ­¥ä¸ä¸æï¼\n\n// example2_2_2\nSynchronizationContext.SetSynchronizationContext(OneThreadSynchronizationContext.Instance);\n\n\n1\n2\n\n\nå¨WaitTimeä¸­ç´æ¥è°ç¨tcs.SetResult(true)å°±è¡äºï¼åè°ä¼èªå¨æå°åæ­¥ä¸ä¸æä¸­ï¼èåæ­¥ä¸ä¸ææä»¬å¯ä»¥å¨ä¸»çº¿ç¨ä¸­ååºåè°æ§è¡ï¼è¿æ ·èªå¨è½å¤å®æåå°ä¸»çº¿ç¨çæä½\n\n        private static void WaitTime(int waitTime, TaskCompletionSource<bool> tcs)\n        {\n            Thread.Sleep(waitTime);\n\n            tcs.SetResult(true);\n        }\n\n\n1\n2\n3\n4\n5\n6\n\n\nå¦æä¸è®¾ç½®åæ­¥ä¸ä¸æï¼ä½ ä¼åç°æå°åºæ¥å½åçº¿ç¨å°±ä¸æ¯ä¸»çº¿ç¨äºï¼è¿ä¹æ¯å¾å¤ç¬¬ä¸æ¹åºè·.net coreåç½®åºçç¨æ³ï¼é»è®¤ä¸åè°å°ä¸»çº¿ç¨ï¼æä»¥æä»¬ä½¿ç¨çæ¶åéè¦è®¾ç½®ä¸åæ­¥ä¸ä¸æãå¶å®è¿ä¸ªè®¾è®¡æ¬äººè§å¾æ²¡æå¿è¦ï¼äº¤ç±åºçå¼åèå»å®ç°æ´å¥½ï¼å°¤å¶æ¯å¨æ¸¸æå¼åä¸­ï¼é»è¾å¨é¨æ¯åçº¿ç¨çï¼åè°æ¯æ¬¡é½èµ°ä¸éåæ­¥ä¸ä¸æå°±æ¾å¾å¤ä½äºï¼æä»¥ETæ¡æ¶æä¾äºä¸ä½¿ç¨åæ­¥ä¸ä¸æçå®ç°ETTaskï¼ä»£ç æ´å ç®æ´æ´å é«æï¼è¿ä¸ªåé¢ä¼è®²å°ã',normalizedContent:'# æ´å¥½çåç¨\n\nä¸æè®²äºä¸ä¸²åè°å°±æ¯åç¨ï¼æ¾ç¶è¿æ ·åä»£ç ï¼å¢å é»è¾ï¼æå¥é»è¾éå¸¸å®¹æåºéãæä»¬éè¦å©ç¨å¼æ­¥è¯­æ³æè¿ä¸ªå¼æ­¥åè°çå½¢å¼æ¹æåæ­¥çå½¢å¼ï¼å¹¸å¥½c#å·²ç»å¸®æä»¬è®¾è®¡å¥½äºï¼çä»£ç \n\n    // example2_2\n    class program\n    {\n        private static int loopcount = 0;\n        \n        static void main(string[] args)\n        {\n            onethreadsynchronizationcontext _ = onethreadsynchronizationcontext.instance;\n\n            console.writeline($"ä¸»çº¿ç¨: {thread.currentthread.managedthreadid}");\n            \n            crontine();\n            \n            while (true)\n            {\n                onethreadsynchronizationcontext.instance.update();\n                \n                thread.sleep(1);\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n\n        private static async void crontine()\n        {\n            await waittimeasync(5000);\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            await waittimeasync(4000);\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            await waittimeasync(3000);\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n        }\n        \n        private static task waittimeasync(int waittime)\n        {\n            taskcompletionsource<bool> tcs = new taskcompletionsource<bool>();\n            thread thread = new thread(()=>waittime(waittime, tcs));\n            thread.start();\n            return tcs.task;\n        }\n        \n        /// <summary>\n        /// å¨å¦å¤ççº¿ç¨ç­å¾\n        /// </summary>\n        private static void waittime(int waittime, taskcompletionsource<bool> tcs)\n        {\n            thread.sleep(waittime);\n            \n            // å°tcsæåä¸»çº¿ç¨æ§è¡\n            onethreadsynchronizationcontext.instance.post(o=>tcs.setresult(true), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n\n\nå¨è¿æ®µä»£ç éé¢ï¼waittimeasyncæ¹æ³ä¸­ï¼æä»¬å©ç¨äºtaskcompletionsourceç±»æ¿ä»£äºä¹åä¼ å¥çactionåæ°ï¼waittimeasyncæ¹æ³è¿åäºä¸ä¸ªtaskç±»åçç»æãwaittimeä¸­æä»¬æaction()æ¿æ¢æäºtcs.setresult(true),waittimeasyncæ¹æ³åä½¿ç¨awaitå³é®å­ï¼è¿æ ·å¯ä»¥å°ä¸è¿ä¸²çåè°æ¹æåæ­¥çå½¢å¼ãè¿æ ·ä¸æ¥ä»£ç æ¾å¾ååç®æ´ï¼å¼åèµ·æ¥ä¹æ¹ä¾¿å¤äºã\n\nè¿éè¿æä¸ªæå·§ï¼æä»¬åç°waittimeä¸­éè¦å°tcs.setresultæåå°ä¸»çº¿ç¨æ§è¡ï¼å¾®è½¯ç»æä»¬æä¾äºä¸ç§ç®åçæ¹æ³ï¼åèexample2_2_2ï¼å¨ä¸»çº¿ç¨è®¾ç½®å¥½åæ­¥ä¸ä¸æï¼\n\n// example2_2_2\nsynchronizationcontext.setsynchronizationcontext(onethreadsynchronizationcontext.instance);\n\n\n1\n2\n\n\nå¨waittimeä¸­ç´æ¥è°ç¨tcs.setresult(true)å°±è¡äºï¼åè°ä¼èªå¨æå°åæ­¥ä¸ä¸æä¸­ï¼èåæ­¥ä¸ä¸ææä»¬å¯ä»¥å¨ä¸»çº¿ç¨ä¸­ååºåè°æ§è¡ï¼è¿æ ·èªå¨è½å¤å®æåå°ä¸»çº¿ç¨çæä½\n\n        private static void waittime(int waittime, taskcompletionsource<bool> tcs)\n        {\n            thread.sleep(waittime);\n\n            tcs.setresult(true);\n        }\n\n\n1\n2\n3\n4\n5\n6\n\n\nå¦æä¸è®¾ç½®åæ­¥ä¸ä¸æï¼ä½ ä¼åç°æå°åºæ¥å½åçº¿ç¨å°±ä¸æ¯ä¸»çº¿ç¨äºï¼è¿ä¹æ¯å¾å¤ç¬¬ä¸æ¹åºè·.net coreåç½®åºçç¨æ³ï¼é»è®¤ä¸åè°å°ä¸»çº¿ç¨ï¼æä»¥æä»¬ä½¿ç¨çæ¶åéè¦è®¾ç½®ä¸åæ­¥ä¸ä¸æãå¶å®è¿ä¸ªè®¾è®¡æ¬äººè§å¾æ²¡æå¿è¦ï¼äº¤ç±åºçå¼åèå»å®ç°æ´å¥½ï¼å°¤å¶æ¯å¨æ¸¸æå¼åä¸­ï¼é»è¾å¨é¨æ¯åçº¿ç¨çï¼åè°æ¯æ¬¡é½èµ°ä¸éåæ­¥ä¸ä¸æå°±æ¾å¾å¤ä½äºï¼æä»¥etæ¡æ¶æä¾äºä¸ä½¿ç¨åæ­¥ä¸ä¸æçå®ç°ettaskï¼ä»£ç æ´å ç®æ´æ´å é«æï¼è¿ä¸ªåé¢ä¼è®²å°ã',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"2.3åçº¿ç¨å¼æ­¥",frontmatter:{title:"2.3åçº¿ç¨å¼æ­¥",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/d3ef38/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/23.2.3%E5%8D%95%E7%BA%BF%E7%A8%8B%E5%BC%82%E6%AD%A5.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/23.2.3åçº¿ç¨å¼æ­¥.md",key:"v-72b8a039",path:"/pages/d3ef38/",headersStr:null,content:'# åçº¿ç¨å¼æ­¥\n\nåé¢å ä¸ªä¾å­é½æ¯å¤çº¿ç¨å®ç°çå¼æ­¥ï¼ä½æ¯å¼æ­¥æ¾ç¶ä¸ä»ä»æ¯å¤çº¿ç¨çãæä»¬å¨ä¹åçä¾å­ä¸­ä½¿ç¨äºSleepæ¥å®ç°æ¶é´çç­å¾ï¼æ¯ä¸ä¸ªè®¡æ¶å¨é½éè¦ä½¿ç¨ä¸ä¸ªçº¿ç¨ï¼ä¼å¯¼è´çº¿ç¨åæ¢é¢ç¹ï¼è¿ä¸ªå®ç°æçå¾ä½ï¼å¹³å¸¸æ¯ä¸ä¼è¿æ ·åçãä¸è¬æ¸¸æé»è¾ä¸­ä¼è®¾è®¡ä¸ä¸ªåçº¿ç¨çè®¡æ¶å¨ï¼æä»¬è¿éåä¸ä¸ªç®åçå®ç°ï¼ç¨æ¥è®²è§£åçº¿ç¨å¼æ­¥ã\n\n    // example2_3\n    class Program\n    {\n        private static int loopCount = 0;\n\n        private static long time;\n        private static Action action;\n        \n        static void Main(string[] args)\n        {\n            Console.WriteLine($"ä¸»çº¿ç¨: {Thread.CurrentThread.ManagedThreadId}");\n\n            Crontine();\n            \n            while (true)\n            {\n                Thread.Sleep(1);\n\n                CheckTimerOut();\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n        \n        private static void Crontine()\n        {\n            WaitTimeAsync(5000, WaitTimeAsyncCallback1);\n        }\n\n        private static void WaitTimeAsyncCallback1()\n        {\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            WaitTimeAsync(4000, WaitTimeAsyncCallback2);\n        }\n        \n        private static void WaitTimeAsyncCallback2()\n        {\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            WaitTimeAsync(3000, WaitTimeAsyncCallback3);\n        }\n        \n        private static void WaitTimeAsyncCallback3()\n        {\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n        }\n\n        private static void CheckTimerOut()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowTicks = DateTime.Now.Ticks / 10000;\n            if (time > nowTicks)\n            {\n                return;\n            }\n\n            time = 0;\n            action.Invoke();\n        }\n        \n        private static void WaitTimeAsync(int waitTime, Action a)\n        {\n            time = DateTime.Now.Ticks / 10000 + waitTime;\n            action = a;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n\n\nè¿ä¸ªä¾å­åæ ·å®ç°äºä¸ä¸ªç®åçè®¡æ¶æ¹æ³ï¼WaitTimeAsyncè°ç¨æ¶ä¼å°åè°æ¹æ³è·æ¶é´è®°å½ä¸æ¥ï¼ä¸»çº¿ç¨æ¯å¸§é½ä¼è°ç¨CheckTimerOutï¼CheckTimerOutéé¢å¤æ­è®¡æ¶å¨æ¯å¦è¿æï¼è¿æäºåè°ç¨åè°æ¹æ³ãæ´ä¸ªé»è¾é½å¨ä¸»çº¿ç¨ä¸­å®æï¼åæ ·æ¯å¼æ­¥æ¹æ³ãæä»¥å¼æ­¥å¹¶éå¤çº¿ç¨ï¼åçº¿ç¨åæ ·å¯ä»¥å¼æ­¥ãä¸é¢çä¾å­åæ ·å¯ä»¥æ¹æawaitçå½¢å¼ã\n\n    // example2_3_2\n    class Program\n    {\n        private static int loopCount = 0;\n\n        private static long time;\n        private static TaskCompletionSource<bool> tcs;\n        \n        static void Main(string[] args)\n        {\n            Console.WriteLine($"ä¸»çº¿ç¨: {Thread.CurrentThread.ManagedThreadId}");\n\n            Crontine();\n            \n            while (true)\n            {\n                Thread.Sleep(1);\n\n                CheckTimerOut();\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n        \n        private static async void Crontine()\n        {\n            await WaitTimeAsync(5000);\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            await WaitTimeAsync(4000);\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n            await WaitTimeAsync(3000);\n            Console.WriteLine($"å½åçº¿ç¨: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCountçå¼æ¯: {loopCount}");\n        }\n\n        private static void CheckTimerOut()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowTicks = DateTime.Now.Ticks / 10000;\n            if (time > nowTicks)\n            {\n                return;\n            }\n\n            time = 0;\n            tcs.SetResult(true);\n        }\n        \n        private static Task WaitTimeAsync(int waitTime)\n        {\n            TaskCompletionSource<bool> t = new TaskCompletionSource<bool>();\n            time = DateTime.Now.Ticks / 10000 + waitTime;\n            tcs = t;\n            return t.Task;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n\n\nä¸é¢è¿ä¸ªä¾å­ææè°ç¨å¨é¨å¨ä¸»çº¿ç¨ä¸­å®æï¼å¹¶ä¸ä½¿ç¨äºawaitï¼å æ­¤awaitå¹¶ä¸ä¼å¼å¯å¤çº¿ç¨ï¼awaitå·ä½ç¨æ²¡ç¨å¤çº¿ç¨å®å¨åå³äºå·ä½çå®ç°',normalizedContent:'# åçº¿ç¨å¼æ­¥\n\nåé¢å ä¸ªä¾å­é½æ¯å¤çº¿ç¨å®ç°çå¼æ­¥ï¼ä½æ¯å¼æ­¥æ¾ç¶ä¸ä»ä»æ¯å¤çº¿ç¨çãæä»¬å¨ä¹åçä¾å­ä¸­ä½¿ç¨äºsleepæ¥å®ç°æ¶é´çç­å¾ï¼æ¯ä¸ä¸ªè®¡æ¶å¨é½éè¦ä½¿ç¨ä¸ä¸ªçº¿ç¨ï¼ä¼å¯¼è´çº¿ç¨åæ¢é¢ç¹ï¼è¿ä¸ªå®ç°æçå¾ä½ï¼å¹³å¸¸æ¯ä¸ä¼è¿æ ·åçãä¸è¬æ¸¸æé»è¾ä¸­ä¼è®¾è®¡ä¸ä¸ªåçº¿ç¨çè®¡æ¶å¨ï¼æä»¬è¿éåä¸ä¸ªç®åçå®ç°ï¼ç¨æ¥è®²è§£åçº¿ç¨å¼æ­¥ã\n\n    // example2_3\n    class program\n    {\n        private static int loopcount = 0;\n\n        private static long time;\n        private static action action;\n        \n        static void main(string[] args)\n        {\n            console.writeline($"ä¸»çº¿ç¨: {thread.currentthread.managedthreadid}");\n\n            crontine();\n            \n            while (true)\n            {\n                thread.sleep(1);\n\n                checktimerout();\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n        \n        private static void crontine()\n        {\n            waittimeasync(5000, waittimeasynccallback1);\n        }\n\n        private static void waittimeasynccallback1()\n        {\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            waittimeasync(4000, waittimeasynccallback2);\n        }\n        \n        private static void waittimeasynccallback2()\n        {\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            waittimeasync(3000, waittimeasynccallback3);\n        }\n        \n        private static void waittimeasynccallback3()\n        {\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n        }\n\n        private static void checktimerout()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowticks = datetime.now.ticks / 10000;\n            if (time > nowticks)\n            {\n                return;\n            }\n\n            time = 0;\n            action.invoke();\n        }\n        \n        private static void waittimeasync(int waittime, action a)\n        {\n            time = datetime.now.ticks / 10000 + waittime;\n            action = a;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n\n\nè¿ä¸ªä¾å­åæ ·å®ç°äºä¸ä¸ªç®åçè®¡æ¶æ¹æ³ï¼waittimeasyncè°ç¨æ¶ä¼å°åè°æ¹æ³è·æ¶é´è®°å½ä¸æ¥ï¼ä¸»çº¿ç¨æ¯å¸§é½ä¼è°ç¨checktimeroutï¼checktimeroutéé¢å¤æ­è®¡æ¶å¨æ¯å¦è¿æï¼è¿æäºåè°ç¨åè°æ¹æ³ãæ´ä¸ªé»è¾é½å¨ä¸»çº¿ç¨ä¸­å®æï¼åæ ·æ¯å¼æ­¥æ¹æ³ãæä»¥å¼æ­¥å¹¶éå¤çº¿ç¨ï¼åçº¿ç¨åæ ·å¯ä»¥å¼æ­¥ãä¸é¢çä¾å­åæ ·å¯ä»¥æ¹æawaitçå½¢å¼ã\n\n    // example2_3_2\n    class program\n    {\n        private static int loopcount = 0;\n\n        private static long time;\n        private static taskcompletionsource<bool> tcs;\n        \n        static void main(string[] args)\n        {\n            console.writeline($"ä¸»çº¿ç¨: {thread.currentthread.managedthreadid}");\n\n            crontine();\n            \n            while (true)\n            {\n                thread.sleep(1);\n\n                checktimerout();\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n        \n        private static async void crontine()\n        {\n            await waittimeasync(5000);\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            await waittimeasync(4000);\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n            await waittimeasync(3000);\n            console.writeline($"å½åçº¿ç¨: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcountçå¼æ¯: {loopcount}");\n        }\n\n        private static void checktimerout()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowticks = datetime.now.ticks / 10000;\n            if (time > nowticks)\n            {\n                return;\n            }\n\n            time = 0;\n            tcs.setresult(true);\n        }\n        \n        private static task waittimeasync(int waittime)\n        {\n            taskcompletionsource<bool> t = new taskcompletionsource<bool>();\n            time = datetime.now.ticks / 10000 + waittime;\n            tcs = t;\n            return t.task;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n\n\nä¸é¢è¿ä¸ªä¾å­ææè°ç¨å¨é¨å¨ä¸»çº¿ç¨ä¸­å®æï¼å¹¶ä¸ä½¿ç¨äºawaitï¼å æ­¤awaitå¹¶ä¸ä¼å¼å¯å¤çº¿ç¨ï¼awaitå·ä½ç¨æ²¡ç¨å¤çº¿ç¨å®å¨åå³äºå·ä½çå®ç°',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"3.2å¼ºå¤§çMongoBsonåº",frontmatter:{title:"3.2å¼ºå¤§çMongoBsonåº",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/037ea6/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/32.3.2%E5%BC%BA%E5%A4%A7%E7%9A%84MongoBson%E5%BA%93.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/32.3.2å¼ºå¤§çMongoBsonåº.md",key:"v-7d704a16",path:"/pages/037ea6/",headers:[{level:3,title:"1.æ¯æåºååååºååæjsonæèbson",slug:"_1-æ¯æåºååååºååæjsonæèbson",normalizedTitle:"1.æ¯æåºååååºååæjsonæèbson",charIndex:948},{level:3,title:"2.å¯ä»¥å¿½ç¥æäºå­æ®µ",slug:"_2-å¯ä»¥å¿½ç¥æäºå­æ®µ",normalizedTitle:"2.å¯ä»¥å¿½ç¥æäºå­æ®µ",charIndex:2450},{level:3,title:"3.æ¯æé»è®¤å¼ä»¥ååå«å",slug:"_3-æ¯æé»è®¤å¼ä»¥ååå«å",normalizedTitle:"3.æ¯æé»è®¤å¼ä»¥ååå«å",charIndex:2872},{level:3,title:"4.åçº§çæ¬æ¯æ",slug:"_4-åçº§çæ¬æ¯æ",normalizedTitle:"4.åçº§çæ¬æ¯æ",charIndex:3376},{level:3,title:"5.æ¯æå¤æçç»§æ¿ç»æ",slug:"_5-æ¯æå¤æçç»§æ¿ç»æ",normalizedTitle:"5.æ¯æå¤æçç»§æ¿ç»æ",charIndex:3719},{level:3,title:"6.ISupportInitializeæ¥å£",slug:"_6-isupportinitializeæ¥å£",normalizedTitle:"6.isupportinitializeæ¥å£",charIndex:4671}],headersStr:"1.æ¯æåºååååºååæjsonæèbson 2.å¯ä»¥å¿½ç¥æäºå­æ®µ 3.æ¯æé»è®¤å¼ä»¥ååå«å 4.åçº§çæ¬æ¯æ 5.æ¯æå¤æçç»§æ¿ç»æ 6.ISupportInitializeæ¥å£",content:'# å¼ºå¤§çMongoBsonåº\n\nåç«¯å¼åï¼ç»è®¡äºä¸ä¸å¤§æ¦æè¿äºåºæ¯éè¦ç¨å°åºååï¼\n\n 1. å¯¹è±¡éè¿åºååååºååclone\n 2. æå¡ç«¯æ°æ®åºå­å¨æ°æ®ï¼äºè¿å¶\n 3. åå¸å¼æå¡ç«¯ï¼å¤è¿ç¨é´çæ¶æ¯ï¼äºè¿å¶\n 4. åç«¯æ¥å¿ï¼ææ¬æ ¼å¼\n 5. æå¡ç«¯çåç§éç½®æä»¶ï¼ææ¬æ ¼å¼\n\nC#åºåååºæéå¸¸éå¸¸å¤äºï¼protobufï¼jsonç­ç­ãä½æ¯è¿äºåºåååºé½æ æ³åºå½ææåºæ¯ï¼æ¢è¦å¯è¯»åè¦å°ãprotobufä¸æ¯æå¤æçå¯¹è±¡ç»æï¼æ æ³ä½¿ç¨ç»§æ¿ï¼ï¼åæ¶æ¯åéï¼åæ°æ®åºå­å¨åæ¥å¿æ ¼å¼å¹¶ä¸å¥½ç¨ãjsonåæ¥å¿æ ¼å¼åéï¼ä½æ¯åç½ç»æ¶æ¯åæ°æ®å­å¨å°±å¤ªå¤§ãæä»¬å½ç¶å¸æä¸ä¸ªåºè½æ»¡è¶³ä¸é¢ææåºæ¯ï¼çç±å¦ä¸ï¼\n\n 1. ä½ æ³æ³æå¤©ä½ çéç½®æä»¶éè¦æ¾å°æ°æ®åºä¸­ä¿å­ï¼ä½ ä¸éè¦è¿è¡æ ¼å¼è½¬æ¢ï¼åç«¯ç´æ¥æåç«¯åè¿æ¥çéç½®æ¶æ¯ä¿å­å°æ°æ®åºä¸­ï¼è¿æ¯ä¸æ¯è½åå°éå¸¸å¤éè¯¯å¢ï¼\n 2. æå¤©æäºæå¡ç«¯çéç½®æä»¶ä¸ç¨æä»¶æ ¼å¼äºï¼éè¦æ¾å¨æ°æ®åºä¸­ï¼åæ ·ï¼åªéè¦å è¡ä»£ç å°±å¯ä»¥å®æè¿ç§»ã\n 3. æå¤©åç«¯æå¡å¨crashï¼ä½ éè¦æ«ææ¥å¿è¿è¡æ°æ®æ¢å¤ï¼ææ¥å¿è¿è¡ååºååæC#å¯¹è±¡ï¼ä¸æ¡æ¡è¿è¡å¤çï¼åè½¬æå¯¹è±¡ä¿å­å°æ°æ®åºå°±å®æäºã\n 4. å¯¹è±¡ä¿å­å¨æ°æ®åºï¼ç´æ¥å°±å¯ä»¥çå°ææ¬åå®¹ï¼å¯ä»¥ååç§ç±»sqlçæä½\n 5. æ³åä¸ä¸ªåºæ¯ï¼ä¸ä¸ªéç½®ææ¬å¯¹è±¡ï¼ååºååå°åå­ï¼éè¿ç½ç»æ¶æ¯åéï¼å­å¨å°æ°æ®åºä¸­ãæ´ä¸ªè¿ç¨ä¸æ°åµæã\n\nç®åæ¥è¯´å°±æ¯åå°åç§æ°æ®è½¬æ¢ï¼åå°ä»£ç ï¼æé«å¼åæçï¼æé«å¯ç»´æ¤æ§ãå½ç¶ï¼Mongo Bsonå°±è½å¤æ»¡è¶³ãMongoDBåºæ¢å¯ä»¥åºååæææ¬ä¹å¯ä»¥åºååæBSONçäºè¿å¶æ ¼å¼ï¼å¹¶ä¸MongoDBæ¬èº«å°±æ¯ä¸ä¸ªæ¸¸æä¸­ä½¿ç¨éå¸¸å¤çæ°æ®åºãMongo Bsonéå¸¸å®åï¼æ¯æè§è¿åè½æå¨ä½¿ç¨æå¼ºå¤§çåºåååºï¼æäºåè½ååè´´å¿ãå¶æ¯æåè½å¦ä¸ï¼\n\n 1. æ¯æå¤æçç»§æ¿ç»æ\n 2. æ¯æå¿½ç¥æäºå­æ®µåºåå\n 3. æ¯æå­æ®µé»è®¤å¼\n 4. ç»æå¤åºå¤ä½çå­æ®µç§æ ·å¯ä»¥ååºååï¼è¿å¯¹å¤çæ¬åè®®éå¸¸æç¨\n 5. æ¯æISupportInitializeæ¥å£ä½¿ç¨ï¼è¿ä¸ªå¨ååºååçæ¶åç®ç´å°±æ¯ç¥å¨\n 6. æ¯æææ¬jsonåäºè¿å¶bsonåºåå\n 7. MongoDBæ°æ®åºæ¯æ\n\nç®åçä»ç»ä¸mongo bsonåº\n\n\n# 1.æ¯æåºååååºååæjsonæèbson\n\n    public sealed class Player\n    {\n        public long Id;\n\n        public string Account { get; private set; }\n\n        public long UnitId { get; set; }\n    }\n\n    Player player1 = new Player() { Id = 1 };\n    string json = player1.ToJson();\n    Console.WriteLine($"player1 to json: {json}");\n    Console.WriteLine($"player to bson: {player.ToBson().ToHex()}");\n    // output:\n    // player to json: { "_id" : NumberLong(1), "C" : [], "Account" : null, "UnitId" : NumberLong(0) }\n    // player to bson: B000000125F69640001000000000000000A4163636F756E740012556E6974496400000000000000000000\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\næ³¨æmongoçjsonè·æ åçjsonæç¹åºå«ï¼å¦ææ³ç¨æ åçjsonï¼å¯ä»¥ä¼ å¥ä¸ä¸ªJsonWriterSettingså¯¹è±¡ï¼éå¶ä½¿ç¨JsonOutputMode.Strictæ¨¡å¼\n\n    // ä½¿ç¨æ åjson\n    Player player2 = new Player() { Id = 1 };\n    Console.WriteLine($"player to json: {player2.ToJson(new JsonWriterSettings() {OutputMode = JsonOutputMode.Strict})}");\n    // player to json: { "_id" : 1, "C" : [], "Account" : null, "UnitId" : 0 }\n\n\n1\n2\n3\n4\n\n\nååºååjson:\n\n            // ååºååjson\n        Player player11 = BsonSerializer.Deserialize<Player>(json);\n        Console.WriteLine($"player11 to json: {player11.ToJson()}");\n\n\n1\n2\n3\n\n\nååºååbson:\n\n    // ååºååbson\n    using (MemoryStream memoryStream = new MemoryStream(bson))\n    {\n        Player player12 = (Player) BsonSerializer.Deserialize(memoryStream, typeof (Player));\n        Console.WriteLine($"player12 to json: {player12.ToJson()}");\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 2.å¯ä»¥å¿½ç¥æäºå­æ®µ\n\n[BsonIgnore]è¯¥æ ç­¾ç¨æ¥ç¦æ­¢å­æ®µåºååã\n\n\tpublic sealed class Player\n\t{\n        public long Id;\n\n\t\t[BsonIgnore]\n\t\tpublic string Account { get; private set; }\n\t\t\n\t\tpublic long UnitId { get; set; }\n    ï½\n\n    Player player = new Player() { Id = 2, UnitId = 3, Account = "panda"};\n\tConsole.WriteLine($"player to json: {player.ToJson()}");\n    // player to json: { "_id" : 2, "UnitId" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# 3.æ¯æé»è®¤å¼ä»¥ååå«å\n\n[BsonElement] å­æ®µå ä¸è¯¥æ ç­¾ï¼å³ä½¿æ¯privateå­æ®µä¹ä¼åºåå(é»è®¤åªåºååpublicå­æ®µ)ï¼è¯¥æ ç­¾è¿å¯ä»¥å¸¦ä¸ä¸ªstringåæ°ï¼ç»å­æ®µåºååæå®å«åã\n\n\tpublic sealed class Player\n\t{\n        public long Id;\n\n\t\tpublic string Account { get; private set; }\n\n\t\t[BsonElement("UId")]\n\t\tpublic long UnitId { get; set; }\n    ï½\n    Player player = new Player() { Id = 2, UnitId = 3, Account = "panda"};\n\tConsole.WriteLine($"player to json: {player.ToJson()}");\n    // player to json: { "_id" : 2, "Account" : "panda", "UId" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# 4.åçº§çæ¬æ¯æ\n\n[BsonIgnoreExtraElements] è¯¥æ ç­¾ç¨å¨classä¸é¢ï¼ååºååæ¶ç¨æ¥å¿½ç¥å¤ä½çå­æ®µï¼ä¸è¬çæ¬å¼å®¹éè¦èèï¼ä½çæ¬çåè®®éè¦è½å¤å åºååé«çæ¬çåå®¹,å¦åæ°çæ¬å äºå­æ®µï¼æ§çæ¬ç»æååºååä¼åºé\n\n\t[BsonIgnoreExtraElements]\n\tpublic sealed class Player\n\t{\n        public long Id;\n\n\t\tpublic string Account { get; private set; }\n\n\t\t[BsonElement("UId")]\n\t\tpublic long UnitId { get; set; }\n    ï½\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 5.æ¯æå¤æçç»§æ¿ç»æ\n\nmongo bsonåºå¼ºå¤§çå°æ¹å¨äºå®å¨æ¯æåºååååºååç»§æ¿ç»æãéè¦æ³¨æçæ¯ï¼ç»§æ¿ååºååéè¦æ³¨åææçç¶ç±»ï¼æä¸¤ç§æ¹æ³ï¼ a. ä½ å¯ä»¥å¨ç¶ç±»ä¸é¢ä½¿ç¨[BsonKnownTypes]æ ç­¾å£°æç»§æ¿çå­ç±»ï¼è¿æ ·mongoä¼èªå¨æ³¨åï¼ä¾å¦:\n\n    [BsonKnownTypes(typeof(Entity))]\n    public class Component\n    {\n    }\n    [BsonKnownTypes(typeof(Player))]\n    public class Entity: Component\n    {\n    }\n    public sealed class Player: Entity\n    {\n        public long Id;\n        \n        public string Account { get; set; }\n\t\t\n        public long UnitId { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nè¿æ ·æç¼ºé·ï¼å ä¸ºæ¡æ¶å¹¶ä¸ç¥éä¸ä¸ªç±»ä¼æåªäºå­ç±»ï¼è¿æ ·åå¯¹æ¡æ¶ä»£ç æä¾µå¥æ§ï¼æä»¬å¸æè½è§£é¤è¿ä¸ªè¦å ãå¯ä»¥æ«æç¨åºéä¸­ææå­ç±»ç¶ç±»çç±»åï¼å°ä»ä»¬æ³¨åå°mongoé©±å¨ä¸­\n\n\t\t\tType[] types = typeof(Game).Assembly.GetTypes();\n\t\t\tforeach (Type type in types)\n\t\t\t{\n\t\t\t\tif (!type.IsSubclassOf(typeof(Component)))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tBsonClassMap.LookupClassMap(type);\n\t\t\t}\n\n\t\t\tBsonSerializer.RegisterSerializer(new EnumSerializer<NumericType>(BsonType.String));\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nè¿æ ·å®å¨çèªå¨åæ³¨åï¼ä½¿ç¨èä¹ä¸éè¦å³ç³»ç±»æ¯å¦æ³¨åã\n\n\n# 6.ISupportInitializeæ¥å£\n\nmongo bsonååºååæ¶æ¯æä¸ä¸ªISupportInitializeæ¥å£ï¼ISupportInitializeæä¸¤ä¸ªæ¹æ³\n\n    public interface ISupportInitialize\n    {\n        void BeginInit();\n        void EndInit();\n    }\n\n\n1\n2\n3\n4\n5\n\n\nBeginInitå¨ååºåååè°ç¨ï¼EndInitå¨ååºåååè°ç¨ãè¿ä¸ªæ¥å£éå¸¸æç¨äºï¼å¯ä»¥å¨ååºåååæ§è¡ä¸äºæä½ãä¾å¦\n\n\t[BsonIgnoreExtraElements]\n\tpublic class InnerConfig: AConfigComponent\n\t{\n\t\t[BsonIgnore]\n\t\tpublic IPEndPoint IPEndPoint { get; private set; }\n\t\t\n\t\tpublic string Address { get; set; }\n\n\t\tpublic override void EndInit()\n\t\t{\n\t\t\tthis.IPEndPoint = NetworkHelper.ToIPEndPoint(this.Address);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nInnerConfigæ¯ETä¸­è¿ç¨åç½å°åçéç½®ï¼ç±äºIPEndPointä¸å¤ªå¥½éç½®ï¼æä»¬å¯ä»¥éç½®æstringå½¢å¼ï¼ç¶åååºååçæ¶åå¨EndInitä¸­æstringè½¬æ¢æIPEndPointã åæ ·æç»protobufååºååæ¹æ³ä¹å ä¸äºè¿ä¸ªè°ç¨ï¼åèProtobufHelper.csï¼ETçprotobufå ä¸ºè¦æ¯æilruntimeï¼æä»¥å»æäºmapçæ¯æï¼åå¦æä»¬æ³è¦ä¸ä¸ªmapæä¹åå¢ï¼è¿éæç»çæçä»£ç é½åäºæèï¼æprotoæ¶æ¯é½æ¹æäºpartial classï¼è¿æ ·æä»¬å¯ä»¥èªå·±æ©å±è¿ä¸ªclassï¼æ¯å¦ï¼\n\nmessage UnitInfo\n{\n\tint64 UnitId  = 1;\n\n\tfloat X = 2;\n\tfloat Y = 3;\n\tfloat Z = 4;\n}\n\n// protobuf\nmessage G2C_EnterMap // IResponse\n{\n\tint32 RpcId = 90;\n\tint32 Error = 91;\n\tstring Message = 92;\n\t// èªå·±çunit id\n\tint64 UnitId = 1;\n\t// ææçunit\n\trepeated UnitInfo Units = 2;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nè¿ä¸ªç½ç»æ¶æ¯æä¸ªrepeated UnitInfoå­æ®µï¼å¨protobufä¸­å¶å®æ¯ä¸ªæ°ç»ï¼ä½¿ç¨èµ·æ¥ä¸æ¯å¾æ¹ä¾¿ï¼æå¸æè½¬æä¸ä¸ªDictionary<Int64, UnitInfo>çå­æ®µï¼æä»¬å¯ä»¥åè¿æ ·çæä½ï¼\n\n    public partial class G2C_EnterMap: ISupportInitialize\n    {\n        public Dictionary<Int64, UnitInfo> unitsDict = new Dictionary<long, UnitInfo>();\n        \n        public void BeginInit()\n        {\n        }\n\n        public void EndInit()\n        {\n            foreach (var unit in this.Units)\n            {\n                this.unitsDict.Add(unit.UnitId, unit);\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\néè¿è¿æ ·ä¸æ®µä»£ç ææ¶æ¯è¿è¡æ©å±ä¸ä¸ï¼ååºåååºæ¥ä¹åï¼èªå¨è½¬æäºä¸ä¸ªDictionaryã',normalizedContent:'# å¼ºå¤§çmongobsonåº\n\nåç«¯å¼åï¼ç»è®¡äºä¸ä¸å¤§æ¦æè¿äºåºæ¯éè¦ç¨å°åºååï¼\n\n 1. å¯¹è±¡éè¿åºååååºååclone\n 2. æå¡ç«¯æ°æ®åºå­å¨æ°æ®ï¼äºè¿å¶\n 3. åå¸å¼æå¡ç«¯ï¼å¤è¿ç¨é´çæ¶æ¯ï¼äºè¿å¶\n 4. åç«¯æ¥å¿ï¼ææ¬æ ¼å¼\n 5. æå¡ç«¯çåç§éç½®æä»¶ï¼ææ¬æ ¼å¼\n\nc#åºåååºæéå¸¸éå¸¸å¤äºï¼protobufï¼jsonç­ç­ãä½æ¯è¿äºåºåååºé½æ æ³åºå½ææåºæ¯ï¼æ¢è¦å¯è¯»åè¦å°ãprotobufä¸æ¯æå¤æçå¯¹è±¡ç»æï¼æ æ³ä½¿ç¨ç»§æ¿ï¼ï¼åæ¶æ¯åéï¼åæ°æ®åºå­å¨åæ¥å¿æ ¼å¼å¹¶ä¸å¥½ç¨ãjsonåæ¥å¿æ ¼å¼åéï¼ä½æ¯åç½ç»æ¶æ¯åæ°æ®å­å¨å°±å¤ªå¤§ãæä»¬å½ç¶å¸æä¸ä¸ªåºè½æ»¡è¶³ä¸é¢ææåºæ¯ï¼çç±å¦ä¸ï¼\n\n 1. ä½ æ³æ³æå¤©ä½ çéç½®æä»¶éè¦æ¾å°æ°æ®åºä¸­ä¿å­ï¼ä½ ä¸éè¦è¿è¡æ ¼å¼è½¬æ¢ï¼åç«¯ç´æ¥æåç«¯åè¿æ¥çéç½®æ¶æ¯ä¿å­å°æ°æ®åºä¸­ï¼è¿æ¯ä¸æ¯è½åå°éå¸¸å¤éè¯¯å¢ï¼\n 2. æå¤©æäºæå¡ç«¯çéç½®æä»¶ä¸ç¨æä»¶æ ¼å¼äºï¼éè¦æ¾å¨æ°æ®åºä¸­ï¼åæ ·ï¼åªéè¦å è¡ä»£ç å°±å¯ä»¥å®æè¿ç§»ã\n 3. æå¤©åç«¯æå¡å¨crashï¼ä½ éè¦æ«ææ¥å¿è¿è¡æ°æ®æ¢å¤ï¼ææ¥å¿è¿è¡ååºååæc#å¯¹è±¡ï¼ä¸æ¡æ¡è¿è¡å¤çï¼åè½¬æå¯¹è±¡ä¿å­å°æ°æ®åºå°±å®æäºã\n 4. å¯¹è±¡ä¿å­å¨æ°æ®åºï¼ç´æ¥å°±å¯ä»¥çå°ææ¬åå®¹ï¼å¯ä»¥ååç§ç±»sqlçæä½\n 5. æ³åä¸ä¸ªåºæ¯ï¼ä¸ä¸ªéç½®ææ¬å¯¹è±¡ï¼ååºååå°åå­ï¼éè¿ç½ç»æ¶æ¯åéï¼å­å¨å°æ°æ®åºä¸­ãæ´ä¸ªè¿ç¨ä¸æ°åµæã\n\nç®åæ¥è¯´å°±æ¯åå°åç§æ°æ®è½¬æ¢ï¼åå°ä»£ç ï¼æé«å¼åæçï¼æé«å¯ç»´æ¤æ§ãå½ç¶ï¼mongo bsonå°±è½å¤æ»¡è¶³ãmongodbåºæ¢å¯ä»¥åºååæææ¬ä¹å¯ä»¥åºååæbsonçäºè¿å¶æ ¼å¼ï¼å¹¶ä¸mongodbæ¬èº«å°±æ¯ä¸ä¸ªæ¸¸æä¸­ä½¿ç¨éå¸¸å¤çæ°æ®åºãmongo bsonéå¸¸å®åï¼æ¯æè§è¿åè½æå¨ä½¿ç¨æå¼ºå¤§çåºåååºï¼æäºåè½ååè´´å¿ãå¶æ¯æåè½å¦ä¸ï¼\n\n 1. æ¯æå¤æçç»§æ¿ç»æ\n 2. æ¯æå¿½ç¥æäºå­æ®µåºåå\n 3. æ¯æå­æ®µé»è®¤å¼\n 4. ç»æå¤åºå¤ä½çå­æ®µç§æ ·å¯ä»¥ååºååï¼è¿å¯¹å¤çæ¬åè®®éå¸¸æç¨\n 5. æ¯æisupportinitializeæ¥å£ä½¿ç¨ï¼è¿ä¸ªå¨ååºååçæ¶åç®ç´å°±æ¯ç¥å¨\n 6. æ¯æææ¬jsonåäºè¿å¶bsonåºåå\n 7. mongodbæ°æ®åºæ¯æ\n\nç®åçä»ç»ä¸mongo bsonåº\n\n\n# 1.æ¯æåºååååºååæjsonæèbson\n\n    public sealed class player\n    {\n        public long id;\n\n        public string account { get; private set; }\n\n        public long unitid { get; set; }\n    }\n\n    player player1 = new player() { id = 1 };\n    string json = player1.tojson();\n    console.writeline($"player1 to json: {json}");\n    console.writeline($"player to bson: {player.tobson().tohex()}");\n    // output:\n    // player to json: { "_id" : numberlong(1), "c" : [], "account" : null, "unitid" : numberlong(0) }\n    // player to bson: b000000125f69640001000000000000000a4163636f756e740012556e6974496400000000000000000000\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\næ³¨æmongoçjsonè·æ åçjsonæç¹åºå«ï¼å¦ææ³ç¨æ åçjsonï¼å¯ä»¥ä¼ å¥ä¸ä¸ªjsonwritersettingså¯¹è±¡ï¼éå¶ä½¿ç¨jsonoutputmode.strictæ¨¡å¼\n\n    // ä½¿ç¨æ åjson\n    player player2 = new player() { id = 1 };\n    console.writeline($"player to json: {player2.tojson(new jsonwritersettings() {outputmode = jsonoutputmode.strict})}");\n    // player to json: { "_id" : 1, "c" : [], "account" : null, "unitid" : 0 }\n\n\n1\n2\n3\n4\n\n\nååºååjson:\n\n            // ååºååjson\n        player player11 = bsonserializer.deserialize<player>(json);\n        console.writeline($"player11 to json: {player11.tojson()}");\n\n\n1\n2\n3\n\n\nååºååbson:\n\n    // ååºååbson\n    using (memorystream memorystream = new memorystream(bson))\n    {\n        player player12 = (player) bsonserializer.deserialize(memorystream, typeof (player));\n        console.writeline($"player12 to json: {player12.tojson()}");\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 2.å¯ä»¥å¿½ç¥æäºå­æ®µ\n\n[bsonignore]è¯¥æ ç­¾ç¨æ¥ç¦æ­¢å­æ®µåºååã\n\n\tpublic sealed class player\n\t{\n        public long id;\n\n\t\t[bsonignore]\n\t\tpublic string account { get; private set; }\n\t\t\n\t\tpublic long unitid { get; set; }\n    ï½\n\n    player player = new player() { id = 2, unitid = 3, account = "panda"};\n\tconsole.writeline($"player to json: {player.tojson()}");\n    // player to json: { "_id" : 2, "unitid" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# 3.æ¯æé»è®¤å¼ä»¥ååå«å\n\n[bsonelement] å­æ®µå ä¸è¯¥æ ç­¾ï¼å³ä½¿æ¯privateå­æ®µä¹ä¼åºåå(é»è®¤åªåºååpublicå­æ®µ)ï¼è¯¥æ ç­¾è¿å¯ä»¥å¸¦ä¸ä¸ªstringåæ°ï¼ç»å­æ®µåºååæå®å«åã\n\n\tpublic sealed class player\n\t{\n        public long id;\n\n\t\tpublic string account { get; private set; }\n\n\t\t[bsonelement("uid")]\n\t\tpublic long unitid { get; set; }\n    ï½\n    player player = new player() { id = 2, unitid = 3, account = "panda"};\n\tconsole.writeline($"player to json: {player.tojson()}");\n    // player to json: { "_id" : 2, "account" : "panda", "uid" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# 4.åçº§çæ¬æ¯æ\n\n[bsonignoreextraelements] è¯¥æ ç­¾ç¨å¨classä¸é¢ï¼ååºååæ¶ç¨æ¥å¿½ç¥å¤ä½çå­æ®µï¼ä¸è¬çæ¬å¼å®¹éè¦èèï¼ä½çæ¬çåè®®éè¦è½å¤å åºååé«çæ¬çåå®¹,å¦åæ°çæ¬å äºå­æ®µï¼æ§çæ¬ç»æååºååä¼åºé\n\n\t[bsonignoreextraelements]\n\tpublic sealed class player\n\t{\n        public long id;\n\n\t\tpublic string account { get; private set; }\n\n\t\t[bsonelement("uid")]\n\t\tpublic long unitid { get; set; }\n    ï½\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 5.æ¯æå¤æçç»§æ¿ç»æ\n\nmongo bsonåºå¼ºå¤§çå°æ¹å¨äºå®å¨æ¯æåºååååºååç»§æ¿ç»æãéè¦æ³¨æçæ¯ï¼ç»§æ¿ååºååéè¦æ³¨åææçç¶ç±»ï¼æä¸¤ç§æ¹æ³ï¼ a. ä½ å¯ä»¥å¨ç¶ç±»ä¸é¢ä½¿ç¨[bsonknowntypes]æ ç­¾å£°æç»§æ¿çå­ç±»ï¼è¿æ ·mongoä¼èªå¨æ³¨åï¼ä¾å¦:\n\n    [bsonknowntypes(typeof(entity))]\n    public class component\n    {\n    }\n    [bsonknowntypes(typeof(player))]\n    public class entity: component\n    {\n    }\n    public sealed class player: entity\n    {\n        public long id;\n        \n        public string account { get; set; }\n\t\t\n        public long unitid { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nè¿æ ·æç¼ºé·ï¼å ä¸ºæ¡æ¶å¹¶ä¸ç¥éä¸ä¸ªç±»ä¼æåªäºå­ç±»ï¼è¿æ ·åå¯¹æ¡æ¶ä»£ç æä¾µå¥æ§ï¼æä»¬å¸æè½è§£é¤è¿ä¸ªè¦å ãå¯ä»¥æ«æç¨åºéä¸­ææå­ç±»ç¶ç±»çç±»åï¼å°ä»ä»¬æ³¨åå°mongoé©±å¨ä¸­\n\n\t\t\ttype[] types = typeof(game).assembly.gettypes();\n\t\t\tforeach (type type in types)\n\t\t\t{\n\t\t\t\tif (!type.issubclassof(typeof(component)))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tbsonclassmap.lookupclassmap(type);\n\t\t\t}\n\n\t\t\tbsonserializer.registerserializer(new enumserializer<numerictype>(bsontype.string));\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nè¿æ ·å®å¨çèªå¨åæ³¨åï¼ä½¿ç¨èä¹ä¸éè¦å³ç³»ç±»æ¯å¦æ³¨åã\n\n\n# 6.isupportinitializeæ¥å£\n\nmongo bsonååºååæ¶æ¯æä¸ä¸ªisupportinitializeæ¥å£ï¼isupportinitializeæä¸¤ä¸ªæ¹æ³\n\n    public interface isupportinitialize\n    {\n        void begininit();\n        void endinit();\n    }\n\n\n1\n2\n3\n4\n5\n\n\nbegininitå¨ååºåååè°ç¨ï¼endinitå¨ååºåååè°ç¨ãè¿ä¸ªæ¥å£éå¸¸æç¨äºï¼å¯ä»¥å¨ååºåååæ§è¡ä¸äºæä½ãä¾å¦\n\n\t[bsonignoreextraelements]\n\tpublic class innerconfig: aconfigcomponent\n\t{\n\t\t[bsonignore]\n\t\tpublic ipendpoint ipendpoint { get; private set; }\n\t\t\n\t\tpublic string address { get; set; }\n\n\t\tpublic override void endinit()\n\t\t{\n\t\t\tthis.ipendpoint = networkhelper.toipendpoint(this.address);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\ninnerconfigæ¯etä¸­è¿ç¨åç½å°åçéç½®ï¼ç±äºipendpointä¸å¤ªå¥½éç½®ï¼æä»¬å¯ä»¥éç½®æstringå½¢å¼ï¼ç¶åååºååçæ¶åå¨endinitä¸­æstringè½¬æ¢æipendpointã åæ ·æç»protobufååºååæ¹æ³ä¹å ä¸äºè¿ä¸ªè°ç¨ï¼åèprotobufhelper.csï¼etçprotobufå ä¸ºè¦æ¯æilruntimeï¼æä»¥å»æäºmapçæ¯æï¼åå¦æä»¬æ³è¦ä¸ä¸ªmapæä¹åå¢ï¼è¿éæç»çæçä»£ç é½åäºæèï¼æprotoæ¶æ¯é½æ¹æäºpartial classï¼è¿æ ·æä»¬å¯ä»¥èªå·±æ©å±è¿ä¸ªclassï¼æ¯å¦ï¼\n\nmessage unitinfo\n{\n\tint64 unitid  = 1;\n\n\tfloat x = 2;\n\tfloat y = 3;\n\tfloat z = 4;\n}\n\n// protobuf\nmessage g2c_entermap // iresponse\n{\n\tint32 rpcid = 90;\n\tint32 error = 91;\n\tstring message = 92;\n\t// èªå·±çunit id\n\tint64 unitid = 1;\n\t// ææçunit\n\trepeated unitinfo units = 2;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nè¿ä¸ªç½ç»æ¶æ¯æä¸ªrepeated unitinfoå­æ®µï¼å¨protobufä¸­å¶å®æ¯ä¸ªæ°ç»ï¼ä½¿ç¨èµ·æ¥ä¸æ¯å¾æ¹ä¾¿ï¼æå¸æè½¬æä¸ä¸ªdictionary<int64, unitinfo>çå­æ®µï¼æä»¬å¯ä»¥åè¿æ ·çæä½ï¼\n\n    public partial class g2c_entermap: isupportinitialize\n    {\n        public dictionary<int64, unitinfo> unitsdict = new dictionary<long, unitinfo>();\n        \n        public void begininit()\n        {\n        }\n\n        public void endinit()\n        {\n            foreach (var unit in this.units)\n            {\n                this.unitsdict.add(unit.unitid, unit);\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\néè¿è¿æ ·ä¸æ®µä»£ç ææ¶æ¯è¿è¡æ©å±ä¸ä¸ï¼ååºåååºæ¥ä¹åï¼èªå¨è½¬æäºä¸ä¸ªdictionaryã',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"3.3ä¸åçç»ä»¶",frontmatter:{title:"3.3ä¸åçç»ä»¶",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/81bdb3/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/33.3.3%E4%B8%80%E5%88%87%E7%9A%86%E7%BB%84%E4%BB%B6.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/33.3.3ä¸åçç»ä»¶.md",key:"v-18a6fca4",path:"/pages/81bdb3/",headers:[{level:3,title:"1.ç»ä»¶çåå»º",slug:"_1-ç»ä»¶çåå»º",normalizedTitle:"1.ç»ä»¶çåå»º",charIndex:1888},{level:3,title:"2.ç»ä»¶çéæ¾",slug:"_2-ç»ä»¶çéæ¾",normalizedTitle:"2.ç»ä»¶çéæ¾",charIndex:2273},{level:3,title:"3.InstanceIdçä½ç¨",slug:"_3-instanceidçä½ç¨",normalizedTitle:"3.instanceidçä½ç¨",charIndex:2529}],headersStr:"1.ç»ä»¶çåå»º 2.ç»ä»¶çéæ¾ 3.InstanceIdçä½ç¨",content:"# ä¸åçç»ä»¶\n\nç®åååæµè¡ECSè®¾è®¡ï¼ä¸»è¦æ¯å®æåéçæåï¼å¼çäºè¿ç§ææ¯ãå®æåééç¨äºç¶æå¸§è¿ç§ç½ç»ææ¯ï¼å®¢æ·ç«¯ä¼è¿è¡é¢æµï¼é¢æµä¸åéè¦è¿è¡åæ»ï¼ç±äºç»ä»¶å¼çè®¾è®¡ï¼åæ»å¯ä»¥åªåæ»æäºç»ä»¶å³å¯ãECSæéè¦çè®¾è®¡æ¯é»è¾è·æ°æ®çå®å¨åç¦»ãå³ECæ¯çº¯æ°æ®ï¼Systemå®éä¸å°±æ¯é»è¾ï¼ç±æ°æ®é©±å¨é»è¾ãæ°æ®é©±å¨é»è¾æ¯ä»ä¹ææå¢ï¼å¾ç®åéè¿Updateæ£æµæ°æ®ååï¼éè¿äºä»¶æºå¶æ¥è®¢éæ°æ®ååï¼è¿å°±æ¯æè°çæ°æ®é©±å¨äºãå¶å®çç¹ç¹ä¾å¦ç¼å­å½ä¸­ï¼å¨ç¼åé»è¾ä¸æ¥è¯´å¹¶ä¸å¤ªéè¦ï¼ç°ä»£æ¸¸æé½ç¨èæ¬ï¼è¿èæ¬çæ§è½é½è½å®¹å¿æä¹ä¼å¨ä¹ç¼å­å½ä¸­é£ç¹æ§è½æåï¼ETå¨è®¾è®¡çæ¶åå¸æ¶äºè¿äºæ³æ³ï¼ä½æ¯å¹¶ä¸å®å¨ç§æ¬ï¼ç®åçè®¾è®¡æ¯æç»è¿é¿æçæèè·éæå¾æ¥çï¼è¿æ¯æäºèªå·±ç¹è²ã\n\nä¼ ç»çECSåé»è¾ä½èçæ¥å­å¨ä¸å°ç¼ºé·ï¼æ¯å¦ä¸ºäºå¤ç¨ï¼æ°æ®å¿ç¶è¦ææéå¸¸å°çé¢ç²ï¼ä¼å¯¼è´ç»ä»¶éå¸¸éå¸¸å¤ãä½æ¯æ¸¸ææ¯å¤äººåä½å¼åçï¼æ¯ä¸ªäººåºæ¬ä¸åªçæèªå·±çæ¨¡åï¼æåå¯è½é æç»ä»¶å¤§éåä½ãè¿æä¸ªé®é¢ï¼å¸¸è§çECSæ¯æå¹³å¼çï¼Entityè·Componentåªæä¸å±ãç»ä»¶ä¸å¤ï¼å¼ååè½å¯è½ä¸ç¥éè¯¥ä½¿ç¨åªäºComponentãå¥½æ¯ä¸å®¶å¬å¸ï¼æå¤§çæ¯èæ¿ï¼èæ¿æä¸å¸¦å ç¾ä¸ªäººï¼èæ¿ä¸å¯è½è®¤è¯ææçäººï¼å®æä¸é¡¹ä»»å¡ï¼èæ¿æ²¡æ³æåºèªå·±éè¦çäººãåççåæ³æ¯èæ¿æä¸åºè¯¥æå ä¸ªç»çï¼æ¯ä¸ªç»çæä¸åºè¯¥æå ä¸ªä¸»ç®¡ï¼æ¯ä¸ªä¸»ç®¡ç®¡çå ä¸ªå·¥äººï¼è¿æ ·å½¢ææ ç¶çç®¡çç»ææä¼å®¹æç®¡çãè¿ç±»ä¼¼ETçåæ³ï¼Entityå¯ä»¥ç®¡çComponentï¼Componentç®¡çEntityï¼çè³Componentè¿å¯ä»¥æè½½Componentãä¾å¦ï¼äººç±å¤´ï¼èº«ä½ï¼æï¼èç»æï¼èå¤´åç±ç¼çï¼è³æµï¼é¼»å­ï¼å´å·´ç»æã\n\n    Head head = human.AddComponent<Head>();\n    head.AddComponent<Eye>();\n    head.AddComponent<Mouse>();\n    head.AddComponent<Nose>();\n    head.AddComponent<Ear>();\n    human.AddComponent<Body>();\n    human.AddComponent<Hand>();\n    human.AddComponent<Leg>();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nETä¸­ï¼æææ°æ®é½æ¯Componentï¼åæ¬Entityï¼Entityç»§æ¿äºComponentWithIdï¼ComponentWithIdç»§æ¿äºComponentï¼æä»¥Entityæ¬è´¨ä¸ä¹æ¯ä¸ä¸ªComponentï¼åªä¸è¿å®å¯ä»¥æè½½å¶å®çComponentãå®éä½¿ç¨ä¸­ä½ å¯ä»¥ç»§æ¿Componentï¼ComponentWithIdï¼Entityä¸èä¹ä¸ï¼åºå«æ¯å¦æè¯¥ç±»éè¦æè½½ç»ä»¶åç»§æ¿Entityï¼å¦æä¸éè¦æè½½ç»ä»¶ä½æ¯éè¦å¸¦ä¸ªé»è¾Idåç»§æ¿ComponentWithIdï¼å©ä¸çç»§æ¿ComponentãETçEntityæ¯å¯ä»¥ææ°æ®æåçï¼éç¨çæ°æ®æ¾å¨Entityèº«ä¸ä½ä¸ºæåï¼ä¸å¤ªéç¨çæ°æ®å¯ä»¥ä½ä¸ºç»ä»¶æå¨Entityèº«ä¸ãæ¯å¦ç©åçè®¾è®¡ï¼ææç©åé½æéç½®idï¼æ°éï¼ç­çº§çå­æ®µï¼è¿äºå­æ®µæ²¡æå¿è¦åæç»ä»¶ï¼æ¾å¨Entityèº«ä¸ä½¿ç¨ä¼æ´å æ¹ä¾¿ã\n\n    class Item: Entity\n    {\n        // éå·çéç½®Id\n        public int ConfigId { get; set; }\n        // éå·çæ°é\n        public int Count { get; set; }\n        // éå·çç­çº§\n        public int Level { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nETçè¿ç§è®¾è®¡æ°æ®æ¯ä¸ç§æ ç¶çç»æï¼éå¸¸æå±æ¬¡ï¼è½å¤éå¸¸è½»æ¾ççè§£æ´ä¸ªæ¸¸æçæ¶æãé¡¶å±Game.Sceneï¼ä¸åæ¨¡åçæ°æ®é½æè½½å¨Game.Sceneä¸é¢ï¼æ¯ä¸ªæ¨¡åèªèº«ä¸é¢åå¯ä»¥æè½½å¾å¤æ°æ®ãæ¯å¼åä¸ä¸ªæ°åè½ä¸ç¨æèå¤ªå¤ï¼ç±»è¯¥æä¹è®¾è®¡ï¼æ°æ®æ¾å¨ä»ä¹å°æ¹ï¼æè½½è¿éä¼ä¸ä¼å¯¼è´åä½ç­ç­ãæ¯å¦æç©å®¶éè¦åä¸ä¸ªéå·ç³»ç»ï¼è®¾è®¡ä¸ä¸ªItemsComponentæå¨Playerèº«ä¸å³å¯ï¼éè¦æè½å¼åä¸ä¸ªSpellComponentæå¨Playerèº«ä¸ãå¨æéè¦åä¸ä¸ªæ´»å¨ï¼æä¸ªæ´»å¨ç»ä»¶æå¨Game.Sceneä¸é¢ãè¿ç§è®¾è®¡ä»»å¡åæ´¾ä¼å¾ç®åï¼ååçæ¨¡ååã\n\n\n# ç»ä»¶çä¸äºç»è\n\n\n# 1.ç»ä»¶çåå»º\n\nç»ä»¶çåå»ºä¸è¦èªå·±å»newï¼åºè¯¥ç»ä¸ä½¿ç¨ComponentFactoryåå»ºãComponentFactoryæä¾äºä¸ç»æ¹æ³ç¨æ¥åå»ºç»ä»¶Createï¼CreateWithParentï¼CreateWithIdãCreateæ¯æç®åçåå»ºæ¹å¼ï¼å®åäºå ä¸ªå¤ç\na. æ ¹æ®ç»ä»¶ç±»åæé ä¸ä¸ªç»ä»¶\nb. å°ç»ä»¶å å¥äºä»¶ç³»ç»ï¼å¹¶ä¸æåºä¸ä¸ªAwakeSystem\nc. æ¯å¦å¯ç¨å¯¹è±¡æ± \nCreateWithParentå¨Createçåºç¡ä¸æä¾äºä¸ä¸ªParentå¯¹è±¡ï¼è®¾ç½®å°Component.Parentå­æ®µä¸ãCreateWithIdæ¯ç¨æ¥åå»ºComponentWithIdæèå¶å­ç±»çï¼å¨Createçåºç¡ä¸å¯ä»¥èªå·±è®¾ç½®ä¸ä¸ªId, Componentå¨åå»ºçæ¶åå¯ä»¥éæ©æ¯å¦ä½¿ç¨å¯¹è±¡æ± ãä¸ç±»å·¥åæ¹æ³é½å¸¦æä¸ä¸ªfromPoolçåæ°ï¼é»è®¤æ¯trueã\n\n\n# 2.ç»ä»¶çéæ¾\n\nComponenté½ç»§æ¿äºä¸ä¸ªIDisposableæ¥å£ï¼éè¦æ³¨æï¼Componentæéæç®¡èµæºï¼å é¤ä¸ä¸ªComponentå¿é¡»è°ç¨è¯¥æ¥å£ãè¯¥æ¥å£åäºå¦ä¸çæä½\na. æåºDestroy System\nb. å¦æç»ä»¶æ¯ä½¿ç¨å¯¹è±¡æ± åå»ºçï¼é£ä¹å¨è¿éä¼æ¾åå¯¹è±¡æ± \nc. ä»å¨å±äºä»¶ç³»ç»(EventSystem)ä¸­å é¤è¯¥ç»ä»¶ï¼å¹¶ä¸å°InstanceIdè®¾ä¸º0\nå¦æç»ä»¶æè½½Entityèº«ä¸ï¼é£ä¹Entityè°ç¨Disposeçæ¶åä¼èªå¨è°ç¨èº«ä¸ææComponentçDisposeæ¹æ³ã\n\n\n# 3.InstanceIdçä½ç¨\n\nä»»ä½Componenté½å¸¦æä¸ä¸ªInstanceIdå­æ®µï¼è¿ä¸ªå­æ®µä¼å¨ç»ä»¶æé ï¼æèç»ä»¶ä»å¯¹è±¡æ± ååºçæ¶åéæ°è®¾ç½®ï¼è¿ä¸ªInstanceIdæ è¯è¿ä¸ªç»ä»¶çèº«ä»½ãä¸ºä»ä¹éè¦è¿ä¹ä¸ä¸ªå­æ®µå¢ï¼æä»¥ä¸å ä¸ªåå \n\n 1. å¯¹è±¡æ± çå­å¨ï¼ç»ä»¶æªå¿ä¼éæ¾ï¼èæ¯åå°å¯¹è±¡æ± ä¸­ãå¨å¼æ­¥è°ç¨ä¸­ï¼å¾å¯è½è¿ä¸ªç»ä»¶å·²ç»è¢«éæ¾äºï¼ç¶ååè¢«éæ°å©ç¨äºèµ·æ¥ï¼è¿æ ·æä»¬éè¦ä¸ç§æ¹å¼è½åºåä¹åçç»ä»¶å¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾ï¼ä¾å¦ä¸é¢è¿æ®µä»£ç ï¼\n\n\t\tpublic static async ETVoid UpdateAsync(this ActorLocationSender self)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlong instanceId = self.InstanceId;\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tif (self.InstanceId != instanceId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tActorTask actorTask = await self.GetAsync();\n\t\t\t\t\t\n\t\t\t\t\tif (self.InstanceId != instanceId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (actorTask.ActorRequest == null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait self.RunTask(actorTask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tLog.Error(e);\n\t\t\t}\n\t\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nwhile (true)ä¸­æ¯æ®µå¼æ­¥æ¹æ³ï¼await self.GetAsync()ä¹åå¾å¯è½ActorLocationSenderå¯¹è±¡å·²ç»è¢«éæ¾äºï¼çè³æå¯è½è¿ä¸ªå¯¹è±¡åè¢«å¶å®é»è¾ä»å¯¹è±¡æ± ä¸­åæ¬¡å©ç¨äºèµ·æ¥ãæä»¬è¿æ¶åå¯ä»¥éè¿InstanceIdçååæ¥å¤æ­è¿ä¸ªå¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾æã\n2. InstanceIdæ¯å¨å±å¯ä¸çï¼å¹¶ä¸å¸¦æä½ç½®ä¿¡æ¯ï¼å¯ä»¥éè¿InstanceIdæ¥æ¾å°å¯¹è±¡çä½ç½®ï¼å°æ¶æ¯åç»å¯¹è±¡ãè¿ä¸ªè®¾è®¡å°ä¼Actoræ¶æ¯ä¸­å©ç¨å°ãè¿éææ¶å°±ä¸è®²äºã",normalizedContent:"# ä¸åçç»ä»¶\n\nç®åååæµè¡ecsè®¾è®¡ï¼ä¸»è¦æ¯å®æåéçæåï¼å¼çäºè¿ç§ææ¯ãå®æåééç¨äºç¶æå¸§è¿ç§ç½ç»ææ¯ï¼å®¢æ·ç«¯ä¼è¿è¡é¢æµï¼é¢æµä¸åéè¦è¿è¡åæ»ï¼ç±äºç»ä»¶å¼çè®¾è®¡ï¼åæ»å¯ä»¥åªåæ»æäºç»ä»¶å³å¯ãecsæéè¦çè®¾è®¡æ¯é»è¾è·æ°æ®çå®å¨åç¦»ãå³ecæ¯çº¯æ°æ®ï¼systemå®éä¸å°±æ¯é»è¾ï¼ç±æ°æ®é©±å¨é»è¾ãæ°æ®é©±å¨é»è¾æ¯ä»ä¹ææå¢ï¼å¾ç®åéè¿updateæ£æµæ°æ®ååï¼éè¿äºä»¶æºå¶æ¥è®¢éæ°æ®ååï¼è¿å°±æ¯æè°çæ°æ®é©±å¨äºãå¶å®çç¹ç¹ä¾å¦ç¼å­å½ä¸­ï¼å¨ç¼åé»è¾ä¸æ¥è¯´å¹¶ä¸å¤ªéè¦ï¼ç°ä»£æ¸¸æé½ç¨èæ¬ï¼è¿èæ¬çæ§è½é½è½å®¹å¿æä¹ä¼å¨ä¹ç¼å­å½ä¸­é£ç¹æ§è½æåï¼etå¨è®¾è®¡çæ¶åå¸æ¶äºè¿äºæ³æ³ï¼ä½æ¯å¹¶ä¸å®å¨ç§æ¬ï¼ç®åçè®¾è®¡æ¯æç»è¿é¿æçæèè·éæå¾æ¥çï¼è¿æ¯æäºèªå·±ç¹è²ã\n\nä¼ ç»çecsåé»è¾ä½èçæ¥å­å¨ä¸å°ç¼ºé·ï¼æ¯å¦ä¸ºäºå¤ç¨ï¼æ°æ®å¿ç¶è¦ææéå¸¸å°çé¢ç²ï¼ä¼å¯¼è´ç»ä»¶éå¸¸éå¸¸å¤ãä½æ¯æ¸¸ææ¯å¤äººåä½å¼åçï¼æ¯ä¸ªäººåºæ¬ä¸åªçæèªå·±çæ¨¡åï¼æåå¯è½é æç»ä»¶å¤§éåä½ãè¿æä¸ªé®é¢ï¼å¸¸è§çecsæ¯æå¹³å¼çï¼entityè·componentåªæä¸å±ãç»ä»¶ä¸å¤ï¼å¼ååè½å¯è½ä¸ç¥éè¯¥ä½¿ç¨åªäºcomponentãå¥½æ¯ä¸å®¶å¬å¸ï¼æå¤§çæ¯èæ¿ï¼èæ¿æä¸å¸¦å ç¾ä¸ªäººï¼èæ¿ä¸å¯è½è®¤è¯ææçäººï¼å®æä¸é¡¹ä»»å¡ï¼èæ¿æ²¡æ³æåºèªå·±éè¦çäººãåççåæ³æ¯èæ¿æä¸åºè¯¥æå ä¸ªç»çï¼æ¯ä¸ªç»çæä¸åºè¯¥æå ä¸ªä¸»ç®¡ï¼æ¯ä¸ªä¸»ç®¡ç®¡çå ä¸ªå·¥äººï¼è¿æ ·å½¢ææ ç¶çç®¡çç»ææä¼å®¹æç®¡çãè¿ç±»ä¼¼etçåæ³ï¼entityå¯ä»¥ç®¡çcomponentï¼componentç®¡çentityï¼çè³componentè¿å¯ä»¥æè½½componentãä¾å¦ï¼äººç±å¤´ï¼èº«ä½ï¼æï¼èç»æï¼èå¤´åç±ç¼çï¼è³æµï¼é¼»å­ï¼å´å·´ç»æã\n\n    head head = human.addcomponent<head>();\n    head.addcomponent<eye>();\n    head.addcomponent<mouse>();\n    head.addcomponent<nose>();\n    head.addcomponent<ear>();\n    human.addcomponent<body>();\n    human.addcomponent<hand>();\n    human.addcomponent<leg>();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\netä¸­ï¼æææ°æ®é½æ¯componentï¼åæ¬entityï¼entityç»§æ¿äºcomponentwithidï¼componentwithidç»§æ¿äºcomponentï¼æä»¥entityæ¬è´¨ä¸ä¹æ¯ä¸ä¸ªcomponentï¼åªä¸è¿å®å¯ä»¥æè½½å¶å®çcomponentãå®éä½¿ç¨ä¸­ä½ å¯ä»¥ç»§æ¿componentï¼componentwithidï¼entityä¸èä¹ä¸ï¼åºå«æ¯å¦æè¯¥ç±»éè¦æè½½ç»ä»¶åç»§æ¿entityï¼å¦æä¸éè¦æè½½ç»ä»¶ä½æ¯éè¦å¸¦ä¸ªé»è¾idåç»§æ¿componentwithidï¼å©ä¸çç»§æ¿componentãetçentityæ¯å¯ä»¥ææ°æ®æåçï¼éç¨çæ°æ®æ¾å¨entityèº«ä¸ä½ä¸ºæåï¼ä¸å¤ªéç¨çæ°æ®å¯ä»¥ä½ä¸ºç»ä»¶æå¨entityèº«ä¸ãæ¯å¦ç©åçè®¾è®¡ï¼ææç©åé½æéç½®idï¼æ°éï¼ç­çº§çå­æ®µï¼è¿äºå­æ®µæ²¡æå¿è¦åæç»ä»¶ï¼æ¾å¨entityèº«ä¸ä½¿ç¨ä¼æ´å æ¹ä¾¿ã\n\n    class item: entity\n    {\n        // éå·çéç½®id\n        public int configid { get; set; }\n        // éå·çæ°é\n        public int count { get; set; }\n        // éå·çç­çº§\n        public int level { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\netçè¿ç§è®¾è®¡æ°æ®æ¯ä¸ç§æ ç¶çç»æï¼éå¸¸æå±æ¬¡ï¼è½å¤éå¸¸è½»æ¾ççè§£æ´ä¸ªæ¸¸æçæ¶æãé¡¶å±game.sceneï¼ä¸åæ¨¡åçæ°æ®é½æè½½å¨game.sceneä¸é¢ï¼æ¯ä¸ªæ¨¡åèªèº«ä¸é¢åå¯ä»¥æè½½å¾å¤æ°æ®ãæ¯å¼åä¸ä¸ªæ°åè½ä¸ç¨æèå¤ªå¤ï¼ç±»è¯¥æä¹è®¾è®¡ï¼æ°æ®æ¾å¨ä»ä¹å°æ¹ï¼æè½½è¿éä¼ä¸ä¼å¯¼è´åä½ç­ç­ãæ¯å¦æç©å®¶éè¦åä¸ä¸ªéå·ç³»ç»ï¼è®¾è®¡ä¸ä¸ªitemscomponentæå¨playerèº«ä¸å³å¯ï¼éè¦æè½å¼åä¸ä¸ªspellcomponentæå¨playerèº«ä¸ãå¨æéè¦åä¸ä¸ªæ´»å¨ï¼æä¸ªæ´»å¨ç»ä»¶æå¨game.sceneä¸é¢ãè¿ç§è®¾è®¡ä»»å¡åæ´¾ä¼å¾ç®åï¼ååçæ¨¡ååã\n\n\n# ç»ä»¶çä¸äºç»è\n\n\n# 1.ç»ä»¶çåå»º\n\nç»ä»¶çåå»ºä¸è¦èªå·±å»newï¼åºè¯¥ç»ä¸ä½¿ç¨componentfactoryåå»ºãcomponentfactoryæä¾äºä¸ç»æ¹æ³ç¨æ¥åå»ºç»ä»¶createï¼createwithparentï¼createwithidãcreateæ¯æç®åçåå»ºæ¹å¼ï¼å®åäºå ä¸ªå¤ç\na. æ ¹æ®ç»ä»¶ç±»åæé ä¸ä¸ªç»ä»¶\nb. å°ç»ä»¶å å¥äºä»¶ç³»ç»ï¼å¹¶ä¸æåºä¸ä¸ªawakesystem\nc. æ¯å¦å¯ç¨å¯¹è±¡æ± \ncreatewithparentå¨createçåºç¡ä¸æä¾äºä¸ä¸ªparentå¯¹è±¡ï¼è®¾ç½®å°component.parentå­æ®µä¸ãcreatewithidæ¯ç¨æ¥åå»ºcomponentwithidæèå¶å­ç±»çï¼å¨createçåºç¡ä¸å¯ä»¥èªå·±è®¾ç½®ä¸ä¸ªid, componentå¨åå»ºçæ¶åå¯ä»¥éæ©æ¯å¦ä½¿ç¨å¯¹è±¡æ± ãä¸ç±»å·¥åæ¹æ³é½å¸¦æä¸ä¸ªfrompoolçåæ°ï¼é»è®¤æ¯trueã\n\n\n# 2.ç»ä»¶çéæ¾\n\ncomponenté½ç»§æ¿äºä¸ä¸ªidisposableæ¥å£ï¼éè¦æ³¨æï¼componentæéæç®¡èµæºï¼å é¤ä¸ä¸ªcomponentå¿é¡»è°ç¨è¯¥æ¥å£ãè¯¥æ¥å£åäºå¦ä¸çæä½\na. æåºdestroy system\nb. å¦æç»ä»¶æ¯ä½¿ç¨å¯¹è±¡æ± åå»ºçï¼é£ä¹å¨è¿éä¼æ¾åå¯¹è±¡æ± \nc. ä»å¨å±äºä»¶ç³»ç»(eventsystem)ä¸­å é¤è¯¥ç»ä»¶ï¼å¹¶ä¸å°instanceidè®¾ä¸º0\nå¦æç»ä»¶æè½½entityèº«ä¸ï¼é£ä¹entityè°ç¨disposeçæ¶åä¼èªå¨è°ç¨èº«ä¸ææcomponentçdisposeæ¹æ³ã\n\n\n# 3.instanceidçä½ç¨\n\nä»»ä½componenté½å¸¦æä¸ä¸ªinstanceidå­æ®µï¼è¿ä¸ªå­æ®µä¼å¨ç»ä»¶æé ï¼æèç»ä»¶ä»å¯¹è±¡æ± ååºçæ¶åéæ°è®¾ç½®ï¼è¿ä¸ªinstanceidæ è¯è¿ä¸ªç»ä»¶çèº«ä»½ãä¸ºä»ä¹éè¦è¿ä¹ä¸ä¸ªå­æ®µå¢ï¼æä»¥ä¸å ä¸ªåå \n\n 1. å¯¹è±¡æ± çå­å¨ï¼ç»ä»¶æªå¿ä¼éæ¾ï¼èæ¯åå°å¯¹è±¡æ± ä¸­ãå¨å¼æ­¥è°ç¨ä¸­ï¼å¾å¯è½è¿ä¸ªç»ä»¶å·²ç»è¢«éæ¾äºï¼ç¶ååè¢«éæ°å©ç¨äºèµ·æ¥ï¼è¿æ ·æä»¬éè¦ä¸ç§æ¹å¼è½åºåä¹åçç»ä»¶å¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾ï¼ä¾å¦ä¸é¢è¿æ®µä»£ç ï¼\n\n\t\tpublic static async etvoid updateasync(this actorlocationsender self)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlong instanceid = self.instanceid;\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tif (self.instanceid != instanceid)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tactortask actortask = await self.getasync();\n\t\t\t\t\t\n\t\t\t\t\tif (self.instanceid != instanceid)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (actortask.actorrequest == null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait self.runtask(actortask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (exception e)\n\t\t\t{\n\t\t\t\tlog.error(e);\n\t\t\t}\n\t\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nwhile (true)ä¸­æ¯æ®µå¼æ­¥æ¹æ³ï¼await self.getasync()ä¹åå¾å¯è½actorlocationsenderå¯¹è±¡å·²ç»è¢«éæ¾äºï¼çè³æå¯è½è¿ä¸ªå¯¹è±¡åè¢«å¶å®é»è¾ä»å¯¹è±¡æ± ä¸­åæ¬¡å©ç¨äºèµ·æ¥ãæä»¬è¿æ¶åå¯ä»¥éè¿instanceidçååæ¥å¤æ­è¿ä¸ªå¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾æã\n2. instanceidæ¯å¨å±å¯ä¸çï¼å¹¶ä¸å¸¦æä½ç½®ä¿¡æ¯ï¼å¯ä»¥éè¿instanceidæ¥æ¾å°å¯¹è±¡çä½ç½®ï¼å°æ¶æ¯åç»å¯¹è±¡ãè¿ä¸ªè®¾è®¡å°ä¼actoræ¶æ¯ä¸­å©ç¨å°ãè¿éææ¶å°±ä¸è®²äºã",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"3.3ä¸åçå®ä½",frontmatter:{title:"3.3ä¸åçå®ä½",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/c77b6a/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/34.3.3%E4%B8%80%E5%88%87%E7%9A%86%E5%AE%9E%E4%BD%93.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/34.3.3ä¸åçå®ä½.md",key:"v-1dc56f77",path:"/pages/c77b6a/",headers:[{level:3,title:"1.ç»ä»¶çåå»º",slug:"_1-ç»ä»¶çåå»º",normalizedTitle:"1.ç»ä»¶çåå»º",charIndex:1677},{level:3,title:"2.ç»ä»¶çéæ¾",slug:"_2-ç»ä»¶çéæ¾",normalizedTitle:"2.ç»ä»¶çéæ¾",charIndex:2062},{level:3,title:"3.InstanceIdçä½ç¨",slug:"_3-instanceidçä½ç¨",normalizedTitle:"3.instanceidçä½ç¨",charIndex:2318}],headersStr:"1.ç»ä»¶çåå»º 2.ç»ä»¶çéæ¾ 3.InstanceIdçä½ç¨",content:"# ä¸åçå®ä½\n\nç®åååæµè¡ECSè®¾è®¡ï¼ä¸»è¦æ¯å®æåéçæåï¼å¼çäºè¿ç§ææ¯ãå®æåééç¨äºç¶æå¸§è¿ç§ç½ç»ææ¯ï¼å®¢æ·ç«¯ä¼è¿è¡é¢æµï¼é¢æµä¸åéè¦è¿è¡åæ»ï¼ç±äºç»ä»¶å¼çè®¾è®¡ï¼åæ»å¯ä»¥åªåæ»æäºç»ä»¶å³å¯ãECSæéè¦çè®¾è®¡æ¯é»è¾è·æ°æ®çå®å¨åç¦»ãå³ECæ¯çº¯æ°æ®ï¼Systemå®éä¸å°±æ¯é»è¾ï¼ç±æ°æ®é©±å¨é»è¾ãæ°æ®é©±å¨é»è¾æ¯ä»ä¹ææå¢ï¼å¾ç®åéè¿Updateæ£æµæ°æ®ååï¼éè¿äºä»¶æºå¶æ¥è®¢éæ°æ®ååï¼è¿å°±æ¯æè°çæ°æ®é©±å¨äºãå¶å®çç¹ç¹ä¾å¦ç¼å­å½ä¸­ï¼å¨ç¼åé»è¾ä¸æ¥è¯´å¹¶ä¸å¤ªéè¦ï¼ç°ä»£æ¸¸æé½ç¨èæ¬ï¼è¿èæ¬çæ§è½é½è½å®¹å¿æä¹ä¼å¨ä¹ç¼å­å½ä¸­é£ç¹æ§è½æåï¼ETå¨è®¾è®¡çæ¶åå¸æ¶äºè¿äºæ³æ³ï¼ä½æ¯å¹¶ä¸å®å¨ç§æ¬ï¼ç®åçè®¾è®¡æ¯æç»è¿é¿æçæèè·éæå¾æ¥çï¼è¿æ¯æäºèªå·±ç¹è²ã\n\nä¼ ç»çECSåé»è¾ä½èçæ¥å­å¨ä¸å°ç¼ºé·ï¼æ¯å¦ä¸ºäºå¤ç¨ï¼æ°æ®å¿ç¶è¦ææéå¸¸å°çé¢ç²ï¼ä¼å¯¼è´ç»ä»¶éå¸¸éå¸¸å¤ãä½æ¯æ¸¸ææ¯å¤äººåä½å¼åçï¼æ¯ä¸ªäººåºæ¬ä¸åªçæèªå·±çæ¨¡åï¼æåå¯è½é æç»ä»¶å¤§éåä½ãè¿æä¸ªé®é¢ï¼å¸¸è§çECSæ¯æå¹³å¼çï¼Entityè·Componentåªæä¸å±ãç»ä»¶ä¸å¤ï¼å¼ååè½å¯è½ä¸ç¥éè¯¥ä½¿ç¨åªäºComponentãå¥½æ¯ä¸å®¶å¬å¸ï¼æå¤§çæ¯èæ¿ï¼èæ¿æä¸å¸¦å ç¾ä¸ªäººï¼èæ¿ä¸å¯è½è®¤è¯ææçäººï¼å®æä¸é¡¹ä»»å¡ï¼èæ¿æ²¡æ³æåºèªå·±éè¦çäººãåççåæ³æ¯èæ¿æä¸åºè¯¥æå ä¸ªç»çï¼æ¯ä¸ªç»çæä¸åºè¯¥æå ä¸ªä¸»ç®¡ï¼æ¯ä¸ªä¸»ç®¡ç®¡çå ä¸ªå·¥äººï¼è¿æ ·å½¢ææ ç¶çç®¡çç»ææä¼å®¹æç®¡çãè¿ç±»ä¼¼ETçåæ³ï¼Entityå¯ä»¥ç®¡çComponentï¼Componentç®¡çEntityï¼çè³Componentè¿å¯ä»¥æè½½Componentãä¾å¦ï¼äººç±å¤´ï¼èº«ä½ï¼æï¼èç»æï¼èå¤´åç±ç¼çï¼è³æµï¼é¼»å­ï¼å´å·´ç»æã\n\n    Head head = human.AddComponent<Head>();\n    head.AddComponent<Eye>();\n    head.AddComponent<Mouse>();\n    head.AddComponent<Nose>();\n    head.AddComponent<Ear>();\n    human.AddComponent<Body>();\n    human.AddComponent<Hand>();\n    human.AddComponent<Leg>();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nETä¸­ï¼æææ°æ®é½æ¯Entityï¼åæ¬Entityï¼Entityæ¢å¯ä»¥å½æç»ä»¶ä½¿ç¨ï¼ä¹å¯ä»¥å½åå¶å®Entityçå­©å­ãéç¨çæ°æ®æ¾å¨Entityèº«ä¸ä½ä¸ºæåï¼ä¸å¤ªéç¨çæ°æ®å¯ä»¥ä½ä¸ºç»ä»¶æå¨Entityèº«ä¸ãæ¯å¦ç©åçè®¾è®¡ï¼ææç©åé½æéç½®idï¼æ°éï¼ç­çº§çå­æ®µï¼è¿äºå­æ®µæ²¡æå¿è¦åæç»ä»¶ï¼æ¾å¨Entityèº«ä¸ä½¿ç¨ä¼æ´å æ¹ä¾¿ã\n\n    class Item: Entity\n    {\n        // éå·çéç½®Id\n        public int ConfigId { get; set; }\n        // éå·çæ°é\n        public int Count { get; set; }\n        // éå·çç­çº§\n        public int Level { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nETçè¿ç§è®¾è®¡æ°æ®æ¯ä¸ç§æ ç¶çç»æï¼éå¸¸æå±æ¬¡ï¼è½å¤éå¸¸è½»æ¾ççè§£æ´ä¸ªæ¸¸æçæ¶æãé¡¶å±Game.Sceneï¼ä¸åæ¨¡åçæ°æ®é½æè½½å¨Game.Sceneä¸é¢ï¼æ¯ä¸ªæ¨¡åèªèº«ä¸é¢åå¯ä»¥æè½½å¾å¤æ°æ®ãæ¯å¼åä¸ä¸ªæ°åè½ä¸ç¨æèå¤ªå¤ï¼ç±»è¯¥æä¹è®¾è®¡ï¼æ°æ®æ¾å¨ä»ä¹å°æ¹ï¼æè½½è¿éä¼ä¸ä¼å¯¼è´åä½ç­ç­ãæ¯å¦æç©å®¶éè¦åä¸ä¸ªéå·ç³»ç»ï¼è®¾è®¡ä¸ä¸ªItemsComponentæå¨Playerèº«ä¸å³å¯ï¼éè¦æè½å¼åä¸ä¸ªSpellComponentæå¨Playerèº«ä¸ãå¨æéè¦åä¸ä¸ªæ´»å¨ï¼æä¸ªæ´»å¨ç»ä»¶æå¨Game.Sceneä¸é¢ãè¿ç§è®¾è®¡ä»»å¡åæ´¾ä¼å¾ç®åï¼ååçæ¨¡ååã\n\n\n# ç»ä»¶çä¸äºç»è\n\n\n# 1.ç»ä»¶çåå»º\n\nç»ä»¶çåå»ºä¸è¦èªå·±å»newï¼åºè¯¥ç»ä¸ä½¿ç¨ComponentFactoryåå»ºãComponentFactoryæä¾äºä¸ç»æ¹æ³ç¨æ¥åå»ºç»ä»¶Createï¼CreateWithParentï¼CreateWithIdãCreateæ¯æç®åçåå»ºæ¹å¼ï¼å®åäºå ä¸ªå¤ç\na. æ ¹æ®ç»ä»¶ç±»åæé ä¸ä¸ªç»ä»¶\nb. å°ç»ä»¶å å¥äºä»¶ç³»ç»ï¼å¹¶ä¸æåºä¸ä¸ªAwakeSystem\nc. æ¯å¦å¯ç¨å¯¹è±¡æ± \nCreateWithParentå¨Createçåºç¡ä¸æä¾äºä¸ä¸ªParentå¯¹è±¡ï¼è®¾ç½®å°Component.Parentå­æ®µä¸ãCreateWithIdæ¯ç¨æ¥åå»ºComponentWithIdæèå¶å­ç±»çï¼å¨Createçåºç¡ä¸å¯ä»¥èªå·±è®¾ç½®ä¸ä¸ªId, Componentå¨åå»ºçæ¶åå¯ä»¥éæ©æ¯å¦ä½¿ç¨å¯¹è±¡æ± ãä¸ç±»å·¥åæ¹æ³é½å¸¦æä¸ä¸ªfromPoolçåæ°ï¼é»è®¤æ¯trueã\n\n\n# 2.ç»ä»¶çéæ¾\n\nComponenté½ç»§æ¿äºä¸ä¸ªIDisposableæ¥å£ï¼éè¦æ³¨æï¼Componentæéæç®¡èµæºï¼å é¤ä¸ä¸ªComponentå¿é¡»è°ç¨è¯¥æ¥å£ãè¯¥æ¥å£åäºå¦ä¸çæä½\na. æåºDestroy System\nb. å¦æç»ä»¶æ¯ä½¿ç¨å¯¹è±¡æ± åå»ºçï¼é£ä¹å¨è¿éä¼æ¾åå¯¹è±¡æ± \nc. ä»å¨å±äºä»¶ç³»ç»(EventSystem)ä¸­å é¤è¯¥ç»ä»¶ï¼å¹¶ä¸å°InstanceIdè®¾ä¸º0\nå¦æç»ä»¶æè½½Entityèº«ä¸ï¼é£ä¹Entityè°ç¨Disposeçæ¶åä¼èªå¨è°ç¨èº«ä¸ææComponentçDisposeæ¹æ³ã\n\n\n# 3.InstanceIdçä½ç¨\n\nä»»ä½Componenté½å¸¦æä¸ä¸ªInstanceIdå­æ®µï¼è¿ä¸ªå­æ®µä¼å¨ç»ä»¶æé ï¼æèç»ä»¶ä»å¯¹è±¡æ± ååºçæ¶åéæ°è®¾ç½®ï¼è¿ä¸ªInstanceIdæ è¯è¿ä¸ªç»ä»¶çèº«ä»½ãä¸ºä»ä¹éè¦è¿ä¹ä¸ä¸ªå­æ®µå¢ï¼æä»¥ä¸å ä¸ªåå \n\n 1. å¯¹è±¡æ± çå­å¨ï¼ç»ä»¶æªå¿ä¼éæ¾ï¼èæ¯åå°å¯¹è±¡æ± ä¸­ãå¨å¼æ­¥è°ç¨ä¸­ï¼å¾å¯è½è¿ä¸ªç»ä»¶å·²ç»è¢«éæ¾äºï¼ç¶ååè¢«éæ°å©ç¨äºèµ·æ¥ï¼è¿æ ·æä»¬éè¦ä¸ç§æ¹å¼è½åºåä¹åçç»ä»¶å¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾ï¼ä¾å¦ä¸é¢è¿æ®µä»£ç ï¼\n\n\t\tpublic static async ETVoid UpdateAsync(this ActorLocationSender self)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlong instanceId = self.InstanceId;\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tif (self.InstanceId != instanceId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tActorTask actorTask = await self.GetAsync();\n\t\t\t\t\t\n\t\t\t\t\tif (self.InstanceId != instanceId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (actorTask.ActorRequest == null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait self.RunTask(actorTask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tLog.Error(e);\n\t\t\t}\n\t\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nwhile (true)ä¸­æ¯æ®µå¼æ­¥æ¹æ³ï¼await self.GetAsync()ä¹åå¾å¯è½ActorLocationSenderå¯¹è±¡å·²ç»è¢«éæ¾äºï¼çè³æå¯è½è¿ä¸ªå¯¹è±¡åè¢«å¶å®é»è¾ä»å¯¹è±¡æ± ä¸­åæ¬¡å©ç¨äºèµ·æ¥ãæä»¬è¿æ¶åå¯ä»¥éè¿InstanceIdçååæ¥å¤æ­è¿ä¸ªå¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾æã\n2. InstanceIdæ¯å¨å±å¯ä¸çï¼å¹¶ä¸å¸¦æä½ç½®ä¿¡æ¯ï¼å¯ä»¥éè¿InstanceIdæ¥æ¾å°å¯¹è±¡çä½ç½®ï¼å°æ¶æ¯åç»å¯¹è±¡ãè¿ä¸ªè®¾è®¡å°ä¼Actoræ¶æ¯ä¸­å©ç¨å°ãè¿éææ¶å°±ä¸è®²äºã",normalizedContent:"# ä¸åçå®ä½\n\nç®åååæµè¡ecsè®¾è®¡ï¼ä¸»è¦æ¯å®æåéçæåï¼å¼çäºè¿ç§ææ¯ãå®æåééç¨äºç¶æå¸§è¿ç§ç½ç»ææ¯ï¼å®¢æ·ç«¯ä¼è¿è¡é¢æµï¼é¢æµä¸åéè¦è¿è¡åæ»ï¼ç±äºç»ä»¶å¼çè®¾è®¡ï¼åæ»å¯ä»¥åªåæ»æäºç»ä»¶å³å¯ãecsæéè¦çè®¾è®¡æ¯é»è¾è·æ°æ®çå®å¨åç¦»ãå³ecæ¯çº¯æ°æ®ï¼systemå®éä¸å°±æ¯é»è¾ï¼ç±æ°æ®é©±å¨é»è¾ãæ°æ®é©±å¨é»è¾æ¯ä»ä¹ææå¢ï¼å¾ç®åéè¿updateæ£æµæ°æ®ååï¼éè¿äºä»¶æºå¶æ¥è®¢éæ°æ®ååï¼è¿å°±æ¯æè°çæ°æ®é©±å¨äºãå¶å®çç¹ç¹ä¾å¦ç¼å­å½ä¸­ï¼å¨ç¼åé»è¾ä¸æ¥è¯´å¹¶ä¸å¤ªéè¦ï¼ç°ä»£æ¸¸æé½ç¨èæ¬ï¼è¿èæ¬çæ§è½é½è½å®¹å¿æä¹ä¼å¨ä¹ç¼å­å½ä¸­é£ç¹æ§è½æåï¼etå¨è®¾è®¡çæ¶åå¸æ¶äºè¿äºæ³æ³ï¼ä½æ¯å¹¶ä¸å®å¨ç§æ¬ï¼ç®åçè®¾è®¡æ¯æç»è¿é¿æçæèè·éæå¾æ¥çï¼è¿æ¯æäºèªå·±ç¹è²ã\n\nä¼ ç»çecsåé»è¾ä½èçæ¥å­å¨ä¸å°ç¼ºé·ï¼æ¯å¦ä¸ºäºå¤ç¨ï¼æ°æ®å¿ç¶è¦ææéå¸¸å°çé¢ç²ï¼ä¼å¯¼è´ç»ä»¶éå¸¸éå¸¸å¤ãä½æ¯æ¸¸ææ¯å¤äººåä½å¼åçï¼æ¯ä¸ªäººåºæ¬ä¸åªçæèªå·±çæ¨¡åï¼æåå¯è½é æç»ä»¶å¤§éåä½ãè¿æä¸ªé®é¢ï¼å¸¸è§çecsæ¯æå¹³å¼çï¼entityè·componentåªæä¸å±ãç»ä»¶ä¸å¤ï¼å¼ååè½å¯è½ä¸ç¥éè¯¥ä½¿ç¨åªäºcomponentãå¥½æ¯ä¸å®¶å¬å¸ï¼æå¤§çæ¯èæ¿ï¼èæ¿æä¸å¸¦å ç¾ä¸ªäººï¼èæ¿ä¸å¯è½è®¤è¯ææçäººï¼å®æä¸é¡¹ä»»å¡ï¼èæ¿æ²¡æ³æåºèªå·±éè¦çäººãåççåæ³æ¯èæ¿æä¸åºè¯¥æå ä¸ªç»çï¼æ¯ä¸ªç»çæä¸åºè¯¥æå ä¸ªä¸»ç®¡ï¼æ¯ä¸ªä¸»ç®¡ç®¡çå ä¸ªå·¥äººï¼è¿æ ·å½¢ææ ç¶çç®¡çç»ææä¼å®¹æç®¡çãè¿ç±»ä¼¼etçåæ³ï¼entityå¯ä»¥ç®¡çcomponentï¼componentç®¡çentityï¼çè³componentè¿å¯ä»¥æè½½componentãä¾å¦ï¼äººç±å¤´ï¼èº«ä½ï¼æï¼èç»æï¼èå¤´åç±ç¼çï¼è³æµï¼é¼»å­ï¼å´å·´ç»æã\n\n    head head = human.addcomponent<head>();\n    head.addcomponent<eye>();\n    head.addcomponent<mouse>();\n    head.addcomponent<nose>();\n    head.addcomponent<ear>();\n    human.addcomponent<body>();\n    human.addcomponent<hand>();\n    human.addcomponent<leg>();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\netä¸­ï¼æææ°æ®é½æ¯entityï¼åæ¬entityï¼entityæ¢å¯ä»¥å½æç»ä»¶ä½¿ç¨ï¼ä¹å¯ä»¥å½åå¶å®entityçå­©å­ãéç¨çæ°æ®æ¾å¨entityèº«ä¸ä½ä¸ºæåï¼ä¸å¤ªéç¨çæ°æ®å¯ä»¥ä½ä¸ºç»ä»¶æå¨entityèº«ä¸ãæ¯å¦ç©åçè®¾è®¡ï¼ææç©åé½æéç½®idï¼æ°éï¼ç­çº§çå­æ®µï¼è¿äºå­æ®µæ²¡æå¿è¦åæç»ä»¶ï¼æ¾å¨entityèº«ä¸ä½¿ç¨ä¼æ´å æ¹ä¾¿ã\n\n    class item: entity\n    {\n        // éå·çéç½®id\n        public int configid { get; set; }\n        // éå·çæ°é\n        public int count { get; set; }\n        // éå·çç­çº§\n        public int level { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\netçè¿ç§è®¾è®¡æ°æ®æ¯ä¸ç§æ ç¶çç»æï¼éå¸¸æå±æ¬¡ï¼è½å¤éå¸¸è½»æ¾ççè§£æ´ä¸ªæ¸¸æçæ¶æãé¡¶å±game.sceneï¼ä¸åæ¨¡åçæ°æ®é½æè½½å¨game.sceneä¸é¢ï¼æ¯ä¸ªæ¨¡åèªèº«ä¸é¢åå¯ä»¥æè½½å¾å¤æ°æ®ãæ¯å¼åä¸ä¸ªæ°åè½ä¸ç¨æèå¤ªå¤ï¼ç±»è¯¥æä¹è®¾è®¡ï¼æ°æ®æ¾å¨ä»ä¹å°æ¹ï¼æè½½è¿éä¼ä¸ä¼å¯¼è´åä½ç­ç­ãæ¯å¦æç©å®¶éè¦åä¸ä¸ªéå·ç³»ç»ï¼è®¾è®¡ä¸ä¸ªitemscomponentæå¨playerèº«ä¸å³å¯ï¼éè¦æè½å¼åä¸ä¸ªspellcomponentæå¨playerèº«ä¸ãå¨æéè¦åä¸ä¸ªæ´»å¨ï¼æä¸ªæ´»å¨ç»ä»¶æå¨game.sceneä¸é¢ãè¿ç§è®¾è®¡ä»»å¡åæ´¾ä¼å¾ç®åï¼ååçæ¨¡ååã\n\n\n# ç»ä»¶çä¸äºç»è\n\n\n# 1.ç»ä»¶çåå»º\n\nç»ä»¶çåå»ºä¸è¦èªå·±å»newï¼åºè¯¥ç»ä¸ä½¿ç¨componentfactoryåå»ºãcomponentfactoryæä¾äºä¸ç»æ¹æ³ç¨æ¥åå»ºç»ä»¶createï¼createwithparentï¼createwithidãcreateæ¯æç®åçåå»ºæ¹å¼ï¼å®åäºå ä¸ªå¤ç\na. æ ¹æ®ç»ä»¶ç±»åæé ä¸ä¸ªç»ä»¶\nb. å°ç»ä»¶å å¥äºä»¶ç³»ç»ï¼å¹¶ä¸æåºä¸ä¸ªawakesystem\nc. æ¯å¦å¯ç¨å¯¹è±¡æ± \ncreatewithparentå¨createçåºç¡ä¸æä¾äºä¸ä¸ªparentå¯¹è±¡ï¼è®¾ç½®å°component.parentå­æ®µä¸ãcreatewithidæ¯ç¨æ¥åå»ºcomponentwithidæèå¶å­ç±»çï¼å¨createçåºç¡ä¸å¯ä»¥èªå·±è®¾ç½®ä¸ä¸ªid, componentå¨åå»ºçæ¶åå¯ä»¥éæ©æ¯å¦ä½¿ç¨å¯¹è±¡æ± ãä¸ç±»å·¥åæ¹æ³é½å¸¦æä¸ä¸ªfrompoolçåæ°ï¼é»è®¤æ¯trueã\n\n\n# 2.ç»ä»¶çéæ¾\n\ncomponenté½ç»§æ¿äºä¸ä¸ªidisposableæ¥å£ï¼éè¦æ³¨æï¼componentæéæç®¡èµæºï¼å é¤ä¸ä¸ªcomponentå¿é¡»è°ç¨è¯¥æ¥å£ãè¯¥æ¥å£åäºå¦ä¸çæä½\na. æåºdestroy system\nb. å¦æç»ä»¶æ¯ä½¿ç¨å¯¹è±¡æ± åå»ºçï¼é£ä¹å¨è¿éä¼æ¾åå¯¹è±¡æ± \nc. ä»å¨å±äºä»¶ç³»ç»(eventsystem)ä¸­å é¤è¯¥ç»ä»¶ï¼å¹¶ä¸å°instanceidè®¾ä¸º0\nå¦æç»ä»¶æè½½entityèº«ä¸ï¼é£ä¹entityè°ç¨disposeçæ¶åä¼èªå¨è°ç¨èº«ä¸ææcomponentçdisposeæ¹æ³ã\n\n\n# 3.instanceidçä½ç¨\n\nä»»ä½componenté½å¸¦æä¸ä¸ªinstanceidå­æ®µï¼è¿ä¸ªå­æ®µä¼å¨ç»ä»¶æé ï¼æèç»ä»¶ä»å¯¹è±¡æ± ååºçæ¶åéæ°è®¾ç½®ï¼è¿ä¸ªinstanceidæ è¯è¿ä¸ªç»ä»¶çèº«ä»½ãä¸ºä»ä¹éè¦è¿ä¹ä¸ä¸ªå­æ®µå¢ï¼æä»¥ä¸å ä¸ªåå \n\n 1. å¯¹è±¡æ± çå­å¨ï¼ç»ä»¶æªå¿ä¼éæ¾ï¼èæ¯åå°å¯¹è±¡æ± ä¸­ãå¨å¼æ­¥è°ç¨ä¸­ï¼å¾å¯è½è¿ä¸ªç»ä»¶å·²ç»è¢«éæ¾äºï¼ç¶ååè¢«éæ°å©ç¨äºèµ·æ¥ï¼è¿æ ·æä»¬éè¦ä¸ç§æ¹å¼è½åºåä¹åçç»ä»¶å¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾ï¼ä¾å¦ä¸é¢è¿æ®µä»£ç ï¼\n\n\t\tpublic static async etvoid updateasync(this actorlocationsender self)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlong instanceid = self.instanceid;\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tif (self.instanceid != instanceid)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tactortask actortask = await self.getasync();\n\t\t\t\t\t\n\t\t\t\t\tif (self.instanceid != instanceid)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (actortask.actorrequest == null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait self.runtask(actortask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (exception e)\n\t\t\t{\n\t\t\t\tlog.error(e);\n\t\t\t}\n\t\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nwhile (true)ä¸­æ¯æ®µå¼æ­¥æ¹æ³ï¼await self.getasync()ä¹åå¾å¯è½actorlocationsenderå¯¹è±¡å·²ç»è¢«éæ¾äºï¼çè³æå¯è½è¿ä¸ªå¯¹è±¡åè¢«å¶å®é»è¾ä»å¯¹è±¡æ± ä¸­åæ¬¡å©ç¨äºèµ·æ¥ãæä»¬è¿æ¶åå¯ä»¥éè¿instanceidçååæ¥å¤æ­è¿ä¸ªå¯¹è±¡æ¯å¦å·²ç»è¢«éæ¾æã\n2. instanceidæ¯å¨å±å¯ä¸çï¼å¹¶ä¸å¸¦æä½ç½®ä¿¡æ¯ï¼å¯ä»¥éè¿instanceidæ¥æ¾å°å¯¹è±¡çä½ç½®ï¼å°æ¶æ¯åç»å¯¹è±¡ãè¿ä¸ªè®¾è®¡å°ä¼actoræ¶æ¯ä¸­å©ç¨å°ãè¿éææ¶å°±ä¸è®²äºã",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"3.4äºä»¶æºå¶EventSystem",frontmatter:{title:"3.4äºä»¶æºå¶EventSystem",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/e49330/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/35.3.4%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6EventSystem.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/35.3.4äºä»¶æºå¶EventSystem.md",key:"v-3ce102e1",path:"/pages/e49330/",headersStr:null,content:'# äºä»¶æºå¶EventSystem\n\nECSæéè¦çç¹æ§ä¸æ¯æ°æ®è·é»è¾åç¦»ï¼äºæ¯æ°æ®é©±å¨é»è¾ãä»ä¹æ¯æ°æ®é©±å¨é»è¾å¢ï¼ä¸å¤ªå¥½çè§£ï¼æä»¬ä¸¾ä¸ªä¾å­ ä¸ä¸ªmobaæ¸¸æï¼è±éé½æè¡æ¡ï¼è¡æ¡ä¼å¨äººç©å¤´ä¸æ¾ç¤ºï¼ä¹ä¼å¨å·¦ä¸æ¹å¤´åUIä¸æ¾ç¤ºãè¿æ¶åæå¡ç«¯åæ¥ä¸ä¸ªæ£è¡æ¶æ¯ãæä»¬æä¹å¤çè¿ä¸ªæ¶æ¯ï¼ç¬¬ä¸ç§æ¹æ³ï¼å¨æ¶æ¯å¤çå½æ°ä¸­ä¿®æ¹è±éçè¡æ°å¼ï¼ä¿®æ¹å¤´åä¸è¡æ¡æ¾ç¤ºï¼åæ¶ä¿®æ¹å¤´åUIçè¡æ¡ãè¿ç§æ¹å¼å¾ææ¾é æäºæ¨¡åé´çè¦åãç¬¬äºç§æ¹æ³ï¼æ£è¡æ¶æ¯å¤çå½æ°ä¸­åªæ¯æ¹åè¡å¼ï¼è¡å¼çæ¹åæåºä¸ä¸ªhpchangeçäºä»¶ï¼äººç©å¤´åæ¨¡åè·UIæ¨¡åé½è®¢éè¡å¼æ¹åäºä»¶ï¼å¨è®¢éçæ¹æ³ä¸­åå«å¤çèªå·±çé»è¾ï¼è¿æ ·åä¸ªæ¨¡åè´è´£èªå·±çé»è¾ï¼æ²¡æè¦åã ETæä¾äºå¤ç§äºä»¶ï¼äºä»¶é½æ¯å¯ä»¥å¤æ¬¡è®¢éç:\n\n 1. AwakeSystemï¼ç»ä»¶å·¥ååå»ºç»ä»¶åæåºï¼åªæåºä¸æ¬¡ï¼å¯ä»¥å¸¦åæ°\n\n    Player player = ComponentFactory.Create<Player>();\n\n    // è®¢éPlayerçAwakeäºä»¶\n    public class PlayerAwakeSystem: AwakeSystem<Player>\n    {\n        public override void Awake(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n 2. StartSystemï¼ç»ä»¶UpdateSystemè°ç¨åæåº\n\n    // è®¢éPlayerçStartäºä»¶\n    public class PlayerStartSystem: StartSystem<Player>\n    {\n        public override void Start(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 3. UpdateSystemï¼ç»ä»¶æ¯å¸§æåº\n\n    // è®¢éPlayerçUpdateäºä»¶\n    public class PlayerUpdateSystem: UpdateSystem<Player>\n    {\n        public override void Update(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 4. DestroySystemï¼ç»ä»¶å é¤æ¶æåº\n\n    // è®¢éPlayerçDestroyäºä»¶\n    public class PlayerDestroySystem: DestroySystem<Player>\n    {\n        public override void Destroy(Player self)\n        {\n        }\n    }\n\n    Player player = ComponentFactory.Create<Player>();\n    // è¿éä¼è§¦åDestroyäºä»¶\n    player.Dispose();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 5. ChangeSystemï¼ç»ä»¶åå®¹æ¹åæ¶æåºï¼éè¦å¼åèæå¨è§¦å\n\n    // è®¢éPlayerçDestroyäºä»¶\n    public class PlayerChangeSystem: ChangeSystem<Player>\n    {\n        public override void Change(Player self)\n        {\n        }\n    }\n\n    Player player = ComponentFactory.Create<Player>();\n    // éè¦æå¨è§¦åChangeSystem\n    Game.EventSystem.Change(player);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 6. DeserializeSystemï¼ç»ä»¶ååºååä¹åæåº\n\n    // è®¢éPlayerçDeserializeäºä»¶\n    public class PlayerDeserializeSystem: DeserializeSystem<Player>\n    {\n        public override void Deserialize(Player self)\n        {\n        }\n    }\n\n    // è¿éplayer2ä¼è§¦åDeserializeäºä»¶\n    Player player2 = MongoHelper.FromBson<Player>(player.ToBson());\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n 7. LoadSystemï¼EventSystemå è½½dllæ¶æåºï¼ç¨äºæå¡ç«¯ç­æ´æ°ï¼éæ°å è½½dllåä¸äºå¤çï¼æ¯å¦éæ°æ³¨åhandler\n\n    // è®¢éPlayerçLoadäºä»¶\n    public class PlayerLoadSystem: LoadSystem<Player>\n    {\n        public override void Load(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 8. æ®éçEventï¼ç±å¼åèèªå·±æåºï¼å¯ä»¥æå¤å¸¦ä¸ä¸ªåæ°ãå¦å¤å®¢æ·ç«¯ç­æ´å±ä¹å¯ä»¥è®¢émonoå±çEventäºä»¶\n\n    int oldhp = 10;\n    int newhp = 5;\n    // æåºhpæ¹åäºä»¶\n    Game.EventSystem.Run("HpChange", oldhp, newhp);\n\n    // UIè®¢éhpæ¹åäºä»¶\n    [Event("HpChange")]\n    public class HpChange_ShowUI: AEvent<int, int>\n    {\n        public override void Run(int a, int b)\n        {\n            throw new NotImplementedException();\n        }\n    }\n\n    // æ¨¡åå¤´é¡¶è¡æ¡æ¨¡åä¹è®¢éhpæ¹åäºä»¶\n    [Event("HpChange")]\n    public class HpChange_ModelHeadChange: AEvent<int, int>\n    {\n        public override void Run(int a, int b)\n        {\n            throw new NotImplementedException();\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n 9. é¤æ­¤ä¹å¤è¿æå¾å¤äºä»¶ï¼ä¾å¦æ¶æ¯äºä»¶ãæ¶æ¯äºä»¶ä½¿ç¨MessageHandleræ¥å£°æï¼å¯ä»¥å¸¦åæ°æå®åªç§æå¡å¨éè¦è®¢éã\n\n\t[MessageHandler(AppType.Gate)]\n\tpublic class C2G_LoginGateHandler : AMRpcHandler<C2G_LoginGate, G2C_LoginGate>\n\t{\n\t\tprotected override void Run(Session session, C2G_LoginGate message, Action<G2C_LoginGate> reply)\n\t\t{\n\t\t\tG2C_LoginGate response = new G2C_LoginGate();\n\t\t\treply(response);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\næ´å·ä½çæ¶æ¯äºä»¶ç­å°è®²æ¶æ¯çæ¶ååç»ç»è®²è§£äº\n10. æ°å¼äºä»¶ï¼æ°å¼æ¨¡ååè®²è§£\n......, æ´å¤çäºä»¶ç±èªå·±å»å¼åã\n\nETæ¡æ¶çé»è¾å°±æ¯ç±ä»¥ä¸åç§äºä»¶æ¥é©±å¨çã',normalizedContent:'# äºä»¶æºå¶eventsystem\n\necsæéè¦çç¹æ§ä¸æ¯æ°æ®è·é»è¾åç¦»ï¼äºæ¯æ°æ®é©±å¨é»è¾ãä»ä¹æ¯æ°æ®é©±å¨é»è¾å¢ï¼ä¸å¤ªå¥½çè§£ï¼æä»¬ä¸¾ä¸ªä¾å­ ä¸ä¸ªmobaæ¸¸æï¼è±éé½æè¡æ¡ï¼è¡æ¡ä¼å¨äººç©å¤´ä¸æ¾ç¤ºï¼ä¹ä¼å¨å·¦ä¸æ¹å¤´åuiä¸æ¾ç¤ºãè¿æ¶åæå¡ç«¯åæ¥ä¸ä¸ªæ£è¡æ¶æ¯ãæä»¬æä¹å¤çè¿ä¸ªæ¶æ¯ï¼ç¬¬ä¸ç§æ¹æ³ï¼å¨æ¶æ¯å¤çå½æ°ä¸­ä¿®æ¹è±éçè¡æ°å¼ï¼ä¿®æ¹å¤´åä¸è¡æ¡æ¾ç¤ºï¼åæ¶ä¿®æ¹å¤´åuiçè¡æ¡ãè¿ç§æ¹å¼å¾ææ¾é æäºæ¨¡åé´çè¦åãç¬¬äºç§æ¹æ³ï¼æ£è¡æ¶æ¯å¤çå½æ°ä¸­åªæ¯æ¹åè¡å¼ï¼è¡å¼çæ¹åæåºä¸ä¸ªhpchangeçäºä»¶ï¼äººç©å¤´åæ¨¡åè·uiæ¨¡åé½è®¢éè¡å¼æ¹åäºä»¶ï¼å¨è®¢éçæ¹æ³ä¸­åå«å¤çèªå·±çé»è¾ï¼è¿æ ·åä¸ªæ¨¡åè´è´£èªå·±çé»è¾ï¼æ²¡æè¦åã etæä¾äºå¤ç§äºä»¶ï¼äºä»¶é½æ¯å¯ä»¥å¤æ¬¡è®¢éç:\n\n 1. awakesystemï¼ç»ä»¶å·¥ååå»ºç»ä»¶åæåºï¼åªæåºä¸æ¬¡ï¼å¯ä»¥å¸¦åæ°\n\n    player player = componentfactory.create<player>();\n\n    // è®¢éplayerçawakeäºä»¶\n    public class playerawakesystem: awakesystem<player>\n    {\n        public override void awake(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n 2. startsystemï¼ç»ä»¶updatesystemè°ç¨åæåº\n\n    // è®¢éplayerçstartäºä»¶\n    public class playerstartsystem: startsystem<player>\n    {\n        public override void start(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 3. updatesystemï¼ç»ä»¶æ¯å¸§æåº\n\n    // è®¢éplayerçupdateäºä»¶\n    public class playerupdatesystem: updatesystem<player>\n    {\n        public override void update(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 4. destroysystemï¼ç»ä»¶å é¤æ¶æåº\n\n    // è®¢éplayerçdestroyäºä»¶\n    public class playerdestroysystem: destroysystem<player>\n    {\n        public override void destroy(player self)\n        {\n        }\n    }\n\n    player player = componentfactory.create<player>();\n    // è¿éä¼è§¦ådestroyäºä»¶\n    player.dispose();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 5. changesystemï¼ç»ä»¶åå®¹æ¹åæ¶æåºï¼éè¦å¼åèæå¨è§¦å\n\n    // è®¢éplayerçdestroyäºä»¶\n    public class playerchangesystem: changesystem<player>\n    {\n        public override void change(player self)\n        {\n        }\n    }\n\n    player player = componentfactory.create<player>();\n    // éè¦æå¨è§¦åchangesystem\n    game.eventsystem.change(player);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 6. deserializesystemï¼ç»ä»¶ååºååä¹åæåº\n\n    // è®¢éplayerçdeserializeäºä»¶\n    public class playerdeserializesystem: deserializesystem<player>\n    {\n        public override void deserialize(player self)\n        {\n        }\n    }\n\n    // è¿éplayer2ä¼è§¦ådeserializeäºä»¶\n    player player2 = mongohelper.frombson<player>(player.tobson());\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n 7. loadsystemï¼eventsystemå è½½dllæ¶æåºï¼ç¨äºæå¡ç«¯ç­æ´æ°ï¼éæ°å è½½dllåä¸äºå¤çï¼æ¯å¦éæ°æ³¨åhandler\n\n    // è®¢éplayerçloadäºä»¶\n    public class playerloadsystem: loadsystem<player>\n    {\n        public override void load(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 8. æ®éçeventï¼ç±å¼åèèªå·±æåºï¼å¯ä»¥æå¤å¸¦ä¸ä¸ªåæ°ãå¦å¤å®¢æ·ç«¯ç­æ´å±ä¹å¯ä»¥è®¢émonoå±çeventäºä»¶\n\n    int oldhp = 10;\n    int newhp = 5;\n    // æåºhpæ¹åäºä»¶\n    game.eventsystem.run("hpchange", oldhp, newhp);\n\n    // uiè®¢éhpæ¹åäºä»¶\n    [event("hpchange")]\n    public class hpchange_showui: aevent<int, int>\n    {\n        public override void run(int a, int b)\n        {\n            throw new notimplementedexception();\n        }\n    }\n\n    // æ¨¡åå¤´é¡¶è¡æ¡æ¨¡åä¹è®¢éhpæ¹åäºä»¶\n    [event("hpchange")]\n    public class hpchange_modelheadchange: aevent<int, int>\n    {\n        public override void run(int a, int b)\n        {\n            throw new notimplementedexception();\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n 9. é¤æ­¤ä¹å¤è¿æå¾å¤äºä»¶ï¼ä¾å¦æ¶æ¯äºä»¶ãæ¶æ¯äºä»¶ä½¿ç¨messagehandleræ¥å£°æï¼å¯ä»¥å¸¦åæ°æå®åªç§æå¡å¨éè¦è®¢éã\n\n\t[messagehandler(apptype.gate)]\n\tpublic class c2g_logingatehandler : amrpchandler<c2g_logingate, g2c_logingate>\n\t{\n\t\tprotected override void run(session session, c2g_logingate message, action<g2c_logingate> reply)\n\t\t{\n\t\t\tg2c_logingate response = new g2c_logingate();\n\t\t\treply(response);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\næ´å·ä½çæ¶æ¯äºä»¶ç­å°è®²æ¶æ¯çæ¶ååç»ç»è®²è§£äº\n10. æ°å¼äºä»¶ï¼æ°å¼æ¨¡ååè®²è§£\n......, æ´å¤çäºä»¶ç±èªå·±å»å¼åã\n\netæ¡æ¶çé»è¾å°±æ¯ç±ä»¥ä¸åç§äºä»¶æ¥é©±å¨çã',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"4.1ç»ä»¶å¼è®¾è®¡",frontmatter:{title:"4.1ç»ä»¶å¼è®¾è®¡",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/002c9b/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/41.4.1%E7%BB%84%E4%BB%B6%E5%BC%8F%E8%AE%BE%E8%AE%A1.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/41.4.1ç»ä»¶å¼è®¾è®¡.md",key:"v-3d087b67",path:"/pages/002c9b/",headers:[{level:2,title:"1. æ°æ®ç»æè¦åæ§æå¼º",slug:"_1-æ°æ®ç»æè¦åæ§æå¼º",normalizedTitle:"1. æ°æ®ç»æè¦åæ§æå¼º",charIndex:103},{level:2,title:"2. é¾ä»¥ç­ææ",slug:"_2-é¾ä»¥ç­ææ",normalizedTitle:"2. é¾ä»¥ç­ææ",charIndex:475},{level:2,title:"3. æ¹æ³ä¸æ°æ®è¦å",slug:"_3-æ¹æ³ä¸æ°æ®è¦å",normalizedTitle:"3. æ¹æ³ä¸æ°æ®è¦å",charIndex:956}],headersStr:"1. æ°æ®ç»æè¦åæ§æå¼º 2. é¾ä»¥ç­ææ 3. æ¹æ³ä¸æ°æ®è¦å",content:"# ç»ä»¶å¼è®¾è®¡\n\nå¨ä»£ç å¤ç¨åç»ç»æ°æ®æ¹é¢ï¼é¢åå¯¹è±¡å¯è½æ¯å¤§å®¶ç¬¬ä¸ååºãé¢åå¯¹è±¡ä¸å¤§ç¹æ§ç»§æ¿ï¼å°è£ï¼å¤æï¼å¨ä¸å®ç¨åº¦ä¸è½è§£å³ä¸å°ä»£ç å¤ç¨ï¼æ°æ®å¤ç¨çé®é¢ãä¸è¿é¢åå¯¹è±¡ä¸æ¯ä¸è½çï¼å®ä¹ææå¤§çç¼ºé·ï¼\n\n\n# 1. æ°æ®ç»æè¦åæ§æå¼º\n\nä¸æ¦ç¶ç±»ä¸­å¢å æå é¤æä¸ªå­æ®µï¼å¯è½è¦å½±åå°ææå­ç±»ï¼å½±åå°ææå­ç±»ç¸å³çé»è¾ãè¿æ¾å¾éå¸¸ä¸çµæ´»ï¼å¨ä¸å¥å¤æçç»§æ¿ä½ç³»ä¸­ï¼å¾ç¶ç±»ä¸­æ¹åå­æ®µä¼åå¾è¶æ¥è¶éº»ç¦ï¼æ¯æ¹è¯´ABCæ¯Dçå­ç±»ï¼æå¤©åç°éè¦å¢å ä¸ä¸ªABé½æçæ°æ®ï¼ä½æ¯Cæ²¡æï¼é£ä¹è¿ä¸ªæ°æ®è¯å®ä¸å¥½æ¾å°ç¶ç±»ä¸­ï¼åªè½å°ABæ½è±¡åºæ¥ä¸ä¸ªç¶ç±»Eï¼Eç»§æ¿äºDï¼ABå±æçå­æ®µå å°Eä¸­ï¼ä¸æ¦ç»§æ¿ç»æåçäºååï¼å¯è½æ¥å£ä¹è¦æ¹åï¼æ¯æ¹è¯´ä¹åæä¸ªæ¥å£ä¼ å¥åæ°ç±»åæ¯Eï¼å½ABä¸åéè¦å±ç¨çé£ä¸ªå­æ®µï¼é£ä¹éè¦è°æ´ç»§æ¿å³ç³»ï¼è®©ABéæ°ç»§æ¿Dï¼é£ä¹è¿ä¸ªæ¥å£çä¼ å¥åæ°ç±»åéè¦æ¹æDï¼å¶ä¸­çé»è¾ä»£ç å¾å¯è½ä¹è¦åçè°æ´ãæ´å¯æçæ¯æ¸¸æé»è¾ååéå¸¸å¤æï¼éå¸¸é¢ç¹ï¼å¯è½ä»å¤©å äºä¸ªå­æ®µï¼æå¤©åå æäºï¼åå¦æ¯æ¬¡é½è¦å»è°æ´ç»§æ¿ç»æï¼è¿ç®ç´å°±æ¯å©æ¢¦ãç»§æ¿ç»æé¢å¯¹é¢ç¹çæ°æ®ç»æè°æ´æè§å¾æ åã\n\n\n# 2. é¾ä»¥ç­ææ\n\nç»§æ¿ç»ææ æ³è¿è¡æ¶å¢å å é¤å­æ®µï¼æ¯å¦ç©å®¶Playerå¹³å¸¸æ¯èµ°è·¯ï¼ä½¿ç¨åéªåå°±éªé©¬ãé®é¢æ¯åéªçç¸å³ä¿¡æ¯å°±éè¦ä¸ç´æå¨Playerå¯¹è±¡ä¸é¢ãè¿å°±æ¾å¾å¾ä¸çµæ´»ï¼æä¸éªé©¬çæ¶ååå­ä¸­ä¸ºå¥è¦æé©¬çæ°æ®ï¼æ¥å£ä¹æåæ ·çé®é¢ï¼ä¸ä¸ªç±»å®ç°äºä¸ä¸ªæ¥å£ï¼é£ä¹è¿ä¸ªæ¥å£å°±æ°¸è¿ç²å¨äºè¿ä¸ªç±»èº«ä¸ï¼ä½ æ³ç©æå¥¹é½ä¸è¡ï¼è¿æ¯ä»¥éªé©¬ä¸ºä¾ï¼ç©å®¶Playerå¯ä»¥è¿è¡éªè¡ï¼é£ä¹å¯è½ç»§æ¿ä¸ä¸ªéªè¡çæ¥å£ï¼é®é¢æ¯ï¼å½æè¿ä¸ªPlayerä»åéªä¸ä¸æ¥æ¶ï¼ç©å®¶Playerèº«ä¸è¿æ¯æéªè¡çæ¥å£ï¼æ ¹æ¬æ²¡æ³å¨æå æè¿ä¸ªæ¥å£ï¼å¯è½ä¾å­ä¸¾å¾ä¸æ¯å¾å¯¹ï¼ä½æ¯éçè¡¨è¿°çåºè¯¥å¾æ¸æ¥äºã\n\nä½¿ç¨é¢åå¯¹è±¡å¯è½å¯¼è´ç¾é¾æ§åæï¼æ¸¸æå¼åä¸­ææ°äººæèäººï¼æææ¯å¥½çï¼æææ¯å·®çãäººé½æ¯åæ¬¢å·æçï¼å½ä½ åç°è°æ´ç»§æ¿å³ç³»éº»ç¦çæ¶åï¼æå¯è½ABä¸­å¢å ä¸ä¸ªå­æ®µä¸ºäºçäºç´æ¥å°±æ¾å°ç¶ç±»Dä¸­å»äºãå¯¼è´Cè«åå¥å¦çå¤äºä¸ä¸ªæ ç¨çå­æ®µãå³é®è¿æ²¡æ³åç°ï¼æåå¯¼è´ç¶ç±»Dè¶æ¥è¶å¤§ï¼å°æåæå¯è½å¹²èå°±ä¸ç¨ABCäºï¼ç´æ¥è®©ææå¯¹è±¡é½åæDï¼æ¹ä¾¿åï¼æ¯çï¼å¾å¤æ¸¸æå°±æ¯è¿ä¹å¹²çï¼å¼åå°æåæ ¹æ¬å°±ä¸ç®¡ç»§æ¿å³ç³»äºï¼å ä¸ºæ³ç®¡ä¹ç®¡ä¸äºäºã\n\n\n# 3. æ¹æ³ä¸æ°æ®è¦å\n\nä¼ ç»é¢åå¯¹è±¡é½æ¯classä¸­å¸¦ææ¹æ³ï¼å¹¶ä¸ç¹å«æå¡èå½æ°å¤æãæ¹æ³è·æ°æ®æ¾å¨ä¸èµ·å¸¦æ¥äºç¹å«å¤è¦åçé®é¢ãä¸ºäºè§£å³è¿äºè¦åï¼å¤§å®¶æ³åºäºå¤§éçè®¾è®¡æ¨¡å¼ï¼æ¯å¦ä¾èµæ¥å£ï¼ä¾èµè½¬ç½®ãè¯´å®è¯ï¼è¿å°±æ¯è±è£¤å­æ¾å±ï¼ä¸ºäºè§£è¦åï¼æç±»åææ¥å£ï¼ç¶åç»§æ¿æ¥å£ï¼é¾éè¿å°±ä¸å«ä¾èµäºï¼è¿äºåæ³å¯¼è´ï¼ä»£ç ä¸­å°å¤æ¯æ¥å£ï¼ä»£ç éè¯»æå¶å°é¾ãåèµ·ä»£ç æ¥ä¹æ²¡æä¸ªæ åï¼é«æè·èé¸¡ååºæ¥çä»£ç å®å¨æ¯ä¸¤åäºãå¤§é¨åç åé½æ¯é»è¾ä»ï¼è°ææ¶é´å¤©å¤©æ³è¿ä¸ªç±»è¦æä¹è®¾è®¡åï¼éçé»è¾è¶æ¥è¶å¤æç±»éé¢çæ¹æ³å°è¶æ¥è¶åºå¤§ï¼å¯æçæ¯ï¼è¿æ¯è¿ä¸ªç±»çæ¹æ³ï¼æå¶é¾ä»¥éæï¼å¾å¤é¡¹ç®ä¸­è½çå°ç±»éé¢å­å¨ä¸ä¸è¡ä»£ç çèå½æ°ãå¤©åªï¼\n\né¢åå¯¹è±¡å¨é¢å¯¹å¤æçæ¸¸æé»è¾æ¶å¾æ åï¼æä»¥å¾å¤æ¸¸æå¼åèååéäºåå»ï¼ä½¿ç¨é¢åè¿ç¨è¿è¡å¼åæ¸¸æï¼é¢åè¿ç¨ï¼ç®åç²æ´ï¼ä¸èèå¤æçç»§æ¿ï¼ä¸èèæ½è±¡ï¼ä¸èèå¤æï¼æ¯å¼åå±çfreestyleï¼æ½èµ·è¢å­å°±å¼æ¸ï¼ä½åæ¶ï¼ä»£ç é»è¾çå¤ç¨æ§ï¼æ°æ®çå¤ç¨æ§ä¹å¤§å¤§éä½ãé¢åè¿ç¨ä¹ä¸æ¯ä¸ç§å¥½çæ¸¸æå¼åæ¨¡å¼ã\n\nç»ä»¶æ¨¡å¼å¾å¥½çè§£å³äºé¢åå¯¹è±¡ä»¥åé¢åè¿ç¨çç§ç§ç¼ºé·ï¼å¨æ¸¸æå®¢æ·ç«¯ä¸­ä½¿ç¨éå¸¸å¹¿æ³ï¼Unity3dï¼èå¹»4ï¼ç­ç­é½ä½¿ç¨äºç»ä»¶æ¨¡å¼ãç»ä»¶æ¨¡å¼çç¹ç¹ï¼ 1.é«åº¦æ¨¡ååï¼ä¸ä¸ªç»ä»¶å°±æ¯ä¸ä»½æ°æ®å ä¸æ®µé»è¾\n2.ç»ä»¶å¯ç­ææï¼éè¦å°±å ä¸ï¼ä¸éè¦å°±å é¤\n3.ç±»åä¹é´ä¾èµæå°ï¼ä»»ä½ç±»åå¢å æå é¤ç»ä»¶ä¸ä¼å½±åå°å¶å®ç±»åã\n\nä½æ¯ç®ååªææå°ææå¡ç«¯ä½¿ç¨äºç»ä»¶çè®¾è®¡ï¼å®æåéæå¡ç«¯åºè¯¥æ¯ä½¿ç¨äºç»ä»¶çè®¾è®¡ï¼å®æåéçå¼åäººåç§°ä¹ä¸ºECSæ¶æï¼å¶å®å°±æ¯ç»ä»¶æ¨¡å¼çä¸ä¸ªåç§ï¼Eå°±æ¯Entityï¼Cå°±æ¯Componentï¼Sæ¯Systemï¼å¶å®å°±æ¯å°ç»ä»¶Componentçé»è¾ä¸æ°æ®å¥ç¦»ï¼é»è¾é¨åå«Systemï¼è¯é¢æ¯è¿äºï¼è¿æ¯åå°ETæ¡æ¶æ¥æã\n\nETæ¡æ¶ä½¿ç¨äºç»ä»¶çè®¾è®¡ãä¸åé½æ¯EntityåComponentï¼ä»»ä½ç±»ç»§æ¿äºEntityé½å¯ä»¥æè½½ç»ä»¶ï¼ä¾å¦ç©å®¶ç±»ï¼\n\npublic sealed class Player : Entity\n{\n    public string Account { get; private set; }\n    public long UnitId { get; set; }\n\t\n    public void Awake(string account)\n    {\n        this.Account = account;\n    }\n\t\n    public override void Dispose()\n    {\n        if (this.Id == 0)\n        {\n            return;\n        }\n        base.Dispose();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nç»ç©å®¶å¯¹è±¡æè½½ä¸ªç§»å¨ç»ä»¶MoveComponentï¼è¿æ ·ç©å®¶å°±å¯ä»¥ç§»å¨äºï¼ç»ç©å®¶æä¸ä¸ä¸ªèåç»ä»¶ï¼ç©å®¶å°±å¯ä»¥ç®¡çç©åäºï¼ç»ç©å®¶æä¸æè½ç»ä»¶ï¼é£ä¹ç©å®¶å°±å¯ä»¥æ½æ¾æè½äºï¼å ä¸Buffç»ä»¶å°±å¯ä»¥ç®¡çbuffäºã\n\nplayer.AddComponent<MoveComponent>();\nplayer.AddComponent<ItemsComponent>();\nplayer.AddComponent<SpellComponent>();\nplayer.AddComponent<BuffComponent>();\n\n\n1\n2\n3\n4\n\n\nç»ä»¶æ¯é«åº¦å¯ä»¥å¤ç¨çï¼æ¯å¦ä¸ä¸ªNPCï¼ä»ä¹å¯ä»¥ç§»å¨ï¼ç»NPCä¹æä¸MoveComponentå°±è¡äºï¼æçNPCä¹å¯ä»¥æ½æ¾æè½ï¼é£ä¹ç»å®æä¸SpellComponentï¼NPCä¸éè¦èåï¼é£ä¹å°±ä¸ç¨æItemsComponentäº\n\nETæ¡æ¶æ¨¡åå¨é¨åæäºç»ä»¶çå½¢å¼ï¼ä¸ä¸ªè¿ç¨ä¹æ¯ç±ä¸åçç»ä»¶æ¼æ¥èæãæ¯æ¹è¯´Loginserveréè¦å¯¹å¤è¿æ¥ä¹éè¦ä¸æå¡å¨åé¨è¿è¡è¿æ¥ï¼é£ä¹login serveræä¸\n\n// åç½ç½ç»ç»ä»¶NetInnerComponentï¼å¤çå¯¹åç½è¿æ¥  \nGame.Scene.AddComponent<NetInnerComponent, string, int>(innerConfig.Host, innerConfig.Port);\n// å¤ç½ç½ç»ç»ä»¶NetOuterComponentï¼å¤çä¸å®¢æ·ç«¯è¿æ¥\nGame.Scene.AddComponent<NetOuterComponent, string, int>(outerConfig.Host, outerConfig.Port);\n\n\n1\n2\n3\n4\n\n\næ¯å¦battle serverå°±ä¸éè¦å¯¹å¤ç½è¿æ¥ï¼å¤ç½æ¶æ¯ç±gateserverè½¬åï¼ï¼é£ä¹å¾èªç¶çåªéè¦æè½½ä¸ä¸ªåç½ç»ä»¶å³å¯ã ç±»ä¼¼Unity3dçç»ä»¶ï¼ETæ¡æ¶ä¹æä¾äºç»ä»¶äºä»¶ï¼ä¾å¦Awakeï¼Startï¼Updateç­ãè¦ç»ä¸ä¸ªComponentæèEntityå ä¸è¿äºäºä»¶ï¼å¿é¡»åä¸ä¸ªè¾å©ç±»ãæ¯å¦NetInnerComponentç»ä»¶éè¦Awakeè·Updateæ¹æ³ï¼é£ä¹æ·»å ä¸ä¸ªè¿æ ·çç±»å³å¯ï¼\n\n[ObjectEvent]\npublic class NetInnerComponentEvent : ObjectEvent<NetInnerComponent>, IAwake, IUpdate\n{\n    public void Awake()\n    {\n        this.Get().Awake();\n    }\n\n    public void Update()\n    {\n        this.Get().Update();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nè¿æ ·ï¼NetInnerComponentå¨AddComponentä¹åä¼è°ç¨å¶Awakeæ¹æ³ï¼å¹¶ä¸æ¯å¸§è°ç¨Updateæ¹æ³ã ETæ²¡æåUnityä½¿ç¨åå°å»å®ç°è¿ç§åè½ï¼å ä¸ºåå°æ§è½æ¯è¾å·®ï¼èä¸è¿æ ·å®ç°çå¥½å¤æ¯è¿ä¸ªç±»å¯ä»¥æ¾å°ç­æ´dllä¸­ï¼è¿æ ·ç»ä»¶çAwake Startï¼Updateæ¹æ³ä»¥åå¶å®æ¹æ³é½å¯ä»¥æ¾å°ç­æ´å±ä¸­ãå°EntityåComponentåææ²¡ææ¹æ³çç±»ï¼æ¹æ³é½æ¾å°ç­æ´å±ï¼æ¹ä¾¿ç­æ´ä¿®å¤é»è¾bugã\n\nç»ä»¶å¼å¼åæå¤§çå¥½å¤å°±æ¯ä¸ç®¡èé¸è¿æ¯é«æï¼å¼åä¸ä¸ªåè½é½è½å¾å¿«çç¥éæä¹ç»ç»æ°æ®æä¹ç»ç»é»è¾ãå¯ä»¥å®å¨æ¾å¼é¢åå¯¹è±¡ãä½¿ç¨é¢åå¯¹è±¡å¼åæå¤´ç¼çå°±æ¯æè¯¥ç»§æ¿åªä¸ªç±»å¢ï¼ä¹ååè¿æææçå°±æ¯èå¹»ä¸ï¼èå¹»ä¸çç»§æ¿ç»æéå¸¸å¤å±ï¼å®å¨ä¸ç¥éèªå·±éè¦ä»åªéå¼å§ç»§æ¿ãæåå¯è½å¯¼è´ä¸ä¸ªéå¸¸å°çåè½ï¼ç»§æ¿äºä¸ä¸ªåå¶å·¨å¤§çç±»ï¼è¿å¨èå¹»ä¸å¼åä¸­å±¡è§ä¸é²ãæä»¥èå¹»4æ¹ç¨äºç»ä»¶æ¨¡å¼ãç»ä»¶æ¨¡å¼çæ¨¡åéç¦»æ§éå¸¸å¥½ï¼ææ¯èé¸æä¸ªç»ä»¶åå¾éå¸¸å·®ï¼ä¹ä¸ä¼å½±åå°å¶å®æ¨¡åï¼å¤§ä¸äºéåè¿ä¸ªç»ä»¶å°±å¥½äºã\n\nETçç»ä»¶è®¾è®¡ææåæ°ï¼æ¹æ³è·æ°æ®åç¦»ï¼å®å¨è§£é¤è¦åï¼ä¸ç¨ç»å°½èæ±å»æ³æä¹è§£é¤è¦åï¼éæåéææ¹æ³å³å¯ï¼æ ¹æ¬ä¸å­å¨è¦åï¼å³ä½¿æ¯èé¸åçä»£ç ä¹å¾å®¹æéæã\n\næ­£æ¯å ä¸ºETä½¿ç¨äºå¯æå¸çç»ä»¶æ¨¡å¼ï¼ETå¯ä»¥å°æææå¡å¨ç»ä»¶é½è£å°åä¸ä¸ªè¿ç¨ä¸ï¼é£ä¹è¿ä¸ä¸ªè¿ç¨å°±å¯ä»¥å½ä½ä¸ç»åå¸å¼æå¡å¨ä½¿ç¨ãä»æ­¤ç¨vsè°è¯åå¸å¼æå¡å¨æä¸ºäºå¯è½ãæ­£å ä¸ºè¿æ ·ï¼å¹³å¸¸å¼ååªä½¿ç¨ä¸ä¸ªè¿ç¨ï¼åå¸çæ¶ååå¸æå¤ä¸ªè¿ç¨å°±è¡äºãè¯´å®å¨çï¼ä¸æ¯å¹çï¼è¿æ¯ä¸ä¸ªä¼å¤§çåæï¼è¿ä¸åæè§£å³äºåå¸å¼æ¸¸ææå¡å¨å¼åä¸­çå¤§å¤§å¤§é¾é¢ï¼æå¤§çæé«äºå¼åæçã",normalizedContent:"# ç»ä»¶å¼è®¾è®¡\n\nå¨ä»£ç å¤ç¨åç»ç»æ°æ®æ¹é¢ï¼é¢åå¯¹è±¡å¯è½æ¯å¤§å®¶ç¬¬ä¸ååºãé¢åå¯¹è±¡ä¸å¤§ç¹æ§ç»§æ¿ï¼å°è£ï¼å¤æï¼å¨ä¸å®ç¨åº¦ä¸è½è§£å³ä¸å°ä»£ç å¤ç¨ï¼æ°æ®å¤ç¨çé®é¢ãä¸è¿é¢åå¯¹è±¡ä¸æ¯ä¸è½çï¼å®ä¹ææå¤§çç¼ºé·ï¼\n\n\n# 1. æ°æ®ç»æè¦åæ§æå¼º\n\nä¸æ¦ç¶ç±»ä¸­å¢å æå é¤æä¸ªå­æ®µï¼å¯è½è¦å½±åå°ææå­ç±»ï¼å½±åå°ææå­ç±»ç¸å³çé»è¾ãè¿æ¾å¾éå¸¸ä¸çµæ´»ï¼å¨ä¸å¥å¤æçç»§æ¿ä½ç³»ä¸­ï¼å¾ç¶ç±»ä¸­æ¹åå­æ®µä¼åå¾è¶æ¥è¶éº»ç¦ï¼æ¯æ¹è¯´abcæ¯dçå­ç±»ï¼æå¤©åç°éè¦å¢å ä¸ä¸ªabé½æçæ°æ®ï¼ä½æ¯cæ²¡æï¼é£ä¹è¿ä¸ªæ°æ®è¯å®ä¸å¥½æ¾å°ç¶ç±»ä¸­ï¼åªè½å°abæ½è±¡åºæ¥ä¸ä¸ªç¶ç±»eï¼eç»§æ¿äºdï¼abå±æçå­æ®µå å°eä¸­ï¼ä¸æ¦ç»§æ¿ç»æåçäºååï¼å¯è½æ¥å£ä¹è¦æ¹åï¼æ¯æ¹è¯´ä¹åæä¸ªæ¥å£ä¼ å¥åæ°ç±»åæ¯eï¼å½abä¸åéè¦å±ç¨çé£ä¸ªå­æ®µï¼é£ä¹éè¦è°æ´ç»§æ¿å³ç³»ï¼è®©abéæ°ç»§æ¿dï¼é£ä¹è¿ä¸ªæ¥å£çä¼ å¥åæ°ç±»åéè¦æ¹ædï¼å¶ä¸­çé»è¾ä»£ç å¾å¯è½ä¹è¦åçè°æ´ãæ´å¯æçæ¯æ¸¸æé»è¾ååéå¸¸å¤æï¼éå¸¸é¢ç¹ï¼å¯è½ä»å¤©å äºä¸ªå­æ®µï¼æå¤©åå æäºï¼åå¦æ¯æ¬¡é½è¦å»è°æ´ç»§æ¿ç»æï¼è¿ç®ç´å°±æ¯å©æ¢¦ãç»§æ¿ç»æé¢å¯¹é¢ç¹çæ°æ®ç»æè°æ´æè§å¾æ åã\n\n\n# 2. é¾ä»¥ç­ææ\n\nç»§æ¿ç»ææ æ³è¿è¡æ¶å¢å å é¤å­æ®µï¼æ¯å¦ç©å®¶playerå¹³å¸¸æ¯èµ°è·¯ï¼ä½¿ç¨åéªåå°±éªé©¬ãé®é¢æ¯åéªçç¸å³ä¿¡æ¯å°±éè¦ä¸ç´æå¨playerå¯¹è±¡ä¸é¢ãè¿å°±æ¾å¾å¾ä¸çµæ´»ï¼æä¸éªé©¬çæ¶ååå­ä¸­ä¸ºå¥è¦æé©¬çæ°æ®ï¼æ¥å£ä¹æåæ ·çé®é¢ï¼ä¸ä¸ªç±»å®ç°äºä¸ä¸ªæ¥å£ï¼é£ä¹è¿ä¸ªæ¥å£å°±æ°¸è¿ç²å¨äºè¿ä¸ªç±»èº«ä¸ï¼ä½ æ³ç©æå¥¹é½ä¸è¡ï¼è¿æ¯ä»¥éªé©¬ä¸ºä¾ï¼ç©å®¶playerå¯ä»¥è¿è¡éªè¡ï¼é£ä¹å¯è½ç»§æ¿ä¸ä¸ªéªè¡çæ¥å£ï¼é®é¢æ¯ï¼å½æè¿ä¸ªplayerä»åéªä¸ä¸æ¥æ¶ï¼ç©å®¶playerèº«ä¸è¿æ¯æéªè¡çæ¥å£ï¼æ ¹æ¬æ²¡æ³å¨æå æè¿ä¸ªæ¥å£ï¼å¯è½ä¾å­ä¸¾å¾ä¸æ¯å¾å¯¹ï¼ä½æ¯éçè¡¨è¿°çåºè¯¥å¾æ¸æ¥äºã\n\nä½¿ç¨é¢åå¯¹è±¡å¯è½å¯¼è´ç¾é¾æ§åæï¼æ¸¸æå¼åä¸­ææ°äººæèäººï¼æææ¯å¥½çï¼æææ¯å·®çãäººé½æ¯åæ¬¢å·æçï¼å½ä½ åç°è°æ´ç»§æ¿å³ç³»éº»ç¦çæ¶åï¼æå¯è½abä¸­å¢å ä¸ä¸ªå­æ®µä¸ºäºçäºç´æ¥å°±æ¾å°ç¶ç±»dä¸­å»äºãå¯¼è´cè«åå¥å¦çå¤äºä¸ä¸ªæ ç¨çå­æ®µãå³é®è¿æ²¡æ³åç°ï¼æåå¯¼è´ç¶ç±»dè¶æ¥è¶å¤§ï¼å°æåæå¯è½å¹²èå°±ä¸ç¨abcäºï¼ç´æ¥è®©ææå¯¹è±¡é½åædï¼æ¹ä¾¿åï¼æ¯çï¼å¾å¤æ¸¸æå°±æ¯è¿ä¹å¹²çï¼å¼åå°æåæ ¹æ¬å°±ä¸ç®¡ç»§æ¿å³ç³»äºï¼å ä¸ºæ³ç®¡ä¹ç®¡ä¸äºäºã\n\n\n# 3. æ¹æ³ä¸æ°æ®è¦å\n\nä¼ ç»é¢åå¯¹è±¡é½æ¯classä¸­å¸¦ææ¹æ³ï¼å¹¶ä¸ç¹å«æå¡èå½æ°å¤æãæ¹æ³è·æ°æ®æ¾å¨ä¸èµ·å¸¦æ¥äºç¹å«å¤è¦åçé®é¢ãä¸ºäºè§£å³è¿äºè¦åï¼å¤§å®¶æ³åºäºå¤§éçè®¾è®¡æ¨¡å¼ï¼æ¯å¦ä¾èµæ¥å£ï¼ä¾èµè½¬ç½®ãè¯´å®è¯ï¼è¿å°±æ¯è±è£¤å­æ¾å±ï¼ä¸ºäºè§£è¦åï¼æç±»åææ¥å£ï¼ç¶åç»§æ¿æ¥å£ï¼é¾éè¿å°±ä¸å«ä¾èµäºï¼è¿äºåæ³å¯¼è´ï¼ä»£ç ä¸­å°å¤æ¯æ¥å£ï¼ä»£ç éè¯»æå¶å°é¾ãåèµ·ä»£ç æ¥ä¹æ²¡æä¸ªæ åï¼é«æè·èé¸¡ååºæ¥çä»£ç å®å¨æ¯ä¸¤åäºãå¤§é¨åç åé½æ¯é»è¾ä»ï¼è°ææ¶é´å¤©å¤©æ³è¿ä¸ªç±»è¦æä¹è®¾è®¡åï¼éçé»è¾è¶æ¥è¶å¤æç±»éé¢çæ¹æ³å°è¶æ¥è¶åºå¤§ï¼å¯æçæ¯ï¼è¿æ¯è¿ä¸ªç±»çæ¹æ³ï¼æå¶é¾ä»¥éæï¼å¾å¤é¡¹ç®ä¸­è½çå°ç±»éé¢å­å¨ä¸ä¸è¡ä»£ç çèå½æ°ãå¤©åªï¼\n\né¢åå¯¹è±¡å¨é¢å¯¹å¤æçæ¸¸æé»è¾æ¶å¾æ åï¼æä»¥å¾å¤æ¸¸æå¼åèååéäºåå»ï¼ä½¿ç¨é¢åè¿ç¨è¿è¡å¼åæ¸¸æï¼é¢åè¿ç¨ï¼ç®åç²æ´ï¼ä¸èèå¤æçç»§æ¿ï¼ä¸èèæ½è±¡ï¼ä¸èèå¤æï¼æ¯å¼åå±çfreestyleï¼æ½èµ·è¢å­å°±å¼æ¸ï¼ä½åæ¶ï¼ä»£ç é»è¾çå¤ç¨æ§ï¼æ°æ®çå¤ç¨æ§ä¹å¤§å¤§éä½ãé¢åè¿ç¨ä¹ä¸æ¯ä¸ç§å¥½çæ¸¸æå¼åæ¨¡å¼ã\n\nç»ä»¶æ¨¡å¼å¾å¥½çè§£å³äºé¢åå¯¹è±¡ä»¥åé¢åè¿ç¨çç§ç§ç¼ºé·ï¼å¨æ¸¸æå®¢æ·ç«¯ä¸­ä½¿ç¨éå¸¸å¹¿æ³ï¼unity3dï¼èå¹»4ï¼ç­ç­é½ä½¿ç¨äºç»ä»¶æ¨¡å¼ãç»ä»¶æ¨¡å¼çç¹ç¹ï¼ 1.é«åº¦æ¨¡ååï¼ä¸ä¸ªç»ä»¶å°±æ¯ä¸ä»½æ°æ®å ä¸æ®µé»è¾\n2.ç»ä»¶å¯ç­ææï¼éè¦å°±å ä¸ï¼ä¸éè¦å°±å é¤\n3.ç±»åä¹é´ä¾èµæå°ï¼ä»»ä½ç±»åå¢å æå é¤ç»ä»¶ä¸ä¼å½±åå°å¶å®ç±»åã\n\nä½æ¯ç®ååªææå°ææå¡ç«¯ä½¿ç¨äºç»ä»¶çè®¾è®¡ï¼å®æåéæå¡ç«¯åºè¯¥æ¯ä½¿ç¨äºç»ä»¶çè®¾è®¡ï¼å®æåéçå¼åäººåç§°ä¹ä¸ºecsæ¶æï¼å¶å®å°±æ¯ç»ä»¶æ¨¡å¼çä¸ä¸ªåç§ï¼eå°±æ¯entityï¼cå°±æ¯componentï¼sæ¯systemï¼å¶å®å°±æ¯å°ç»ä»¶componentçé»è¾ä¸æ°æ®å¥ç¦»ï¼é»è¾é¨åå«systemï¼è¯é¢æ¯è¿äºï¼è¿æ¯åå°etæ¡æ¶æ¥æã\n\netæ¡æ¶ä½¿ç¨äºç»ä»¶çè®¾è®¡ãä¸åé½æ¯entityåcomponentï¼ä»»ä½ç±»ç»§æ¿äºentityé½å¯ä»¥æè½½ç»ä»¶ï¼ä¾å¦ç©å®¶ç±»ï¼\n\npublic sealed class player : entity\n{\n    public string account { get; private set; }\n    public long unitid { get; set; }\n\t\n    public void awake(string account)\n    {\n        this.account = account;\n    }\n\t\n    public override void dispose()\n    {\n        if (this.id == 0)\n        {\n            return;\n        }\n        base.dispose();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nç»ç©å®¶å¯¹è±¡æè½½ä¸ªç§»å¨ç»ä»¶movecomponentï¼è¿æ ·ç©å®¶å°±å¯ä»¥ç§»å¨äºï¼ç»ç©å®¶æä¸ä¸ä¸ªèåç»ä»¶ï¼ç©å®¶å°±å¯ä»¥ç®¡çç©åäºï¼ç»ç©å®¶æä¸æè½ç»ä»¶ï¼é£ä¹ç©å®¶å°±å¯ä»¥æ½æ¾æè½äºï¼å ä¸buffç»ä»¶å°±å¯ä»¥ç®¡çbuffäºã\n\nplayer.addcomponent<movecomponent>();\nplayer.addcomponent<itemscomponent>();\nplayer.addcomponent<spellcomponent>();\nplayer.addcomponent<buffcomponent>();\n\n\n1\n2\n3\n4\n\n\nç»ä»¶æ¯é«åº¦å¯ä»¥å¤ç¨çï¼æ¯å¦ä¸ä¸ªnpcï¼ä»ä¹å¯ä»¥ç§»å¨ï¼ç»npcä¹æä¸movecomponentå°±è¡äºï¼æçnpcä¹å¯ä»¥æ½æ¾æè½ï¼é£ä¹ç»å®æä¸spellcomponentï¼npcä¸éè¦èåï¼é£ä¹å°±ä¸ç¨æitemscomponentäº\n\netæ¡æ¶æ¨¡åå¨é¨åæäºç»ä»¶çå½¢å¼ï¼ä¸ä¸ªè¿ç¨ä¹æ¯ç±ä¸åçç»ä»¶æ¼æ¥èæãæ¯æ¹è¯´loginserveréè¦å¯¹å¤è¿æ¥ä¹éè¦ä¸æå¡å¨åé¨è¿è¡è¿æ¥ï¼é£ä¹login serveræä¸\n\n// åç½ç½ç»ç»ä»¶netinnercomponentï¼å¤çå¯¹åç½è¿æ¥  \ngame.scene.addcomponent<netinnercomponent, string, int>(innerconfig.host, innerconfig.port);\n// å¤ç½ç½ç»ç»ä»¶netoutercomponentï¼å¤çä¸å®¢æ·ç«¯è¿æ¥\ngame.scene.addcomponent<netoutercomponent, string, int>(outerconfig.host, outerconfig.port);\n\n\n1\n2\n3\n4\n\n\næ¯å¦battle serverå°±ä¸éè¦å¯¹å¤ç½è¿æ¥ï¼å¤ç½æ¶æ¯ç±gateserverè½¬åï¼ï¼é£ä¹å¾èªç¶çåªéè¦æè½½ä¸ä¸ªåç½ç»ä»¶å³å¯ã ç±»ä¼¼unity3dçç»ä»¶ï¼etæ¡æ¶ä¹æä¾äºç»ä»¶äºä»¶ï¼ä¾å¦awakeï¼startï¼updateç­ãè¦ç»ä¸ä¸ªcomponentæèentityå ä¸è¿äºäºä»¶ï¼å¿é¡»åä¸ä¸ªè¾å©ç±»ãæ¯å¦netinnercomponentç»ä»¶éè¦awakeè·updateæ¹æ³ï¼é£ä¹æ·»å ä¸ä¸ªè¿æ ·çç±»å³å¯ï¼\n\n[objectevent]\npublic class netinnercomponentevent : objectevent<netinnercomponent>, iawake, iupdate\n{\n    public void awake()\n    {\n        this.get().awake();\n    }\n\n    public void update()\n    {\n        this.get().update();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nè¿æ ·ï¼netinnercomponentå¨addcomponentä¹åä¼è°ç¨å¶awakeæ¹æ³ï¼å¹¶ä¸æ¯å¸§è°ç¨updateæ¹æ³ã etæ²¡æåunityä½¿ç¨åå°å»å®ç°è¿ç§åè½ï¼å ä¸ºåå°æ§è½æ¯è¾å·®ï¼èä¸è¿æ ·å®ç°çå¥½å¤æ¯è¿ä¸ªç±»å¯ä»¥æ¾å°ç­æ´dllä¸­ï¼è¿æ ·ç»ä»¶çawake startï¼updateæ¹æ³ä»¥åå¶å®æ¹æ³é½å¯ä»¥æ¾å°ç­æ´å±ä¸­ãå°entityåcomponentåææ²¡ææ¹æ³çç±»ï¼æ¹æ³é½æ¾å°ç­æ´å±ï¼æ¹ä¾¿ç­æ´ä¿®å¤é»è¾bugã\n\nç»ä»¶å¼å¼åæå¤§çå¥½å¤å°±æ¯ä¸ç®¡èé¸è¿æ¯é«æï¼å¼åä¸ä¸ªåè½é½è½å¾å¿«çç¥éæä¹ç»ç»æ°æ®æä¹ç»ç»é»è¾ãå¯ä»¥å®å¨æ¾å¼é¢åå¯¹è±¡ãä½¿ç¨é¢åå¯¹è±¡å¼åæå¤´ç¼çå°±æ¯æè¯¥ç»§æ¿åªä¸ªç±»å¢ï¼ä¹ååè¿æææçå°±æ¯èå¹»ä¸ï¼èå¹»ä¸çç»§æ¿ç»æéå¸¸å¤å±ï¼å®å¨ä¸ç¥éèªå·±éè¦ä»åªéå¼å§ç»§æ¿ãæåå¯è½å¯¼è´ä¸ä¸ªéå¸¸å°çåè½ï¼ç»§æ¿äºä¸ä¸ªåå¶å·¨å¤§çç±»ï¼è¿å¨èå¹»ä¸å¼åä¸­å±¡è§ä¸é²ãæä»¥èå¹»4æ¹ç¨äºç»ä»¶æ¨¡å¼ãç»ä»¶æ¨¡å¼çæ¨¡åéç¦»æ§éå¸¸å¥½ï¼ææ¯èé¸æä¸ªç»ä»¶åå¾éå¸¸å·®ï¼ä¹ä¸ä¼å½±åå°å¶å®æ¨¡åï¼å¤§ä¸äºéåè¿ä¸ªç»ä»¶å°±å¥½äºã\n\netçç»ä»¶è®¾è®¡ææåæ°ï¼æ¹æ³è·æ°æ®åç¦»ï¼å®å¨è§£é¤è¦åï¼ä¸ç¨ç»å°½èæ±å»æ³æä¹è§£é¤è¦åï¼éæåéææ¹æ³å³å¯ï¼æ ¹æ¬ä¸å­å¨è¦åï¼å³ä½¿æ¯èé¸åçä»£ç ä¹å¾å®¹æéæã\n\næ­£æ¯å ä¸ºetä½¿ç¨äºå¯æå¸çç»ä»¶æ¨¡å¼ï¼etå¯ä»¥å°æææå¡å¨ç»ä»¶é½è£å°åä¸ä¸ªè¿ç¨ä¸ï¼é£ä¹è¿ä¸ä¸ªè¿ç¨å°±å¯ä»¥å½ä½ä¸ç»åå¸å¼æå¡å¨ä½¿ç¨ãä»æ­¤ç¨vsè°è¯åå¸å¼æå¡å¨æä¸ºäºå¯è½ãæ­£å ä¸ºè¿æ ·ï¼å¹³å¸¸å¼ååªä½¿ç¨ä¸ä¸ªè¿ç¨ï¼åå¸çæ¶ååå¸æå¤ä¸ªè¿ç¨å°±è¡äºãè¯´å®å¨çï¼ä¸æ¯å¹çï¼è¿æ¯ä¸ä¸ªä¼å¤§çåæï¼è¿ä¸åæè§£å³äºåå¸å¼æ¸¸ææå¡å¨å¼åä¸­çå¤§å¤§å¤§é¾é¢ï¼æå¤§çæé«äºå¼åæçã",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"5.4Actoræ¨¡å",frontmatter:{title:"5.4Actoræ¨¡å",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/96869e/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/54.5.4Actor%E6%A8%A1%E5%9E%8B.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/54.5.4Actoræ¨¡å.md",key:"v-e0ad2bb2",path:"/pages/96869e/",headers:[{level:3,title:"Actorä»ç»",slug:"actorä»ç»",normalizedTitle:"actorä»ç»",charIndex:14},{level:3,title:"ETçActor",slug:"etçactor",normalizedTitle:"etçactor",charIndex:1243},{level:3,title:"ETçActorçä½¿ç¨",slug:"etçactorçä½¿ç¨",normalizedTitle:"etçactorçä½¿ç¨",charIndex:1784},{level:3,title:"Actoræ¶æ¯çå¤ç",slug:"actoræ¶æ¯çå¤ç",normalizedTitle:"actoræ¶æ¯çå¤ç",charIndex:2913}],headersStr:"Actorä»ç» ETçActor ETçActorçä½¿ç¨ Actoræ¶æ¯çå¤ç",content:"# Actoræ¨¡å\n\n\n# Actorä»ç»\n\nå¨è®¨è®ºActoræ¨¡åä¹ååè¦è®¨è®ºä¸ETçæ¶æï¼æ¸¸ææå¡å¨ä¸ºäºå©ç¨å¤æ ¸ä¸è¬æä¸¤ç§æ¶æï¼åçº¿ç¨å¤è¿ç¨è·åè¿ç¨å¤çº¿ç¨æ¶æãä¸¤ç§æ¶ææ¬è´¨ä¸å¶å®åºå«ä¸å¤§ï¼å ä¸ºæ¸¸æé»è¾å¼åé½éè¦ç¨åçº¿ç¨ï¼å³ä½¿æ¯åè¿ç¨å¤çº¿ç¨æ¶æï¼ä¹è¦ç¨ä¸å®çæ¹æ³ä¿è¯åçº¿ç¨å¼åé»è¾ãETéç¨çæ¯åçº¿ç¨å¤è¿ç¨çæ¶æï¼èä¼ ç»Actoræ¨¡åä¸è¬æ¯åè¿ç¨å¤çº¿ç¨çæ¶æï¼è¿ç¹æ¯æ¯è¾å¤§çåºå«ï¼ä¸è½è¯´è°æ´å¥½ï¼åªè½è¯´åæä¼å¿ãä¼å£å¦ä¸ï¼\n\n 1. é»è¾éè¦åçº¿ç¨è¿ç¹é½æ¯ä¸æ ·çï¼erlangè¿ç¨é»è¾æ¯åçº¿ç¨çï¼skynet luaèææºä¹æ¯åçº¿ç¨çãETä¸­ä¸ä¸ªè¿ç¨å¶å®ç¸å½äºä¸ä¸ªerlangè¿ç¨ï¼ä¸ä¸ªskynet luaèææºã\n 2. éç¨åçº¿ç¨å¤è¿ç¨ä¸éè¦èªå·±ååä¸å¥profilerå·¥å·ï¼å¯ä»¥å©ç¨å¾å¤ç°æçprofilerå·¥å·ï¼ä¾å¦æ¥çåå­ï¼cpuå ç¨ç´æ¥ç¨topå½ä»¤ï¼è¿ç¹erlangè·skyneté½éè¦èªå·±å¦å¤æä¸å¥å·¥å·ã\n 3. å¤è¿ç¨åçº¿ç¨æ¶æè¿æä¸ªå¥½å¤ï¼åå°ç©çæºè·å¤å°ç©çæºæ¯æ²¡æåºå«çï¼åè¿ç¨å¤çº¿ç¨è¿éè¦èèå¤å°ç©çæºçå¤çã\n 4. å¤è¿ç¨åçº¿ç¨æ¶æä¸ç¹ç¼ºé·æ¯æ¶æ¯è·¨è¿ç¨éè¦è¿è¡åºååååºååï¼å ç¨ä¸ç¹èµæºãå¦å¤åéç½ç»æ¶æ¯ä¼æå æ¯«ç§å»¶æ¶ãä¸è¬è¿äºå½±åå¯ä»¥å¿½ç¥ã\n\næå¼å§Actoræ¨¡åæ¯ç»åè¿ç¨å¤çº¿ç¨æ¶æä½¿ç¨çï¼è¿æ¯æåå çï¼å ä¸ºå¤çº¿ç¨æ¶æå¼åèå¾å®¹æéæçè®¿é®å±äº«åéï¼æ¯æ¹è¯´ä¸ä¸ªåéa, çº¿ç¨1è½è®¿é®ï¼çº¿ç¨2ä¹è½è®¿é®ï¼è¿æ ·ä¸¤ä¸ªçº¿ç¨å¨è®¿é®åéaçæ¶åé½éè¦å éï¼å±äº«åéå¤äºä¹åéå°å¤é½æ¯ï¼ä¼åå¾æ æ³ç»´æ¤ï¼æ¡æ¶è¯å®ä¸è½åºç°å°å¤æ¯çº¿ç¨å±äº«åéçæåµãä¸ºäºä¿è¯å¤çº¿ç¨æ¶æä¸åºé®é¢ï¼å¿é¡»æä¾ä¸ç§å¼åæ¨¡åä¿è¯å¤çº¿ç¨å¼åç®ååå®å¨ãerlangè¯­è¨çå¹¶åæºå¶å°±æ¯actoræ¨¡åãerlangèææºä½¿ç¨å¤çº¿ç¨æ¥å©ç¨å¤æ ¸ãerlangè®¾è®¡äºä¸ç§æºå¶ï¼å®å¨èææºä¹ä¸è®¾è®¡äºèªå·±çè¿ç¨ãæç®åçï¼æ¯ä¸ªerlangè¿ç¨é½ç®¡çèªå·±çåéï¼æ¯ä¸ªerlangè¿ç¨çé»è¾é½è·å¨ä¸ä¸ªçº¿ç¨ä¸ï¼erlangè¿ç¨è·è¿ç¨ä¹é´é»è¾å®å¨éç¦»ï¼è¿æ ·å°±ä¸å­å¨ä¸¤ä¸ªçº¿ç¨è®¿é®åä¸åéçæåµäºä¹å°±ä¸å­å¨å¤çº¿ç¨ç«äºçé®é¢ãæ¥ä¸æ¥é®é¢ååºç°äºï¼æ¢ç¶æ¯ä¸ªerlangè¿ç¨é½æèªå·±çæ°æ®ï¼é»è¾å®å¨æ¯éç¦»çï¼ä¸¤ä¸ªerlangè¿ç¨ä¹é´åºè¯¥æä¹è¿è¡éä¿¡å¢ï¼è¿æ¶Actoræ¨¡åå°±ç»åºäºãerlangè®¾è®¡äºä¸ç§æ¶æ¯æºå¶ï¼ä¸ä¸ªè¿ç¨å¯ä»¥åå¶å®è¿ç¨åéæ¶æ¯ï¼erlangè¿ç¨ä¹é´éè¿æ¶æ¯æ¥è¿è¡éä¿¡ï¼çå°è¿ä¼ä¸ä¼æè§å¾çæï¼è¿ä¸å°±æ¯æä½ç³»ç»è¿ç¨é´éä¿¡ç¨çæ¶æ¯éååï¼æ²¡éï¼å¶å®æ¯ç±»ä¼¼çãerlangéé¢æ¿å°è¿ç¨çidå°±è½ç»è¿ä¸ªè¿ç¨åéæ¶æ¯ã\n\nå¦ææ¶æ¯åªåç»è¿ç¨å¶å®è¿æ¯æç¹ä¸æ¹ä¾¿ãæ¯å¦æ¿ä¸ä¸ªerlangè¿ç¨åmobaæéè¿ç¨ï¼ææè¿ç¨ä¸­æ10ä¸ªç©å®¶ï¼å¦æä½¿ç¨erlangçactoræ¶æ¯ï¼æ¶æ¯åªè½åéç»ææè¿ç¨ï¼ä½æ¯å¾å¤æ¶åæ¶æ¯æ¯éè¦åéç»ä¸ä¸ªç©å®¶çï¼è¿æ¶erlangéè¦æ ¹æ®æ¶æ¯ä¸­çç©å®¶Idï¼ææ¶æ¯åæ¬¡ååç»å·ä½çç©å®¶ï¼è¿æ ·å¶å®å¤ç»äºä¸åã\n\n\n# ETçActor\n\nETæ ¹æ®èªå·±æ¶æå¾ç¹ç¹ï¼æ²¡æå®å¨ç§æ¬erlangçActoræ¨¡åï¼èæ¯æä¾äºEntityå¯¹è±¡çº§å«çActoræ¨¡åãè¿ç¹è·erlangçè³ä¼ ç»çActoræºå¶ä¸ä¸æ ·ãETä¸­ï¼Actoræ¯Entityå¯¹è±¡ï¼Entityæä¸ä¸ä¸ªMailboxComponentç»ä»¶å°±æ¯ä¸ä¸ªActoräºãåªéè¦ç¥éEntityçInstanceIdå°±å¯ä»¥åæ¶æ¯ç»è¿ä¸ªEntityäºãå¶å®erlangçActoræ¨¡åä¸è¿æ¯ETä¸­çä¸ç§ç¹ä¾ï¼æ¯å¦ç»ETæå¡ç«¯Game.Sceneå½åä¸ä¸ªActorï¼è¿æ ·å°±å¯ä»¥åæè¿ç¨çº§å«çActorãActoræ¬è´¨å°±æ¯ä¸ç§æ¶æ¯æºå¶ï¼è¿ç§æ¶æ¯æºå¶ä¸ç¨å³å¿ä½ç½®ï¼åªéè¦ç¥éå¯¹æ¹çInstanceIdï¼ETï¼æèè¿ç¨çPidï¼erlangï¼å°±è½åç»å¯¹æ¹ã\n\nè¯­è¨        ET                  ERLANG       SKYNET\næ¶æ        åçº¿ç¨å¤è¿ç¨              åè¿ç¨å¤çº¿ç¨       åè¿ç¨å¤çº¿ç¨\nActor     Entity              erlangè¿ç¨     luaèææº\nActorId   Entity.InstanceId   erlangè¿ç¨Id   æå¡å°å\n\n\n# ETçActorçä½¿ç¨\n\næ®éçActorï¼æä»¬å¯ä»¥åç§Gate Sessionãmapä¸­ä¸ä¸ªUnitï¼Unitèº«ä¸ä¿å­äºè¿ä¸ªç©å®¶å¯¹åºçgate sessionãè¿æ ·ï¼mapä¸­çæ¶æ¯å¦æéè¦åç»å®¢æ·ç«¯ï¼åªéè¦ææ¶æ¯åéç»gate sessionï¼gate sessionå¨æ¶å°æ¶æ¯çæ¶åè½¬åç»å®¢æ·ç«¯å³å¯ãmapè¿ç¨åéæ¶æ¯ç»gate sessionå°±æ¯å¸åçactoræ¨¡åãå®ä¸éè¦ç¥égate sessionçä½ç½®ï¼åªéè¦ç¥éå®çInstanceIdå³å¯ãMessageHelper.csä¸­ï¼éè¿GateSessionActorIdè·åä¸ä¸ªActorMessageSenderï¼ç¶ååéã\n\n// ä»Game.Sceneä¸è·åActorSenderComponentï¼ç¶åéè¿InstanceIdè·åActorMessageSender\nActorSenderComponent actorSenderComponent = Game.Scene.GetComponent<ActorSenderComponent>();\nActorMessageSender actorMessageSender = actorSenderComponent.Get(unitGateComponent.GateSessionActorId);\n// send\nactorMessageSender.Send(message);\n\n// rpc\nvar response = actorMessageSender.Call(message);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\né®é¢æ¯mapä¸­æä¹æè½ç¥égate sessionçInstanceIdå¢ï¼è¿å°±æ¯ä½ éè¦æ³æ¹è®¾æ³ä¼ è¿å»äºï¼æ¯å¦ETä¸­ï¼ç©å®¶å¨ç»å½gateçæ¶åï¼gate sessionæä¸ä¸ä¸ªä¿¡ç®±MailBoxComponentï¼C2G_LoginGateHandler.csä¸­\n\nsession.AddComponent<MailBoxComponent, string>(MailboxType.GateSession);\n\n\n1\n\n\nç©å®¶ç»å½mapè¿ç¨çæ¶åä¼æè¿ä¸ªgate sessionçInstanceIdå¸¦è¿mapä¸­å»ï¼C2G_EnterMapHandler.csä¸­\n\nM2G_CreateUnit createUnit = (M2G_CreateUnit)await mapSession.Call(new G2M_CreateUnit() { PlayerId = player.Id, GateSessionId = session.InstanceId });\n\n\n1\n\n\n\n# Actoræ¶æ¯çå¤ç\n\né¦åï¼æ¶æ¯å°è¾¾MailboxComponentï¼MailboxComponentæ¯æç±»åçï¼ä¸åçç±»åé®ç®±å¯ä»¥åä¸åçå¤çãç®åæä¸¤ç§é®ç®±ç±»åGateSessionè·MessageDispatcherãGateSessioné®ç®±å¨æ¶å°æ¶æ¯çæ¶åä¼ç«å³è½¬åç»å®¢æ·ç«¯ï¼MessageDispatcherç±»åä¼åæ¬¡å¯¹Actoræ¶æ¯è¿è¡ååå°å·ä½çHandlerå¤çï¼é»è®¤çMailboxComponentç±»åæ¯MessageDispatcherãèªå®ä¹ä¸ä¸ªé®ç®±ç±»åä¹å¾ç®åï¼ç»§æ¿IMailboxHandleræ¥å£ï¼å ä¸MailboxHandleræ ç­¾å³å¯ãé£ä¹ä¸ºä»ä¹éè¦å è¿ä¹ä¸ªåè½å¢ï¼å¨å¶å®çactoræ¨¡åä¸­æ¯ä¸å­å¨è¿ä¸ªç¹ç¹çï¼ä¸è¬æ¯æ¶å°æ¶æ¯å°±è¿è¡ååå¤çäºãåå æ¯GateSessionçè®¾è®¡ï¼å¹¶ä¸éè¦è¿è¡ååå¤çï¼å æ­¤æå¨è¿éå ä¸äºé®ç®±ç±»åè¿ç§è®¾è®¡ãMessageDispatcherçå¤çæ¹å¼æä¸¤ç§ä¸ç§æ¯å¤çå¯¹æ¹Sendè¿æ¥çæ¶æ¯ï¼ä¸ç§æ¯rpcæ¶æ¯\n\n    // å¤çSendçæ¶æ¯, éè¦ç»§æ¿AMActorHandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯Actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»å\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class Actor_TestHandler : AMActorHandler<Unit, Actor_Test>\n\t{\n\t\tprotected override ETTask Run(Unit unit, Actor_Test message)\n\t\t{\n\t\t\tLog.Debug(message.Info);\n\t\t}\n\t}\n\n    // å¤çRpcæ¶æ¯, éè¦ç»§æ¿AMActorRpcHandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯Actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»åï¼ç¬¬ä¸ä¸ªåæ°æ¯è¿åæ¶æ¯çç±»å\n    [ActorMessageHandler(AppType.Map)]\n\tpublic class Actor_TransferHandler : AMActorRpcHandler<Unit, Actor_TransferRequest, Actor_TransferResponse>\n\t{\n\t\tprotected override async ETTask Run(Unit unit, Actor_TransferRequest message, Action<Actor_TransferResponse> reply)\n\t\t{\n\t\t\tActor_TransferResponse response = new Actor_TransferResponse();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\treply(response);\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tReplyError(response, e, reply);\n\t\t\t}\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\næä»¬éè¦æ³¨æä¸ä¸ï¼Actoræ¶æ¯ææ­»éçå¯è½ï¼æ¯å¦A callæ¶æ¯ç»Bï¼B callç»Cï¼C callç»Aãå ä¸ºMailboxComponentæ¬è´¨ä¸æ¯ä¸ä¸ªæ¶æ¯éåï¼å®å¼å¯äºä¸ä¸ªåç¨ä¼ä¸ä¸ªä¸ä¸ªæ¶æ¯å¤çï¼è¿åETTaskè¡¨ç¤ºè¿ä¸ªæ¶æ¯å¤çç±»ä¼é»å¡MailboxComponentéåçå¶å®æ¶æ¯ãæä»¥å¦æåºç°æ­»éï¼æä»¬å°±ä¸å¸ææä¸ªæ¶æ¯å¤çé»å¡æMailboxComponentå¶å®æ¶æ¯çå¤çï¼æä»¬å¯ä»¥å¨æ¶æ¯å¤çç±»éé¢æ°å¼ä¸ä¸ªåç¨æ¥å¤çå°±è¡äºãä¾å¦:\n\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class Actor_TestHandler : AMActorHandler<Unit, Actor_Test>\n\t{\n\t\tprotected override ETTask Run(Unit unit, Actor_Test message)\n\t\t{\n\t\t\tRunAsync(unit, message).Coroutine();\n\t\t}\n\n        public ETVoid RunAsync(Unit unit, Actor_Test message)\n        {\n            Log.Debug(message.Info);\n        }\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nç¸å³èµæå¯ä»¥è°·æ­ä¸ä¸Actoræ­»éçé®é¢ã",normalizedContent:"# actoræ¨¡å\n\n\n# actorä»ç»\n\nå¨è®¨è®ºactoræ¨¡åä¹ååè¦è®¨è®ºä¸etçæ¶æï¼æ¸¸ææå¡å¨ä¸ºäºå©ç¨å¤æ ¸ä¸è¬æä¸¤ç§æ¶æï¼åçº¿ç¨å¤è¿ç¨è·åè¿ç¨å¤çº¿ç¨æ¶æãä¸¤ç§æ¶ææ¬è´¨ä¸å¶å®åºå«ä¸å¤§ï¼å ä¸ºæ¸¸æé»è¾å¼åé½éè¦ç¨åçº¿ç¨ï¼å³ä½¿æ¯åè¿ç¨å¤çº¿ç¨æ¶æï¼ä¹è¦ç¨ä¸å®çæ¹æ³ä¿è¯åçº¿ç¨å¼åé»è¾ãetéç¨çæ¯åçº¿ç¨å¤è¿ç¨çæ¶æï¼èä¼ ç»actoræ¨¡åä¸è¬æ¯åè¿ç¨å¤çº¿ç¨çæ¶æï¼è¿ç¹æ¯æ¯è¾å¤§çåºå«ï¼ä¸è½è¯´è°æ´å¥½ï¼åªè½è¯´åæä¼å¿ãä¼å£å¦ä¸ï¼\n\n 1. é»è¾éè¦åçº¿ç¨è¿ç¹é½æ¯ä¸æ ·çï¼erlangè¿ç¨é»è¾æ¯åçº¿ç¨çï¼skynet luaèææºä¹æ¯åçº¿ç¨çãetä¸­ä¸ä¸ªè¿ç¨å¶å®ç¸å½äºä¸ä¸ªerlangè¿ç¨ï¼ä¸ä¸ªskynet luaèææºã\n 2. éç¨åçº¿ç¨å¤è¿ç¨ä¸éè¦èªå·±ååä¸å¥profilerå·¥å·ï¼å¯ä»¥å©ç¨å¾å¤ç°æçprofilerå·¥å·ï¼ä¾å¦æ¥çåå­ï¼cpuå ç¨ç´æ¥ç¨topå½ä»¤ï¼è¿ç¹erlangè·skyneté½éè¦èªå·±å¦å¤æä¸å¥å·¥å·ã\n 3. å¤è¿ç¨åçº¿ç¨æ¶æè¿æä¸ªå¥½å¤ï¼åå°ç©çæºè·å¤å°ç©çæºæ¯æ²¡æåºå«çï¼åè¿ç¨å¤çº¿ç¨è¿éè¦èèå¤å°ç©çæºçå¤çã\n 4. å¤è¿ç¨åçº¿ç¨æ¶æä¸ç¹ç¼ºé·æ¯æ¶æ¯è·¨è¿ç¨éè¦è¿è¡åºååååºååï¼å ç¨ä¸ç¹èµæºãå¦å¤åéç½ç»æ¶æ¯ä¼æå æ¯«ç§å»¶æ¶ãä¸è¬è¿äºå½±åå¯ä»¥å¿½ç¥ã\n\næå¼å§actoræ¨¡åæ¯ç»åè¿ç¨å¤çº¿ç¨æ¶æä½¿ç¨çï¼è¿æ¯æåå çï¼å ä¸ºå¤çº¿ç¨æ¶æå¼åèå¾å®¹æéæçè®¿é®å±äº«åéï¼æ¯æ¹è¯´ä¸ä¸ªåéa, çº¿ç¨1è½è®¿é®ï¼çº¿ç¨2ä¹è½è®¿é®ï¼è¿æ ·ä¸¤ä¸ªçº¿ç¨å¨è®¿é®åéaçæ¶åé½éè¦å éï¼å±äº«åéå¤äºä¹åéå°å¤é½æ¯ï¼ä¼åå¾æ æ³ç»´æ¤ï¼æ¡æ¶è¯å®ä¸è½åºç°å°å¤æ¯çº¿ç¨å±äº«åéçæåµãä¸ºäºä¿è¯å¤çº¿ç¨æ¶æä¸åºé®é¢ï¼å¿é¡»æä¾ä¸ç§å¼åæ¨¡åä¿è¯å¤çº¿ç¨å¼åç®ååå®å¨ãerlangè¯­è¨çå¹¶åæºå¶å°±æ¯actoræ¨¡åãerlangèææºä½¿ç¨å¤çº¿ç¨æ¥å©ç¨å¤æ ¸ãerlangè®¾è®¡äºä¸ç§æºå¶ï¼å®å¨èææºä¹ä¸è®¾è®¡äºèªå·±çè¿ç¨ãæç®åçï¼æ¯ä¸ªerlangè¿ç¨é½ç®¡çèªå·±çåéï¼æ¯ä¸ªerlangè¿ç¨çé»è¾é½è·å¨ä¸ä¸ªçº¿ç¨ä¸ï¼erlangè¿ç¨è·è¿ç¨ä¹é´é»è¾å®å¨éç¦»ï¼è¿æ ·å°±ä¸å­å¨ä¸¤ä¸ªçº¿ç¨è®¿é®åä¸åéçæåµäºä¹å°±ä¸å­å¨å¤çº¿ç¨ç«äºçé®é¢ãæ¥ä¸æ¥é®é¢ååºç°äºï¼æ¢ç¶æ¯ä¸ªerlangè¿ç¨é½æèªå·±çæ°æ®ï¼é»è¾å®å¨æ¯éç¦»çï¼ä¸¤ä¸ªerlangè¿ç¨ä¹é´åºè¯¥æä¹è¿è¡éä¿¡å¢ï¼è¿æ¶actoræ¨¡åå°±ç»åºäºãerlangè®¾è®¡äºä¸ç§æ¶æ¯æºå¶ï¼ä¸ä¸ªè¿ç¨å¯ä»¥åå¶å®è¿ç¨åéæ¶æ¯ï¼erlangè¿ç¨ä¹é´éè¿æ¶æ¯æ¥è¿è¡éä¿¡ï¼çå°è¿ä¼ä¸ä¼æè§å¾çæï¼è¿ä¸å°±æ¯æä½ç³»ç»è¿ç¨é´éä¿¡ç¨çæ¶æ¯éååï¼æ²¡éï¼å¶å®æ¯ç±»ä¼¼çãerlangéé¢æ¿å°è¿ç¨çidå°±è½ç»è¿ä¸ªè¿ç¨åéæ¶æ¯ã\n\nå¦ææ¶æ¯åªåç»è¿ç¨å¶å®è¿æ¯æç¹ä¸æ¹ä¾¿ãæ¯å¦æ¿ä¸ä¸ªerlangè¿ç¨åmobaæéè¿ç¨ï¼ææè¿ç¨ä¸­æ10ä¸ªç©å®¶ï¼å¦æä½¿ç¨erlangçactoræ¶æ¯ï¼æ¶æ¯åªè½åéç»ææè¿ç¨ï¼ä½æ¯å¾å¤æ¶åæ¶æ¯æ¯éè¦åéç»ä¸ä¸ªç©å®¶çï¼è¿æ¶erlangéè¦æ ¹æ®æ¶æ¯ä¸­çç©å®¶idï¼ææ¶æ¯åæ¬¡ååç»å·ä½çç©å®¶ï¼è¿æ ·å¶å®å¤ç»äºä¸åã\n\n\n# etçactor\n\netæ ¹æ®èªå·±æ¶æå¾ç¹ç¹ï¼æ²¡æå®å¨ç§æ¬erlangçactoræ¨¡åï¼èæ¯æä¾äºentityå¯¹è±¡çº§å«çactoræ¨¡åãè¿ç¹è·erlangçè³ä¼ ç»çactoræºå¶ä¸ä¸æ ·ãetä¸­ï¼actoræ¯entityå¯¹è±¡ï¼entityæä¸ä¸ä¸ªmailboxcomponentç»ä»¶å°±æ¯ä¸ä¸ªactoräºãåªéè¦ç¥éentityçinstanceidå°±å¯ä»¥åæ¶æ¯ç»è¿ä¸ªentityäºãå¶å®erlangçactoræ¨¡åä¸è¿æ¯etä¸­çä¸ç§ç¹ä¾ï¼æ¯å¦ç»etæå¡ç«¯game.sceneå½åä¸ä¸ªactorï¼è¿æ ·å°±å¯ä»¥åæè¿ç¨çº§å«çactorãactoræ¬è´¨å°±æ¯ä¸ç§æ¶æ¯æºå¶ï¼è¿ç§æ¶æ¯æºå¶ä¸ç¨å³å¿ä½ç½®ï¼åªéè¦ç¥éå¯¹æ¹çinstanceidï¼etï¼æèè¿ç¨çpidï¼erlangï¼å°±è½åç»å¯¹æ¹ã\n\nè¯­è¨        et                  erlang       skynet\næ¶æ        åçº¿ç¨å¤è¿ç¨              åè¿ç¨å¤çº¿ç¨       åè¿ç¨å¤çº¿ç¨\nactor     entity              erlangè¿ç¨     luaèææº\nactorid   entity.instanceid   erlangè¿ç¨id   æå¡å°å\n\n\n# etçactorçä½¿ç¨\n\næ®éçactorï¼æä»¬å¯ä»¥åç§gate sessionãmapä¸­ä¸ä¸ªunitï¼unitèº«ä¸ä¿å­äºè¿ä¸ªç©å®¶å¯¹åºçgate sessionãè¿æ ·ï¼mapä¸­çæ¶æ¯å¦æéè¦åç»å®¢æ·ç«¯ï¼åªéè¦ææ¶æ¯åéç»gate sessionï¼gate sessionå¨æ¶å°æ¶æ¯çæ¶åè½¬åç»å®¢æ·ç«¯å³å¯ãmapè¿ç¨åéæ¶æ¯ç»gate sessionå°±æ¯å¸åçactoræ¨¡åãå®ä¸éè¦ç¥égate sessionçä½ç½®ï¼åªéè¦ç¥éå®çinstanceidå³å¯ãmessagehelper.csä¸­ï¼éè¿gatesessionactoridè·åä¸ä¸ªactormessagesenderï¼ç¶ååéã\n\n// ä»game.sceneä¸è·åactorsendercomponentï¼ç¶åéè¿instanceidè·åactormessagesender\nactorsendercomponent actorsendercomponent = game.scene.getcomponent<actorsendercomponent>();\nactormessagesender actormessagesender = actorsendercomponent.get(unitgatecomponent.gatesessionactorid);\n// send\nactormessagesender.send(message);\n\n// rpc\nvar response = actormessagesender.call(message);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\né®é¢æ¯mapä¸­æä¹æè½ç¥égate sessionçinstanceidå¢ï¼è¿å°±æ¯ä½ éè¦æ³æ¹è®¾æ³ä¼ è¿å»äºï¼æ¯å¦etä¸­ï¼ç©å®¶å¨ç»å½gateçæ¶åï¼gate sessionæä¸ä¸ä¸ªä¿¡ç®±mailboxcomponentï¼c2g_logingatehandler.csä¸­\n\nsession.addcomponent<mailboxcomponent, string>(mailboxtype.gatesession);\n\n\n1\n\n\nç©å®¶ç»å½mapè¿ç¨çæ¶åä¼æè¿ä¸ªgate sessionçinstanceidå¸¦è¿mapä¸­å»ï¼c2g_entermaphandler.csä¸­\n\nm2g_createunit createunit = (m2g_createunit)await mapsession.call(new g2m_createunit() { playerid = player.id, gatesessionid = session.instanceid });\n\n\n1\n\n\n\n# actoræ¶æ¯çå¤ç\n\né¦åï¼æ¶æ¯å°è¾¾mailboxcomponentï¼mailboxcomponentæ¯æç±»åçï¼ä¸åçç±»åé®ç®±å¯ä»¥åä¸åçå¤çãç®åæä¸¤ç§é®ç®±ç±»ågatesessionè·messagedispatcherãgatesessioné®ç®±å¨æ¶å°æ¶æ¯çæ¶åä¼ç«å³è½¬åç»å®¢æ·ç«¯ï¼messagedispatcherç±»åä¼åæ¬¡å¯¹actoræ¶æ¯è¿è¡ååå°å·ä½çhandlerå¤çï¼é»è®¤çmailboxcomponentç±»åæ¯messagedispatcherãèªå®ä¹ä¸ä¸ªé®ç®±ç±»åä¹å¾ç®åï¼ç»§æ¿imailboxhandleræ¥å£ï¼å ä¸mailboxhandleræ ç­¾å³å¯ãé£ä¹ä¸ºä»ä¹éè¦å è¿ä¹ä¸ªåè½å¢ï¼å¨å¶å®çactoræ¨¡åä¸­æ¯ä¸å­å¨è¿ä¸ªç¹ç¹çï¼ä¸è¬æ¯æ¶å°æ¶æ¯å°±è¿è¡ååå¤çäºãåå æ¯gatesessionçè®¾è®¡ï¼å¹¶ä¸éè¦è¿è¡ååå¤çï¼å æ­¤æå¨è¿éå ä¸äºé®ç®±ç±»åè¿ç§è®¾è®¡ãmessagedispatcherçå¤çæ¹å¼æä¸¤ç§ä¸ç§æ¯å¤çå¯¹æ¹sendè¿æ¥çæ¶æ¯ï¼ä¸ç§æ¯rpcæ¶æ¯\n\n    // å¤çsendçæ¶æ¯, éè¦ç»§æ¿amactorhandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»å\n\t[actormessagehandler(apptype.map)]\n\tpublic class actor_testhandler : amactorhandler<unit, actor_test>\n\t{\n\t\tprotected override ettask run(unit unit, actor_test message)\n\t\t{\n\t\t\tlog.debug(message.info);\n\t\t}\n\t}\n\n    // å¤çrpcæ¶æ¯, éè¦ç»§æ¿amactorrpchandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»åï¼ç¬¬ä¸ä¸ªåæ°æ¯è¿åæ¶æ¯çç±»å\n    [actormessagehandler(apptype.map)]\n\tpublic class actor_transferhandler : amactorrpchandler<unit, actor_transferrequest, actor_transferresponse>\n\t{\n\t\tprotected override async ettask run(unit unit, actor_transferrequest message, action<actor_transferresponse> reply)\n\t\t{\n\t\t\tactor_transferresponse response = new actor_transferresponse();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\treply(response);\n\t\t\t}\n\t\t\tcatch (exception e)\n\t\t\t{\n\t\t\t\treplyerror(response, e, reply);\n\t\t\t}\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\næä»¬éè¦æ³¨æä¸ä¸ï¼actoræ¶æ¯ææ­»éçå¯è½ï¼æ¯å¦a callæ¶æ¯ç»bï¼b callç»cï¼c callç»aãå ä¸ºmailboxcomponentæ¬è´¨ä¸æ¯ä¸ä¸ªæ¶æ¯éåï¼å®å¼å¯äºä¸ä¸ªåç¨ä¼ä¸ä¸ªä¸ä¸ªæ¶æ¯å¤çï¼è¿åettaskè¡¨ç¤ºè¿ä¸ªæ¶æ¯å¤çç±»ä¼é»å¡mailboxcomponentéåçå¶å®æ¶æ¯ãæä»¥å¦æåºç°æ­»éï¼æä»¬å°±ä¸å¸ææä¸ªæ¶æ¯å¤çé»å¡æmailboxcomponentå¶å®æ¶æ¯çå¤çï¼æä»¬å¯ä»¥å¨æ¶æ¯å¤çç±»éé¢æ°å¼ä¸ä¸ªåç¨æ¥å¤çå°±è¡äºãä¾å¦:\n\n\t[actormessagehandler(apptype.map)]\n\tpublic class actor_testhandler : amactorhandler<unit, actor_test>\n\t{\n\t\tprotected override ettask run(unit unit, actor_test message)\n\t\t{\n\t\t\trunasync(unit, message).coroutine();\n\t\t}\n\n        public etvoid runasync(unit unit, actor_test message)\n        {\n            log.debug(message.info);\n        }\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nç¸å³èµæå¯ä»¥è°·æ­ä¸ä¸actoræ­»éçé®é¢ã",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"5.5Actor Location-ZH",frontmatter:{title:"5.5Actor Location-ZH",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/9f7296/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/55.5.5Actor%20Location-ZH.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/55.5.5Actor Location-ZH.md",key:"v-973514f8",path:"/pages/9f7296/",headers:[{level:3,title:"Actor Location",slug:"actor-location-2",normalizedTitle:"actor location",charIndex:2},{level:3,title:"Actor Locationæ¶æ¯çå¤ç",slug:"actor-locationæ¶æ¯çå¤ç",normalizedTitle:"actor locationæ¶æ¯çå¤ç",charIndex:2139},{level:3,title:"ETçactorè·actor locationçæ¯å»",slug:"etçactorè·actor-locationçæ¯å»",normalizedTitle:"etçactorè·actor locationçæ¯å»",charIndex:3583}],headersStr:"Actor Location Actor Locationæ¶æ¯çå¤ç ETçactorè·actor locationçæ¯å»",content:'# Actor Location\n\n\n# Actor Location\n\nActoræ¨¡ååªéè¦ç¥éå¯¹æ¹çInstanceIdå°±è½åéæ¶æ¯ï¼ååæ¹ä¾¿ï¼ä½æ¯ææ¶åæä»¬å¯è½æ æ³ç¥éå¯¹æ¹çInstanceIdï¼æèæ¯ä¸ä¸ªActorçInstanceIdä¼åçååãè¿ç§åºæ¯å¾å¸¸è§ï¼æ¯å¦ï¼å¾å¤æ¸¸ææ¯åçº¿çï¼ä¸ä¸ªç©å®¶å¯è½ä»1çº¿æ¢å°2çº¿ï¼è¿æçæ¸¸ææ¯ååºæ¯çï¼ä¸ä¸ªåºæ¯ä¸ä¸ªè¿ç¨ï¼ç©å®¶ä»åºæ¯1è¿å¥å°åºæ¯2ãå ä¸ºåäºè¿ç¨è¿ç§»ï¼ç©å®¶å¯¹è±¡çInstanceIdä¹å°±ååäºãETæä¾äºç»è¿ç±»å¯¹è±¡åéæ¶æ¯çæºå¶ï¼å«åActor Locationæºå¶ãå¶åçæ¯è¾ç®åï¼\n\n 1.  å ä¸ºInstanceIdæ¯ååçï¼å¯¹è±¡çEntity.Idæ¯ä¸åçï¼æä»¥æä»¬é¦åå¯ä»¥æ³å°ä½¿ç¨Entity.Idæ¥åéactoræ¶æ¯\n 2.  æä¾ä¸ä¸ªä½ç½®è¿ç¨(Location Server)ï¼Actorå¯¹è±¡å¯ä»¥å°èªå·±çEntity.Idè·InstanceIdä½ä¸ºkvå­å°ä½ç½®è¿ç¨ä¸­ãåéActoræ¶æ¯ååå»ä½ç½®è¿ç¨æ¥è¯¢å°Actorå¯¹è±¡çInstanceIdååéactoræ¶æ¯ã\n 3.  Actorå¯¹è±¡å¨ä¸ä¸ªè¿ç¨åå»ºæ¶æèè¿ç§»å°ä¸ä¸ªæ°çè¿ç¨æ¶ï¼é½éè¦æèªå·±çIdè·InstanceIdæ³¨åå°Location Serverä¸å»\n 4.  å ä¸ºActorå¯¹è±¡æ¯å¯ä»¥è¿ç§»çï¼æ¶æ¯åè¿å»æå¯è½Actorå·²ç»è¿ç§»å°å¶å®è¿ç¨ä¸å»äºï¼æä»¥åéActor Locationæ¶æ¯éè¦æä¾ä¸ç§å¯é æºå¶\n 5.  ActorLocationSenderæä¾ä¸¤ç§æ¹æ³ï¼Sendè·Callï¼Sendä¸ä¸ªæ¶æ¯ä¹éè¦æ¥åèè¿åä¸ä¸ªæ¶æ¯ï¼åªææ¶å°è¿åæ¶æ¯æä¼åéä¸ä¸ä¸ªæ¶æ¯ã\n 6.  Actorå¯¹è±¡å¦æè¿ç§»èµ°äºï¼è¿æ¶ä¼è¿åActorä¸å­å¨çéè¯¯ï¼åéèæ¶å°è¿ä¸ªéè¯¯ä¼ç­å¾1ç§ï¼ç¶åéæ°å»è·åActorçInstanceIdï¼ç¶åéæ°åéï¼ç®åä¼å°è¯5æ¬¡ï¼5æ¬¡è¿åï¼æåºå¼å¸¸ï¼æ¥åéè¯¯\n 7.  ActorLocationSenderåéæ¶æ¯ä¸ä¼æ¯æ¬¡é½å»æ¥è¯¢Location Serverï¼å ä¸ºå¯¹è±¡è¿ç§»æ¯ç«æ¯è¾å°è§ï¼åªæç¬¬ä¸æ¬¡å»æ¥è¯¢ï¼ä¹åç¼å­InstanceIdï¼ä»¥ååéå¤±è´¥åéæ°æ¥è¯¢ã\n 8.  Actorå¯¹è±¡å¨è¿ç§»è¿ç¨ä¸­ï¼æå¯è½å¶å®è¿ç¨åéè¿æ¥æ¶æ¯ï¼è¿æ¶ä¼åçéè¯¯ï¼æä»¥location serveræä¾äºä¸ç§Lockçæºå¶ãå¯¹è±¡å¨ä¼ éåï¼å æå¨æ¬è¿ç¨çä¿¡æ¯ï¼ç¶åå¨location serverä¸å ä¸éï¼ä¸æ¦éä¸åï¼å¶å®çå¯¹è¯¥keyçè¯·æ±ä¼è¿è¡éåã\n 9.  ä¼ éåå ä¸ºå¯¹æ¹å é¤äºæ¬è¿ç¨çactorï¼æä»¥å¶å®è¿ç¨ä¼åéå¤±è´¥ï¼è¿æ¶åä»ä»¬ä¼è¿è¡éè¯ãéè¯çæ¶åä¼éæ°è¯·æ±location serverï¼è¿æ¶åä¼åç°è¢«éäºï¼äºæ¯ä¸ç´ç­å¾\n 10. ä¼ éå®æåï¼è¦unlock location serverä¸çéï¼å¹¶ä¸æ´æ°æ°çå°åï¼ç¶åååºå¶å®çlocationè¯·æ±ãå¶å®åç»è¿ä¸ªactorçè¯·æ±ç»§ç»­è¿è¡ä¸å»ã\n\næ³¨æï¼Actoræ¨¡åæ¯çº¯ç²¹çæå¡ç«¯æ¶æ¯éä¿¡æºå¶ï¼è·å®¢æ·ç«¯æ¯æ²¡ä»ä¹å³ç³»çï¼å¾å¤ç¨ETçæ°äººçå°ETå®¢æ·ç«¯æ¶æ¯ä¹æActoræ¥å£ï¼ä»¥ä¸ºè¿æ¯å®¢æ·ç«¯è·æå¡ç«¯éä¿¡çæºå¶ï¼å¶å®ä¸æ¯çãETå®¢æ·ç«¯ä½¿ç¨è¿ä¸ªActorå®å¨æ¯å ä¸ºGateéè¦å¯¹å®¢æ·ç«¯æ¶æ¯è¿è¡è½¬åï¼æä»¬å¯ä»¥æ­£å¥½å©ç¨æå¡ç«¯actoræ¨¡åæ¥è¿è¡è½¬åï¼æä»¥å®¢æ·ç«¯æäºæ¶æ¯ä¹æ¯ç»§æ¿äºactorçæ¥å£ãåå¦æä»¬å®¢æ·ç«¯ä¸ä½¿ç¨actoræ¥å£ä¼æä¹æ ·å¢ï¼æ¯å¦ï¼Frame_ClickMapè¿ä¸ªæ¶æ¯\n\nmessage Frame_ClickMap // IActorLocationMessage\n{\n\tint64 ActorId = 93;\n\tint64 Id = 94;\n\t\n\tfloat X = 1;\n\tfloat Y = 2;\n\tfloat Z = 3;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\næä»¬å¯è½å°±ä¸éè¦ActorIdè¿ä¸ªå­æ®µï¼æ¶æ¯åéå°Gateï¼gateçå°æ¯Frame_ClickMapæ¶æ¯ï¼å®éè¦è½¬åç»Mapä¸çUnitï¼è½¬åè¿å¥½åï¼gateå¯ä»¥ä»sessionä¸­è·åå¯¹åºçmapçunitçä½ç½®ï¼ç¶åè½¬åï¼é®é¢æ¥äºï¼Frame_ClickMapæ¶æ¯å°äºmapï¼mapæä¹ç¥éæ¶æ¯éè¦ç»åªä¸ªå¯¹è±¡å¢ï¼è¿æ¶åæå ç§è®¾è®¡ï¼\n\n 1. å¨è½¬åçåºå±åè®®ä¸­å¸¦ä¸unitçIdï¼éè¦æ¯è¾å¤æçåºå±åè®®æ¯æã\n 2. ç¨ä¸ä¸ªæ¶æ¯å¯¹Frame_ClickMapæ¶æ¯åè£ä¸ä¸ï¼åè£çæ¶æ¯å¸¦ä¸UnitçIdï¼ç¨æ¶æ¯åè£æå³çæ´å¤§çæ¶èï¼å¢å GCã ä¸ªäººæè§è¿ä¸¤ç§é½å¾å·®ï¼ä¸å¥½ç¨ï¼èä¸å°±ç®ååç»unitå¯¹è±¡å¤çäºï¼æä¹è§£å³æ¶æ¯éå¥çé®é¢å¢ï¼unitå¯¹è±¡ä»ç¶éè¦æä¸ä¸ä¸ªæ¶æ¯å¤çéåï¼ç¶åæ¶å°æ¶æ¯æå°éåéé¢ãè¿ä¸è·actoræ¨¡åéå¤äºåï¼ç®åETå¨å®¢æ·ç«¯åç»unitçæ¶æ¯åäºä¸ªè®¾è®¡ï¼æ¶æ¯åæactoræ¶æ¯ï¼gateæ¶å°åç°æ¯actoræ¶æ¯ï¼ç´æ¥åå°å¯¹åºçactorä¸ï¼è§£å³çå¯ä»¥è¯´å¾æ¼äº®ãå¶å®å®¢æ·ç«¯ä»ç¶æ¯ä½¿ç¨session.sendè·callåéæ¶æ¯ï¼åéçæ¶åä¹ä¸ç¥éæ¶æ¯æ¯actoræ¶æ¯ï¼åªæå°äºgateï¼gateæè¿è¡äºå¤æ­ï¼åèOuterMessageDispatcher.cs\n\n\n# Actor Locationæ¶æ¯çå¤ç\n\nActorLocationæ¶æ¯åé\n\n// ä»Game.Sceneä¸è·åActorLocationSenderComponentï¼ç¶åéè¿Entity.Idè·åActorLocationSender\nActorLocationSender actorLocationSender = Game.Scene.GetComponent<ActorLocationSenderComponent>().Get(unitId);\n// éè¿ActorLocationSenderæ¥åéæ¶æ¯\nactorLocationSender.Send(actorLocationMessage);\n// åéRpcæ¶æ¯\nIResponse response = await actorLocationSender.Call(actorLocationRequest);\n\n\n1\n2\n3\n4\n5\n6\n\n\nActorLocationæ¶æ¯çå¤çè·Actoræ¶æ¯å ä¹ä¸æ ·ï¼ä¸åçæ¯ç»§æ¿çä¸¤ä¸ªæ½è±¡ç±»ä¸åï¼æ³¨æactorlocationçæ½è±¡ç±»å¤äºä¸ªLocation\n\n\t// å¤çsendè¿æ¥çæ¶æ¯ï¼ éè¦ç»§æ¿AMActorLocationHandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯Actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»å\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class Frame_ClickMapHandler : AMActorLocationHandler<Unit, Frame_ClickMap>\n\t{\n\t\tprotected override ETTask Run(Unit unit, Frame_ClickMap message)\n\t\t{\n\t\t\tVector3 target = new Vector3(message.X, message.Y, message.Z);\n\t\t\tunit.GetComponent<UnitPathComponent>().MoveTo(target).Coroutine();\n\t\t\t\n\t\t}\n\t}\n\n\t// å¤çRpcæ¶æ¯, éè¦ç»§æ¿AMActorRpcHandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯Actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»åï¼ç¬¬ä¸ä¸ªåæ°æ¯è¿åæ¶æ¯çç±»å\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class C2M_TestActorRequestHandler : AMActorLocationRpcHandler<Unit, C2M_TestActorRequest, M2C_TestActorResponse>\n\t{\n\t\tprotected override async ETTask Run(Unit unit, C2M_TestActorRequest message, Action<M2C_TestActorResponse> reply)\n\t\t{\n\t\t\treply(new M2C_TestActorResponse(){Info = "actor rpc response"});\n\t\t\tawait ETTask.CompletedTask;\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\n\n# ETçactorè·actor locationçæ¯å»\n\nä¸­å½æå¾å¤åå¸ï¼è¿ç¨ï¼ï¼åå¸ä¸­æå¾å¤äººï¼entityå¯¹è±¡ï¼å±ä½ï¼æ¯ä¸ªäººé½æèº«ä»½è¯å·ç ï¼Entity.Idï¼ãä¸ä¸ªäººæ¯å°ä¸ä¸ªå¸é½éè¦åçå±ä½è¯ï¼åéå°å¯ä¸çå±ä½è¯å·ç ï¼InstanceIdï¼ï¼å±ä½è¯å·ç çæ ¼å¼æ¯2ä¸ªå­èå¸ç¼å·+4ä¸ªå­èæ¶é´+2ä¸ªå­èéå¢ãèº«ä»½è¯å·ç æ¯æ°¸è¿ä¸ä¼ååçï¼ä½æ¯å±ä½è¯å·ç æ¯å°ä¸ä¸ªåå¸é½ååçã ç°å¨æä¸ªä¸­å½é®æ¿ï¼actorï¼ãåè®¾å°æè¦åä¿¡ç»å¥³æåå°çº¢\n\n 1. å°çº¢ä¸ºäºæ¶ä¿¡ï¼èªå·±å¿é¡»æè½½ä¸ä¸ªé®ç®±ï¼MailboxComponentï¼ï¼å°çº¢æ¶å°æ¶æ¯å°±ä¼å¤çãæ³¨æè¿éå¤çæ¯ä¸ä¸ªä¸ªè¿è¡å¤ççãæå¯è½å°çº¢ä¼åæ¶æ¶å°å¾å¤äººçä¿¡ãä½æ¯å¥¹å¿é¡»ä¸å°ä¸å°çä¿¡çï¼æ¯æ¹è¯´å°æè·å°å®é½åäºä¿¡ç»å°çº¢ï¼å°çº¢åæ¶å°å°æçä¿¡ï¼åæ¶å°äºå°å®çä¿¡ãå°çº¢åè¯»å°æçä¿¡ï¼å°æä¿¡ä¸­è®©å°çº¢ç»å¤å©æä¸ªçµè¯ï¼äº§çåç¨ï¼åç»èªå·±åä¿¡ï¼æ³¨æè¿æé´å°çº¢ä¹ä¸è½è¯»ä¸ä¸å°ä¿¡ï¼å¿é¡»æå®çµè¯åæè½è¯»å°å®çä¿¡ãå½ç¶å°çº¢èªå·±å¯ä»¥éæ©ä¸å¤çå®æå°±å¼å§è¯»å°å®çä¿¡ï¼åæ³æ¯å°çº¢å¼ä¸ä¸ªæ°çåç¨æ¥å¤çå°æçä¿¡ã\n 2. åè®¾å°æç¥éå°çº¢çå±ä½è¯å·ç ï¼é£ä¹é®æ¿ï¼actorï¼å¯ä»¥æ ¹æ®å±ä½è¯å·ç å¤´ä¸¤ä½æ¾å°å°çº¢å±ä½çåå¸ï¼è¿ç¨ï¼ï¼ç¶ååæ ¹æ®å°çº¢çå±ä½è¯ç¼å·ï¼æ¾å°å°çº¢ï¼ææ¶æ¯æéå°å°çº¢çé®ç®±ï¼MailboxComponentï¼ä¸­ãè¿ç§æ¯æç®åçåççactoræ¨¡å\n 3. ETè¿æ¯æäºä¸å¥actor locationæºå¶ãåè®¾å°æä¸ç¥éå°çº¢çå±ä½è¯å·ç ï¼ä½æ¯ä»ç¥éå°çº¢çèº«ä»½è¯å·ç ï¼æä¹åå¢ï¼é®æ¿å¼åäºä¸å¥é«çº§é®æ¿ï¼actor locationï¼æ³äºä¸ä¸ªåæ³ï¼å¦æä¸ä¸ªäººç»å¸¸æ¬å®¶ï¼å®è¿æ³æ¶å°ä¿¡ï¼é£ä»å°ä¸ä¸ªæ°çåå¸é½å¿é¡»æèªå·±çå±ä½è¯è·èº«ä»½è¯ä¸æ¥å°ä¸­å¤®æ¿åºï¼location serverï¼ï¼è¿æ ·é«çº§é®æ¿è½å¤éè¿èº«ä»½è¯å·ç æ¥åéé®ä»¶ãæ¹æ³å°±æ¯å»ä¸­å¤®æ¿åºæ¿å°å°çº¢çå±ä½è¯å·ç ï¼åå©ç¨actoræºå¶åéã\n 4. åè®¾å°çº¢ä¹åå¨å¹¿å·å¸ï¼å°æç¨å°çº¢çèº«ä»½è¯ç»å°çº¢åä¿¡ä»¶äºã é«çº§é®æ¿è·åäºå°çº¢çå±ä½è¯å·ç ï¼ç»å°çº¢åä¿¡ãåä¿¡çè¿ä¸ªè¿ç¨ä¸­ï¼å°çº¢æ¬å®¶äºï¼ä»å¹¿å·æ¬å°äºæ·±å³ï¼è¿æ¶å°çº¢å¨ä¸­å¤®æ¿åºä¸æ¥äºèªå·±æ°çå±ä½è¯ã é«çº§é®æ¿çä¿¡éå°å°å¹¿å·çæ¶ååç°ï¼å°çº¢ä¸å¨å¹¿å·ãé£ä¹é«çº§é®æ¿ä¼åæ¬¡å»ä¸­å¤®æ¿åºè·åå°çº¢çå±ä½è¯ï¼éæ°åéï¼æå¯è½æåæå¯è½åæ¬¡å¤±è´¥ï¼è¿ä¸ªè¿ç¨ä¼éå¤å æ¬¡ï¼å¦æä¸ç´ä¸æåååè¯å°æï¼ä¿¡ä»¶åéå¤±è´¥äºã\n 5. é«çº§é®æ¿åä¿¡æ¯è¾è´µï¼èä¸äººæ¬å®¶çæ¬¡æ°å¹¶ä¸å¤ï¼ä¸è¬å°æç¨é«çº§é®æ¿åä¿¡åä¼è®°ä½å°çº¢çå±ä½è¯ï¼ä¸æ¬¡ååçæ¶åç´æ¥ç¨å±ä½è¯åä¿¡ï¼åéå¤±è´¥äºåä½¿ç¨é«çº§é®æ¿åä¿¡ã\n 6. é«çº§é®æ¿çä¿¡é½æ¯æåæ§çï¼æä¸¤ç§åæ§ï¼ä¸ç§åæ§æ²¡æåå®¹ï¼åªè¡¨ç¤ºå°çº¢æ¶å°äºä¿¡ï¼ä¸ç§åæ§å¸¦äºå°çº¢çåä¿¡ãå°æå¨åä¿¡çæ¶åå¯ä»¥éæ©ä½¿ç¨åªç§åæ§å½¢å¼ãå°æç»å°çº¢ä¸è½åæ¶åéä¸¤å°ä¿¡ï¼å¿é¡»ç­å°çº¢çåæ§å°äºï¼å°ææè½ç»§ç»­åä¿¡ã',normalizedContent:'# actor location\n\n\n# actor location\n\nactoræ¨¡ååªéè¦ç¥éå¯¹æ¹çinstanceidå°±è½åéæ¶æ¯ï¼ååæ¹ä¾¿ï¼ä½æ¯ææ¶åæä»¬å¯è½æ æ³ç¥éå¯¹æ¹çinstanceidï¼æèæ¯ä¸ä¸ªactorçinstanceidä¼åçååãè¿ç§åºæ¯å¾å¸¸è§ï¼æ¯å¦ï¼å¾å¤æ¸¸ææ¯åçº¿çï¼ä¸ä¸ªç©å®¶å¯è½ä»1çº¿æ¢å°2çº¿ï¼è¿æçæ¸¸ææ¯ååºæ¯çï¼ä¸ä¸ªåºæ¯ä¸ä¸ªè¿ç¨ï¼ç©å®¶ä»åºæ¯1è¿å¥å°åºæ¯2ãå ä¸ºåäºè¿ç¨è¿ç§»ï¼ç©å®¶å¯¹è±¡çinstanceidä¹å°±ååäºãetæä¾äºç»è¿ç±»å¯¹è±¡åéæ¶æ¯çæºå¶ï¼å«åactor locationæºå¶ãå¶åçæ¯è¾ç®åï¼\n\n 1.  å ä¸ºinstanceidæ¯ååçï¼å¯¹è±¡çentity.idæ¯ä¸åçï¼æä»¥æä»¬é¦åå¯ä»¥æ³å°ä½¿ç¨entity.idæ¥åéactoræ¶æ¯\n 2.  æä¾ä¸ä¸ªä½ç½®è¿ç¨(location server)ï¼actorå¯¹è±¡å¯ä»¥å°èªå·±çentity.idè·instanceidä½ä¸ºkvå­å°ä½ç½®è¿ç¨ä¸­ãåéactoræ¶æ¯ååå»ä½ç½®è¿ç¨æ¥è¯¢å°actorå¯¹è±¡çinstanceidååéactoræ¶æ¯ã\n 3.  actorå¯¹è±¡å¨ä¸ä¸ªè¿ç¨åå»ºæ¶æèè¿ç§»å°ä¸ä¸ªæ°çè¿ç¨æ¶ï¼é½éè¦æèªå·±çidè·instanceidæ³¨åå°location serverä¸å»\n 4.  å ä¸ºactorå¯¹è±¡æ¯å¯ä»¥è¿ç§»çï¼æ¶æ¯åè¿å»æå¯è½actorå·²ç»è¿ç§»å°å¶å®è¿ç¨ä¸å»äºï¼æä»¥åéactor locationæ¶æ¯éè¦æä¾ä¸ç§å¯é æºå¶\n 5.  actorlocationsenderæä¾ä¸¤ç§æ¹æ³ï¼sendè·callï¼sendä¸ä¸ªæ¶æ¯ä¹éè¦æ¥åèè¿åä¸ä¸ªæ¶æ¯ï¼åªææ¶å°è¿åæ¶æ¯æä¼åéä¸ä¸ä¸ªæ¶æ¯ã\n 6.  actorå¯¹è±¡å¦æè¿ç§»èµ°äºï¼è¿æ¶ä¼è¿åactorä¸å­å¨çéè¯¯ï¼åéèæ¶å°è¿ä¸ªéè¯¯ä¼ç­å¾1ç§ï¼ç¶åéæ°å»è·åactorçinstanceidï¼ç¶åéæ°åéï¼ç®åä¼å°è¯5æ¬¡ï¼5æ¬¡è¿åï¼æåºå¼å¸¸ï¼æ¥åéè¯¯\n 7.  actorlocationsenderåéæ¶æ¯ä¸ä¼æ¯æ¬¡é½å»æ¥è¯¢location serverï¼å ä¸ºå¯¹è±¡è¿ç§»æ¯ç«æ¯è¾å°è§ï¼åªæç¬¬ä¸æ¬¡å»æ¥è¯¢ï¼ä¹åç¼å­instanceidï¼ä»¥ååéå¤±è´¥åéæ°æ¥è¯¢ã\n 8.  actorå¯¹è±¡å¨è¿ç§»è¿ç¨ä¸­ï¼æå¯è½å¶å®è¿ç¨åéè¿æ¥æ¶æ¯ï¼è¿æ¶ä¼åçéè¯¯ï¼æä»¥location serveræä¾äºä¸ç§lockçæºå¶ãå¯¹è±¡å¨ä¼ éåï¼å æå¨æ¬è¿ç¨çä¿¡æ¯ï¼ç¶åå¨location serverä¸å ä¸éï¼ä¸æ¦éä¸åï¼å¶å®çå¯¹è¯¥keyçè¯·æ±ä¼è¿è¡éåã\n 9.  ä¼ éåå ä¸ºå¯¹æ¹å é¤äºæ¬è¿ç¨çactorï¼æä»¥å¶å®è¿ç¨ä¼åéå¤±è´¥ï¼è¿æ¶åä»ä»¬ä¼è¿è¡éè¯ãéè¯çæ¶åä¼éæ°è¯·æ±location serverï¼è¿æ¶åä¼åç°è¢«éäºï¼äºæ¯ä¸ç´ç­å¾\n 10. ä¼ éå®æåï¼è¦unlock location serverä¸çéï¼å¹¶ä¸æ´æ°æ°çå°åï¼ç¶åååºå¶å®çlocationè¯·æ±ãå¶å®åç»è¿ä¸ªactorçè¯·æ±ç»§ç»­è¿è¡ä¸å»ã\n\næ³¨æï¼actoræ¨¡åæ¯çº¯ç²¹çæå¡ç«¯æ¶æ¯éä¿¡æºå¶ï¼è·å®¢æ·ç«¯æ¯æ²¡ä»ä¹å³ç³»çï¼å¾å¤ç¨etçæ°äººçå°etå®¢æ·ç«¯æ¶æ¯ä¹æactoræ¥å£ï¼ä»¥ä¸ºè¿æ¯å®¢æ·ç«¯è·æå¡ç«¯éä¿¡çæºå¶ï¼å¶å®ä¸æ¯çãetå®¢æ·ç«¯ä½¿ç¨è¿ä¸ªactorå®å¨æ¯å ä¸ºgateéè¦å¯¹å®¢æ·ç«¯æ¶æ¯è¿è¡è½¬åï¼æä»¬å¯ä»¥æ­£å¥½å©ç¨æå¡ç«¯actoræ¨¡åæ¥è¿è¡è½¬åï¼æä»¥å®¢æ·ç«¯æäºæ¶æ¯ä¹æ¯ç»§æ¿äºactorçæ¥å£ãåå¦æä»¬å®¢æ·ç«¯ä¸ä½¿ç¨actoræ¥å£ä¼æä¹æ ·å¢ï¼æ¯å¦ï¼frame_clickmapè¿ä¸ªæ¶æ¯\n\nmessage frame_clickmap // iactorlocationmessage\n{\n\tint64 actorid = 93;\n\tint64 id = 94;\n\t\n\tfloat x = 1;\n\tfloat y = 2;\n\tfloat z = 3;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\næä»¬å¯è½å°±ä¸éè¦actoridè¿ä¸ªå­æ®µï¼æ¶æ¯åéå°gateï¼gateçå°æ¯frame_clickmapæ¶æ¯ï¼å®éè¦è½¬åç»mapä¸çunitï¼è½¬åè¿å¥½åï¼gateå¯ä»¥ä»sessionä¸­è·åå¯¹åºçmapçunitçä½ç½®ï¼ç¶åè½¬åï¼é®é¢æ¥äºï¼frame_clickmapæ¶æ¯å°äºmapï¼mapæä¹ç¥éæ¶æ¯éè¦ç»åªä¸ªå¯¹è±¡å¢ï¼è¿æ¶åæå ç§è®¾è®¡ï¼\n\n 1. å¨è½¬åçåºå±åè®®ä¸­å¸¦ä¸unitçidï¼éè¦æ¯è¾å¤æçåºå±åè®®æ¯æã\n 2. ç¨ä¸ä¸ªæ¶æ¯å¯¹frame_clickmapæ¶æ¯åè£ä¸ä¸ï¼åè£çæ¶æ¯å¸¦ä¸unitçidï¼ç¨æ¶æ¯åè£æå³çæ´å¤§çæ¶èï¼å¢å gcã ä¸ªäººæè§è¿ä¸¤ç§é½å¾å·®ï¼ä¸å¥½ç¨ï¼èä¸å°±ç®ååç»unitå¯¹è±¡å¤çäºï¼æä¹è§£å³æ¶æ¯éå¥çé®é¢å¢ï¼unitå¯¹è±¡ä»ç¶éè¦æä¸ä¸ä¸ªæ¶æ¯å¤çéåï¼ç¶åæ¶å°æ¶æ¯æå°éåéé¢ãè¿ä¸è·actoræ¨¡åéå¤äºåï¼ç®åetå¨å®¢æ·ç«¯åç»unitçæ¶æ¯åäºä¸ªè®¾è®¡ï¼æ¶æ¯åæactoræ¶æ¯ï¼gateæ¶å°åç°æ¯actoræ¶æ¯ï¼ç´æ¥åå°å¯¹åºçactorä¸ï¼è§£å³çå¯ä»¥è¯´å¾æ¼äº®ãå¶å®å®¢æ·ç«¯ä»ç¶æ¯ä½¿ç¨session.sendè·callåéæ¶æ¯ï¼åéçæ¶åä¹ä¸ç¥éæ¶æ¯æ¯actoræ¶æ¯ï¼åªæå°äºgateï¼gateæè¿è¡äºå¤æ­ï¼åèoutermessagedispatcher.cs\n\n\n# actor locationæ¶æ¯çå¤ç\n\nactorlocationæ¶æ¯åé\n\n// ä»game.sceneä¸è·åactorlocationsendercomponentï¼ç¶åéè¿entity.idè·åactorlocationsender\nactorlocationsender actorlocationsender = game.scene.getcomponent<actorlocationsendercomponent>().get(unitid);\n// éè¿actorlocationsenderæ¥åéæ¶æ¯\nactorlocationsender.send(actorlocationmessage);\n// åérpcæ¶æ¯\niresponse response = await actorlocationsender.call(actorlocationrequest);\n\n\n1\n2\n3\n4\n5\n6\n\n\nactorlocationæ¶æ¯çå¤çè·actoræ¶æ¯å ä¹ä¸æ ·ï¼ä¸åçæ¯ç»§æ¿çä¸¤ä¸ªæ½è±¡ç±»ä¸åï¼æ³¨æactorlocationçæ½è±¡ç±»å¤äºä¸ªlocation\n\n\t// å¤çsendè¿æ¥çæ¶æ¯ï¼ éè¦ç»§æ¿amactorlocationhandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»å\n\t[actormessagehandler(apptype.map)]\n\tpublic class frame_clickmaphandler : amactorlocationhandler<unit, frame_clickmap>\n\t{\n\t\tprotected override ettask run(unit unit, frame_clickmap message)\n\t\t{\n\t\t\tvector3 target = new vector3(message.x, message.y, message.z);\n\t\t\tunit.getcomponent<unitpathcomponent>().moveto(target).coroutine();\n\t\t\t\n\t\t}\n\t}\n\n\t// å¤çrpcæ¶æ¯, éè¦ç»§æ¿amactorrpchandleræ½è±¡ç±»ï¼æ½è±¡ç±»ç¬¬ä¸ä¸ªæ³ååæ°æ¯actorçç±»åï¼ç¬¬äºä¸ªåæ°æ¯æ¶æ¯çç±»åï¼ç¬¬ä¸ä¸ªåæ°æ¯è¿åæ¶æ¯çç±»å\n\t[actormessagehandler(apptype.map)]\n\tpublic class c2m_testactorrequesthandler : amactorlocationrpchandler<unit, c2m_testactorrequest, m2c_testactorresponse>\n\t{\n\t\tprotected override async ettask run(unit unit, c2m_testactorrequest message, action<m2c_testactorresponse> reply)\n\t\t{\n\t\t\treply(new m2c_testactorresponse(){info = "actor rpc response"});\n\t\t\tawait ettask.completedtask;\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\n\n# etçactorè·actor locationçæ¯å»\n\nä¸­å½æå¾å¤åå¸ï¼è¿ç¨ï¼ï¼åå¸ä¸­æå¾å¤äººï¼entityå¯¹è±¡ï¼å±ä½ï¼æ¯ä¸ªäººé½æèº«ä»½è¯å·ç ï¼entity.idï¼ãä¸ä¸ªäººæ¯å°ä¸ä¸ªå¸é½éè¦åçå±ä½è¯ï¼åéå°å¯ä¸çå±ä½è¯å·ç ï¼instanceidï¼ï¼å±ä½è¯å·ç çæ ¼å¼æ¯2ä¸ªå­èå¸ç¼å·+4ä¸ªå­èæ¶é´+2ä¸ªå­èéå¢ãèº«ä»½è¯å·ç æ¯æ°¸è¿ä¸ä¼ååçï¼ä½æ¯å±ä½è¯å·ç æ¯å°ä¸ä¸ªåå¸é½ååçã ç°å¨æä¸ªä¸­å½é®æ¿ï¼actorï¼ãåè®¾å°æè¦åä¿¡ç»å¥³æåå°çº¢\n\n 1. å°çº¢ä¸ºäºæ¶ä¿¡ï¼èªå·±å¿é¡»æè½½ä¸ä¸ªé®ç®±ï¼mailboxcomponentï¼ï¼å°çº¢æ¶å°æ¶æ¯å°±ä¼å¤çãæ³¨æè¿éå¤çæ¯ä¸ä¸ªä¸ªè¿è¡å¤ççãæå¯è½å°çº¢ä¼åæ¶æ¶å°å¾å¤äººçä¿¡ãä½æ¯å¥¹å¿é¡»ä¸å°ä¸å°çä¿¡çï¼æ¯æ¹è¯´å°æè·å°å®é½åäºä¿¡ç»å°çº¢ï¼å°çº¢åæ¶å°å°æçä¿¡ï¼åæ¶å°äºå°å®çä¿¡ãå°çº¢åè¯»å°æçä¿¡ï¼å°æä¿¡ä¸­è®©å°çº¢ç»å¤å©æä¸ªçµè¯ï¼äº§çåç¨ï¼åç»èªå·±åä¿¡ï¼æ³¨æè¿æé´å°çº¢ä¹ä¸è½è¯»ä¸ä¸å°ä¿¡ï¼å¿é¡»æå®çµè¯åæè½è¯»å°å®çä¿¡ãå½ç¶å°çº¢èªå·±å¯ä»¥éæ©ä¸å¤çå®æå°±å¼å§è¯»å°å®çä¿¡ï¼åæ³æ¯å°çº¢å¼ä¸ä¸ªæ°çåç¨æ¥å¤çå°æçä¿¡ã\n 2. åè®¾å°æç¥éå°çº¢çå±ä½è¯å·ç ï¼é£ä¹é®æ¿ï¼actorï¼å¯ä»¥æ ¹æ®å±ä½è¯å·ç å¤´ä¸¤ä½æ¾å°å°çº¢å±ä½çåå¸ï¼è¿ç¨ï¼ï¼ç¶ååæ ¹æ®å°çº¢çå±ä½è¯ç¼å·ï¼æ¾å°å°çº¢ï¼ææ¶æ¯æéå°å°çº¢çé®ç®±ï¼mailboxcomponentï¼ä¸­ãè¿ç§æ¯æç®åçåççactoræ¨¡å\n 3. etè¿æ¯æäºä¸å¥actor locationæºå¶ãåè®¾å°æä¸ç¥éå°çº¢çå±ä½è¯å·ç ï¼ä½æ¯ä»ç¥éå°çº¢çèº«ä»½è¯å·ç ï¼æä¹åå¢ï¼é®æ¿å¼åäºä¸å¥é«çº§é®æ¿ï¼actor locationï¼æ³äºä¸ä¸ªåæ³ï¼å¦æä¸ä¸ªäººç»å¸¸æ¬å®¶ï¼å®è¿æ³æ¶å°ä¿¡ï¼é£ä»å°ä¸ä¸ªæ°çåå¸é½å¿é¡»æèªå·±çå±ä½è¯è·èº«ä»½è¯ä¸æ¥å°ä¸­å¤®æ¿åºï¼location serverï¼ï¼è¿æ ·é«çº§é®æ¿è½å¤éè¿èº«ä»½è¯å·ç æ¥åéé®ä»¶ãæ¹æ³å°±æ¯å»ä¸­å¤®æ¿åºæ¿å°å°çº¢çå±ä½è¯å·ç ï¼åå©ç¨actoræºå¶åéã\n 4. åè®¾å°çº¢ä¹åå¨å¹¿å·å¸ï¼å°æç¨å°çº¢çèº«ä»½è¯ç»å°çº¢åä¿¡ä»¶äºã é«çº§é®æ¿è·åäºå°çº¢çå±ä½è¯å·ç ï¼ç»å°çº¢åä¿¡ãåä¿¡çè¿ä¸ªè¿ç¨ä¸­ï¼å°çº¢æ¬å®¶äºï¼ä»å¹¿å·æ¬å°äºæ·±å³ï¼è¿æ¶å°çº¢å¨ä¸­å¤®æ¿åºä¸æ¥äºèªå·±æ°çå±ä½è¯ã é«çº§é®æ¿çä¿¡éå°å°å¹¿å·çæ¶ååç°ï¼å°çº¢ä¸å¨å¹¿å·ãé£ä¹é«çº§é®æ¿ä¼åæ¬¡å»ä¸­å¤®æ¿åºè·åå°çº¢çå±ä½è¯ï¼éæ°åéï¼æå¯è½æåæå¯è½åæ¬¡å¤±è´¥ï¼è¿ä¸ªè¿ç¨ä¼éå¤å æ¬¡ï¼å¦æä¸ç´ä¸æåååè¯å°æï¼ä¿¡ä»¶åéå¤±è´¥äºã\n 5. é«çº§é®æ¿åä¿¡æ¯è¾è´µï¼èä¸äººæ¬å®¶çæ¬¡æ°å¹¶ä¸å¤ï¼ä¸è¬å°æç¨é«çº§é®æ¿åä¿¡åä¼è®°ä½å°çº¢çå±ä½è¯ï¼ä¸æ¬¡ååçæ¶åç´æ¥ç¨å±ä½è¯åä¿¡ï¼åéå¤±è´¥äºåä½¿ç¨é«çº§é®æ¿åä¿¡ã\n 6. é«çº§é®æ¿çä¿¡é½æ¯æåæ§çï¼æä¸¤ç§åæ§ï¼ä¸ç§åæ§æ²¡æåå®¹ï¼åªè¡¨ç¤ºå°çº¢æ¶å°äºä¿¡ï¼ä¸ç§åæ§å¸¦äºå°çº¢çåä¿¡ãå°æå¨åä¿¡çæ¶åå¯ä»¥éæ©ä½¿ç¨åªç§åæ§å½¢å¼ãå°æç»å°çº¢ä¸è½åæ¶åéä¸¤å°ä¿¡ï¼å¿é¡»ç­å°çº¢çåæ§å°äºï¼å°ææè½ç»§ç»­åä¿¡ã',charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"5.6æ°å¼ç»ä»¶è®¾è®¡",frontmatter:{title:"5.6æ°å¼ç»ä»¶è®¾è®¡",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/1dc51a/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/56.5.6%E6%95%B0%E5%80%BC%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/56.5.6æ°å¼ç»ä»¶è®¾è®¡.md",key:"v-2c9acafa",path:"/pages/1dc51a/",headers:[{level:2,title:"æ®éçåæ³:",slug:"æ®éçåæ³",normalizedTitle:"æ®éçåæ³:",charIndex:232},{level:2,title:"ETæ¡æ¶éç¨äºKey Valueå½¢å¼ä¿å­æ°å¼å±æ§",slug:"etæ¡æ¶éç¨äºkey-valueå½¢å¼ä¿å­æ°å¼å±æ§",normalizedTitle:"etæ¡æ¶éç¨äºkey valueå½¢å¼ä¿å­æ°å¼å±æ§",charIndex:1833}],headersStr:"æ®éçåæ³: ETæ¡æ¶éç¨äºKey Valueå½¢å¼ä¿å­æ°å¼å±æ§",content:"ç±»ä¼¼é­å½ä¸çï¼mobaè¿ç§æè½æå¶å¤æï¼çµæ´»æ§è¦æ±æé«çæè½ç³»ç»ï¼å¿é¡»éè¦ä¸å¥åå¶çµæ´»çæ°å¼ç»ææ¥æ­éãæ°å¼ç»æè®¾è®¡å¥½äºï¼å®ç°æè½ç³»ç»å°±ä¼éå¸¸ç®åï¼å¦åå°±æ¯ä¸åºç¾é¾ãæ¯å¦é­å½ä¸çï¼ä¸ä¸ªäººç©çæ°å¼å±æ§éå¸¸ä¹å¤ï¼ç§»å¨éåº¦ï¼åéï¼ææ°ï¼è½éï¼éä¸­å¼ï¼é­æ³å¼ï¼è¡éï¼æå¤§è¡éï¼ç©çæ»å»ï¼ç©çé²å¾¡ï¼æ³æ¯æ»å»ï¼æ³æ¯é²å¾¡ï¼ç­ç­å¤è¾¾å åç§ä¹å¤ãå±æ§è·å±æ§ä¹é´åç¸äºå½±åï¼buffåä¼ç»å±æ§å¢å ç»å¯¹å¼ï¼å¢å ç¾åæ¯ï¼æèæç§buffåä¼å¨ç®å®ææçå¢å å¼ä¹ååæ¥ç»ä½ ç¿»ä¸ªåã\n\n\n# æ®éçåæ³:\n\nä¸è¬å°±æ¯åä¸ªæ°å¼ç±»ï¼\n\nclass Numeric\n{\n    public int Hp;\n    public int MaxHp;\n    public int Speed;\n    // è½é\n    public int Energy;\n    public int MaxEnergy;\n    // é­æ³\n    public int Mp;\n    public int MaxMp;\n    .....\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nä»ç»ä¸æ³ï¼æä¸ä¸ªçè´¼ä½¿ç¨çæ¯è½éï¼ä¸ºä»ä¹è¦æä¸ä¸ªMpçå¼ï¼æä¸ä¸ªæ³å¸ä½¿ç¨çæ¯é­æ³ä¸ºä»ä¹è¦æè½éçå­æ®µï¼çº ç»è¿ä¸ªææ¯ï¼å½ä½æ²¡çè§ä¸å°±è¡äºåï¼å®å¨ä¸è¡ï¼ææ¥ä¸ªç»§æ¿ï¼\n\n// æ³å¸æ°å¼\ncalss MageNumeric: Numeric\n{\n    // é­æ³\n    public int Mp;\n    public int MaxMp;\n}\n\n// çè´¼æ°å¼\ncalss RougeNumeric: Numeric\n{\n    // è½é\n    public int Energy;\n    public int MaxEnergy;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n10ä¸ªç§æï¼æ¯ä¸ªç§æ7ï¼8ç§è±éï¼åè¿äºæ°å¼ç±»ç»§æ¿å³ç³»ï¼ä½ å°±å¾æµé¼äºå§ãé¢åå¯¹è±¡æ¯é¾ä»¥éåºè¿ç§çµæ´»çå¤æçéæ±çã\n\nåæ¥ççNumericç±»ï¼æ¯ç§æ°å¼å¯ä¸è½åªè®¾è®¡ä¸ä¸ªå­æ®µï¼æ¯å¦è¯´ï¼ææä¸ªbuffä¼å¢å 10ç¹Speedï¼è¿æç§buffå¢å 50%çspeedï¼é£æè³å°è¿å¾å ä¸ä¸ªäºçº§å±æ§å­æ®µ\n\nclass Numeric\n{\n    // éåº¦æç»å¼\n    public int Speed;\n    // éåº¦åå§å¼\n    public int SpeedInit;\n    // éåº¦å¢å å¼\n    public int SpeedAdd;\n    // éåº¦å¢å ç¾åæ¯å¼\n    public int SpeedPct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nSpeedAddè·SpeedPctæ¹ååï¼è¿è¡ä¸æ¬¡è®¡ç®ï¼å°±å¯ä»¥ç®åºæç»çéåº¦å¼ãbuffåªéè¦å»ä¿®æ¹SpeedAddè·SpeedPctå°±è¡äºã\n\nSpeed = (SpeedInit + SpeedAdd) * (100 + SpeedPct) / 100\n\n\n1\n\n\næ¯ç§å±æ§é½å¯è½æå¥½å ç§é´æ¥å½±åå¼ï¼å¯ä»¥æ³æ³è¿ä¸ªç±»æ¯å¤ä¹åºå¤§ï¼åç¥ä¼°è®¡å¾æ100å¤ä¸ªå­æ®µãéº»ç¦çæ¯è®¡ç®å¬å¼åºæ¬ä¸æ ·ï¼ä½æ¯å°±æ¯æ æ³ç»ä¸æä¸ä¸ªå½æ°ï¼ä¾å¦MaxHpï¼ä¹æbuffå½±å\n\nclass Numeric\n{\n    public int Speed;\n    public int SpeedInit;\n    public int SpeedAdd;\n    public int SpeedPct;\n    \n    public int MaxHp;\n    public int MaxHpInit;\n    public int MaxHpAdd;\n    public int MaxHpPct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nä¹å¾åä¸ªHpçè®¡ç®å¬å¼\n\nMaxHp=(MaxHpInit + MaxHpAdd) * (100  + MaxHpPct) / 100\n\n\n1\n\n\nå åç§å±æ§ï¼å°±è¦åå åéï¼å¹¶ä¸æ¯ä¸ªäºçº§å±æ§æ¹åé½è¦æ­£ç¡®è°ç¨å¯¹åºçå¬å¼è®¡ç®. éå¸¸éº»ç¦ï¼ è¿æ ·è®¾è®¡è¿æä¸ªå¾å¤§çé®é¢ï¼bufféç½®è¡¨å¡«å¯¹åºçå±æ§å­æ®µä¸æ¯å¾å¥½å¡«ï¼ä¾å¦ç¾è·buffï¼å¢å éåº¦50%ï¼ï¼å¨buffè¡¨ä¸­æä¹éç½®æè½è®©ç¨åºç®åçæ¾å°å¹¶æä½SpeedPctå­æ®µå¢ï¼ä¸å¥½æã\n\n\n# ETæ¡æ¶éç¨äºKey Valueå½¢å¼ä¿å­æ°å¼å±æ§\n\nusing System.Collections.Generic;\n\nnamespace Model\n{\n    public enum NumericType\n    {\n\t\tMax = 10000,\n\n\t\tSpeed = 1000,\n\t\tSpeedBase = Speed * 10 + 1,\n\t    SpeedAdd = Speed * 10 + 2,\n\t    SpeedPct = Speed * 10 + 3,\n\t    SpeedFinalAdd = Speed * 10 + 4,\n\t    SpeedFinalPct = Speed * 10 + 5,\n\n\t    Hp = 1001,\n\t    HpBase = Hp * 10 + 1,\n\n\t    MaxHp = 1002,\n\t    MaxHpBase = MaxHp * 10 + 1,\n\t    MaxHpAdd = MaxHp * 10 + 2,\n\t    MaxHpPct = MaxHp * 10 + 3,\n\t    MaxHpFinalAdd = MaxHp * 10 + 4,\n\t\tMaxHpFinalPct = MaxHp * 10 + 5,\n\t}\n\n\tpublic class NumericComponent: Component\n\t{\n\t\tpublic readonly Dictionary<int, int> NumericDic = new Dictionary<int, int>();\n\n\t\tpublic void Awake()\n\t\t{\n\t\t\t// è¿éåå§åbaseå¼\n\t\t}\n\n\t\tpublic float GetAsFloat(NumericType numericType)\n\t\t{\n\t\t\treturn (float)GetByKey((int)numericType) / 10000;\n\t\t}\n\n\t\tpublic int GetAsInt(NumericType numericType)\n\t\t{\n\t\t\treturn GetByKey((int)numericType);\n\t\t}\n\n\t\tpublic void Set(NumericType nt, float value)\n\t\t{\n\t\t\tthis[nt] = (int) (value * 10000);\n\t\t}\n\n\t\tpublic void Set(NumericType nt, int value)\n\t\t{\n\t\t\tthis[nt] = value;\n\t\t}\n\n\t\tpublic int this[NumericType numericType]\n\t\t{\n\t\t\tget\n\t\t\t{\n\t\t\t\treturn this.GetByKey((int) numericType);\n\t\t\t}\n\t\t\tset\n\t\t\t{\n\t\t\t\tint v = this.GetByKey((int) numericType);\n\t\t\t\tif (v == value)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tNumericDic[(int)numericType] = value;\n\n\t\t\t\tUpdate(numericType);\n\t\t\t}\n\t\t}\n\n\t\tprivate int GetByKey(int key)\n\t\t{\n\t\t\tint value = 0;\n\t\t\tthis.NumericDic.TryGetValue(key, out value);\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic void Update(NumericType numericType)\n\t\t{\n\t\t\tif (numericType > NumericType.Max)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tint final = (int) numericType / 10;\n\t\t\tint bas = final * 10 + 1; \n\t\t\tint add = final * 10 + 2;\n\t\t\tint pct = final * 10 + 3;\n\t\t\tint finalAdd = final * 10 + 4;\n\t\t\tint finalPct = final * 10 + 5;\n\n\t\t\t// ä¸ä¸ªæ°å¼å¯è½ä¼å¤ç§æåµå½±åï¼æ¯å¦éåº¦,å ä¸ªbuffå¯è½å¢å éåº¦ç»å¯¹å¼100ï¼ä¹æäºbuffå¢å 10%éåº¦ï¼æä»¥ä¸ä¸ªå¼å¯ä»¥ç±5ä¸ªå¼è¿è¡æ§å¶å¶æç»ç»æ\n\t\t\t// final = (((base + add) * (100 + pct) / 100) + finalAdd) * (100 + finalPct) / 100;\n\t\t\tthis.NumericDic[final] = ((this.GetByKey(bas) + this.GetByKey(add)) * (100 + this.GetByKey(pct)) / 100 + this.GetByKey(finalAdd)) * (100 + this.GetByKey(finalPct)) / 100;\n\t\t\tGame.EventSystem.Run(EventIdType.NumbericChange, this.Entity.Id, numericType, final);\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n\n\n1.æ°å¼é½ç¨key valueæ¥ä¿å­ï¼keyæ¯æ°å¼çç±»åï¼ç±NumericTypeæ¥å®ä¹ï¼valueé½æ¯æ´æ°ï¼floatåä¹å¯ä»¥è½¬ææ´æ°ï¼ä¾å¦ä¹ä»¥1000ï¼key valueä¿å­å±æ§ä¼åå¾éå¸¸çµæ´»ï¼ä¾å¦æ³å¸æ²¡æè½éå±æ§ï¼é£ä¹åå§åæ³å¸å¯¹è±¡ä¸å è½éçkey valueå°±å¥½äºãçè´¼æ²¡ææ³åå¼ï¼æ²¡ææ³æ¯ä¼¤å®³ç­ç­ï¼åå§åå°±ä¸ç¨å è¿äºã\n\n2.é­å½ä¸çä¸­ï¼ä¸ä¸ªæ°å¼ç±5ä¸ªå¼æ¥å½±åï¼å¯ä»¥ç»ä¸ä½¿ç¨ä¸æ¡å¬å¼ï¼\n\nfinal = (((base + add) * (100 + pct) / 100) + finalAdd) * (100 + finalPct) / 100;\n\n\n1\n\n\næ¯å¦è¯´éåº¦å¼speedï¼æä¸ªåå§å¼speedbaseï¼æä¸ªbuff1å¢å 10ç¹ç»å¯¹éåº¦ï¼é£ä¹buff1åå»ºçæ¶åä¼ç»speedaddå 10ï¼buff1å é¤çæ¶åç»speedaddå10ï¼buff2å¢å 20%çéåº¦ï¼é£ä¹buff2åå»ºçæ¶åç»speedpctå 20ï¼buff2å é¤çæ¶åç»speedpctå20.çè³å¯è½æbuff3ï¼ä¼å¨æç»å¼ä¸åå 100%ï¼é£ä¹buff3å°å½±åspeedfinalpctãè¿5ä¸ªå¼åçæ¹åï¼ç»ä¸ä½¿ç¨Updateå½æ°å°±å¯ä»¥éæ°è®¡ç®å¯¹åºçå±æ§äºãbufféç½®ä¸­å¯¹åºæ°å¼å­æ®µç¸å½ç®åï¼bufféç½®ä¸­å¡«ä¸ç¸åºçNumericTypeï¼ç¨åºå¾è½»æ¾å°±è½æä½å¯¹åºçæ°å¼ã\n\n3.å±æ§çæ¹åå¯ä»¥ç»ä¸æåºäºä»¶ç»å¶å®æ¨¡åè®¢éï¼åä¸ä¸ªå±æ§ååçè§å¨åå¾éå¸¸ç®åãä¾å¦æå°±æ¨¡åéè¦å¼åä¸ä¸ªæå°±çå½å¼è¶è¿1000ï¼ä¼è·å¾é¿å¯¿å¤§å¸çæå°±ãé£ä¹å¼åæå°±æ¨¡åçäººå°è®¢éHPçååï¼\n\n\t/// çè§hpæ°å¼åå\n\t[NumericWatcher(NumericType.Hp)]\n\tpublic class NumericWatcher_Hp : INumericWatcher\n\t{\n\t\tpublic void Run(long id, int value)\n\t\t{\n\t\t    if (value > 1000)\n\t\t    {\n\t\t        //è·å¾æå°±é¿å¯¿å¤§å¸æå°±\n\t\t    }\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nåçï¼è®°å½ä¸æ¬¡éå¸ååå¤§äº10000çå¼å¸¸æ¥å¿ç­ç­é½å¯ä»¥è¿æ ·åã\n\næäºè¿ä¸ªæ°å¼ç»ä»¶ï¼ä¸ä¸ªmobaæè½ç³»ç»å¯ä»¥è¯´å·²ç»å®æäºä¸åã\n\nä»£ç å°åï¼https://github.com/egametang/Egametang",normalizedContent:"ç±»ä¼¼é­å½ä¸çï¼mobaè¿ç§æè½æå¶å¤æï¼çµæ´»æ§è¦æ±æé«çæè½ç³»ç»ï¼å¿é¡»éè¦ä¸å¥åå¶çµæ´»çæ°å¼ç»ææ¥æ­éãæ°å¼ç»æè®¾è®¡å¥½äºï¼å®ç°æè½ç³»ç»å°±ä¼éå¸¸ç®åï¼å¦åå°±æ¯ä¸åºç¾é¾ãæ¯å¦é­å½ä¸çï¼ä¸ä¸ªäººç©çæ°å¼å±æ§éå¸¸ä¹å¤ï¼ç§»å¨éåº¦ï¼åéï¼ææ°ï¼è½éï¼éä¸­å¼ï¼é­æ³å¼ï¼è¡éï¼æå¤§è¡éï¼ç©çæ»å»ï¼ç©çé²å¾¡ï¼æ³æ¯æ»å»ï¼æ³æ¯é²å¾¡ï¼ç­ç­å¤è¾¾å åç§ä¹å¤ãå±æ§è·å±æ§ä¹é´åç¸äºå½±åï¼buffåä¼ç»å±æ§å¢å ç»å¯¹å¼ï¼å¢å ç¾åæ¯ï¼æèæç§buffåä¼å¨ç®å®ææçå¢å å¼ä¹ååæ¥ç»ä½ ç¿»ä¸ªåã\n\n\n# æ®éçåæ³:\n\nä¸è¬å°±æ¯åä¸ªæ°å¼ç±»ï¼\n\nclass numeric\n{\n    public int hp;\n    public int maxhp;\n    public int speed;\n    // è½é\n    public int energy;\n    public int maxenergy;\n    // é­æ³\n    public int mp;\n    public int maxmp;\n    .....\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nä»ç»ä¸æ³ï¼æä¸ä¸ªçè´¼ä½¿ç¨çæ¯è½éï¼ä¸ºä»ä¹è¦æä¸ä¸ªmpçå¼ï¼æä¸ä¸ªæ³å¸ä½¿ç¨çæ¯é­æ³ä¸ºä»ä¹è¦æè½éçå­æ®µï¼çº ç»è¿ä¸ªææ¯ï¼å½ä½æ²¡çè§ä¸å°±è¡äºåï¼å®å¨ä¸è¡ï¼ææ¥ä¸ªç»§æ¿ï¼\n\n// æ³å¸æ°å¼\ncalss magenumeric: numeric\n{\n    // é­æ³\n    public int mp;\n    public int maxmp;\n}\n\n// çè´¼æ°å¼\ncalss rougenumeric: numeric\n{\n    // è½é\n    public int energy;\n    public int maxenergy;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n10ä¸ªç§æï¼æ¯ä¸ªç§æ7ï¼8ç§è±éï¼åè¿äºæ°å¼ç±»ç»§æ¿å³ç³»ï¼ä½ å°±å¾æµé¼äºå§ãé¢åå¯¹è±¡æ¯é¾ä»¥éåºè¿ç§çµæ´»çå¤æçéæ±çã\n\nåæ¥ççnumericç±»ï¼æ¯ç§æ°å¼å¯ä¸è½åªè®¾è®¡ä¸ä¸ªå­æ®µï¼æ¯å¦è¯´ï¼ææä¸ªbuffä¼å¢å 10ç¹speedï¼è¿æç§buffå¢å 50%çspeedï¼é£æè³å°è¿å¾å ä¸ä¸ªäºçº§å±æ§å­æ®µ\n\nclass numeric\n{\n    // éåº¦æç»å¼\n    public int speed;\n    // éåº¦åå§å¼\n    public int speedinit;\n    // éåº¦å¢å å¼\n    public int speedadd;\n    // éåº¦å¢å ç¾åæ¯å¼\n    public int speedpct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nspeedaddè·speedpctæ¹ååï¼è¿è¡ä¸æ¬¡è®¡ç®ï¼å°±å¯ä»¥ç®åºæç»çéåº¦å¼ãbuffåªéè¦å»ä¿®æ¹speedaddè·speedpctå°±è¡äºã\n\nspeed = (speedinit + speedadd) * (100 + speedpct) / 100\n\n\n1\n\n\næ¯ç§å±æ§é½å¯è½æå¥½å ç§é´æ¥å½±åå¼ï¼å¯ä»¥æ³æ³è¿ä¸ªç±»æ¯å¤ä¹åºå¤§ï¼åç¥ä¼°è®¡å¾æ100å¤ä¸ªå­æ®µãéº»ç¦çæ¯è®¡ç®å¬å¼åºæ¬ä¸æ ·ï¼ä½æ¯å°±æ¯æ æ³ç»ä¸æä¸ä¸ªå½æ°ï¼ä¾å¦maxhpï¼ä¹æbuffå½±å\n\nclass numeric\n{\n    public int speed;\n    public int speedinit;\n    public int speedadd;\n    public int speedpct;\n    \n    public int maxhp;\n    public int maxhpinit;\n    public int maxhpadd;\n    public int maxhppct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nä¹å¾åä¸ªhpçè®¡ç®å¬å¼\n\nmaxhp=(maxhpinit + maxhpadd) * (100  + maxhppct) / 100\n\n\n1\n\n\nå åç§å±æ§ï¼å°±è¦åå åéï¼å¹¶ä¸æ¯ä¸ªäºçº§å±æ§æ¹åé½è¦æ­£ç¡®è°ç¨å¯¹åºçå¬å¼è®¡ç®. éå¸¸éº»ç¦ï¼ è¿æ ·è®¾è®¡è¿æä¸ªå¾å¤§çé®é¢ï¼bufféç½®è¡¨å¡«å¯¹åºçå±æ§å­æ®µä¸æ¯å¾å¥½å¡«ï¼ä¾å¦ç¾è·buffï¼å¢å éåº¦50%ï¼ï¼å¨buffè¡¨ä¸­æä¹éç½®æè½è®©ç¨åºç®åçæ¾å°å¹¶æä½speedpctå­æ®µå¢ï¼ä¸å¥½æã\n\n\n# etæ¡æ¶éç¨äºkey valueå½¢å¼ä¿å­æ°å¼å±æ§\n\nusing system.collections.generic;\n\nnamespace model\n{\n    public enum numerictype\n    {\n\t\tmax = 10000,\n\n\t\tspeed = 1000,\n\t\tspeedbase = speed * 10 + 1,\n\t    speedadd = speed * 10 + 2,\n\t    speedpct = speed * 10 + 3,\n\t    speedfinaladd = speed * 10 + 4,\n\t    speedfinalpct = speed * 10 + 5,\n\n\t    hp = 1001,\n\t    hpbase = hp * 10 + 1,\n\n\t    maxhp = 1002,\n\t    maxhpbase = maxhp * 10 + 1,\n\t    maxhpadd = maxhp * 10 + 2,\n\t    maxhppct = maxhp * 10 + 3,\n\t    maxhpfinaladd = maxhp * 10 + 4,\n\t\tmaxhpfinalpct = maxhp * 10 + 5,\n\t}\n\n\tpublic class numericcomponent: component\n\t{\n\t\tpublic readonly dictionary<int, int> numericdic = new dictionary<int, int>();\n\n\t\tpublic void awake()\n\t\t{\n\t\t\t// è¿éåå§åbaseå¼\n\t\t}\n\n\t\tpublic float getasfloat(numerictype numerictype)\n\t\t{\n\t\t\treturn (float)getbykey((int)numerictype) / 10000;\n\t\t}\n\n\t\tpublic int getasint(numerictype numerictype)\n\t\t{\n\t\t\treturn getbykey((int)numerictype);\n\t\t}\n\n\t\tpublic void set(numerictype nt, float value)\n\t\t{\n\t\t\tthis[nt] = (int) (value * 10000);\n\t\t}\n\n\t\tpublic void set(numerictype nt, int value)\n\t\t{\n\t\t\tthis[nt] = value;\n\t\t}\n\n\t\tpublic int this[numerictype numerictype]\n\t\t{\n\t\t\tget\n\t\t\t{\n\t\t\t\treturn this.getbykey((int) numerictype);\n\t\t\t}\n\t\t\tset\n\t\t\t{\n\t\t\t\tint v = this.getbykey((int) numerictype);\n\t\t\t\tif (v == value)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnumericdic[(int)numerictype] = value;\n\n\t\t\t\tupdate(numerictype);\n\t\t\t}\n\t\t}\n\n\t\tprivate int getbykey(int key)\n\t\t{\n\t\t\tint value = 0;\n\t\t\tthis.numericdic.trygetvalue(key, out value);\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic void update(numerictype numerictype)\n\t\t{\n\t\t\tif (numerictype > numerictype.max)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tint final = (int) numerictype / 10;\n\t\t\tint bas = final * 10 + 1; \n\t\t\tint add = final * 10 + 2;\n\t\t\tint pct = final * 10 + 3;\n\t\t\tint finaladd = final * 10 + 4;\n\t\t\tint finalpct = final * 10 + 5;\n\n\t\t\t// ä¸ä¸ªæ°å¼å¯è½ä¼å¤ç§æåµå½±åï¼æ¯å¦éåº¦,å ä¸ªbuffå¯è½å¢å éåº¦ç»å¯¹å¼100ï¼ä¹æäºbuffå¢å 10%éåº¦ï¼æä»¥ä¸ä¸ªå¼å¯ä»¥ç±5ä¸ªå¼è¿è¡æ§å¶å¶æç»ç»æ\n\t\t\t// final = (((base + add) * (100 + pct) / 100) + finaladd) * (100 + finalpct) / 100;\n\t\t\tthis.numericdic[final] = ((this.getbykey(bas) + this.getbykey(add)) * (100 + this.getbykey(pct)) / 100 + this.getbykey(finaladd)) * (100 + this.getbykey(finalpct)) / 100;\n\t\t\tgame.eventsystem.run(eventidtype.numbericchange, this.entity.id, numerictype, final);\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n\n\n1.æ°å¼é½ç¨key valueæ¥ä¿å­ï¼keyæ¯æ°å¼çç±»åï¼ç±numerictypeæ¥å®ä¹ï¼valueé½æ¯æ´æ°ï¼floatåä¹å¯ä»¥è½¬ææ´æ°ï¼ä¾å¦ä¹ä»¥1000ï¼key valueä¿å­å±æ§ä¼åå¾éå¸¸çµæ´»ï¼ä¾å¦æ³å¸æ²¡æè½éå±æ§ï¼é£ä¹åå§åæ³å¸å¯¹è±¡ä¸å è½éçkey valueå°±å¥½äºãçè´¼æ²¡ææ³åå¼ï¼æ²¡ææ³æ¯ä¼¤å®³ç­ç­ï¼åå§åå°±ä¸ç¨å è¿äºã\n\n2.é­å½ä¸çä¸­ï¼ä¸ä¸ªæ°å¼ç±5ä¸ªå¼æ¥å½±åï¼å¯ä»¥ç»ä¸ä½¿ç¨ä¸æ¡å¬å¼ï¼\n\nfinal = (((base + add) * (100 + pct) / 100) + finaladd) * (100 + finalpct) / 100;\n\n\n1\n\n\næ¯å¦è¯´éåº¦å¼speedï¼æä¸ªåå§å¼speedbaseï¼æä¸ªbuff1å¢å 10ç¹ç»å¯¹éåº¦ï¼é£ä¹buff1åå»ºçæ¶åä¼ç»speedaddå 10ï¼buff1å é¤çæ¶åç»speedaddå10ï¼buff2å¢å 20%çéåº¦ï¼é£ä¹buff2åå»ºçæ¶åç»speedpctå 20ï¼buff2å é¤çæ¶åç»speedpctå20.çè³å¯è½æbuff3ï¼ä¼å¨æç»å¼ä¸åå 100%ï¼é£ä¹buff3å°å½±åspeedfinalpctãè¿5ä¸ªå¼åçæ¹åï¼ç»ä¸ä½¿ç¨updateå½æ°å°±å¯ä»¥éæ°è®¡ç®å¯¹åºçå±æ§äºãbufféç½®ä¸­å¯¹åºæ°å¼å­æ®µç¸å½ç®åï¼bufféç½®ä¸­å¡«ä¸ç¸åºçnumerictypeï¼ç¨åºå¾è½»æ¾å°±è½æä½å¯¹åºçæ°å¼ã\n\n3.å±æ§çæ¹åå¯ä»¥ç»ä¸æåºäºä»¶ç»å¶å®æ¨¡åè®¢éï¼åä¸ä¸ªå±æ§ååçè§å¨åå¾éå¸¸ç®åãä¾å¦æå°±æ¨¡åéè¦å¼åä¸ä¸ªæå°±çå½å¼è¶è¿1000ï¼ä¼è·å¾é¿å¯¿å¤§å¸çæå°±ãé£ä¹å¼åæå°±æ¨¡åçäººå°è®¢éhpçååï¼\n\n\t/// çè§hpæ°å¼åå\n\t[numericwatcher(numerictype.hp)]\n\tpublic class numericwatcher_hp : inumericwatcher\n\t{\n\t\tpublic void run(long id, int value)\n\t\t{\n\t\t    if (value > 1000)\n\t\t    {\n\t\t        //è·å¾æå°±é¿å¯¿å¤§å¸æå°±\n\t\t    }\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nåçï¼è®°å½ä¸æ¬¡éå¸ååå¤§äº10000çå¼å¸¸æ¥å¿ç­ç­é½å¯ä»¥è¿æ ·åã\n\næäºè¿ä¸ªæ°å¼ç»ä»¶ï¼ä¸ä¸ªmobaæè½ç³»ç»å¯ä»¥è¯´å·²ç»å®æäºä¸åã\n\nä»£ç å°åï¼https://github.com/egametang/egametang",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"6.1AIæ¡æ¶",frontmatter:{title:"6.1AIæ¡æ¶",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/d9bb29/"},regularPath:"/01.%E6%8C%87%E5%8D%97/01.ETBbook_%E4%B8%AD%E6%96%87/61.6.1AI%E6%A1%86%E6%9E%B6.html",relativePath:"01.æå/01.ETBbook_ä¸­æ/61.6.1AIæ¡æ¶.md",key:"v-5d10c0ed",path:"/pages/d9bb29/",headers:[{level:2,title:"1. å ç§AIçè®¾è®¡",slug:"_1-å ç§aiçè®¾è®¡",normalizedTitle:"1. å ç§aiçè®¾è®¡",charIndex:11},{level:3,title:"a. ç¶ææº",slug:"a-ç¶ææº",normalizedTitle:"a. ç¶ææº",charIndex:97},{level:3,title:"b. è¡ä¸ºæ ",slug:"b-è¡ä¸ºæ ",normalizedTitle:"b. è¡ä¸ºæ ",charIndex:529},{level:2,title:"2. æçåæ³",slug:"_2-æçåæ³",normalizedTitle:"2. æçåæ³",charIndex:908}],headersStr:"1. å ç§AIçè®¾è®¡ a. ç¶ææº b. è¡ä¸ºæ  2. æçåæ³",content:"# AIæ¡æ¶\n\n\n# 1. å ç§AIçè®¾è®¡\n\nAIå¨æ¸¸æä¸­å¾å¤ï¼ä½æ¯ä¸ºä»ä¹å¤§å®¶æ»æ¯æè§aiç¼åèµ·æ¥ååå°é¾ï¼æåæ¥æèäºä¸çªï¼ä¸»è¦åå æ¯ä½¿ç¨çæ¹æ³ä¸å½ãä¹åå¤§å®¶ç¼åaiä¸»è¦æå ç§æ¹æ¡ï¼\n\n\n# a. ç¶ææº\n\nææ¯ä¸ç¥éè°æ³åºæ¥è¿ä¸ªåæ³çï¼çæ¯æ ååæ§½ãæ¬æ¥å¯¹è±¡èº«ä¸ä»»ä½æ°æ®é½æ¯ç¶æï¼è¿ç§æ¹æ³åè¦æä¸äºç¶æå®ä¹æä¸ç§æ°çèç¹ï¼å¯¹è±¡èº«ä¸ç¶æååä¼å¼èµ·èç¹ä¹é´çè½¬æ¢ï¼æ§è¡å¯¹åºçæ¹æ³ï¼æ¯å¦OnEnter OnExitç­ç­ãè¿éä»¥æªç©æ¥ä¸¾ä¾ï¼æªç©å¯ä»¥åä¸ºå¤ç§ç¶æï¼å·¡é»ï¼æ»å»ï¼è¿½éï¼è¿åãæªç©çç¶æååæ:\n\nå·¡é»->è¿½é å·¡é»ç¶æåç°è¿å¤ææäººåè¿½éç¶æ\nå·¡é»->æ»å» å·¡é»åç°å¯ä»¥æ»å»æäººåæ»å»ç¶æ\næ»å»->è¿½é æ»å»ç¶æåç°æäººææ®µè·ç¦»äºæ¯å»è¿½é\næ»å»->è¿å æ»å»ç¶æåç°è·ç¦»æäººè¿è¿åè¿åç¶æ\nè¿½é->è¿å è¿½éç¶æåç°è·ç¦»æäººè¿è¿åè¿åç¶æ\n\nå¤ªå¤ç¶æè½¬æ¢äºï¼è¿éææ²¡ææ¼ææå·²ç»é¾ä»¥åç°äºãä¸æ¦èç¹æ´å¤ï¼ä»»ä½ä¸¤ä¸ªèç¹é½å¯è½éè¦è¿æ¥ï¼å°æä¸ºè¶çº§å¤æçç½ç¶ç»æï¼å¤æåº¦æ¯Nçå¹³æ¹çº§ï¼ç»´æ¤èµ·æ¥ååå°é¾ãä¸ºäºè§£å³ç½ç¶ç»æåå¤æçé®é¢äºæ¯ååçº§ä¸ºåå±ç¶ææºç­ç­ãå½ç¶åç§æè¡¥ä¸çæ¹æ³è¿æ¯æ²¡è½è§£å³æ¬è´¨çé®é¢ãç¨ä¸å¥½ç¶ææºä¸æ¯ä½ ä»¬çé®é¢ï¼æ¯ç¶ææºçé®é¢ã\n\n\n# b. è¡ä¸ºæ \n\nå¯è½å¤§å®¶é½è§å¾ç¶ææºè§£å³å¤æaiå®å¨å¤ªå°é¾äºï¼äºæ¯æäººæ³åºäºè¡ä¸ºæ æ¥åaiãè¡ä¸ºæ çaiæ¯ååºå¼aiï¼è¿æ£µæ ä»ä¸å¾ä¸ï¼æèä»å·¦å¾å³æ§è¡ï¼è¿éä»¥ä»ä¸å¾ä¸ä¸¾ä¾ï¼å®éä¸æ¯æactionèç¹æäºä¸ªä¼åçº§ï¼ä¸é¢çactionæåå¤æ­æ¯å¦æ»¡è¶³æ¡ä»¶ï¼æ»¡è¶³åæ§è¡ãè¿éå°±ä¸è¯¦ç»è®²äºãè¡ä¸ºæ çå¤æåº¦æ¯Nï¼æ¯ç¶ææºå¤§å¤§ç®åäºï¼ä½æ¯ä»ç¶å­å¨ä¸å°ç¼ºé·ï¼aiå¤ªå¤æçæ¶åï¼æ ä¼åå¾éå¸¸å¤§ï¼èä¸é¾ä»¥éæãæ¯å¦æä»¬èªå·±é¡¹ç®ï¼è¦åä¸ä¸ªè·äººå·®ä¸å¤çæºå¨äººaiï¼èªå¨åä»»å¡ï¼ææªï¼ç©æ¸¸æä¸­çç³»ç»ï¼è·äººèå¤©ï¼çè³æ»å»å«äººãæ³è±¡ä¸ä¸ï¼è¿é¢æ å°åå¾å¤å¤æï¼è¡ä¸ºæ çå¦å¤ä¸ä¸ªç¼ºé·æ¯æäºactionèç¹æ¯ä¸ªæä¹çè¿ç¨ï¼ä¹å°±æ¯è¯´æ¯ä¸ªåç¨ï¼è¡ä¸ºæ ç®¡çèµ·åç¨èµ·æ¥ä¸å¤ªå¥½å¤çï¼æ¯å¦ä¸é¢çä¾å­ï¼éè¦ç§»å¨å°ç®æ èº«è¾¹ï¼è¿ä¸ªç§»å¨ç©¶ç«æ¯åæåç¨å¢ï¼è¿æ¯æ¯å¸§moveå¢ï¼è¿æ¯ä¸ªé¾é¢ï¼æä¹åé½ä¸èæã\n\n\n# 2. æçåæ³\n\naiæ¯ä»ä¹å¢ï¼å¾ç®ååï¼aiå°±æ¯ä¸åçæ ¹æ®å½åçç¶æï¼æ§è¡ç¸åºçè¡ä¸ºãè®°ä½è¿ä¸¤å¥è¯ï¼å¾éè¦ï¼è¿å°±æ¯aiçæ¬è´¨ï¼è¿ä¸¤å¥è¯åæä¸¤é¨åï¼ä¸æ¯ç¶æå¤æ­ï¼äºæ¯æ§è¡è¡ä¸ºãç¶æå¤æ­å¥½çè§£ï¼è¡ä¸ºæ¯å¥ï¼ä»¥ä¸é¢ç¶ææºçæªç©ä¸¾ä¾å­ï¼æªç©çè¡ä¸ºå°±æ¯ å·¡é»ï¼æ»å»æäººï¼è¿åå·¡é»ç¹ãæ¯å¦ï¼\n\nå·¡é» ï¼å½æªç©å¨å·¡é»èå´åï¼å¨å´æ²¡ææäººï¼éæ©ä¸ä¸ä¸ªå·¡é»ç¹ï¼ç§»å¨ï¼\næ»å»æäºº ï¼å½æªç©åç°è­¦æèå´åææäººï¼å¦ææ»å»è·ç¦»å¤å°±æ»å»ï¼ä¸å¤å°±ç§»å¨è¿å»æ»å»ï¼\nè¿å ï¼å½æªç©åç°ç¦»åºçç¹è¶è¿ä¸å®è·ç¦»ï¼å ä¸æ æbuffï¼å¾åºçç¹ç§»å¨,å°äºåºçç¹ï¼å é¤æ æbuffï¼\n\nè·ç¶ææºä¸ä¸æ ·çæ¯ï¼è¿3ä¸ªç¶æçååå®å¨ä¸å³å¿ä¸ä¸ä¸ªç¶ææ¯å¥ï¼åªå³å¿å½åçæ¡ä»¶æ¯å¦æ»¡è¶³ï¼æ»¡è¶³å°±æ§è¡è¡ä¸ºãè¡ä¸ºå¯è½è½ç¬é´æ§è¡ï¼ä¹å¯è½æ¯ä¸æ®µæç»­çè¿ç¨ï¼æ¯å¦å·¡é»ï¼éä¸ä¸ä¸ªå·¡é»ç¹ç§»å¨è¿å»ï¼èµ°å°äºåéä¸ä¸ªç¹ï¼ä¸åçå¾ªç¯ãæ¯å¦æ»å»æäººï¼å¯è½éè¦ç§»å¨å°ç®æ å»æ»å»ã\n\næä¹è®¾è®¡è¿ä¸ªaiæ¡æ¶å¢ï¼å°è¿éå°±ååç®åäºï¼æ½è±¡åºaièç¹ï¼æ¯ä¸ªèç¹åå«æ¡ä»¶å¤æ­ï¼è·æ§è¡è¡ä¸ºãè¡ä¸ºæ¹æ³åºè¯¥æ¯ä¸ä¸ªåç¨\n\npublic class AINode\n{\n\tpublic virtual bool Check(Unit unit) // æ£æµæ¡ä»¶æ¯å¦æ»¡è¶³\n\t{\t\t\n\t}\n\n\tpublic virtual ETTask Run(Unit unit)\n\t{\t\t\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nè¿ä¸æ­¥æèï¼åå¦æªç©å¨å·¡é»è¿ç¨ä¸­ï¼åç°æäººï¼é£ä¹æªç©åºè¯¥è¦ææ­å½åçå·¡é»ï¼è½¬èå»æ§è¡æ»å»æäººçè¡ä¸ºãå æ­¤æä»¬è¡ä¸ºåºè¯¥éè¦æ¯æè¢«ææ­ï¼ä¹å°±æ¯è¯´è¡ä¸ºåç¨åºè¯¥æ¯æåæ¶ï¼è¿ç¹ç¹å«éè¦æ³¨æï¼è¡ä¸ºRunæ¹æ³ä¸­ä»»ä½åç¨é½è¦æ¯æåæ¶æä½ï¼\n\npublic class AINode\n{\n\tpublic virtual bool Check(Unit unit)\n\t{\t\t\n\t}\n\n\tpublic virtual ETVoid Run(Unit unit, ETCancelToken cancelToken)\n\t{\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nå®ç°ä¸ä¸ªaièç¹ XunLuoNode(å·¡é») GongjiNode(æ»å») FanHuiNode(è¿å)\n\npublic class XunLuoNode: AINode\n{\n\tpublic virtual bool Check(Unit unit)\n\t{\n\t\tif (ä¸å¨å·¡é»èå´)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (å¨å´ææäºº)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic virtual ETVoid Run(Unit unit, ETCancelToken cancelToken)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tVector3 nextPoint = FindNextPoint();\n\t\t\tbool ret = await MoveToAsync(nextPoint, cancelToken); // ç§»å¨å°ç®æ ç¹, è¿åfalseè¡¨ç¤ºåç¨åæ¶\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// åçä¸¤ç§, æ³¨æè¿éè¦è½åæ¶ï¼ä»»ä½åç¨é½è¦è½åæ¶\n\t\t\tbool ret = await TimeComponent.Instance.Wait(2000, cancelToken);\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\nåçå¯ä»¥å®ç°å¦å¤ä¸¤ä¸ªèç¹ãåè®¾è®¡åºèç¹è¿ä¸è¡ï¼è¿éè¦æåä¸ªèç¹ä¸²èµ·æ¥ï¼è¿æ ·aiæè½è½¬å¨\n\nAINode[] aiNodes = {xunLuoNode, gongjiNode, fanHuiNode};\nAINode current;\nETCancelToken cancelToken;\nwhile(true)\n{\n\t// æ¯ç§ä¸­éè¦éæ°å¤æ­æ¯å¦æ»¡è¶³æ°çè¡ä¸ºäºï¼è¿ä¸ªæ¶é´å¯ä»¥èªå·±å®\n\tawait TimeComponent.Instance.Wait(1000);\n\n\tAINode next;\n\tforeach(var node in aiNodes)\n\t{\n\t\tif (node.Check())\n\t\t{\n\t\t\tnext = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (next == null)\n\t{\n\t\tcontinue;\n\t}\n\n\t// å¦æä¸ä¸ä¸ªèç¹è·å½åæ§è¡çèç¹ä¸æ ·ï¼é£ä¹å°±ä¸æ§è¡\n\tif (next == current)\n\t{\n\t\tcontinue;\n\t}\n\n\t// åæ­¢å½ååç¨\n\tcancelToken.Cancel();\n\n\t// æ§è¡ä¸ä¸ä¸ªåç¨\n\tcancelToken = new ETCancelToken();\n\tnext.Run(unit, cancelToken).Coroutine();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\nè¿æ®µä»£ç ååç®åï¼ææå°±æ¯æ¯ç§ééåèç¹ï¼ç´å°æ¾å°ä¸ä¸ªæ»¡è¶³æ¡ä»¶çèç¹å°±æ§è¡ï¼ç­ä¸ä¸ç§åå¤æ­ï¼æ§è¡ä¸ä¸ä¸ªèç¹ä¹åï¼åææ­å½åæ§è¡çåç¨ã å ä¸ªä½¿ç¨è¯¯åº:\n\n 1. è¡ä¸ºä¸­å¦ææåç¨å¿é¡»è½å¤åæ¶ï¼å¹¶ä¸ä¼ å¥cancelTokenï¼å¦åä¼åºå¤§äºï¼å ä¸ºæªç©ä¸æ¦æ»¡è¶³æ§è¡ä¸ä¸ªèç¹ï¼éè¦åæ¶å½ååç¨ã\n 2. è·è¡ä¸ºæ ä¸ç¶ææºä¸åï¼èç¹çä½ç¨åªæ¯ä¸åé»è¾ï¼èç¹å¹¶ä¸éè¦å±äº«ãå±äº«çæ¯åç¨æ¹æ³ï¼æ¯å¦MoveToAsyncï¼æªç©å·¡é»èç¹å¯ä»¥ä½¿ç¨ï¼æªç©æ»å»æäººèç¹ä¸­è¿½å»æäººä¹å¯ä»¥ä½¿ç¨ã\n 3. èç¹å¯ä»¥åçéå¸¸åºå¤§ï¼æ¯å¦èªå¨åä»»å¡èç¹ï¼ç§»å¨å°npcï¼æ¥ä»»å¡ï¼æ ¹æ®ä»»å¡çå­ä»»å¡åå­ä»»å¡ï¼æ¯å¦ç§»å¨å°æªç¹ææªï¼ç§»å¨å°ééç©å»ééç­ç­ï¼åå®ææå­ä»»å¡ï¼ç§»å¨å°äº¤ä»»å¡npcäº¤ä»»å¡ãææçä¸åé½æ¯åå¨ä¸ä¸ªwhileå¾ªç¯ä¸­ï¼å©ç¨åç¨ä¸²èµ·æ¥ã\n\næèä¸ä¸ªå¤§é®é¢ï¼æä¹è®¾è®¡ä¸ä¸ªåæµæºå¨äººå¢ï¼åæµæºå¨äººéè¦åå°ä»ä¹ï¼èªå¨åä»»å¡ï¼èªå¨ç©åç§ç³»ç»ï¼èªå¨æ»å»æäººï¼ä¼åå»ï¼ä¼æ¾äººèå¤©ç­ç­ãæä¸é¢è¯´çæ¯ä¸æ¡åæä¸ä¸ªaièç¹å³å¯ãåå¼ä»¬ï¼AIç®ä¸ç®å?",normalizedContent:"# aiæ¡æ¶\n\n\n# 1. å ç§aiçè®¾è®¡\n\naiå¨æ¸¸æä¸­å¾å¤ï¼ä½æ¯ä¸ºä»ä¹å¤§å®¶æ»æ¯æè§aiç¼åèµ·æ¥ååå°é¾ï¼æåæ¥æèäºä¸çªï¼ä¸»è¦åå æ¯ä½¿ç¨çæ¹æ³ä¸å½ãä¹åå¤§å®¶ç¼åaiä¸»è¦æå ç§æ¹æ¡ï¼\n\n\n# a. ç¶ææº\n\nææ¯ä¸ç¥éè°æ³åºæ¥è¿ä¸ªåæ³çï¼çæ¯æ ååæ§½ãæ¬æ¥å¯¹è±¡èº«ä¸ä»»ä½æ°æ®é½æ¯ç¶æï¼è¿ç§æ¹æ³åè¦æä¸äºç¶æå®ä¹æä¸ç§æ°çèç¹ï¼å¯¹è±¡èº«ä¸ç¶æååä¼å¼èµ·èç¹ä¹é´çè½¬æ¢ï¼æ§è¡å¯¹åºçæ¹æ³ï¼æ¯å¦onenter onexitç­ç­ãè¿éä»¥æªç©æ¥ä¸¾ä¾ï¼æªç©å¯ä»¥åä¸ºå¤ç§ç¶æï¼å·¡é»ï¼æ»å»ï¼è¿½éï¼è¿åãæªç©çç¶æååæ:\n\nå·¡é»->è¿½é å·¡é»ç¶æåç°è¿å¤ææäººåè¿½éç¶æ\nå·¡é»->æ»å» å·¡é»åç°å¯ä»¥æ»å»æäººåæ»å»ç¶æ\næ»å»->è¿½é æ»å»ç¶æåç°æäººææ®µè·ç¦»äºæ¯å»è¿½é\næ»å»->è¿å æ»å»ç¶æåç°è·ç¦»æäººè¿è¿åè¿åç¶æ\nè¿½é->è¿å è¿½éç¶æåç°è·ç¦»æäººè¿è¿åè¿åç¶æ\n\nå¤ªå¤ç¶æè½¬æ¢äºï¼è¿éææ²¡ææ¼ææå·²ç»é¾ä»¥åç°äºãä¸æ¦èç¹æ´å¤ï¼ä»»ä½ä¸¤ä¸ªèç¹é½å¯è½éè¦è¿æ¥ï¼å°æä¸ºè¶çº§å¤æçç½ç¶ç»æï¼å¤æåº¦æ¯nçå¹³æ¹çº§ï¼ç»´æ¤èµ·æ¥ååå°é¾ãä¸ºäºè§£å³ç½ç¶ç»æåå¤æçé®é¢äºæ¯ååçº§ä¸ºåå±ç¶ææºç­ç­ãå½ç¶åç§æè¡¥ä¸çæ¹æ³è¿æ¯æ²¡è½è§£å³æ¬è´¨çé®é¢ãç¨ä¸å¥½ç¶ææºä¸æ¯ä½ ä»¬çé®é¢ï¼æ¯ç¶ææºçé®é¢ã\n\n\n# b. è¡ä¸ºæ \n\nå¯è½å¤§å®¶é½è§å¾ç¶ææºè§£å³å¤æaiå®å¨å¤ªå°é¾äºï¼äºæ¯æäººæ³åºäºè¡ä¸ºæ æ¥åaiãè¡ä¸ºæ çaiæ¯ååºå¼aiï¼è¿æ£µæ ä»ä¸å¾ä¸ï¼æèä»å·¦å¾å³æ§è¡ï¼è¿éä»¥ä»ä¸å¾ä¸ä¸¾ä¾ï¼å®éä¸æ¯æactionèç¹æäºä¸ªä¼åçº§ï¼ä¸é¢çactionæåå¤æ­æ¯å¦æ»¡è¶³æ¡ä»¶ï¼æ»¡è¶³åæ§è¡ãè¿éå°±ä¸è¯¦ç»è®²äºãè¡ä¸ºæ çå¤æåº¦æ¯nï¼æ¯ç¶ææºå¤§å¤§ç®åäºï¼ä½æ¯ä»ç¶å­å¨ä¸å°ç¼ºé·ï¼aiå¤ªå¤æçæ¶åï¼æ ä¼åå¾éå¸¸å¤§ï¼èä¸é¾ä»¥éæãæ¯å¦æä»¬èªå·±é¡¹ç®ï¼è¦åä¸ä¸ªè·äººå·®ä¸å¤çæºå¨äººaiï¼èªå¨åä»»å¡ï¼ææªï¼ç©æ¸¸æä¸­çç³»ç»ï¼è·äººèå¤©ï¼çè³æ»å»å«äººãæ³è±¡ä¸ä¸ï¼è¿é¢æ å°åå¾å¤å¤æï¼è¡ä¸ºæ çå¦å¤ä¸ä¸ªç¼ºé·æ¯æäºactionèç¹æ¯ä¸ªæä¹çè¿ç¨ï¼ä¹å°±æ¯è¯´æ¯ä¸ªåç¨ï¼è¡ä¸ºæ ç®¡çèµ·åç¨èµ·æ¥ä¸å¤ªå¥½å¤çï¼æ¯å¦ä¸é¢çä¾å­ï¼éè¦ç§»å¨å°ç®æ èº«è¾¹ï¼è¿ä¸ªç§»å¨ç©¶ç«æ¯åæåç¨å¢ï¼è¿æ¯æ¯å¸§moveå¢ï¼è¿æ¯ä¸ªé¾é¢ï¼æä¹åé½ä¸èæã\n\n\n# 2. æçåæ³\n\naiæ¯ä»ä¹å¢ï¼å¾ç®ååï¼aiå°±æ¯ä¸åçæ ¹æ®å½åçç¶æï¼æ§è¡ç¸åºçè¡ä¸ºãè®°ä½è¿ä¸¤å¥è¯ï¼å¾éè¦ï¼è¿å°±æ¯aiçæ¬è´¨ï¼è¿ä¸¤å¥è¯åæä¸¤é¨åï¼ä¸æ¯ç¶æå¤æ­ï¼äºæ¯æ§è¡è¡ä¸ºãç¶æå¤æ­å¥½çè§£ï¼è¡ä¸ºæ¯å¥ï¼ä»¥ä¸é¢ç¶ææºçæªç©ä¸¾ä¾å­ï¼æªç©çè¡ä¸ºå°±æ¯ å·¡é»ï¼æ»å»æäººï¼è¿åå·¡é»ç¹ãæ¯å¦ï¼\n\nå·¡é» ï¼å½æªç©å¨å·¡é»èå´åï¼å¨å´æ²¡ææäººï¼éæ©ä¸ä¸ä¸ªå·¡é»ç¹ï¼ç§»å¨ï¼\næ»å»æäºº ï¼å½æªç©åç°è­¦æèå´åææäººï¼å¦ææ»å»è·ç¦»å¤å°±æ»å»ï¼ä¸å¤å°±ç§»å¨è¿å»æ»å»ï¼\nè¿å ï¼å½æªç©åç°ç¦»åºçç¹è¶è¿ä¸å®è·ç¦»ï¼å ä¸æ æbuffï¼å¾åºçç¹ç§»å¨,å°äºåºçç¹ï¼å é¤æ æbuffï¼\n\nè·ç¶ææºä¸ä¸æ ·çæ¯ï¼è¿3ä¸ªç¶æçååå®å¨ä¸å³å¿ä¸ä¸ä¸ªç¶ææ¯å¥ï¼åªå³å¿å½åçæ¡ä»¶æ¯å¦æ»¡è¶³ï¼æ»¡è¶³å°±æ§è¡è¡ä¸ºãè¡ä¸ºå¯è½è½ç¬é´æ§è¡ï¼ä¹å¯è½æ¯ä¸æ®µæç»­çè¿ç¨ï¼æ¯å¦å·¡é»ï¼éä¸ä¸ä¸ªå·¡é»ç¹ç§»å¨è¿å»ï¼èµ°å°äºåéä¸ä¸ªç¹ï¼ä¸åçå¾ªç¯ãæ¯å¦æ»å»æäººï¼å¯è½éè¦ç§»å¨å°ç®æ å»æ»å»ã\n\næä¹è®¾è®¡è¿ä¸ªaiæ¡æ¶å¢ï¼å°è¿éå°±ååç®åäºï¼æ½è±¡åºaièç¹ï¼æ¯ä¸ªèç¹åå«æ¡ä»¶å¤æ­ï¼è·æ§è¡è¡ä¸ºãè¡ä¸ºæ¹æ³åºè¯¥æ¯ä¸ä¸ªåç¨\n\npublic class ainode\n{\n\tpublic virtual bool check(unit unit) // æ£æµæ¡ä»¶æ¯å¦æ»¡è¶³\n\t{\t\t\n\t}\n\n\tpublic virtual ettask run(unit unit)\n\t{\t\t\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nè¿ä¸æ­¥æèï¼åå¦æªç©å¨å·¡é»è¿ç¨ä¸­ï¼åç°æäººï¼é£ä¹æªç©åºè¯¥è¦ææ­å½åçå·¡é»ï¼è½¬èå»æ§è¡æ»å»æäººçè¡ä¸ºãå æ­¤æä»¬è¡ä¸ºåºè¯¥éè¦æ¯æè¢«ææ­ï¼ä¹å°±æ¯è¯´è¡ä¸ºåç¨åºè¯¥æ¯æåæ¶ï¼è¿ç¹ç¹å«éè¦æ³¨æï¼è¡ä¸ºrunæ¹æ³ä¸­ä»»ä½åç¨é½è¦æ¯æåæ¶æä½ï¼\n\npublic class ainode\n{\n\tpublic virtual bool check(unit unit)\n\t{\t\t\n\t}\n\n\tpublic virtual etvoid run(unit unit, etcanceltoken canceltoken)\n\t{\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nå®ç°ä¸ä¸ªaièç¹ xunluonode(å·¡é») gongjinode(æ»å») fanhuinode(è¿å)\n\npublic class xunluonode: ainode\n{\n\tpublic virtual bool check(unit unit)\n\t{\n\t\tif (ä¸å¨å·¡é»èå´)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (å¨å´ææäºº)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic virtual etvoid run(unit unit, etcanceltoken canceltoken)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tvector3 nextpoint = findnextpoint();\n\t\t\tbool ret = await movetoasync(nextpoint, canceltoken); // ç§»å¨å°ç®æ ç¹, è¿åfalseè¡¨ç¤ºåç¨åæ¶\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// åçä¸¤ç§, æ³¨æè¿éè¦è½åæ¶ï¼ä»»ä½åç¨é½è¦è½åæ¶\n\t\t\tbool ret = await timecomponent.instance.wait(2000, canceltoken);\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\nåçå¯ä»¥å®ç°å¦å¤ä¸¤ä¸ªèç¹ãåè®¾è®¡åºèç¹è¿ä¸è¡ï¼è¿éè¦æåä¸ªèç¹ä¸²èµ·æ¥ï¼è¿æ ·aiæè½è½¬å¨\n\nainode[] ainodes = {xunluonode, gongjinode, fanhuinode};\nainode current;\netcanceltoken canceltoken;\nwhile(true)\n{\n\t// æ¯ç§ä¸­éè¦éæ°å¤æ­æ¯å¦æ»¡è¶³æ°çè¡ä¸ºäºï¼è¿ä¸ªæ¶é´å¯ä»¥èªå·±å®\n\tawait timecomponent.instance.wait(1000);\n\n\tainode next;\n\tforeach(var node in ainodes)\n\t{\n\t\tif (node.check())\n\t\t{\n\t\t\tnext = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (next == null)\n\t{\n\t\tcontinue;\n\t}\n\n\t// å¦æä¸ä¸ä¸ªèç¹è·å½åæ§è¡çèç¹ä¸æ ·ï¼é£ä¹å°±ä¸æ§è¡\n\tif (next == current)\n\t{\n\t\tcontinue;\n\t}\n\n\t// åæ­¢å½ååç¨\n\tcanceltoken.cancel();\n\n\t// æ§è¡ä¸ä¸ä¸ªåç¨\n\tcanceltoken = new etcanceltoken();\n\tnext.run(unit, canceltoken).coroutine();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\nè¿æ®µä»£ç ååç®åï¼ææå°±æ¯æ¯ç§ééåèç¹ï¼ç´å°æ¾å°ä¸ä¸ªæ»¡è¶³æ¡ä»¶çèç¹å°±æ§è¡ï¼ç­ä¸ä¸ç§åå¤æ­ï¼æ§è¡ä¸ä¸ä¸ªèç¹ä¹åï¼åææ­å½åæ§è¡çåç¨ã å ä¸ªä½¿ç¨è¯¯åº:\n\n 1. è¡ä¸ºä¸­å¦ææåç¨å¿é¡»è½å¤åæ¶ï¼å¹¶ä¸ä¼ å¥canceltokenï¼å¦åä¼åºå¤§äºï¼å ä¸ºæªç©ä¸æ¦æ»¡è¶³æ§è¡ä¸ä¸ªèç¹ï¼éè¦åæ¶å½ååç¨ã\n 2. è·è¡ä¸ºæ ä¸ç¶ææºä¸åï¼èç¹çä½ç¨åªæ¯ä¸åé»è¾ï¼èç¹å¹¶ä¸éè¦å±äº«ãå±äº«çæ¯åç¨æ¹æ³ï¼æ¯å¦movetoasyncï¼æªç©å·¡é»èç¹å¯ä»¥ä½¿ç¨ï¼æªç©æ»å»æäººèç¹ä¸­è¿½å»æäººä¹å¯ä»¥ä½¿ç¨ã\n 3. èç¹å¯ä»¥åçéå¸¸åºå¤§ï¼æ¯å¦èªå¨åä»»å¡èç¹ï¼ç§»å¨å°npcï¼æ¥ä»»å¡ï¼æ ¹æ®ä»»å¡çå­ä»»å¡åå­ä»»å¡ï¼æ¯å¦ç§»å¨å°æªç¹ææªï¼ç§»å¨å°ééç©å»ééç­ç­ï¼åå®ææå­ä»»å¡ï¼ç§»å¨å°äº¤ä»»å¡npcäº¤ä»»å¡ãææçä¸åé½æ¯åå¨ä¸ä¸ªwhileå¾ªç¯ä¸­ï¼å©ç¨åç¨ä¸²èµ·æ¥ã\n\næèä¸ä¸ªå¤§é®é¢ï¼æä¹è®¾è®¡ä¸ä¸ªåæµæºå¨äººå¢ï¼åæµæºå¨äººéè¦åå°ä»ä¹ï¼èªå¨åä»»å¡ï¼èªå¨ç©åç§ç³»ç»ï¼èªå¨æ»å»æäººï¼ä¼åå»ï¼ä¼æ¾äººèå¤©ç­ç­ãæä¸é¢è¯´çæ¯ä¸æ¡åæä¸ä¸ªaièç¹å³å¯ãåå¼ä»¬ï¼aiç®ä¸ç®å?",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"RunGuide",frontmatter:{title:"RunGuide",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/1e1b9a/"},regularPath:"/02.Guide/01.ETBook_English/02.1.1RunGuide.html",relativePath:"02.Guide/01.ETBook_English/02.1.1RunGuide.md",key:"v-50562bab",path:"/pages/1e1b9a/",headersStr:null,content:'# Run steps\n\n 1. visual studio user instructions.\n    \n    * Versions.\n      * Win10 and above users, use .net6, VS version, must use 2022 and above. Note that VS 2019 does not support .net6 and cannot be used.\n      * Win7 users, can not install VS 2022, need to use .net 5 and VS 2019, but note that additional settings are required to support ET compilation.\n    * Dependencies.\n      * The "Game Development with Unity" extension needs to be installed.\n      * In "Tools-Options-Tools for Unity-General", you need to change the disable full project generation to False in the Miscellaneous section, otherwise it will cause an error in your Codes directory. 2.\n\n 2. To use Rider 2021.2.2 (updated to the latest version), you need to install the following:\n    \n    * Rider\'s Unity plugin\n    * Install .net6\n    * NET SDK 6.0.101 is not fully supported in Rider", but it does not actually affect the compilation (2021.12.21)\n    * 2021.3.x fully supports .net6\n\n 3. master branch requires unity 2020.3 (C#8 syntax is used)\n\n 4. start Unity, menu File -> Open Project... -> Open Select the ET/Unity folder and click on the Select Folder button. 5.\n\n 5. Click on the Unity menu Assets -> Open C# Project to start vs\n\n 6. Run Tools->BuildCode on the Unity menu, this step will compile the client code\n\n 7. Open ET/Client-Server.sln compile with Rider (must compile all project, right click VS solution, compile all) The red reference error is reported here because the Unity library has not been compiled into the Unity/Temp/Debug directory, which is generally ignored, you must ensure that Unity is open, and then just compile the Client-Server directly.Unity.Mono will copy the Unity libraries it depends on into Unity/Temp/Debug. Unity.ModelView UnityHotfix.View will all depend on the libraries under Unity/Temp/Debug. If you still burst red, close vs or rider, open unity first, then Client-Server.sln, then Compile Client-Server\n\nTranslated with www.DeepL.com/Translator (free version)\n\n 1. export table tools, compile the command line into the Bin directory after completion, execute dotnet Tools.dll --AppType=ExcelExporter\n\n 2. export protocol tool, compile and enter Bin directory, execute dotnet Tools.dll --AppType=Proto2CS\n\n 3. start server: dotnet Server.dll --Process=1 --Console=1\n\n 4. Double-click the Init scene in the Scenes directory in Unity and click Play to run it.\n\n\n# Test state synchronization demo\n\n 1. If you want to modify the configuration, go to the Excel directory and modify the corresponding table, do step 6 of the running steps, and then re-run the Server.App project to start the server.\n\n 2. Unity->tools menu->Package Tools, select PC, check whether to package exe, click Start Package, and type a PC package in Release directory.\n\n 3. Run Unity Login Enter the lobby Enter the scene\n\n 4. Run the PC package, log in and enter the lobby\n\n 5. Click the right mouse button to move the character\n\n\n# Cautions.\n\nI. Error causes are.\n\n 1.  Chinese directory.\n 2.  low version of VS\n 3.  Rider does not have the relevant components installed\n 4.  not installed .net6\n 5.  not compile all projects on the server side\n 6.  Rider should be updated to the latest version\n 7.  Unity version is too low\n 8.  Win7 users, no special settings\n 9.  *If there is a dependency problem during the compilation process, it may be due to Unity - External Tools - Generate .csproj files for: When the\n     1. Registry packages\n     2. Build-in packages\n 10. *If the package is missing "StreamingAsset", you can create a new StreamingAsset folder under ET\\Unity\\Assets.',normalizedContent:'# run steps\n\n 1. visual studio user instructions.\n    \n    * versions.\n      * win10 and above users, use .net6, vs version, must use 2022 and above. note that vs 2019 does not support .net6 and cannot be used.\n      * win7 users, can not install vs 2022, need to use .net 5 and vs 2019, but note that additional settings are required to support et compilation.\n    * dependencies.\n      * the "game development with unity" extension needs to be installed.\n      * in "tools-options-tools for unity-general", you need to change the disable full project generation to false in the miscellaneous section, otherwise it will cause an error in your codes directory. 2.\n\n 2. to use rider 2021.2.2 (updated to the latest version), you need to install the following:\n    \n    * rider\'s unity plugin\n    * install .net6\n    * net sdk 6.0.101 is not fully supported in rider", but it does not actually affect the compilation (2021.12.21)\n    * 2021.3.x fully supports .net6\n\n 3. master branch requires unity 2020.3 (c#8 syntax is used)\n\n 4. start unity, menu file -> open project... -> open select the et/unity folder and click on the select folder button. 5.\n\n 5. click on the unity menu assets -> open c# project to start vs\n\n 6. run tools->buildcode on the unity menu, this step will compile the client code\n\n 7. open et/client-server.sln compile with rider (must compile all project, right click vs solution, compile all) the red reference error is reported here because the unity library has not been compiled into the unity/temp/debug directory, which is generally ignored, you must ensure that unity is open, and then just compile the client-server directly.unity.mono will copy the unity libraries it depends on into unity/temp/debug. unity.modelview unityhotfix.view will all depend on the libraries under unity/temp/debug. if you still burst red, close vs or rider, open unity first, then client-server.sln, then compile client-server\n\ntranslated with www.deepl.com/translator (free version)\n\n 1. export table tools, compile the command line into the bin directory after completion, execute dotnet tools.dll --apptype=excelexporter\n\n 2. export protocol tool, compile and enter bin directory, execute dotnet tools.dll --apptype=proto2cs\n\n 3. start server: dotnet server.dll --process=1 --console=1\n\n 4. double-click the init scene in the scenes directory in unity and click play to run it.\n\n\n# test state synchronization demo\n\n 1. if you want to modify the configuration, go to the excel directory and modify the corresponding table, do step 6 of the running steps, and then re-run the server.app project to start the server.\n\n 2. unity->tools menu->package tools, select pc, check whether to package exe, click start package, and type a pc package in release directory.\n\n 3. run unity login enter the lobby enter the scene\n\n 4. run the pc package, log in and enter the lobby\n\n 5. click the right mouse button to move the character\n\n\n# cautions.\n\ni. error causes are.\n\n 1.  chinese directory.\n 2.  low version of vs\n 3.  rider does not have the relevant components installed\n 4.  not installed .net6\n 5.  not compile all projects on the server side\n 6.  rider should be updated to the latest version\n 7.  unity version is too low\n 8.  win7 users, no special settings\n 9.  *if there is a dependency problem during the compilation process, it may be due to unity - external tools - generate .csproj files for: when the\n     1. registry packages\n     2. build-in packages\n 10. *if the package is missing "streamingasset", you can create a new streamingasset folder under et\\unity\\assets.',charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Why use .net core",frontmatter:{title:"Why use .net core",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/f9f601/"},regularPath:"/02.Guide/01.ETBook_English/12.1.2Why%20use%20.net%20core.html",relativePath:"02.Guide/01.ETBook_English/12.1.2Why use .net core.md",key:"v-640dd7dc",path:"/pages/f9f601/",headers:[{level:6,title:"1. Stability of the language (fatal)",slug:"_1-stability-of-the-language-fatal",normalizedTitle:"1. stability of the language (fatal)",charIndex:681},{level:6,title:"2. Runtime hot more (fatal)",slug:"_2-runtime-hot-more-fatal",normalizedTitle:"2. runtime hot more (fatal)",charIndex:885},{level:6,title:"3. Availability of concurrent process support (5 stars importance)",slug:"_3-availability-of-concurrent-process-support-5-stars-importance",normalizedTitle:"3. availability of concurrent process support (5 stars importance)",charIndex:1186},{level:6,title:"4. Compilation speed (5 stars in importance)",slug:"_4-compilation-speed-5-stars-in-importance",normalizedTitle:"4. compilation speed (5 stars in importance)",charIndex:1602},{level:6,title:"5. Cross-platform (4 stars)",slug:"_5-cross-platform-4-stars",normalizedTitle:"5. cross-platform (4 stars)",charIndex:1799},{level:6,title:"6. Readability, refactorability (3 stars)",slug:"_6-readability-refactorability-3-stars",normalizedTitle:"6. readability, refactorability (3 stars)",charIndex:2133},{level:6,title:"7. Whether the library is complete, whether the ecology is perfect (3 stars)",slug:"_7-whether-the-library-is-complete-whether-the-ecology-is-perfect-3-stars",normalizedTitle:"7. whether the library is complete, whether the ecology is perfect (3 stars)",charIndex:2258},{level:6,title:"8. Unified language with the client (3 stars)",slug:"_8-unified-language-with-the-client-3-stars",normalizedTitle:"8. unified language with the client (3 stars)",charIndex:2419},{level:6,title:"9. IDE support (3 stars)",slug:"_9-ide-support-3-stars",normalizedTitle:"9. ide support (3 stars)",charIndex:2743},{level:6,title:"10. Language performance (1 star)",slug:"_10-language-performance-1-star",normalizedTitle:"10. language performance (1 star)",charIndex:2886}],headersStr:"1. Stability of the language (fatal) 2. Runtime hot more (fatal) 3. Availability of concurrent process support (5 stars importance) 4. Compilation speed (5 stars in importance) 5. Cross-platform (4 stars) 6. Readability, refactorability (3 stars) 7. Whether the library is complete, whether the ecology is perfect (3 stars) 8. Unified language with the client (3 stars) 9. IDE support (3 stars) 10. Language performance (1 star)",content:"# Why use C# .net core for server-side?\n\nGame server side from the early single service to distributed, the development is more and more complex, the stability, development efficiency requirements are more and more high. The choice of development language has also gradually changed, from C to C++ to C++ + PYTHON or C++ + LUA, and now many companies are using erlang, go, java, c#. At present, it is a blossoming situation.\n\nBut if you were to redo an online game server, without considering the compatibility with the company or what is already there, how would you choose? I thought carefully about this issue, there are probably several aspects of this need to consider: 1.\n\n# 1. Stability of the language (fatal)\n\nThe game server is characterized by high load and low latency. So generally the server-side process is with state, once hung means data loss, this is intolerable.\n\n# 2. Runtime hot more (fatal)\n\nThe game server logic is extremely complex and prone to bugs, but it can't be stopped often, so hot shifts to fix bugs are necessary. If a bug occurs, the developer can write code immediately and then fix it with a hot-change, which is not felt by online users at all.\n\n# 3. Availability of concurrent process support (5 stars importance)\n\nWith distributed server architecture, there is bound to be a lot of interaction between processes. Since it is difficult to split the game logic into multiple threads, it is generally single-threaded logic. If there is no concurrent support, a large number of callbacks are bound to be generated and code maintenance will become very difficult.\n\n# 4. Compilation speed (5 stars in importance)\n\nIn c++ development, 30% of the time is wasted on compilation. If compilation is fast or not needed, it will greatly improve development efficiency.\n\n# 5. Cross-platform (4 stars)\n\nGenerally the game server is set up on linux. But the usual development, the use of windows will be more convenient, if cross-platform, development and testing efficiency will be greatly improved, and do not need to get a separate development machine, the local computer can meet the usual development\n\n# 6. Readability, refactorability (3 stars)\n\nThe code can be reconstructed to greatly reduce the difficulty of writing code\n\n# 7. Whether the library is complete, whether the ecology is perfect (3 stars)\n\nLibrary is complete, ecological good, you need to build their own wheel is less\n\n# 8. Unified language with the client (3 stars)\n\nClient-server shared language, the advantages are very obvious, many codes can be reused, logic programmers no longer need to distinguish between the front and back end, both ends can write, a person can complete a function, greatly reducing the time cost of communication.\n\n# 9. IDE support (3 stars)\n\nCode hints, refactoring and other support, excellent IDE can improve the development efficiency by several times.\n\n# 10. Language performance (1 star)\n\nCurrently server performance is not too much of a problem, but good performance is better than poor performance.\n\nLANGUAGES                  C#                  C/C++               JAVA            GO                  LUA              PYTHON           ERLANG\nStability                  Stability           Easy to hang        Stability       Stability           Stability        Stability        Stability\nSupport                    Harder to support   Support             Not support     Support             Support          Support          Support\nCross-Platform             Support             Harder to Support   Support         Harder to Support   Support          Support          Support\nSupport                    Support             Support             Support         Support             Support          Support          Support\nCompilation speed          fast                slow                fast            fast                no compilation   no compilation   no compilation\nGood                       Fair                Good                Fair            Poor                Poor             Poor             \nGame Library and Ecology   Good                Good                Average         Average             Poor             Good             Average\nUnity                      Unity, UE4          Not available       Not available   Unity, UE4          UE4              Not available    Unity, UE4\nIDE Support                Good                Good                Average         Poor                Poor             Poor             \nLanguage performance       Good                Very good           Good            Good                Poor             Very poor        Poor\n\nAs you can see from the table. 1:\n\n 1. C/C++ has poor stability, slow compilation speed, and fatal flaws\n 2. Go does not support hot changes, does not support generics, poor reconfigurability, can not share code with the client, a fatal flaw\n 3. poor support for Java concurrency, unable to share code with the client\n 4. Lua has few libraries, poor performance, poor code readability and reconfigurability, cross-platform dependence on C/C++, troublesome to handle, and poor ide support\n 5. Python poor performance, poor code readability and reconfigurability, unable to share code with clients, poor ide support\n 6. Erlang performance is poor, functional style is not easy to get started, ide support is poor\n 7. C# .net core is very good in every convenience, but can't share code with UE4\n\nCurrently Unity is the hottest game engine, C# server with Unity is a perfect match, basically can not find defects.",normalizedContent:"# why use c# .net core for server-side?\n\ngame server side from the early single service to distributed, the development is more and more complex, the stability, development efficiency requirements are more and more high. the choice of development language has also gradually changed, from c to c++ to c++ + python or c++ + lua, and now many companies are using erlang, go, java, c#. at present, it is a blossoming situation.\n\nbut if you were to redo an online game server, without considering the compatibility with the company or what is already there, how would you choose? i thought carefully about this issue, there are probably several aspects of this need to consider: 1.\n\n# 1. stability of the language (fatal)\n\nthe game server is characterized by high load and low latency. so generally the server-side process is with state, once hung means data loss, this is intolerable.\n\n# 2. runtime hot more (fatal)\n\nthe game server logic is extremely complex and prone to bugs, but it can't be stopped often, so hot shifts to fix bugs are necessary. if a bug occurs, the developer can write code immediately and then fix it with a hot-change, which is not felt by online users at all.\n\n# 3. availability of concurrent process support (5 stars importance)\n\nwith distributed server architecture, there is bound to be a lot of interaction between processes. since it is difficult to split the game logic into multiple threads, it is generally single-threaded logic. if there is no concurrent support, a large number of callbacks are bound to be generated and code maintenance will become very difficult.\n\n# 4. compilation speed (5 stars in importance)\n\nin c++ development, 30% of the time is wasted on compilation. if compilation is fast or not needed, it will greatly improve development efficiency.\n\n# 5. cross-platform (4 stars)\n\ngenerally the game server is set up on linux. but the usual development, the use of windows will be more convenient, if cross-platform, development and testing efficiency will be greatly improved, and do not need to get a separate development machine, the local computer can meet the usual development\n\n# 6. readability, refactorability (3 stars)\n\nthe code can be reconstructed to greatly reduce the difficulty of writing code\n\n# 7. whether the library is complete, whether the ecology is perfect (3 stars)\n\nlibrary is complete, ecological good, you need to build their own wheel is less\n\n# 8. unified language with the client (3 stars)\n\nclient-server shared language, the advantages are very obvious, many codes can be reused, logic programmers no longer need to distinguish between the front and back end, both ends can write, a person can complete a function, greatly reducing the time cost of communication.\n\n# 9. ide support (3 stars)\n\ncode hints, refactoring and other support, excellent ide can improve the development efficiency by several times.\n\n# 10. language performance (1 star)\n\ncurrently server performance is not too much of a problem, but good performance is better than poor performance.\n\nlanguages                  c#                  c/c++               java            go                  lua              python           erlang\nstability                  stability           easy to hang        stability       stability           stability        stability        stability\nsupport                    harder to support   support             not support     support             support          support          support\ncross-platform             support             harder to support   support         harder to support   support          support          support\nsupport                    support             support             support         support             support          support          support\ncompilation speed          fast                slow                fast            fast                no compilation   no compilation   no compilation\ngood                       fair                good                fair            poor                poor             poor             \ngame library and ecology   good                good                average         average             poor             good             average\nunity                      unity, ue4          not available       not available   unity, ue4          ue4              not available    unity, ue4\nide support                good                good                average         poor                poor             poor             \nlanguage performance       good                very good           good            good                poor             very poor        poor\n\nas you can see from the table. 1:\n\n 1. c/c++ has poor stability, slow compilation speed, and fatal flaws\n 2. go does not support hot changes, does not support generics, poor reconfigurability, can not share code with the client, a fatal flaw\n 3. poor support for java concurrency, unable to share code with the client\n 4. lua has few libraries, poor performance, poor code readability and reconfigurability, cross-platform dependence on c/c++, troublesome to handle, and poor ide support\n 5. python poor performance, poor code readability and reconfigurability, unable to share code with clients, poor ide support\n 6. erlang performance is poor, functional style is not easy to get started, ide support is poor\n 7. c# .net core is very good in every convenience, but can't share code with ue4\n\ncurrently unity is the hottest game engine, c# server with unity is a perfect match, basically can not find defects.",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"CSharp Coroutine",frontmatter:{title:"CSharp Coroutine",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/97d2cf/"},regularPath:"/02.Guide/01.ETBook_English/21.2.1CSharp%20Coroutine.html",relativePath:"02.Guide/01.ETBook_English/21.2.1CSharp Coroutine.md",key:"v-17cedb24",path:"/pages/97d2cf/",headersStr:null,content:'# What is a concurrent thread\n\nSpeaking of concurrency, let\'s first understand what is asynchronous. Asynchronous simply means that I want to initiate a call, but the called party (may be other threads, or may be IO) will take some time to produce the result, and I don\'t want the call to block the entire thread of the caller, so I pass a callback function to the called party, and the called party will call back this callback function after it finishes running to notify the caller to continue The callback function will notify the caller to continue execution. As an example:\nIn the following code, the main thread keeps looping, sleep 1 millisecond per loop, add one to the count, and print once every 10,000 times.\n\n        private static void Main()\n        {\n            int loopCount = 0;\n            while (true)\n            {\n                int temp = watcherValue;\n                \n                Thread.Sleep(1);\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nAt this point I need to add a function, at the beginning of the program, I want to print the value of loopCount after 5 seconds. Seeing that after 5 seconds we can think of the Sleep method, which will block the thread for a certain amount of time and then continue execution. We obviously can\'t Sleep in the main thread because it would break the logic of printing once every 10000 counts.\n\n    // example2_1\n    class Program\n    {\n        private static int loopCount = 0;\n\n        private static void Main()\n        {\n            OneThreadSynchronizationContext _ = OneThreadSynchronizationContext.Instance;\n            \n            WaitTimeAsync(5000, WaitTimeFinishCallback);\n            \n            while (true)\n            {\n                OneThreadSynchronizationContext.Instance.Update();\n                \n                Thread.Sleep(1);\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n\n        private static void WaitTimeAsync(int waitTime, Action action)\n        {\n            Thread thread = new Thread(()=>WaitTime(waitTime, action));\n            thread.Start();\n        }\n        \n        private static void WaitTimeFinishCallback()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCount value is: {loopCount}");\n        }\n\n        /// <summary>\n        /// Waiting in another thread\n        /// </summary>\n        private static void WaitTime(int waitTime, Action action)\n        {\n            Thread.Sleep(waitTime);\n            \n            // Throw the action back to the main thread for execution\n            OneThreadSynchronizationContext.Instance.Post((o)=>action(), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\nWe have designed a WaitTimeAsync method here. WaitTimeAsync is actually a typical asynchronous method that initiates a call from the main thread, passes in a WaitTimeFinishCallback method as an argument, opens a thread, and after the thread Sleeps for a certain amount of time, throws the passed callback back to the main thread for execution. OneThreadSynchronizationContext is a cross-thread queue, any thread can throw delegates into it, the Update method of OneThreadSynchronizationContext is called in the main thread and will take out these delegates and put them into the main thread for execution. Why does the callback method need to be thrown back to the main thread for execution? Because the loopCount is read in the callback method, and the loopCount is also read and written in the main thread, so either add a lock or always ensure that it is only read and written in the main thread. It is a bad practice to add locks, and having locks all over the code makes it difficult to read and maintain, and it is easy to create multi-threaded bugs. this is a common technique in multi-threaded development to package the logic into a delegate and throw it back to another thread.\n\nWe may have a new requirement, after the execution of WaitTimeFinishCallback is finished, we want to wait for 3 seconds and print the loopCount again.\n\n        private static void WaitTimeAsync(int waitTime, Action action)\n        {\n            Thread thread = new Thread(()=>WaitTime(waitTime, action));\n            thread.Start();\n        }\n        private static void WaitTimeFinishCallback()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCount value is: {loopCount}");\n            WaitTimeAsync(3000, WaitTimeFinishCallback2);\n        }\n        \n        private static void WaitTimeFinishCallback2()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCount value is: {loopCount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nWe may also change the requirement at this point, we need to print the loopCount 5 seconds after the program starts, then 4 seconds after, then 3 seconds after, that is, insert another 3 seconds wait in the middle of the above logic.\n\n        private static void WaitTimeAsync(int waitTime, Action action)\n        {\n            Thread thread = new Thread(()=>WaitTime(waitTime, action));\n            thread.Start();\n        }\n        \n        private static void WaitTimeFinishCallback()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCount value is: {loopCount}");\n            WaitTimeAsync(4000, WaitTimeFinishCallback3);\n        }\n        \n        private static void WaitTimeFinishCallback3()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCount value is: {loopCount}");\n            WaitTimeAsync(3000, WaitTimeFinishCallback2);\n        }\n        \n        private static void WaitTimeFinishCallback2()\n        {\n            Console.WriteLine($"WaitTimeAsync finsih loopCount value is: {loopCount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\nThis inserts a piece of code in the middle, which seems very cumbersome. Here you can answer what is a concurrent process, in fact this string of callbacks is a concurrent process.',normalizedContent:'# what is a concurrent thread\n\nspeaking of concurrency, let\'s first understand what is asynchronous. asynchronous simply means that i want to initiate a call, but the called party (may be other threads, or may be io) will take some time to produce the result, and i don\'t want the call to block the entire thread of the caller, so i pass a callback function to the called party, and the called party will call back this callback function after it finishes running to notify the caller to continue the callback function will notify the caller to continue execution. as an example:\nin the following code, the main thread keeps looping, sleep 1 millisecond per loop, add one to the count, and print once every 10,000 times.\n\n        private static void main()\n        {\n            int loopcount = 0;\n            while (true)\n            {\n                int temp = watchervalue;\n                \n                thread.sleep(1);\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nat this point i need to add a function, at the beginning of the program, i want to print the value of loopcount after 5 seconds. seeing that after 5 seconds we can think of the sleep method, which will block the thread for a certain amount of time and then continue execution. we obviously can\'t sleep in the main thread because it would break the logic of printing once every 10000 counts.\n\n    // example2_1\n    class program\n    {\n        private static int loopcount = 0;\n\n        private static void main()\n        {\n            onethreadsynchronizationcontext _ = onethreadsynchronizationcontext.instance;\n            \n            waittimeasync(5000, waittimefinishcallback);\n            \n            while (true)\n            {\n                onethreadsynchronizationcontext.instance.update();\n                \n                thread.sleep(1);\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n\n        private static void waittimeasync(int waittime, action action)\n        {\n            thread thread = new thread(()=>waittime(waittime, action));\n            thread.start();\n        }\n        \n        private static void waittimefinishcallback()\n        {\n            console.writeline($"waittimeasync finsih loopcount value is: {loopcount}");\n        }\n\n        /// <summary>\n        /// waiting in another thread\n        /// </summary>\n        private static void waittime(int waittime, action action)\n        {\n            thread.sleep(waittime);\n            \n            // throw the action back to the main thread for execution\n            onethreadsynchronizationcontext.instance.post((o)=>action(), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\nwe have designed a waittimeasync method here. waittimeasync is actually a typical asynchronous method that initiates a call from the main thread, passes in a waittimefinishcallback method as an argument, opens a thread, and after the thread sleeps for a certain amount of time, throws the passed callback back to the main thread for execution. onethreadsynchronizationcontext is a cross-thread queue, any thread can throw delegates into it, the update method of onethreadsynchronizationcontext is called in the main thread and will take out these delegates and put them into the main thread for execution. why does the callback method need to be thrown back to the main thread for execution? because the loopcount is read in the callback method, and the loopcount is also read and written in the main thread, so either add a lock or always ensure that it is only read and written in the main thread. it is a bad practice to add locks, and having locks all over the code makes it difficult to read and maintain, and it is easy to create multi-threaded bugs. this is a common technique in multi-threaded development to package the logic into a delegate and throw it back to another thread.\n\nwe may have a new requirement, after the execution of waittimefinishcallback is finished, we want to wait for 3 seconds and print the loopcount again.\n\n        private static void waittimeasync(int waittime, action action)\n        {\n            thread thread = new thread(()=>waittime(waittime, action));\n            thread.start();\n        }\n        private static void waittimefinishcallback()\n        {\n            console.writeline($"waittimeasync finsih loopcount value is: {loopcount}");\n            waittimeasync(3000, waittimefinishcallback2);\n        }\n        \n        private static void waittimefinishcallback2()\n        {\n            console.writeline($"waittimeasync finsih loopcount value is: {loopcount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nwe may also change the requirement at this point, we need to print the loopcount 5 seconds after the program starts, then 4 seconds after, then 3 seconds after, that is, insert another 3 seconds wait in the middle of the above logic.\n\n        private static void waittimeasync(int waittime, action action)\n        {\n            thread thread = new thread(()=>waittime(waittime, action));\n            thread.start();\n        }\n        \n        private static void waittimefinishcallback()\n        {\n            console.writeline($"waittimeasync finsih loopcount value is: {loopcount}");\n            waittimeasync(4000, waittimefinishcallback3);\n        }\n        \n        private static void waittimefinishcallback3()\n        {\n            console.writeline($"waittimeasync finsih loopcount value is: {loopcount}");\n            waittimeasync(3000, waittimefinishcallback2);\n        }\n        \n        private static void waittimefinishcallback2()\n        {\n            console.writeline($"waittimeasync finsih loopcount value is: {loopcount}");\n        }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\nthis inserts a piece of code in the middle, which seems very cumbersome. here you can answer what is a concurrent process, in fact this string of callbacks is a concurrent process.',charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Better Coroutine",frontmatter:{title:"Better Coroutine",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/e03bce/"},regularPath:"/02.Guide/01.ETBook_English/22.2.2Better%20Coroutine.html",relativePath:"02.Guide/01.ETBook_English/22.2.2Better Coroutine.md",key:"v-58f5998e",path:"/pages/e03bce/",headersStr:null,content:'# Better Coroutine\n\nThe above article talks about how a string of callbacks is a concurrent process, and obviously writing code this way, adding logic and inserting logic is very error prone. We need to use asynchronous syntax to change the form of this asynchronous callback to a synchronous form, fortunately C# has been designed for us, see the code\n\n    // example2_2\n    class Program\n    {\n        private static int loopCount = 0;\n        \n        static void Main(string[] args)\n        {\n            OneThreadSynchronizationContext _ = OneThreadSynchronizationContext.Instance;\n\n            Console.WriteLine($"Main Thread: {Thread.CurrentThread.ManagedThreadId}");\n            \n            Crontine();\n            \n            while (true)\n            {\n                OneThreadSynchronizationContext.Instance.Update();\n                \n                Thread.Sleep(1);\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n\n        private static async void Crontine()\n        {\n            await WaitTimeAsync(5000);\n            Console.WriteLine($"Current thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCount\'s value is: {loopCount}");\n            await WaitTimeAsync(4000);\n            Console.WriteLine($"Current Thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih The value of loopCount is: {loopCount}");\n            await WaitTimeAsync(3000);\n            Console.WriteLine($"Current Thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih The value of loopCount is: {loopCount}");\n        }\n        \n        private static Task WaitTimeAsync(int waitTime)\n        {\n            TaskCompletionSource<bool> tcs = new TaskCompletionSource<bool>();\n            Thread thread = new Thread(()=>WaitTime(waitTime, tcs));\n            thread.Start();\n            return tcs.Task;\n        }\n        \n        /// <summary>\n        /// Waiting in another thread\n        /// </summary>\n        private static void WaitTime(int waitTime, TaskCompletionSource<bool> tcs)\n        {\n            Thread.Sleep(waitTime);\n            \n            // throw tcs back to the main thread for execution\n            OneThreadSynchronizationContext.Instance.Post(o=>tcs.SetResult(true), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n\n\nIn this code, in the WaitTimeAsync method, we use the TaskCompletionSource class instead of the previously passed Action parameter, and the WaitTimeAsync method returns a Task type result. waitTime we replace action() with tcs. SetResult(true), and the WaitTimeAsync method uses the await keyword in front of it, so that the sequence of callbacks can be changed to a synchronized form. This makes the code look very simple and much easier to develop.\n\nHere is another trick, we found that WaitTime needs to throw tcs.SetResult back to the main thread for execution, Microsoft gives us a simple way to set up the synchronization context in the main thread by referring to example2_2_2\n\n// example2_2_2\nSynchronizationContext.SetSynchronizationContext(OneThreadSynchronizationContext.Instance);\n\n\n1\n2\n\n\nSetResult(true) will be called directly in WaitTime, the callback will be automatically thrown to the synchronization context, and the synchronization context we can take out in the main thread to execute the callback, so automatically able to complete the operation back to the main thread\n\n        private static void WaitTime(int waitTime, TaskCompletionSource<bool> tcs)\n        {\n            Thread.Sleep(waitTime);\n\n            tcs.SetResult(true);\n        }\n\n\n1\n2\n3\n4\n5\n6\n\n\nIf you do not set the synchronization context, you will find that the printout of the current thread is not the main thread, which is also the use of many third-party libraries and . In fact, I think this design is not necessary, to the library developers to achieve better, especially in the game development, logic is all single-threaded, callback every time you go through the synchronization context is redundant, so the ET framework provides the implementation of ETTask does not use the synchronization context, the code is more concise and efficient, which will be discussed later.',normalizedContent:'# better coroutine\n\nthe above article talks about how a string of callbacks is a concurrent process, and obviously writing code this way, adding logic and inserting logic is very error prone. we need to use asynchronous syntax to change the form of this asynchronous callback to a synchronous form, fortunately c# has been designed for us, see the code\n\n    // example2_2\n    class program\n    {\n        private static int loopcount = 0;\n        \n        static void main(string[] args)\n        {\n            onethreadsynchronizationcontext _ = onethreadsynchronizationcontext.instance;\n\n            console.writeline($"main thread: {thread.currentthread.managedthreadid}");\n            \n            crontine();\n            \n            while (true)\n            {\n                onethreadsynchronizationcontext.instance.update();\n                \n                thread.sleep(1);\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n\n        private static async void crontine()\n        {\n            await waittimeasync(5000);\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcount\'s value is: {loopcount}");\n            await waittimeasync(4000);\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih the value of loopcount is: {loopcount}");\n            await waittimeasync(3000);\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih the value of loopcount is: {loopcount}");\n        }\n        \n        private static task waittimeasync(int waittime)\n        {\n            taskcompletionsource<bool> tcs = new taskcompletionsource<bool>();\n            thread thread = new thread(()=>waittime(waittime, tcs));\n            thread.start();\n            return tcs.task;\n        }\n        \n        /// <summary>\n        /// waiting in another thread\n        /// </summary>\n        private static void waittime(int waittime, taskcompletionsource<bool> tcs)\n        {\n            thread.sleep(waittime);\n            \n            // throw tcs back to the main thread for execution\n            onethreadsynchronizationcontext.instance.post(o=>tcs.setresult(true), null);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n\n\nin this code, in the waittimeasync method, we use the taskcompletionsource class instead of the previously passed action parameter, and the waittimeasync method returns a task type result. waittime we replace action() with tcs. setresult(true), and the waittimeasync method uses the await keyword in front of it, so that the sequence of callbacks can be changed to a synchronized form. this makes the code look very simple and much easier to develop.\n\nhere is another trick, we found that waittime needs to throw tcs.setresult back to the main thread for execution, microsoft gives us a simple way to set up the synchronization context in the main thread by referring to example2_2_2\n\n// example2_2_2\nsynchronizationcontext.setsynchronizationcontext(onethreadsynchronizationcontext.instance);\n\n\n1\n2\n\n\nsetresult(true) will be called directly in waittime, the callback will be automatically thrown to the synchronization context, and the synchronization context we can take out in the main thread to execute the callback, so automatically able to complete the operation back to the main thread\n\n        private static void waittime(int waittime, taskcompletionsource<bool> tcs)\n        {\n            thread.sleep(waittime);\n\n            tcs.setresult(true);\n        }\n\n\n1\n2\n3\n4\n5\n6\n\n\nif you do not set the synchronization context, you will find that the printout of the current thread is not the main thread, which is also the use of many third-party libraries and . in fact, i think this design is not necessary, to the library developers to achieve better, especially in the game development, logic is all single-threaded, callback every time you go through the synchronization context is redundant, so the et framework provides the implementation of ettask does not use the synchronization context, the code is more concise and efficient, which will be discussed later.',charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Single-threaded asynchronous",frontmatter:{title:"Single-threaded asynchronous",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/735741/"},regularPath:"/02.Guide/01.ETBook_English/23.2.3Single-threaded%20asynchronous.html",relativePath:"02.Guide/01.ETBook_English/23.2.3Single-threaded asynchronous.md",key:"v-4ed835a8",path:"/pages/735741/",headersStr:null,content:'# Single-threaded asynchronous\n\nThe previous examples are multi-threaded implementations of asynchrony, but asynchrony is obviously not just multi-threaded. We used Sleep in the previous examples to achieve time waiting, each timer needs to use a thread, which will lead to frequent thread switching, this implementation is very inefficient, usually will not do so. General game logic will design a single-threaded timer, we do a simple implementation here, used to explain single-threaded asynchronous.\n\n    // example2_3\n    class Program\n    {\n        private static int loopCount = 0;\n\n        private static long time;\n        private static Action action;\n        \n        static void Main(string[] args)\n        {\n            Console.WriteLine($"Main thread: {Thread.CurrentThread.ManagedThreadId}");\n\n            Crontine();\n            \n            while (true)\n            {\n                Thread.Sleep(1);\n\n                CheckTimerOut();\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n        \n        private static void Crontine()\n        {\n            WaitTimeAsync(5000, WaitTimeAsyncCallback1);\n        }\n\n        private static void WaitTimeAsyncCallback1()\n        {\n            Console.WriteLine($"Current thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCount\'s value is: {loopCount}");\n            WaitTimeAsync(4000, WaitTimeAsyncCallback2);\n        }\n        \n        private static void WaitTimeAsyncCallback2()\n        {\n            Console.WriteLine($"Current thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCount\'s value is: {loopCount}");\n            WaitTimeAsync(3000, WaitTimeAsyncCallback3);\n        }\n        \n        private static void WaitTimeAsyncCallback3()\n        {\n            Console.WriteLine($"Current thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCount\'s value is: {loopCount}");\n        }\n\n        private static void CheckTimerOut()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowTicks = DateTime.Now.Ticks / 10000;\n            if (time > nowTicks)\n            { return; }\n                return;\n            }\n\n            time = 0;\n            action.Invoke();\n        }\n        \n        private static void WaitTimeAsync(int waitTime, Action a)\n        {\n            Ticks / 10000 + waitTime;\n            action = a;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n\n\nThis example also implements a simple timing method, WaitTimeAsync will be called to record the callback method and time, the main thread will call CheckTimerOut every frame, CheckTimerOut inside to determine whether the timer is expired, expired then callback method is called. The whole logic is done in the main thread, also asynchronously. So asynchronous is not multi-threaded, single-threaded can also be asynchronous. The above example can be changed to await as well.\n\n    // example2_3_2\n    class Program\n    {\n        private static int loopCount = 0;\n\n        private static long time;\n        private static TaskCompletionSource<bool> tcs;\n        \n        static void Main(string[] args)\n        {\n            Console.WriteLine($"Main thread: {Thread.CurrentThread.ManagedThreadId}");\n\n            Crontine();\n            \n            while (true)\n            {\n                Thread.Sleep(1);\n\n                CheckTimerOut();\n                \n                ++loopCount;\n                if (loopCount % 10000 == 0)\n                {\n                    Console.WriteLine($"loop count: {loopCount}");\n                }\n            }\n        }\n        \n        private static async void Crontine()\n        {\n            await WaitTimeAsync(5000);\n            Console.WriteLine($"Current thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih loopCount\'s value is: {loopCount}");\n            await WaitTimeAsync(4000);\n            Console.WriteLine($"Current Thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih The value of loopCount is: {loopCount}");\n            await WaitTimeAsync(3000);\n            Console.WriteLine($"Current Thread: {Thread.CurrentThread.ManagedThreadId}, WaitTimeAsync finsih The value of loopCount is: {loopCount}");\n        }\n\n        private static void CheckTimerOut()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowTicks = DateTime.Now.Ticks / 10000;\n            if (time > nowTicks)\n            { return; }\n                return;\n            }\n\n            time = 0;\n            tcs.SetResult(true);\n        }\n        \n        private static Task WaitTimeAsync(int waitTime)\n        {\n            TaskCompletionSource<bool> t = new TaskCompletionSource<bool>();\n            Time = DateTime.Now.Ticks / 10000 + waitTime;\n            tcs = t;\n            return t.Task;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n\n\nThe above example all calls are done in the main thread and use await, so await does not open multithreading, await specific use of multithreading depends entirely on the specific implementation',normalizedContent:'# single-threaded asynchronous\n\nthe previous examples are multi-threaded implementations of asynchrony, but asynchrony is obviously not just multi-threaded. we used sleep in the previous examples to achieve time waiting, each timer needs to use a thread, which will lead to frequent thread switching, this implementation is very inefficient, usually will not do so. general game logic will design a single-threaded timer, we do a simple implementation here, used to explain single-threaded asynchronous.\n\n    // example2_3\n    class program\n    {\n        private static int loopcount = 0;\n\n        private static long time;\n        private static action action;\n        \n        static void main(string[] args)\n        {\n            console.writeline($"main thread: {thread.currentthread.managedthreadid}");\n\n            crontine();\n            \n            while (true)\n            {\n                thread.sleep(1);\n\n                checktimerout();\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n        \n        private static void crontine()\n        {\n            waittimeasync(5000, waittimeasynccallback1);\n        }\n\n        private static void waittimeasynccallback1()\n        {\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcount\'s value is: {loopcount}");\n            waittimeasync(4000, waittimeasynccallback2);\n        }\n        \n        private static void waittimeasynccallback2()\n        {\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcount\'s value is: {loopcount}");\n            waittimeasync(3000, waittimeasynccallback3);\n        }\n        \n        private static void waittimeasynccallback3()\n        {\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcount\'s value is: {loopcount}");\n        }\n\n        private static void checktimerout()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowticks = datetime.now.ticks / 10000;\n            if (time > nowticks)\n            { return; }\n                return;\n            }\n\n            time = 0;\n            action.invoke();\n        }\n        \n        private static void waittimeasync(int waittime, action a)\n        {\n            ticks / 10000 + waittime;\n            action = a;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n\n\nthis example also implements a simple timing method, waittimeasync will be called to record the callback method and time, the main thread will call checktimerout every frame, checktimerout inside to determine whether the timer is expired, expired then callback method is called. the whole logic is done in the main thread, also asynchronously. so asynchronous is not multi-threaded, single-threaded can also be asynchronous. the above example can be changed to await as well.\n\n    // example2_3_2\n    class program\n    {\n        private static int loopcount = 0;\n\n        private static long time;\n        private static taskcompletionsource<bool> tcs;\n        \n        static void main(string[] args)\n        {\n            console.writeline($"main thread: {thread.currentthread.managedthreadid}");\n\n            crontine();\n            \n            while (true)\n            {\n                thread.sleep(1);\n\n                checktimerout();\n                \n                ++loopcount;\n                if (loopcount % 10000 == 0)\n                {\n                    console.writeline($"loop count: {loopcount}");\n                }\n            }\n        }\n        \n        private static async void crontine()\n        {\n            await waittimeasync(5000);\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih loopcount\'s value is: {loopcount}");\n            await waittimeasync(4000);\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih the value of loopcount is: {loopcount}");\n            await waittimeasync(3000);\n            console.writeline($"current thread: {thread.currentthread.managedthreadid}, waittimeasync finsih the value of loopcount is: {loopcount}");\n        }\n\n        private static void checktimerout()\n        {\n            if (time == 0)\n            {\n                return;\n            }\n            long nowticks = datetime.now.ticks / 10000;\n            if (time > nowticks)\n            { return; }\n                return;\n            }\n\n            time = 0;\n            tcs.setresult(true);\n        }\n        \n        private static task waittimeasync(int waittime)\n        {\n            taskcompletionsource<bool> t = new taskcompletionsource<bool>();\n            time = datetime.now.ticks / 10000 + waittime;\n            tcs = t;\n            return t.task;\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n\n\nthe above example all calls are done in the main thread and use await, so await does not open multithreading, await specific use of multithreading depends entirely on the specific implementation',charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"The powerful MongoBson library",frontmatter:{title:"The powerful MongoBson library",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/947d76/"},regularPath:"/02.Guide/01.ETBook_English/32.3.2The%20powerful%20MongoBson%20library.html",relativePath:"02.Guide/01.ETBook_English/32.3.2The powerful MongoBson library.md",key:"v-3bf5446e",path:"/pages/947d76/",headers:[{level:3,title:"1. Support serialization deserialization into json or bson",slug:"_1-support-serialization-deserialization-into-json-or-bson",normalizedTitle:"1. support serialization deserialization into json or bson",charIndex:2566},{level:3,title:"2. Some fields can be ignored",slug:"_2-some-fields-can-be-ignored",normalizedTitle:"2. some fields can be ignored",charIndex:4256},{level:3,title:"3. Support for default values and taking aliases",slug:"_3-support-for-default-values-and-taking-aliases",normalizedTitle:"3. support for default values and taking aliases",charIndex:4733},{level:3,title:"4. Upgrade version support",slug:"_4-upgrade-version-support",normalizedTitle:"4. upgrade version support",charIndex:5395},{level:3,title:"5. Support for complex inheritance structures",slug:"_5-support-for-complex-inheritance-structures",normalizedTitle:"5. support for complex inheritance structures",charIndex:5967},{level:3,title:"6. ISupportInitialize interface",slug:"_6-isupportinitialize-interface",normalizedTitle:"6. isupportinitialize interface",charIndex:7499}],headersStr:"1. Support serialization deserialization into json or bson 2. Some fields can be ignored 3. Support for default values and taking aliases 4. Upgrade version support 5. Support for complex inheritance structures 6. ISupportInitialize interface",content:'# The powerful MongoBson library\n\nBack-end development, statistics about these scenarios need to use serialization: 1.\n\n 1. object clone by serialization deserialization\n 2. server-side database storage data, binary\n 3. distributed server-side, multi-process messages, binary\n 4. back-end logs, text format\n 5. various server-side configuration files, text format\n\nThere are very, very many C# serialization libraries, protobuf, json and so on. But these serialization libraries should not be readable and small for all scenarios. protobuf does not support complex object structures (cannot use inheritance) and is suitable for messages, but not for database storage and log formats. json is suitable for log formats, but is too big for network messages and data storage. We certainly want a library that can satisfy all the above scenarios for the following reasons.\n\n 1. you think about one day your configuration file needs to be saved in the database, you do not need to do the format conversion, the back-end directly to the configuration message sent by the front-end to save to the database, which can not reduce very many errors?\n 2. one day some server-side configuration files do not use the file format, need to be placed in the database, again, only a few lines of code to complete the migration.\n 3. one day the back-end server crash, you need to scan the logs for data recovery, the logs for deserialization into C# objects, one by one for processing, and then into objects saved to the database is complete.\n 4. objects saved in the database, you can directly see the text content, you can do a variety of SQL-like operations\n 5. Imagine a scenario where a configuration text object, deserialized into memory, sent via network messages, and stored in the database. The whole process is done in one go.\n\nSimply put, it reduces various data conversions, reduces code, improves development efficiency, and improves maintainability. MongoDB library can serialize both text and BSON binary format, and MongoDB itself is a very much used database in the game. Its support features are as follows.\n\n 1. support complex inheritance structure\n 2. support for ignoring certain fields serialization\n 3. support field default values\n 4. structure with extra fields can still be deserialized, which is very useful for multi-version protocols\n 5. support for ISupportInitialize interface, this is a godsend when deserialization\n 6. support for text json and binary bson serialization\n 7. MongoDB database support\n\nA brief introduction to the mongo bson library\n\n\n# 1. Support serialization deserialization into json or bson\n\n    public sealed class Player\n    {\n        public long Id;\n\n        public string Account { get; private set; }\n\n        public long UnitId { get; set; }\n    }\n\n    Player player1 = new Player() { Id = 1 };\n    string json = player1.ToJson();\n    Console.WriteLine($"player1 to json: {json}");\n    Console.WriteLine($"player to bson: {player.ToBson().ToHex()}");\n    // output:\n    // player to json: { "_id" : NumberLong(1), "C" : [], "Account" : null, "UnitId" : NumberLong(0) }\n    // player to bson: B000000125F69640001000000000000000A4163636F756E740012556E69744964000000000000000000000000\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nNote that mongo\'s json is a bit different from the standard json, if you want to use the standard json, you can pass in a JsonWriterSettings object and restrict the use of JsonOutputMode.Strict mode\n\n    // use standard json\n    Player player2 = new Player() { Id = 1 };\n    Console.WriteLine($"player to json: {player2.ToJson(new JsonWriterSettings() {OutputMode = JsonOutputMode.Strict})}");\n    // player to json: { "_id" : 1, "C" : [], "Account" : null, "UnitId" : 0 }\n\n\n1\n2\n3\n4\n\n\nDeserialize json:\n\n            // deserialize json\n        Player player11 = BsonSerializer.Deserialize<Player>(json);\n        Console.WriteLine($"player11 to json: {player11.ToJson()}");\n\n\n1\n2\n3\n\n\nDeserialize bson:\n\n    // deserialize bson\n    using (MemoryStream memoryStream = new MemoryStream(bson))\n    {\n        Player player12 = (Player) BsonSerializer.Deserialize(memoryStream, typeof (Player));\n        Console.WriteLine($"player12 to json: {player12.ToJson()}");\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 2. Some fields can be ignored\n\n[BsonIgnore] This tag is used to disable field serialization.\n\n\tpublic sealed class Player\n\t{\n        public long Id;\n\n\t\t[BsonIgnore]\n\t\tpublic string Account { get; private set; }\n\t\t\n\t\tpublic long UnitId { get; set; }\n    }\n\n    Player player = new Player() { Id = 2, UnitId = 3, Account = "panda"};\n\tConsole.WriteLine($"player to json: {player.ToJson()}");\n    // player to json: { "_id" : 2, "UnitId" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# 3. Support for default values and taking aliases\n\nThe [BsonElement] field with this tag will serialize even private fields (only public fields are serialized by default), and the tag can take a string parameter to assign an alias to the field serialization.\n\n\tpublic sealed class Player\n\t{\n        public long Id;\n\n\t\tpublic string Account { get; private set; }\n\n\t\t[BsonElement("UId")]\n\t\tpublic long UnitId { get; set; }\n    }\n    Player player = new Player() { Id = 2, UnitId = 3, Account = "panda"};\n\tConsole.WriteLine($"player to json: {player.ToJson()}");\n    // player to json: { "_id" : 2, "Account" : "panda", "UId" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# 4. Upgrade version support\n\n[BsonIgnoreExtraElements] This tag is used on top of class, used to ignore extra fields when deserializing, general version compatibility needs to be considered, low version of the protocol needs to be able to deserialize otherwise the new version adds fields, the old version structure deserialization will be wrong\n\n\t[BsonIgnoreExtraElements]\n\tpublic sealed class Player\n\tpublic\n        public long Id;\n\n\t\tpublic string Account { get; private set; }\n\n\t\t[BsonElement("UId")\n\t\tpublic long UnitId { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 5. Support for complex inheritance structures\n\nThe power of the mongo bson library is that it fully supports serialization deserialization inheritance structures. Note that inheritance deserialization requires registration of all parent classes, and there are two ways to do this. a. You can declare the inherited subclasses on top of the parent class using the [BsonKnownTypes] tag, so that mongo will automatically register them, e.g.:\n\n    [BsonKnownTypes(typeof(Entity))]\n    public class Component\n    {\n    }\n    [BsonKnownTypes(typeof(Player))]\n    public class Entity: Component\n    {\n    }\n    public sealed class Player: Entity\n    {\n        public long Id;\n        \n        public string Account { get; set; }\n\t\t\n        public long UnitId { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nThis is flawed because the framework doesn\'t know what subclasses a class will have, and this is invasive to the framework code, and we want to uncouple this . You can scan the assembly for the types of all subclass parents and register them with the mongo driver\n\n\t\t\tType[] types = typeof(Game).Assembly.GetTypes();\n\t\t\tforeach (Type type in types)\n\t\t\t{\n\t\t\t\tif (!type.IsSubclassOf(typeof(Component))))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tBsonClassMap.LookupClassMap(type);\n\t\t\t}\n\n\t\t\tBsonSerializer.RegisterSerializer(new EnumSerializer<NumericType>(BsonType.String));\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nThis completely automates the registration and the user does not need to relate whether the class is registered or not.\n\n\n# 6. ISupportInitialize interface\n\nmongo bson deserialization supports an ISupportInitialize interface, ISupportInitialize has two methods\n\n    public interface ISupportInitialize\n    {\n        void BeginInit();\n        void EndInit();\n    }\n\n\n1\n2\n3\n4\n5\n\n\nBeginInit is called before deserialization and EndInit is called after deserialization. This interface is very useful now to perform some operations after deserialization. For example\n\n\t[BsonIgnoreExtraElements]\n\tpublic class InnerConfig: AConfigComponent\n\t{\n\t\t[BsonIgnore]\n\t\tpublic IPEndPoint IPEndPoint { get; private set; }\n\t\t\n\t\tpublic string Address { get; set; }\n\n\t\tpublic override void EndInit()\n\t\t{\n\t\t\tthis.IPEndPoint = NetworkHelper.ToIPEndPoint(this.Address);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nInnerConfig is the configuration of the process inner network address in ET. Since IPEndPoint is not very configurable, we can configure it as a string and then convert the string to IPEndPoint in EndInit when deserializing. I also added this call to the protobuf deserialization method, refer to ProtobufHelper.cs, ET\'s protobuf because to support ilruntime, so remove the map support, if we want a map how to do? Here I gave the generated code are done, the proto messages are changed to a partial class, so that we can extend the class themselves, for example.\n\nmessage UnitInfo\n{\n\tint64 UnitId = 1;\n\n\tfloat X = 2;\n\tfloat Y = 3;\n\tfloat Z = 4;\n}\n\n// protobuf\nmessage G2C_EnterMap // IResponse\n{\n\tint32 RpcId = 90;\n\tint32 Error = 91;\n\tstring Message = 92;\n\t// own unit id\n\tint64 UnitId = 1;\n\t// all the units\n\trepeated UnitInfo Units = 2;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nThis network message has a repeated UnitInfo field, which is actually an array in protobuf, which is not very convenient to use, I want to convert it to a Dictionary<Int64, UnitInfo> field, we can do something like this\n\n    public partial class G2C_EnterMap: ISupportInitialize\n    {\n        public Dictionary<Int64, UnitInfo> unitsDict = new Dictionary<long, UnitInfo>();\n        \n        public void BeginInit()\n        {\n        }\n\n        public void EndInit()\n        {\n            foreach (var unit in this.Units)\n            {\n                this.unitsDict.Add(unit.UnitId, unit);\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nThe message is extended by such a piece of code, and after deserialization, it is automatically converted into a Dictionary.',normalizedContent:'# the powerful mongobson library\n\nback-end development, statistics about these scenarios need to use serialization: 1.\n\n 1. object clone by serialization deserialization\n 2. server-side database storage data, binary\n 3. distributed server-side, multi-process messages, binary\n 4. back-end logs, text format\n 5. various server-side configuration files, text format\n\nthere are very, very many c# serialization libraries, protobuf, json and so on. but these serialization libraries should not be readable and small for all scenarios. protobuf does not support complex object structures (cannot use inheritance) and is suitable for messages, but not for database storage and log formats. json is suitable for log formats, but is too big for network messages and data storage. we certainly want a library that can satisfy all the above scenarios for the following reasons.\n\n 1. you think about one day your configuration file needs to be saved in the database, you do not need to do the format conversion, the back-end directly to the configuration message sent by the front-end to save to the database, which can not reduce very many errors?\n 2. one day some server-side configuration files do not use the file format, need to be placed in the database, again, only a few lines of code to complete the migration.\n 3. one day the back-end server crash, you need to scan the logs for data recovery, the logs for deserialization into c# objects, one by one for processing, and then into objects saved to the database is complete.\n 4. objects saved in the database, you can directly see the text content, you can do a variety of sql-like operations\n 5. imagine a scenario where a configuration text object, deserialized into memory, sent via network messages, and stored in the database. the whole process is done in one go.\n\nsimply put, it reduces various data conversions, reduces code, improves development efficiency, and improves maintainability. mongodb library can serialize both text and bson binary format, and mongodb itself is a very much used database in the game. its support features are as follows.\n\n 1. support complex inheritance structure\n 2. support for ignoring certain fields serialization\n 3. support field default values\n 4. structure with extra fields can still be deserialized, which is very useful for multi-version protocols\n 5. support for isupportinitialize interface, this is a godsend when deserialization\n 6. support for text json and binary bson serialization\n 7. mongodb database support\n\na brief introduction to the mongo bson library\n\n\n# 1. support serialization deserialization into json or bson\n\n    public sealed class player\n    {\n        public long id;\n\n        public string account { get; private set; }\n\n        public long unitid { get; set; }\n    }\n\n    player player1 = new player() { id = 1 };\n    string json = player1.tojson();\n    console.writeline($"player1 to json: {json}");\n    console.writeline($"player to bson: {player.tobson().tohex()}");\n    // output:\n    // player to json: { "_id" : numberlong(1), "c" : [], "account" : null, "unitid" : numberlong(0) }\n    // player to bson: b000000125f69640001000000000000000a4163636f756e740012556e69744964000000000000000000000000\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nnote that mongo\'s json is a bit different from the standard json, if you want to use the standard json, you can pass in a jsonwritersettings object and restrict the use of jsonoutputmode.strict mode\n\n    // use standard json\n    player player2 = new player() { id = 1 };\n    console.writeline($"player to json: {player2.tojson(new jsonwritersettings() {outputmode = jsonoutputmode.strict})}");\n    // player to json: { "_id" : 1, "c" : [], "account" : null, "unitid" : 0 }\n\n\n1\n2\n3\n4\n\n\ndeserialize json:\n\n            // deserialize json\n        player player11 = bsonserializer.deserialize<player>(json);\n        console.writeline($"player11 to json: {player11.tojson()}");\n\n\n1\n2\n3\n\n\ndeserialize bson:\n\n    // deserialize bson\n    using (memorystream memorystream = new memorystream(bson))\n    {\n        player player12 = (player) bsonserializer.deserialize(memorystream, typeof (player));\n        console.writeline($"player12 to json: {player12.tojson()}");\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 2. some fields can be ignored\n\n[bsonignore] this tag is used to disable field serialization.\n\n\tpublic sealed class player\n\t{\n        public long id;\n\n\t\t[bsonignore]\n\t\tpublic string account { get; private set; }\n\t\t\n\t\tpublic long unitid { get; set; }\n    }\n\n    player player = new player() { id = 2, unitid = 3, account = "panda"};\n\tconsole.writeline($"player to json: {player.tojson()}");\n    // player to json: { "_id" : 2, "unitid" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# 3. support for default values and taking aliases\n\nthe [bsonelement] field with this tag will serialize even private fields (only public fields are serialized by default), and the tag can take a string parameter to assign an alias to the field serialization.\n\n\tpublic sealed class player\n\t{\n        public long id;\n\n\t\tpublic string account { get; private set; }\n\n\t\t[bsonelement("uid")]\n\t\tpublic long unitid { get; set; }\n    }\n    player player = new player() { id = 2, unitid = 3, account = "panda"};\n\tconsole.writeline($"player to json: {player.tojson()}");\n    // player to json: { "_id" : 2, "account" : "panda", "uid" : 3 }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# 4. upgrade version support\n\n[bsonignoreextraelements] this tag is used on top of class, used to ignore extra fields when deserializing, general version compatibility needs to be considered, low version of the protocol needs to be able to deserialize otherwise the new version adds fields, the old version structure deserialization will be wrong\n\n\t[bsonignoreextraelements]\n\tpublic sealed class player\n\tpublic\n        public long id;\n\n\t\tpublic string account { get; private set; }\n\n\t\t[bsonelement("uid")\n\t\tpublic long unitid { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 5. support for complex inheritance structures\n\nthe power of the mongo bson library is that it fully supports serialization deserialization inheritance structures. note that inheritance deserialization requires registration of all parent classes, and there are two ways to do this. a. you can declare the inherited subclasses on top of the parent class using the [bsonknowntypes] tag, so that mongo will automatically register them, e.g.:\n\n    [bsonknowntypes(typeof(entity))]\n    public class component\n    {\n    }\n    [bsonknowntypes(typeof(player))]\n    public class entity: component\n    {\n    }\n    public sealed class player: entity\n    {\n        public long id;\n        \n        public string account { get; set; }\n\t\t\n        public long unitid { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nthis is flawed because the framework doesn\'t know what subclasses a class will have, and this is invasive to the framework code, and we want to uncouple this . you can scan the assembly for the types of all subclass parents and register them with the mongo driver\n\n\t\t\ttype[] types = typeof(game).assembly.gettypes();\n\t\t\tforeach (type type in types)\n\t\t\t{\n\t\t\t\tif (!type.issubclassof(typeof(component))))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tbsonclassmap.lookupclassmap(type);\n\t\t\t}\n\n\t\t\tbsonserializer.registerserializer(new enumserializer<numerictype>(bsontype.string));\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nthis completely automates the registration and the user does not need to relate whether the class is registered or not.\n\n\n# 6. isupportinitialize interface\n\nmongo bson deserialization supports an isupportinitialize interface, isupportinitialize has two methods\n\n    public interface isupportinitialize\n    {\n        void begininit();\n        void endinit();\n    }\n\n\n1\n2\n3\n4\n5\n\n\nbegininit is called before deserialization and endinit is called after deserialization. this interface is very useful now to perform some operations after deserialization. for example\n\n\t[bsonignoreextraelements]\n\tpublic class innerconfig: aconfigcomponent\n\t{\n\t\t[bsonignore]\n\t\tpublic ipendpoint ipendpoint { get; private set; }\n\t\t\n\t\tpublic string address { get; set; }\n\n\t\tpublic override void endinit()\n\t\t{\n\t\t\tthis.ipendpoint = networkhelper.toipendpoint(this.address);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\ninnerconfig is the configuration of the process inner network address in et. since ipendpoint is not very configurable, we can configure it as a string and then convert the string to ipendpoint in endinit when deserializing. i also added this call to the protobuf deserialization method, refer to protobufhelper.cs, et\'s protobuf because to support ilruntime, so remove the map support, if we want a map how to do? here i gave the generated code are done, the proto messages are changed to a partial class, so that we can extend the class themselves, for example.\n\nmessage unitinfo\n{\n\tint64 unitid = 1;\n\n\tfloat x = 2;\n\tfloat y = 3;\n\tfloat z = 4;\n}\n\n// protobuf\nmessage g2c_entermap // iresponse\n{\n\tint32 rpcid = 90;\n\tint32 error = 91;\n\tstring message = 92;\n\t// own unit id\n\tint64 unitid = 1;\n\t// all the units\n\trepeated unitinfo units = 2;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nthis network message has a repeated unitinfo field, which is actually an array in protobuf, which is not very convenient to use, i want to convert it to a dictionary<int64, unitinfo> field, we can do something like this\n\n    public partial class g2c_entermap: isupportinitialize\n    {\n        public dictionary<int64, unitinfo> unitsdict = new dictionary<long, unitinfo>();\n        \n        public void begininit()\n        {\n        }\n\n        public void endinit()\n        {\n            foreach (var unit in this.units)\n            {\n                this.unitsdict.add(unit.unitid, unit);\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nthe message is extended by such a piece of code, and after deserialization, it is automatically converted into a dictionary.',charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Everything is Entity",frontmatter:{title:"Everything is Entity",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/b631b2/"},regularPath:"/02.Guide/01.ETBook_English/33.3.3Everything%20is%20Entity.html",relativePath:"02.Guide/01.ETBook_English/33.3.3Everything is Entity.md",key:"v-49b0f2aa",path:"/pages/b631b2/",headers:[{level:3,title:"1. Component creation",slug:"_1-component-creation",normalizedTitle:"1. component creation",charIndex:3569},{level:3,title:"2. Release of components",slug:"_2-release-of-components",normalizedTitle:"2. release of components",charIndex:4295},{level:3,title:"3. Role of InstanceId",slug:"_3-role-of-instanceid",normalizedTitle:"3. role of instanceid",charIndex:4850}],headersStr:"1. Component creation 2. Release of components 3. Role of InstanceId",content:"# Everything is Entity\n\nThe ECS design is very popular right now, mainly because of the success of Watchtower, which has led to the explosion of this technology. The most important design of ECS is the complete separation of logic and data. That is, EC is pure data, System is actually logic, by data-driven logic. What does data-driven logic mean? It is very simple to detect data changes through Update and subscribe to data changes through the event mechanism, which is called data-driven. Other features such as cache hits are not too important in writing logic, modern games are scripted, even the performance of the script can tolerate how will care about cache hits that performance improvement?\n\nFor example, in order to reuse, the data must be split into very small particles, which will lead to a very large number of components. But the game is developed cooperatively by multiple people, each person is basically only familiar with their own modules, which may end up causing a large number of redundant components. Another problem is that the common ECS is flat, with only one layer of Entity and Component. It is like a company, the biggest is the boss, the boss with hundreds of people under him, the boss can not know all the people, to complete a task, the boss can not pick out the people they need. A reasonable approach is to have several managers under the boss, several supervisors under each manager, and several workers under each supervisor, so as to form a tree-like management structure that is easy to manage. This is similar to the ET approach, where Entity can manage Component, Component can manage Entity, and even Component can mount Component. e.g. a person is composed of head, body, hands, feet, and the head is composed of eyes, ears, nose, mouth.\n\n    Head head = human.AddComponent<Head>();\n    head.AddComponent<Eye>();\n    head.AddComponent<Mouse>();\n    AddComponent<Nose>();\n    AddComponent<Ear>();\n    human.AddComponent<Body>();\n    AddComponent<Hand>();\n    human.AddComponent<Leg>();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nIn ET, all data is Entity, including Entity, and Entity can be used either as a component or as a child of other Entity. Generic data is placed on Entity as a member, and less generic data can be hung on Entity as a component. For example, the design of items, all items have fields configured id, quantity, level, these fields are not necessary to make components, put on Entity will be more convenient to use.\n\n    class Item: Entity\n    {\n        // The configuration Id of the props\n        public int ConfigId { get; set; }\n        // The number of props\n        public int Count { get; set; }\n        // The level of the props\n        public int Level { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nThis design data of ET is a kind of tree structure, very hierarchical and can understand the whole game architecture very easily. Scene, and the data of different modules are mounted on top of Game. Scene, and each module can mount a lot of data under itself. You don't have to think too much about how to design the classes, where to put the data, whether mounting here will lead to redundancy, etc. for each new feature. For example, if my player needs to do a prop system, I can design an ItemsComponent to be mounted on the Player, and I need to develop a SpellComponent to be mounted on the Player for skills. If the whole service needs to do an activity, get an activity component to hang on top of the Game. This design will be very easy to assign tasks and very modular.\n\n\n# Some details of the component\n\n\n# 1. Component creation\n\nComponentFactory provides three methods to create components Create, CreateWithParent, CreateWithId. Create is the simplest way to create components, it does several things\na. Construct a component based on the component type\nb. Add the component to the event system and throw an AwakeSystem\nc. Enables object pooling or not\nCreateWithParent provides a Parent object on top of Create, which is set to the Component.Parent field. createWithId is used to create ComponentWithId or its subclasses, and you can set an Id on top of Create itself, Component can choose whether to use a pool of objects when it is created. All three types of factory methods have a fromPool parameter, the default is true.\n\n\n# 2. Release of components\n\nComponent inherits an IDisposable interface. It should be noted that Component has unmanaged resources and must be called to delete a Component. This interface does the following\na. Throw Destroy System\nb. If the component was created using an object pool, then it is put back into the object pool here\nc. Remove the component from the global EventSystem and set the InstanceId to 0\nIf the component is mounted on Entity, then when Entity calls Dispose, it will automatically call the Dispose method of all components on it.\n\n\n# 3. Role of InstanceId\n\nAny Component comes with an InstanceId field, which is reset when the component is constructed, or when the component is removed from the object pool, and which identifies the identity of the component. Why is such a field needed? There are several reasons\n\n 1. the existence of the object pool, the component may not be released, but returned to the object pool. In an asynchronous call, it is likely that the component has already been released and then reused, so that we need a way to be able to distinguish whether the previous component object has been released, such as the following code.\n\n\t\tpublic static async ETVoid UpdateAsync(this ActorLocationSender self)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlong instanceId = self.InstanceId;\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tif (self.InstanceId ! = instanceId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tActorTask actorTask = await self.GetAsync();\n\t\t\t\t\t\n\t\t\t\t\tif (self.InstanceId ! = instanceId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (actorTask.ActorRequest == null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait self.RunTask(actorTask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tLog.Error(e);\n\t\t\t}\n\t\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nWhile (true) is an asynchronous method, after await self.GetAsync() it is likely that the ActorLocationSender object has been released, and it is even possible that the object has been utilized again by other logic from the object pool. We can determine whether the object has been released by the change of InstanceId. 2.\n2. InstanceId is globally unique and has location information, so you can find the location of the object by InstanceId and send the message to the object. This design will be utilized in the Actor message. Here for the time being will not talk about it.",normalizedContent:"# everything is entity\n\nthe ecs design is very popular right now, mainly because of the success of watchtower, which has led to the explosion of this technology. the most important design of ecs is the complete separation of logic and data. that is, ec is pure data, system is actually logic, by data-driven logic. what does data-driven logic mean? it is very simple to detect data changes through update and subscribe to data changes through the event mechanism, which is called data-driven. other features such as cache hits are not too important in writing logic, modern games are scripted, even the performance of the script can tolerate how will care about cache hits that performance improvement?\n\nfor example, in order to reuse, the data must be split into very small particles, which will lead to a very large number of components. but the game is developed cooperatively by multiple people, each person is basically only familiar with their own modules, which may end up causing a large number of redundant components. another problem is that the common ecs is flat, with only one layer of entity and component. it is like a company, the biggest is the boss, the boss with hundreds of people under him, the boss can not know all the people, to complete a task, the boss can not pick out the people they need. a reasonable approach is to have several managers under the boss, several supervisors under each manager, and several workers under each supervisor, so as to form a tree-like management structure that is easy to manage. this is similar to the et approach, where entity can manage component, component can manage entity, and even component can mount component. e.g. a person is composed of head, body, hands, feet, and the head is composed of eyes, ears, nose, mouth.\n\n    head head = human.addcomponent<head>();\n    head.addcomponent<eye>();\n    head.addcomponent<mouse>();\n    addcomponent<nose>();\n    addcomponent<ear>();\n    human.addcomponent<body>();\n    addcomponent<hand>();\n    human.addcomponent<leg>();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nin et, all data is entity, including entity, and entity can be used either as a component or as a child of other entity. generic data is placed on entity as a member, and less generic data can be hung on entity as a component. for example, the design of items, all items have fields configured id, quantity, level, these fields are not necessary to make components, put on entity will be more convenient to use.\n\n    class item: entity\n    {\n        // the configuration id of the props\n        public int configid { get; set; }\n        // the number of props\n        public int count { get; set; }\n        // the level of the props\n        public int level { get; set; }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nthis design data of et is a kind of tree structure, very hierarchical and can understand the whole game architecture very easily. scene, and the data of different modules are mounted on top of game. scene, and each module can mount a lot of data under itself. you don't have to think too much about how to design the classes, where to put the data, whether mounting here will lead to redundancy, etc. for each new feature. for example, if my player needs to do a prop system, i can design an itemscomponent to be mounted on the player, and i need to develop a spellcomponent to be mounted on the player for skills. if the whole service needs to do an activity, get an activity component to hang on top of the game. this design will be very easy to assign tasks and very modular.\n\n\n# some details of the component\n\n\n# 1. component creation\n\ncomponentfactory provides three methods to create components create, createwithparent, createwithid. create is the simplest way to create components, it does several things\na. construct a component based on the component type\nb. add the component to the event system and throw an awakesystem\nc. enables object pooling or not\ncreatewithparent provides a parent object on top of create, which is set to the component.parent field. createwithid is used to create componentwithid or its subclasses, and you can set an id on top of create itself, component can choose whether to use a pool of objects when it is created. all three types of factory methods have a frompool parameter, the default is true.\n\n\n# 2. release of components\n\ncomponent inherits an idisposable interface. it should be noted that component has unmanaged resources and must be called to delete a component. this interface does the following\na. throw destroy system\nb. if the component was created using an object pool, then it is put back into the object pool here\nc. remove the component from the global eventsystem and set the instanceid to 0\nif the component is mounted on entity, then when entity calls dispose, it will automatically call the dispose method of all components on it.\n\n\n# 3. role of instanceid\n\nany component comes with an instanceid field, which is reset when the component is constructed, or when the component is removed from the object pool, and which identifies the identity of the component. why is such a field needed? there are several reasons\n\n 1. the existence of the object pool, the component may not be released, but returned to the object pool. in an asynchronous call, it is likely that the component has already been released and then reused, so that we need a way to be able to distinguish whether the previous component object has been released, such as the following code.\n\n\t\tpublic static async etvoid updateasync(this actorlocationsender self)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlong instanceid = self.instanceid;\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tif (self.instanceid ! = instanceid)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tactortask actortask = await self.getasync();\n\t\t\t\t\t\n\t\t\t\t\tif (self.instanceid ! = instanceid)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (actortask.actorrequest == null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait self.runtask(actortask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (exception e)\n\t\t\t{\n\t\t\t\tlog.error(e);\n\t\t\t}\n\t\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nwhile (true) is an asynchronous method, after await self.getasync() it is likely that the actorlocationsender object has been released, and it is even possible that the object has been utilized again by other logic from the object pool. we can determine whether the object has been released by the change of instanceid. 2.\n2. instanceid is globally unique and has location information, so you can find the location of the object by instanceid and send the message to the object. this design will be utilized in the actor message. here for the time being will not talk about it.",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"EventSystem",frontmatter:{title:"EventSystem",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/53296b/"},regularPath:"/02.Guide/01.ETBook_English/35.3.4EventSystem.html",relativePath:"02.Guide/01.ETBook_English/35.3.4EventSystem.md",key:"v-3bddb7a2",path:"/pages/53296b/",headersStr:null,content:"# EventSystem\n\nOne of the most important features of ECS is the separation of data and logic, and the second is data-driven logic. What is data-driven logic? Not very well understood, let's take an example A moba game, the heroes have blood bars, which are displayed on the character's head, and also on the top left avatar UI. This time the server sends a blood deduction message. How do we handle this message? In the first way, we modify the hero's blood value in the message handling function, modify the blood bar display on the avatar, and modify the blood bar on the avatar UI at the same time. This approach obviously causes coupling between modules. In the second method, the blood value is only changed in the blood deduction message processing function, and the change of blood value throws an hpchange event, and both the avatar module and the UI module subscribe to the blood value change event and handle their own logic in the subscribed method, so that each module is responsible for its own logic without coupling. ET provides a variety of events, all of which can be subscribed multiple times:\n\n 1. AwakeSystem, which is thrown after the component factory creates a component, and is thrown only once, with parameters\n\n    Player player = ComponentFactory.Create<Player>();\n\n    // Subscribe to Player's Awake event\n    public class PlayerAwakeSystem: AwakeSystem<Player>\n    {\n        public override void Awake(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n 2. StartSystem, component UpdateSystem call before throwing\n\n    // Subscribe to Player's Start event\n    public class PlayerStartSystem: StartSystem<Player>\n    {\n        public override void Start(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 3. UpdateSystem, component thrown every frame\n\n    // Subscribe to Player's Update event\n    public class PlayerUpdateSystem: UpdateSystem<Player>\n    {\n        public override void Update(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 4. DestroySystem, thrown when the component is deleted\n\n    // Subscribe to Player's Destroy event\n    public class PlayerDestroySystem: DestroySystem<Player>\n    {\n        public override void Destroy(Player self)\n        {\n        }\n    }\n\n    Player player = ComponentFactory.Create<Player>();\n    // The Destroy event will be fired here\n    player.Dispose();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 5. ChangeSystem, thrown when the content of the component changes, needs to be triggered manually by the developer\n\n    // Subscribe to Player's Destroy event\n    public class PlayerChangeSystem: ChangeSystem<Player>\n    {\n        public override void Change(Player self)\n        {\n        }\n    }\n\n    Player player = ComponentFactory.Create<Player>();\n    // need to trigger ChangeSystem manually\n    Game.EventSystem.Change(player);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 6. DeserializeSystem, thrown after component deserialization\n\n    // Subscribe to Player's Deserialize event\n    public class PlayerDeserializeSystem: DeserializeSystem<Player>\n    {\n        public override void Deserialize(Player self)\n        {\n        }\n    }\n\n    // Here player2 will trigger the Deserialize event\n    Player player2 = MongoHelper.FromBson<Player>(player.ToBson());\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n 7. LoadSystem, EventSystem thrown when loading dll, used for server-side hot update, reload dll to do some processing, such as re-register handler\n\n    // Subscribe to Player's Load event\n    public class PlayerLoadSystem: LoadSystem<Player>\n    {\n        public override void Load(Player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 8. normal Event, thrown by the developer himself, can take up to three parameters. Also the client hot change layer can subscribe to the mono layer Event events\n\n    int oldhp = 10;\n    int newhp = 5;\n    // Throw hp change event\n    Game.EventSystem.Run(\"HpChange\", oldhp, newhp);\n\n    // UI subscribe to the hp change event\n    [Event(\"HpChange\")]\n    public class HpChange_ShowUI: AEvent<int, int>\n    {\n        public override void Run(int a, int b)\n        {\n            throw new NotImplementedException();\n        }\n    }\n\n    // The model header blood bar module also subscribes to the hp change event\n    [Event(\"HpChange\")\n    public class HpChange_ModelHeadChange: AEvent<int, int>\n    {\n        public override void Run(int a, int b)\n        {\n            throw new NotImplementedException();\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n 9. There are many other events, such as message events. Message events are declared using MessageHandler and can take parameters to specify which server to subscribe to.\n\n\t[MessageHandler(AppType.Gate)]\n\tpublic class C2G_LoginGateHandler : AMRpcHandler<C2G_LoginGate, G2C_LoginGate>\n\t{\n\t\tprotected override void Run(Session session, C2G_LoginGate message, Action<G2C_LoginGate> reply)\n\t\t{\n\t\t\tG2C_LoginGate response = new G2C_LoginGate();\n\t\t\treply(reply);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nMore specific message events will be explained in detail when we talk about messages\n10. numeric events, numeric module and then explain\n...... , more events to be developed by yourself.\n\nThe logic of the ET framework is driven by the various events above.",normalizedContent:"# eventsystem\n\none of the most important features of ecs is the separation of data and logic, and the second is data-driven logic. what is data-driven logic? not very well understood, let's take an example a moba game, the heroes have blood bars, which are displayed on the character's head, and also on the top left avatar ui. this time the server sends a blood deduction message. how do we handle this message? in the first way, we modify the hero's blood value in the message handling function, modify the blood bar display on the avatar, and modify the blood bar on the avatar ui at the same time. this approach obviously causes coupling between modules. in the second method, the blood value is only changed in the blood deduction message processing function, and the change of blood value throws an hpchange event, and both the avatar module and the ui module subscribe to the blood value change event and handle their own logic in the subscribed method, so that each module is responsible for its own logic without coupling. et provides a variety of events, all of which can be subscribed multiple times:\n\n 1. awakesystem, which is thrown after the component factory creates a component, and is thrown only once, with parameters\n\n    player player = componentfactory.create<player>();\n\n    // subscribe to player's awake event\n    public class playerawakesystem: awakesystem<player>\n    {\n        public override void awake(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n 2. startsystem, component updatesystem call before throwing\n\n    // subscribe to player's start event\n    public class playerstartsystem: startsystem<player>\n    {\n        public override void start(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 3. updatesystem, component thrown every frame\n\n    // subscribe to player's update event\n    public class playerupdatesystem: updatesystem<player>\n    {\n        public override void update(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 4. destroysystem, thrown when the component is deleted\n\n    // subscribe to player's destroy event\n    public class playerdestroysystem: destroysystem<player>\n    {\n        public override void destroy(player self)\n        {\n        }\n    }\n\n    player player = componentfactory.create<player>();\n    // the destroy event will be fired here\n    player.dispose();\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 5. changesystem, thrown when the content of the component changes, needs to be triggered manually by the developer\n\n    // subscribe to player's destroy event\n    public class playerchangesystem: changesystem<player>\n    {\n        public override void change(player self)\n        {\n        }\n    }\n\n    player player = componentfactory.create<player>();\n    // need to trigger changesystem manually\n    game.eventsystem.change(player);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 6. deserializesystem, thrown after component deserialization\n\n    // subscribe to player's deserialize event\n    public class playerdeserializesystem: deserializesystem<player>\n    {\n        public override void deserialize(player self)\n        {\n        }\n    }\n\n    // here player2 will trigger the deserialize event\n    player player2 = mongohelper.frombson<player>(player.tobson());\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n 7. loadsystem, eventsystem thrown when loading dll, used for server-side hot update, reload dll to do some processing, such as re-register handler\n\n    // subscribe to player's load event\n    public class playerloadsystem: loadsystem<player>\n    {\n        public override void load(player self)\n        {\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n 8. normal event, thrown by the developer himself, can take up to three parameters. also the client hot change layer can subscribe to the mono layer event events\n\n    int oldhp = 10;\n    int newhp = 5;\n    // throw hp change event\n    game.eventsystem.run(\"hpchange\", oldhp, newhp);\n\n    // ui subscribe to the hp change event\n    [event(\"hpchange\")]\n    public class hpchange_showui: aevent<int, int>\n    {\n        public override void run(int a, int b)\n        {\n            throw new notimplementedexception();\n        }\n    }\n\n    // the model header blood bar module also subscribes to the hp change event\n    [event(\"hpchange\")\n    public class hpchange_modelheadchange: aevent<int, int>\n    {\n        public override void run(int a, int b)\n        {\n            throw new notimplementedexception();\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n 9. there are many other events, such as message events. message events are declared using messagehandler and can take parameters to specify which server to subscribe to.\n\n\t[messagehandler(apptype.gate)]\n\tpublic class c2g_logingatehandler : amrpchandler<c2g_logingate, g2c_logingate>\n\t{\n\t\tprotected override void run(session session, c2g_logingate message, action<g2c_logingate> reply)\n\t\t{\n\t\t\tg2c_logingate response = new g2c_logingate();\n\t\t\treply(reply);\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nmore specific message events will be explained in detail when we talk about messages\n10. numeric events, numeric module and then explain\n...... , more events to be developed by yourself.\n\nthe logic of the et framework is driven by the various events above.",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Component-based design",frontmatter:{title:"Component-based design",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/66fec6/"},regularPath:"/02.Guide/01.ETBook_English/41.4.1Component-based%20design.html",relativePath:"02.Guide/01.ETBook_English/41.4.1Component-based design.md",key:"v-fdfe0ef0",path:"/pages/66fec6/",headers:[{level:2,title:"1. data structure coupling is very strong",slug:"_1-data-structure-coupling-is-very-strong",normalizedTitle:"1. data structure coupling is very strong",charIndex:337},{level:2,title:"2. Difficult to hot-plug",slug:"_2-difficult-to-hot-plug",normalizedTitle:"2. difficult to hot-plug",charIndex:1635},{level:2,title:"3. method and data coupling",slug:"_3-method-and-data-coupling",normalizedTitle:"3. method and data coupling",charIndex:3232}],headersStr:"1. data structure coupling is very strong 2. Difficult to hot-plug 3. method and data coupling",content:"# Component-based design\n\nIn terms of code reuse and organization of data, object-oriented may be the first response. Object-oriented three features inheritance, encapsulation, polymorphism, to a certain extent can solve a lot of code reuse, data reuse problems. But object-oriented is not a panacea, it also has great flaws: # # 1.\n\n\n# 1. data structure coupling is very strong\n\nOnce a field is added or removed from a parent class, it may have to affect all subclasses and affect all subclass-related logic. This seems very inflexible, in a complex set of inheritance system, to change the fields in the parent class will become more and more troublesome, let's say ABC is a subclass of D, one day found the need to add a data that AB has, but C does not, then this data is certainly not good to put into the parent class, only AB abstracted out of a parent class E, E inherited from D, AB common fields added to E, once the inheritance structure Once the inheritance structure has changed, the interface may also need to change, let's say there is an interface incoming parameter type is E, when AB no longer needs the common field, then the inheritance relationship needs to be adjusted so that AB inherits D again, then the interface incoming parameter type needs to be changed to D, where the logic code is likely to be adjusted. What's worse is that the game logic changes very complicated and very often, maybe today a field is added, tomorrow it is deleted, if every time to adjust the inheritance structure, it is a nightmare. Inheritance structure feels very powerless in the face of frequent data structure adjustment.\n\n\n# 2. Difficult to hot-plug\n\nInheritance structure can't add or delete fields at runtime, for example, Player usually walks, and then rides after using mount. The problem is that the information about the mount would need to be hanging on top of the Player object all the time. This makes it inflexible. Why do I need to have the horse data in memory when I'm not riding? The interface has the same problem, a class implements an interface, then the interface will always stick to the class, you want to get rid of her can not, or horse riding for example, the player player can ride, then may inherit a riding interface, the problem is, when I the Player from the mount, the player player still has the riding interface, there is no way to There is no way to dynamically delete this interface! The example may not be quite right, but the reasoning should be clear.\n\nThe use of object-oriented may lead to disastrous consequences, game development in the new and old, there are good skills, there are poor skills. People like to be lazy, when you find the trouble to adjust the inheritance relationship, it is possible to add a field in AB to save trouble directly into the parent class D. The result is that C somehow has an extra field that is useless. The key can not be found, and finally lead to the parent class D is getting bigger and bigger, in the end, it may simply not ABC, directly let all the objects into D, convenient well! Yes, many games are doing this, the development of the end simply do not care about the inheritance relationship, because you want to manage can not manage.\n\n\n# 3. method and data coupling\n\nTraditional object-oriented are class with methods, and especially advocate virtual function polymorphism. Methods and data put together brings a lot of coupling problems. In order to solve these coupling, we came up with a large number of design patterns, such as dependency interfaces, dependency transposition. To be honest, this is pants down, in order to understand the coupling, make the class into an interface, and then inherit from the interface, is this not called dependency? These practices lead to code that is full of interfaces and extremely difficult to read. There is no standard for writing up code, and the code written by experts and rookies is completely different. Most coders are logic boys, who have time to think about how to design this class every day ah? As the logic becomes more and more complex class inside the method will become increasingly large, the terrible thing is that this is the method of the class, extremely difficult to refactor, many projects can see the class inside the existence of tens of thousands of lines of code of virtual functions. Gosh!\n\nObject-oriented in the face of complex game logic is very powerless, so many game developers have gone backwards, using process-oriented development game, process-oriented, simple and brutal, do not consider complex inheritance, do not consider abstraction, do not consider polymorphism, is the development of the session of freestyle, roll up your sleeves on the jerk, but at the same time, the reusability of the code logic, data reusability is also greatly reduced. Process-oriented is also not a good game development model.\n\nComponent pattern is a good solution to object-oriented and process-oriented defects, in the game client is very widely used, Unity3d, Unreal 4, and so on are using the component pattern. The characteristics of the component pattern.\n\n 1. Highly modular, a component is a piece of data plus a paragraph of logic\n 2. Components can be hot-pluggable, you need to add, do not need to remove\n 3. Very few dependencies between types, any type of adding or removing components will not affect other types.\n\nBut at present only a very small number of server-side design using components, Watchtower server-side should be the use of component design, Watchtower developers called ECS architecture, in fact, is a variant of the component model, E is Entity, C is Component, S is System, in fact, is the component Component logic and data stripped, the logic part called System, the topic is far away, or back to the ET framework to put.\n\nET framework uses the design of components. Everything is Entity and Component, any class inherited from Entity can be mounted components, such as the player class.\n\npublic sealed class Player : Entity\n{\n    public string Account { get; private set; }\n    public long UnitId { get; set; }\n\t\n    public void Awake(string account)\n    {\n        this.Account = account;\n    }\n\t\n    public override void Dispose()\n    {\n        if (this.Id == 0)\n        {\n            return;\n        }\n        base.Dispose();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nMount a MoveComponent to the player object so that the player can move, a Backpack component to the player so that the player can manage items, a Skill component to the player so that the player can cast skills, and a Buff component to manage buffs.\n\nplayer.AddComponent<MoveComponent>();\nplayer.AddComponent<ItemsComponent>();\nplayer.AddComponent<SpellComponent>();\nAddComponent<BuffComponent>(); player.AddComponent<BuffComponent>();\n\n\n1\n2\n3\n4\n\n\nComponents are highly reusable, for example, an NPC, he can also move, just put MoveComponent on the NPC, some NPCs can also cast skills, then put SpellComponent on it, NPCs do not need a backpack, then there is no need to hang ItemsComponent\n\nET framework modules are all made into the form of components, a process is also made of different components stitched together. Let's say Loginserver needs to connect externally and also needs to connect with the server internally, then login server hooks up\n\n// intranet network component NetInnerComponent, which handles the connection to the intranet  \nGame.Scene.AddComponent<NetInnerComponent, string, int>(innerConfig.Host, innerConfig.Port);\n// NetOuterComponent, an extranet component, handles the connection to the client\nGame.Scene.AddComponent<NetOuterComponent, string, int>(outerConfig.Host, outerConfig.Port);\n\n\n1\n2\n3\n4\n\n\nFor example, battle server does not need to connect to the external network (external network messages are forwarded by gateserver), so it is natural to just mount an internal network component. Similar to Unity3d components, ET framework also provides component events, such as Awake, Start, Update, etc.. To add these events to a Component or Entity, you must write a helper class. For example, if the NetInnerComponent component needs Awake and Update methods, then add a class like this.\n\n[ObjectEvent]\npublic class NetInnerComponentEvent : ObjectEvent<NetInnerComponent>, IAwake, IUpdate\n{\n    public void Awake()\n    {\n        this.Get().Awake();\n    }\n\n    public void Update()\n    {\n        this.Get().Update();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nIn this way, NetInnerComponent calls its Awake method after AddComponent and calls the Update method every frame. ET does not use reflection like Unity to implement this kind of functionality, because reflection performance is poor, and the advantage of this implementation is that the class can be placed in the hot update dll, so that the component's Awake Start, Update method and other methods can be placed in the hot update layer. Entity and Component will be made into a class without methods, methods are put into the hot update layer to facilitate the hot update to fix logic bugs.\n\nThe biggest advantage of component-based development is that whether rookie or expert, the development of a function can quickly know how to organize data how to organize the logic. Object-oriented can be completely abandoned. Object-oriented development using the most headache is that I should inherit which class it? Before doing the most horrible is Unreal three, Unreal three inheritance structure is very multi-layer, completely do not know where they need to start inheritance. In the end, it could lead to a very small function that inherits a very large class, which is common in Unreal 3 development. So Unreal 4 switched to the component pattern. The module isolation of the component pattern is very good, the technical rookie a component written very poorly, will not affect the other modules, the big deal is to rewrite the component on the good.\n\nET's component design innovation, method and data separation, completely decoupled, no brainstorming how to uncouple, write static methods at will, there is no coupling, even the code written by rookies is easy to refactor.\n\nIt is because ET uses the detachable component model, ET can load all server components to the same process, then this one process can be used as a set of distributed servers. From then on it is possible to debug distributed servers with vs. Because of this, the usual development only use a process, when the release of the release into multiple processes on the line. Honestly, not to brag, this is a great invention, this invention solves a big problem in the development of distributed game servers, greatly improving the efficiency of development.",normalizedContent:"# component-based design\n\nin terms of code reuse and organization of data, object-oriented may be the first response. object-oriented three features inheritance, encapsulation, polymorphism, to a certain extent can solve a lot of code reuse, data reuse problems. but object-oriented is not a panacea, it also has great flaws: # # 1.\n\n\n# 1. data structure coupling is very strong\n\nonce a field is added or removed from a parent class, it may have to affect all subclasses and affect all subclass-related logic. this seems very inflexible, in a complex set of inheritance system, to change the fields in the parent class will become more and more troublesome, let's say abc is a subclass of d, one day found the need to add a data that ab has, but c does not, then this data is certainly not good to put into the parent class, only ab abstracted out of a parent class e, e inherited from d, ab common fields added to e, once the inheritance structure once the inheritance structure has changed, the interface may also need to change, let's say there is an interface incoming parameter type is e, when ab no longer needs the common field, then the inheritance relationship needs to be adjusted so that ab inherits d again, then the interface incoming parameter type needs to be changed to d, where the logic code is likely to be adjusted. what's worse is that the game logic changes very complicated and very often, maybe today a field is added, tomorrow it is deleted, if every time to adjust the inheritance structure, it is a nightmare. inheritance structure feels very powerless in the face of frequent data structure adjustment.\n\n\n# 2. difficult to hot-plug\n\ninheritance structure can't add or delete fields at runtime, for example, player usually walks, and then rides after using mount. the problem is that the information about the mount would need to be hanging on top of the player object all the time. this makes it inflexible. why do i need to have the horse data in memory when i'm not riding? the interface has the same problem, a class implements an interface, then the interface will always stick to the class, you want to get rid of her can not, or horse riding for example, the player player can ride, then may inherit a riding interface, the problem is, when i the player from the mount, the player player still has the riding interface, there is no way to there is no way to dynamically delete this interface! the example may not be quite right, but the reasoning should be clear.\n\nthe use of object-oriented may lead to disastrous consequences, game development in the new and old, there are good skills, there are poor skills. people like to be lazy, when you find the trouble to adjust the inheritance relationship, it is possible to add a field in ab to save trouble directly into the parent class d. the result is that c somehow has an extra field that is useless. the key can not be found, and finally lead to the parent class d is getting bigger and bigger, in the end, it may simply not abc, directly let all the objects into d, convenient well! yes, many games are doing this, the development of the end simply do not care about the inheritance relationship, because you want to manage can not manage.\n\n\n# 3. method and data coupling\n\ntraditional object-oriented are class with methods, and especially advocate virtual function polymorphism. methods and data put together brings a lot of coupling problems. in order to solve these coupling, we came up with a large number of design patterns, such as dependency interfaces, dependency transposition. to be honest, this is pants down, in order to understand the coupling, make the class into an interface, and then inherit from the interface, is this not called dependency? these practices lead to code that is full of interfaces and extremely difficult to read. there is no standard for writing up code, and the code written by experts and rookies is completely different. most coders are logic boys, who have time to think about how to design this class every day ah? as the logic becomes more and more complex class inside the method will become increasingly large, the terrible thing is that this is the method of the class, extremely difficult to refactor, many projects can see the class inside the existence of tens of thousands of lines of code of virtual functions. gosh!\n\nobject-oriented in the face of complex game logic is very powerless, so many game developers have gone backwards, using process-oriented development game, process-oriented, simple and brutal, do not consider complex inheritance, do not consider abstraction, do not consider polymorphism, is the development of the session of freestyle, roll up your sleeves on the jerk, but at the same time, the reusability of the code logic, data reusability is also greatly reduced. process-oriented is also not a good game development model.\n\ncomponent pattern is a good solution to object-oriented and process-oriented defects, in the game client is very widely used, unity3d, unreal 4, and so on are using the component pattern. the characteristics of the component pattern.\n\n 1. highly modular, a component is a piece of data plus a paragraph of logic\n 2. components can be hot-pluggable, you need to add, do not need to remove\n 3. very few dependencies between types, any type of adding or removing components will not affect other types.\n\nbut at present only a very small number of server-side design using components, watchtower server-side should be the use of component design, watchtower developers called ecs architecture, in fact, is a variant of the component model, e is entity, c is component, s is system, in fact, is the component component logic and data stripped, the logic part called system, the topic is far away, or back to the et framework to put.\n\net framework uses the design of components. everything is entity and component, any class inherited from entity can be mounted components, such as the player class.\n\npublic sealed class player : entity\n{\n    public string account { get; private set; }\n    public long unitid { get; set; }\n\t\n    public void awake(string account)\n    {\n        this.account = account;\n    }\n\t\n    public override void dispose()\n    {\n        if (this.id == 0)\n        {\n            return;\n        }\n        base.dispose();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nmount a movecomponent to the player object so that the player can move, a backpack component to the player so that the player can manage items, a skill component to the player so that the player can cast skills, and a buff component to manage buffs.\n\nplayer.addcomponent<movecomponent>();\nplayer.addcomponent<itemscomponent>();\nplayer.addcomponent<spellcomponent>();\naddcomponent<buffcomponent>(); player.addcomponent<buffcomponent>();\n\n\n1\n2\n3\n4\n\n\ncomponents are highly reusable, for example, an npc, he can also move, just put movecomponent on the npc, some npcs can also cast skills, then put spellcomponent on it, npcs do not need a backpack, then there is no need to hang itemscomponent\n\net framework modules are all made into the form of components, a process is also made of different components stitched together. let's say loginserver needs to connect externally and also needs to connect with the server internally, then login server hooks up\n\n// intranet network component netinnercomponent, which handles the connection to the intranet  \ngame.scene.addcomponent<netinnercomponent, string, int>(innerconfig.host, innerconfig.port);\n// netoutercomponent, an extranet component, handles the connection to the client\ngame.scene.addcomponent<netoutercomponent, string, int>(outerconfig.host, outerconfig.port);\n\n\n1\n2\n3\n4\n\n\nfor example, battle server does not need to connect to the external network (external network messages are forwarded by gateserver), so it is natural to just mount an internal network component. similar to unity3d components, et framework also provides component events, such as awake, start, update, etc.. to add these events to a component or entity, you must write a helper class. for example, if the netinnercomponent component needs awake and update methods, then add a class like this.\n\n[objectevent]\npublic class netinnercomponentevent : objectevent<netinnercomponent>, iawake, iupdate\n{\n    public void awake()\n    {\n        this.get().awake();\n    }\n\n    public void update()\n    {\n        this.get().update();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nin this way, netinnercomponent calls its awake method after addcomponent and calls the update method every frame. et does not use reflection like unity to implement this kind of functionality, because reflection performance is poor, and the advantage of this implementation is that the class can be placed in the hot update dll, so that the component's awake start, update method and other methods can be placed in the hot update layer. entity and component will be made into a class without methods, methods are put into the hot update layer to facilitate the hot update to fix logic bugs.\n\nthe biggest advantage of component-based development is that whether rookie or expert, the development of a function can quickly know how to organize data how to organize the logic. object-oriented can be completely abandoned. object-oriented development using the most headache is that i should inherit which class it? before doing the most horrible is unreal three, unreal three inheritance structure is very multi-layer, completely do not know where they need to start inheritance. in the end, it could lead to a very small function that inherits a very large class, which is common in unreal 3 development. so unreal 4 switched to the component pattern. the module isolation of the component pattern is very good, the technical rookie a component written very poorly, will not affect the other modules, the big deal is to rewrite the component on the good.\n\net's component design innovation, method and data separation, completely decoupled, no brainstorming how to uncouple, write static methods at will, there is no coupling, even the code written by rookies is easy to refactor.\n\nit is because et uses the detachable component model, et can load all server components to the same process, then this one process can be used as a set of distributed servers. from then on it is possible to debug distributed servers with vs. because of this, the usual development only use a process, when the release of the release into multiple processes on the line. honestly, not to brag, this is a great invention, this invention solves a big problem in the development of distributed game servers, greatly improving the efficiency of development.",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Actor Model",frontmatter:{title:"Actor Model",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/a3279e/"},regularPath:"/02.Guide/01.ETBook_English/54.5.4Actor%20Model.html",relativePath:"02.Guide/01.ETBook_English/54.5.4Actor Model.md",key:"v-075f2a06",path:"/pages/a3279e/",headers:[{level:3,title:"Actor introduction",slug:"actor-introduction",normalizedTitle:"actor introduction",charIndex:18},{level:3,title:"ET's Actor",slug:"et-s-actor",normalizedTitle:"et's actor",charIndex:3884},{level:3,title:"Use of ET's Actor",slug:"use-of-et-s-actor",normalizedTitle:"use of et's actor",charIndex:4837},{level:3,title:"Handling of Actor messages",slug:"handling-of-actor-messages",normalizedTitle:"handling of actor messages",charIndex:6481}],headersStr:"Actor introduction ET's Actor Use of ET's Actor Handling of Actor messages",content:"# Actor model\n\n\n# Actor introduction\n\nBefore discussing the Actor model, we should discuss the architecture of ET. There are two architectures for game servers in order to use multi-core, single-threaded multi-process and single-process multi-threaded architecture. ET uses single-threaded multi-process architecture, while the traditional Actor model is generally single-process multi-threaded architecture, which is a major difference. The advantages and disadvantages are as follows.\n\n 1. the logic needs to be single-threaded this is the same, erlang process logic is single-threaded, skynet lua virtual machine is also single-threaded. et in a process is actually equivalent to an erlang process, a skynet lua virtual machine.\n 2. the use of single-threaded multi-process does not need to write their own set of profiler tools, you can use a lot of ready-made profiler tools, such as view memory, cpu occupation directly with top command, this point erlang and skynet need to get another set of tools.\n 3. multi-process single-threaded architecture also has a benefit, a single physical machine and multiple physical machines is no difference, single process multi-threaded also need to consider the processing of multiple physical machines.\n 4. multi-process single-threaded architecture is a bit of a drawback is that messages need to be serialized and deserialized across processes, taking up a bit of resources. In addition, sending network messages will have a few milliseconds delay. Generally these effects can be ignored.\n\nThe original Actor model is used for single-process multi-threaded architecture, there is a reason for this, because multi-threaded architecture developers can easily access shared variables at will, let's say a variable a, thread 1 can access, thread 2 can also access, so that both threads need to add locks when accessing the variable a, shared variables more locks everywhere, will become unmaintainable, the framework must not appear The framework must not have a situation where there are threads sharing variables everywhere. In order to ensure that the multi-threaded architecture does not go wrong, it is necessary to provide a development model that ensures easy and safe multi-threaded development. erlang's concurrency mechanism is the actor model. erlang virtual machine uses multiple threads to take advantage of multiple cores. erlang has designed a mechanism that designs its own processes on top of the virtual machine. At its simplest, each erlang process manages its own variables, and the logic of each erlang process runs on a single thread. The logic between the erlang process and the process is completely isolated, so that there are no two threads accessing the same variable and there is no multithreaded competition. The next question arises, since each erlang process has its own data and the logic is completely isolated, how should the two erlang processes communicate with each other? This is where the Actor model comes in. erlang has designed a messaging mechanism: one process can send messages to other processes, and erlang processes communicate with each other through messages. Isn't this the same message queue used by operating systems for inter-process communication? Yes, in fact, it is similar. erlang inside the process id to get the process can send messages to this process.\n\nIf the message is only sent to the process, it is still a bit inconvenient. For example, if you take an erlang process as a moba team process, and there are 10 players in the battle process, if you use erlang's actor message, the message can only be sent to the battle process, but often the message needs to be sent to a player, then erlang needs to distribute the message to the specific player again according to the player id in the message, so it actually goes around one more time. This is actually an extra detour.\n\n\n# ET's Actor\n\nAccording to the characteristics of its own architecture, ET does not completely copy the Actor model of erlang, but provides the Entity object-level Actor model. In ET, an Actor is an Entity object, and a MailboxComponent component attached to an Entity is an Actor. You only need to know the Entity's InstanceId to send messages to the Entity. In fact, erlang's Actor model is a special case of ET, such as giving the ET server Game.Scene as an Actor, so that it can become a process-level Actor. It only needs to know the InstanceId (ET) or the Pid (erlang) of the process to send it to the other party.\n\n| Language | ET | Erlang | Skynet | | | ET | Erlang | Skynet | -- | :--: | :--: | :--: | | Architecture | Single-Threaded Multi-Process | Single-Process Multi-Threaded | Single-Process Multi-Threaded | | Actor | Entity | erlang process | lua virtual machine | | ActorId | Entity.InstanceId | erlang processId | service address |\n\n\n# Use of ET's Actor\n\nFor a normal Actor, we can refer to the Gate Session. map has a Unit, and the Unit holds the gate session corresponding to the player. thus, if a message in map needs to be sent to the client, it only needs to send the message to the gate session, and the gate session forwards it to the client when it receives the message. The map process sending messages to the gate session is a typical actor model. It doesn't need to know the location of the gate session, it just needs to know its InstanceId. messageHelper.cs gets an ActorMessageSender from GateSessionActorId and sends it.\n\n// Get an ActorSenderComponent from Game.Scene, then get an ActorMessageSender by InstanceId\nActorSenderComponent actorSenderComponent = Game.Scene.GetComponent<ActorSenderComponent>();\nActorMessageSender actorMessageSender = actorSenderComponent.Get(unitGateComponent.GateSessionActorId);\n// send\nactorMessageSender.Send(message);\n\n// rpc\nvar response = actorMessageSender.Call(message);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nThe question is how do you know the InstanceId of the gate session in map? This is where you need to find a way to pass it on, for example in ET, when the player is logging in to gate, the gate session hooks up a mailbox MailBoxComponent, C2G_LoginGateHandler.cs\n\nsession.AddComponent<MailBoxComponent, string>(MailboxType.GateSession);\n\n\n1\n\n\nThe InstanceId of this gate session is brought into the map when the player logs into the map process, in C2G_EnterMapHandler.cs\n\nM2G_CreateUnit createUnit = (M2G_CreateUnit)await mapSession.Call(new G2M_CreateUnit() { PlayerId = player.Id, GateSessionId = session. InstanceId });\n\n\n1\n\n\n\n# Handling of Actor messages\n\nFirst, the message arrives at the MailboxComponent, which has a type, and different types of mailboxes can do different processing. Currently, there are two types of mailboxes, GateSession and MessageDispatcher; GateSession mailboxes will immediately forward messages to the client when they are received, and MessageDispatcher types will again distribute the Actor messages to the specific Handler for processing. The default MailboxComponent type is MessageDispatcher. customizing a mailbox type is also very simple, inherit the IMailboxHandler interface and add the MailboxHandler tag. So why do we need to add such a feature? This feature does not exist in other actor models, and messages are generally received and distributed. The reason is that GateSession is not designed for distribution, so I added the mailbox type here. messageDispatcher has two ways of handling messages, one is to handle the messages sent by the other party, and the other is rpc messages\n\n    // To handle Send messages, you need to inherit the AMActorHandler abstract class. The first generic parameter of the abstract class is the type of the Actor, and the second parameter is the type of the message\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class Actor_TestHandler : AMActorHandler<Unit, Actor_Test>\n\t{\n\t\tprotected override ETTask Run(Unit unit, Actor_Test message)\n\t\t{\n\t\t\tLog.Debug(message.Info);\n\t\t}\n\t}\n\n    // To handle Rpc messages, you need to inherit the AMActorRpcHandler abstract class, the first generic parameter of the abstract class is the type of the Actor, the second parameter is the type of the message, and the third parameter is the type of the returned message\n    [ActorMessageHandler(AppType.Map)]\n\tpublic class Actor_TransferHandler : AMActorRpcHandler<Unit, Actor_TransferRequest, Actor_TransferResponse>\n\t{\n\t\tprotected override async ETTask Run(Unit unit, Actor_TransferRequest message, Action<Actor_TransferResponse> reply)\n\t\t{\n\t\t\tActor_TransferResponse response = new Actor_TransferResponse();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\treply(response);\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tReplyError(response, e, reply);\n\t\t\t}\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\nWe should note that Actor messages have the potential to deadlock, such as A call to B, B call to C, and C call to A. Because MailboxComponent is essentially a message queue, it opens a concurrent process that will process one message at a time, returning ETTask to indicate that the message processing class will block MailboxComponent queue of other messages. So if there is a deadlock, we don't want a message processing to block the rest of the MailboxComponent messages, we can just open a new thread in the message processing class to handle it. For example:\n\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class Actor_TestHandler : AMActorHandler<Unit, Actor_Test>\n\t{\n\t\tprotected override ETTask Run(Unit unit, Actor_Test message)\n\t\t{\n\t\t\tRunAsync(unit, message).Coroutine();\n\t\t}\n\n        public ETVoid RunAsync(Unit unit, Actor_Test message)\n        {\n            Log.Debug(message.Info);\n        }\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nFor related information, you can Google the Actor deadlock problem.",normalizedContent:"# actor model\n\n\n# actor introduction\n\nbefore discussing the actor model, we should discuss the architecture of et. there are two architectures for game servers in order to use multi-core, single-threaded multi-process and single-process multi-threaded architecture. et uses single-threaded multi-process architecture, while the traditional actor model is generally single-process multi-threaded architecture, which is a major difference. the advantages and disadvantages are as follows.\n\n 1. the logic needs to be single-threaded this is the same, erlang process logic is single-threaded, skynet lua virtual machine is also single-threaded. et in a process is actually equivalent to an erlang process, a skynet lua virtual machine.\n 2. the use of single-threaded multi-process does not need to write their own set of profiler tools, you can use a lot of ready-made profiler tools, such as view memory, cpu occupation directly with top command, this point erlang and skynet need to get another set of tools.\n 3. multi-process single-threaded architecture also has a benefit, a single physical machine and multiple physical machines is no difference, single process multi-threaded also need to consider the processing of multiple physical machines.\n 4. multi-process single-threaded architecture is a bit of a drawback is that messages need to be serialized and deserialized across processes, taking up a bit of resources. in addition, sending network messages will have a few milliseconds delay. generally these effects can be ignored.\n\nthe original actor model is used for single-process multi-threaded architecture, there is a reason for this, because multi-threaded architecture developers can easily access shared variables at will, let's say a variable a, thread 1 can access, thread 2 can also access, so that both threads need to add locks when accessing the variable a, shared variables more locks everywhere, will become unmaintainable, the framework must not appear the framework must not have a situation where there are threads sharing variables everywhere. in order to ensure that the multi-threaded architecture does not go wrong, it is necessary to provide a development model that ensures easy and safe multi-threaded development. erlang's concurrency mechanism is the actor model. erlang virtual machine uses multiple threads to take advantage of multiple cores. erlang has designed a mechanism that designs its own processes on top of the virtual machine. at its simplest, each erlang process manages its own variables, and the logic of each erlang process runs on a single thread. the logic between the erlang process and the process is completely isolated, so that there are no two threads accessing the same variable and there is no multithreaded competition. the next question arises, since each erlang process has its own data and the logic is completely isolated, how should the two erlang processes communicate with each other? this is where the actor model comes in. erlang has designed a messaging mechanism: one process can send messages to other processes, and erlang processes communicate with each other through messages. isn't this the same message queue used by operating systems for inter-process communication? yes, in fact, it is similar. erlang inside the process id to get the process can send messages to this process.\n\nif the message is only sent to the process, it is still a bit inconvenient. for example, if you take an erlang process as a moba team process, and there are 10 players in the battle process, if you use erlang's actor message, the message can only be sent to the battle process, but often the message needs to be sent to a player, then erlang needs to distribute the message to the specific player again according to the player id in the message, so it actually goes around one more time. this is actually an extra detour.\n\n\n# et's actor\n\naccording to the characteristics of its own architecture, et does not completely copy the actor model of erlang, but provides the entity object-level actor model. in et, an actor is an entity object, and a mailboxcomponent component attached to an entity is an actor. you only need to know the entity's instanceid to send messages to the entity. in fact, erlang's actor model is a special case of et, such as giving the et server game.scene as an actor, so that it can become a process-level actor. it only needs to know the instanceid (et) or the pid (erlang) of the process to send it to the other party.\n\n| language | et | erlang | skynet | | | et | erlang | skynet | -- | :--: | :--: | :--: | | architecture | single-threaded multi-process | single-process multi-threaded | single-process multi-threaded | | actor | entity | erlang process | lua virtual machine | | actorid | entity.instanceid | erlang processid | service address |\n\n\n# use of et's actor\n\nfor a normal actor, we can refer to the gate session. map has a unit, and the unit holds the gate session corresponding to the player. thus, if a message in map needs to be sent to the client, it only needs to send the message to the gate session, and the gate session forwards it to the client when it receives the message. the map process sending messages to the gate session is a typical actor model. it doesn't need to know the location of the gate session, it just needs to know its instanceid. messagehelper.cs gets an actormessagesender from gatesessionactorid and sends it.\n\n// get an actorsendercomponent from game.scene, then get an actormessagesender by instanceid\nactorsendercomponent actorsendercomponent = game.scene.getcomponent<actorsendercomponent>();\nactormessagesender actormessagesender = actorsendercomponent.get(unitgatecomponent.gatesessionactorid);\n// send\nactormessagesender.send(message);\n\n// rpc\nvar response = actormessagesender.call(message);\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nthe question is how do you know the instanceid of the gate session in map? this is where you need to find a way to pass it on, for example in et, when the player is logging in to gate, the gate session hooks up a mailbox mailboxcomponent, c2g_logingatehandler.cs\n\nsession.addcomponent<mailboxcomponent, string>(mailboxtype.gatesession);\n\n\n1\n\n\nthe instanceid of this gate session is brought into the map when the player logs into the map process, in c2g_entermaphandler.cs\n\nm2g_createunit createunit = (m2g_createunit)await mapsession.call(new g2m_createunit() { playerid = player.id, gatesessionid = session. instanceid });\n\n\n1\n\n\n\n# handling of actor messages\n\nfirst, the message arrives at the mailboxcomponent, which has a type, and different types of mailboxes can do different processing. currently, there are two types of mailboxes, gatesession and messagedispatcher; gatesession mailboxes will immediately forward messages to the client when they are received, and messagedispatcher types will again distribute the actor messages to the specific handler for processing. the default mailboxcomponent type is messagedispatcher. customizing a mailbox type is also very simple, inherit the imailboxhandler interface and add the mailboxhandler tag. so why do we need to add such a feature? this feature does not exist in other actor models, and messages are generally received and distributed. the reason is that gatesession is not designed for distribution, so i added the mailbox type here. messagedispatcher has two ways of handling messages, one is to handle the messages sent by the other party, and the other is rpc messages\n\n    // to handle send messages, you need to inherit the amactorhandler abstract class. the first generic parameter of the abstract class is the type of the actor, and the second parameter is the type of the message\n\t[actormessagehandler(apptype.map)]\n\tpublic class actor_testhandler : amactorhandler<unit, actor_test>\n\t{\n\t\tprotected override ettask run(unit unit, actor_test message)\n\t\t{\n\t\t\tlog.debug(message.info);\n\t\t}\n\t}\n\n    // to handle rpc messages, you need to inherit the amactorrpchandler abstract class, the first generic parameter of the abstract class is the type of the actor, the second parameter is the type of the message, and the third parameter is the type of the returned message\n    [actormessagehandler(apptype.map)]\n\tpublic class actor_transferhandler : amactorrpchandler<unit, actor_transferrequest, actor_transferresponse>\n\t{\n\t\tprotected override async ettask run(unit unit, actor_transferrequest message, action<actor_transferresponse> reply)\n\t\t{\n\t\t\tactor_transferresponse response = new actor_transferresponse();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\treply(response);\n\t\t\t}\n\t\t\tcatch (exception e)\n\t\t\t{\n\t\t\t\treplyerror(response, e, reply);\n\t\t\t}\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\nwe should note that actor messages have the potential to deadlock, such as a call to b, b call to c, and c call to a. because mailboxcomponent is essentially a message queue, it opens a concurrent process that will process one message at a time, returning ettask to indicate that the message processing class will block mailboxcomponent queue of other messages. so if there is a deadlock, we don't want a message processing to block the rest of the mailboxcomponent messages, we can just open a new thread in the message processing class to handle it. for example:\n\n\t[actormessagehandler(apptype.map)]\n\tpublic class actor_testhandler : amactorhandler<unit, actor_test>\n\t{\n\t\tprotected override ettask run(unit unit, actor_test message)\n\t\t{\n\t\t\trunasync(unit, message).coroutine();\n\t\t}\n\n        public etvoid runasync(unit unit, actor_test message)\n        {\n            log.debug(message.info);\n        }\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nfor related information, you can google the actor deadlock problem.",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Actor Location-EN",frontmatter:{title:"Actor Location-EN",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/d00821/"},regularPath:"/02.Guide/01.ETBook_English/55.5.5Actor%20Location-EN.html",relativePath:"02.Guide/01.ETBook_English/55.5.5Actor Location-EN.md",key:"v-0d66cacc",path:"/pages/d00821/",headers:[{level:3,title:"Actor Location",slug:"actor-location-2",normalizedTitle:"actor location",charIndex:2},{level:3,title:"Actor Location message processing",slug:"actor-location-message-processing",normalizedTitle:"actor location message processing",charIndex:4793},{level:3,title:"ET's actor and actor location analogy",slug:"et-s-actor-and-actor-location-analogy",normalizedTitle:"et's actor and actor location analogy",charIndex:6704}],headersStr:"Actor Location Actor Location message processing ET's actor and actor location analogy",content:"# Actor Location\n\n\n# Actor Location\n\nActor model only needs to know each other's InstanceId to send messages, which is very convenient, but sometimes we may not know each other's InstanceId, or an Actor's InstanceId will change. ET provides a mechanism to send messages to such objects, called Actor Location The mechanism is called Actor Location. The principle is relatively simple.\n\n 1.  because the InstanceId is changing, the object's Entity.Id is unchanged, so we can first think of using Entity.Id to send actor messages\n 2.  provide a location process (Location Server), the Actor object can store its Entity.Id and InstanceId as kv to the location process. Before sending the Actor message, go to the location process to look up the InstanceId of the Actor object before sending the actor message. 3.\n 3.  When an Actor object is created in a process or migrated to a new process, it needs to register its Id and InstanceId to the Location Server. 4.\n 4.  because the Actor object can be migrated, the message may be sent to the Actor has been migrated to other processes, so sending the Actor Location message needs to provide a reliable mechanism\n 5.  ActorLocationSender provides two methods, Send and Call, Send a message also requires the recipient to return a message, and only when the return message is received will the next message be sent. 6.\n 6.  If the Actor object is migrated away, it will return the error that the Actor does not exist, the sender will wait for 1 second after receiving this error, then go back to get the InstanceId of the Actor and resend it, currently it will try 5 times, after 5 times, it will throw an exception and report the error\n 7.  ActorLocationSender will not query the Location Server every time it sends a message, because object migration is relatively rare after all, only the first time to query, then cache the InstanceId, and re-query after the failure to send.\n 8.  actor object in the migration process, it is possible that other processes send over messages, when an error will occur, so the location server provides a Lock mechanism. Before the object is transmitted, the information in the process is deleted, and then a lock is added to the location server, and once the lock is on, other requests for the key will be queued.\n 9.  before transmission because the other party deleted the actor of the process, so other processes will fail to send, then they will retry. When retrying, they will re-request the location server, which will be found to be locked, so they will keep waiting.\n 10. When the transmission is completed, the lock on the location server is unlocked, and the new address is updated, and then other location requests are responded to. Other requests sent to this actor continue.\n\nNote that the Actor model is purely a server-side message communication mechanism, which has nothing to do with the client. We can use the server-side actor model for forwarding, so some client-side messages also inherit the actor interface. What happens if we don't use the actor interface on the client side? For example, the message Frame_ClickMap\n\nmessage Frame_ClickMap // IActorLocationMessage\n{\n\tint64 ActorId = 93;\n\tint64 Id = 94;\n\t\n\tfloat X = 1;\n\tfloat Y = 2;\n\tfloat Z = 3;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nWe may not need the field ActorId, the message is sent to Gate, gate sees that it is a Frame_ClickMap message, it needs to be forwarded to the Unit on the Map, forwarding is still good, gate can get the location of the unit corresponding to the map from the session, and then forward it, the problem comes, Frame_ ClickMap message to the map, how does the map know which object the message needs to be given to? There are several designs at this point.\n\n 1. bring the Id of the unit in the underlying protocol of forwarding, which requires more complex underlying protocol support.\n 2. use a message to Frame_ClickMap message wrapping, wrapping the message with the Id of the Unit, wrapping with the message means greater consumption, increasing GC. Personally, I feel that these two are very poor, not good, and even if distributed to the unit object processing, how to solve the problem of message re-entry it? unit object still needs to hang a message processing queue, and then receive the message thrown into the queue. Isn't this a duplication of the actor model? The current ET message sent to unit in the client did a design, the message into an actor message, gate received found to be an actor message, sent directly to the corresponding actor, the solution can be said to be beautiful. In fact, the client is still using session.send and call to send messages, send the message does not know that the message is an actor message, only to the gate, the gate judgment, refer to OuterMessageDispatcher.cs\n\n\n# Actor Location message processing\n\nActorLocation messages are sent\n\n// Get the ActorLocationSenderComponent from Game.Scene, then get the ActorLocationSender via Entity.Id\nActorLocationSender actorLocationSender = Game.Scene.GetComponent<ActorLocationSenderComponent>().Get(unitId);\n// Send the message through the ActorLocationSender\nactorLocationSender.Send(actorLocationMessage);\n// send the Rpc message\nIResponse response = await actorLocationSender.Call(actorLocationRequest);\n\n\n1\n2\n3\n4\n5\n6\n\n\nActorLocation message processing is almost the same as Actor messages, the difference is that the two abstract classes inherited are different, note that the abstract class of actorlocation has an additional Location\n\n\t// The first generic parameter of the abstract class is the type of the Actor, and the second parameter is the type of the message.\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class Frame_ClickMapHandler : AMActorLocationHandler<Unit, Frame_ClickMap>\n\t{\n\t\tprotected override ETTask Run(Unit unit, Frame_ClickMap message)\n\t\t{\n\t\t\tVector3 target = new Vector3(message.X, message.Y, message.Z);\n\t\t\tunit.GetComponent<UnitPathComponent>().MoveTo(target).Coroutine();\n\t\t\t\n\t\t}\n\t}\n\n\t// To handle Rpc messages, you need to inherit the AMActorRpcHandler abstract class. The first generic parameter of the abstract class is the type of the Actor, the second parameter is the type of the message, and the third parameter is the type of the returned message\n\t[ActorMessageHandler(AppType.Map)]\n\tpublic class C2M_TestActorRequestHandler : AMActorLocationRpcHandler<Unit, C2M_TestActorRequest, M2C_TestActorResponse>\n\t{\n\t\tprotected override async ETTask Run(Unit unit, C2M_TestActorRequest message, Action<M2C_TestActorResponse> reply)\n\t\t{\n\t\t\treply(new M2C_TestActorResponse(){Info = \"actor rpc response\"});\n\t\t\tawait ETTask.CompletedTask;\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\n\n# ET's actor and actor location analogy\n\nThere are many cities (processes) in China, and many people (entity objects) living in the cities, each with an ID number (Entity.Id). A person needs to apply for a residence permit in each city and is assigned a unique residence permit number (InstanceId). The format of the residence permit number is 2 bytes city number + 4 bytes time + 2 bytes increment. The ID number never changes, but the residence permit number changes every time you go to a city. Now there is a China Post (actor). Suppose Xiaoming wants to send a letter to his girlfriend Xiaohong\n\n 1. Xiaohong must mount a mailbox (MailboxComponent) himself in order to receive the letter, and Xiaohong will process the message when he receives it. Note that processing is done here one by one. It is possible that Hong will receive letters from many people at the same time. But she must read one letter at a time. Let's say Xiaoming and Xiaobao both send letters to Xiaohong, and Xiaohong receives Xiaoming's letter first, and then Xiaobao's letter. Xiaohong reads Xiaoming's letter first, and Xiaoming's letter asks Xiaohong to make a phone call to her grandmother (to produce a concordance) and then write back to herself, noting that Xiaohong also cannot read the next letter during this period, and must finish the phone call before she can read Xiaobao's letter. Of course Xiao Hong himself can choose to start reading Xiao Bao's letter without finishing the process, by opening a new concatenation for Xiao Ming's letter.\n 2. Suppose Xiaoming knows Xiaohong's residence permit number, then the post (actor) can find the city (process) where Xiaohong lives according to the two docks of the residence permit number, and then find Xiaohong and deliver the message to Xiaohong's mailbox (MailboxComponent) according to Xiaohong's residence permit number. This is the simplest native actor model\n 3. ET also supports a set of actor location mechanism. Suppose Xiao Ming doesn't know Xiao Hong's residence permit number, but he knows Xiao Hong's ID number, what should he do? The postal service has developed a set of advanced post (actor location) to think of a way, if a person often moves, it still wants to receive letters, then he must report his residence permit and ID card to the central government (location server) when he goes to a new city, so that the advanced post can send mail through the ID card number. The method is to go to the central government to get Hong's residence permit number, and then use the actor mechanism to send. 4.\n 4. Suppose Xiao Hong was in Guangzhou city before, and Xiao Ming used Xiao Hong's ID card to send a letter to Xiao Hong. Advanced post obtains Xiao Hong's residence permit number and sends a letter to Xiao Hong. During this process of sending the letter, Xiaohong moved, from Guangzhou to Shenzhen, at which time Xiaohong reported her new residence permit on the central government. When the letter from the senior post arrives in Guangzhou, it is found that Xiao Hong is not in Guangzhou. Then the senior postal service will go to the central government again to get Xiao Hong's residence permit and resend it, which may succeed or fail again, this process will be repeated several times, if it is unsuccessful, it will tell Xiao Ming that the letter has failed to be sent.\n 5. senior postal mail is more expensive, and people do not move a lot, usually Xiao Ming will remember Xiao Hong's residence permit after sending letters with senior postal mail, and next time send letters directly with the residence permit, and then send letters with senior postal mail if it fails. There are two kinds of return receipts, one without content, just means Xiao Hong received the letter, and one with Xiao Hong's return letter. Xiaoming can choose which return receipt form to use when he sends the letter. Xiao Ming cannot send two letters to Xiao Hong at the same time, he must wait for Xiao Hong's acknowledgement to arrive before Xiao Ming can continue sending the letter.",normalizedContent:"# actor location\n\n\n# actor location\n\nactor model only needs to know each other's instanceid to send messages, which is very convenient, but sometimes we may not know each other's instanceid, or an actor's instanceid will change. et provides a mechanism to send messages to such objects, called actor location the mechanism is called actor location. the principle is relatively simple.\n\n 1.  because the instanceid is changing, the object's entity.id is unchanged, so we can first think of using entity.id to send actor messages\n 2.  provide a location process (location server), the actor object can store its entity.id and instanceid as kv to the location process. before sending the actor message, go to the location process to look up the instanceid of the actor object before sending the actor message. 3.\n 3.  when an actor object is created in a process or migrated to a new process, it needs to register its id and instanceid to the location server. 4.\n 4.  because the actor object can be migrated, the message may be sent to the actor has been migrated to other processes, so sending the actor location message needs to provide a reliable mechanism\n 5.  actorlocationsender provides two methods, send and call, send a message also requires the recipient to return a message, and only when the return message is received will the next message be sent. 6.\n 6.  if the actor object is migrated away, it will return the error that the actor does not exist, the sender will wait for 1 second after receiving this error, then go back to get the instanceid of the actor and resend it, currently it will try 5 times, after 5 times, it will throw an exception and report the error\n 7.  actorlocationsender will not query the location server every time it sends a message, because object migration is relatively rare after all, only the first time to query, then cache the instanceid, and re-query after the failure to send.\n 8.  actor object in the migration process, it is possible that other processes send over messages, when an error will occur, so the location server provides a lock mechanism. before the object is transmitted, the information in the process is deleted, and then a lock is added to the location server, and once the lock is on, other requests for the key will be queued.\n 9.  before transmission because the other party deleted the actor of the process, so other processes will fail to send, then they will retry. when retrying, they will re-request the location server, which will be found to be locked, so they will keep waiting.\n 10. when the transmission is completed, the lock on the location server is unlocked, and the new address is updated, and then other location requests are responded to. other requests sent to this actor continue.\n\nnote that the actor model is purely a server-side message communication mechanism, which has nothing to do with the client. we can use the server-side actor model for forwarding, so some client-side messages also inherit the actor interface. what happens if we don't use the actor interface on the client side? for example, the message frame_clickmap\n\nmessage frame_clickmap // iactorlocationmessage\n{\n\tint64 actorid = 93;\n\tint64 id = 94;\n\t\n\tfloat x = 1;\n\tfloat y = 2;\n\tfloat z = 3;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nwe may not need the field actorid, the message is sent to gate, gate sees that it is a frame_clickmap message, it needs to be forwarded to the unit on the map, forwarding is still good, gate can get the location of the unit corresponding to the map from the session, and then forward it, the problem comes, frame_ clickmap message to the map, how does the map know which object the message needs to be given to? there are several designs at this point.\n\n 1. bring the id of the unit in the underlying protocol of forwarding, which requires more complex underlying protocol support.\n 2. use a message to frame_clickmap message wrapping, wrapping the message with the id of the unit, wrapping with the message means greater consumption, increasing gc. personally, i feel that these two are very poor, not good, and even if distributed to the unit object processing, how to solve the problem of message re-entry it? unit object still needs to hang a message processing queue, and then receive the message thrown into the queue. isn't this a duplication of the actor model? the current et message sent to unit in the client did a design, the message into an actor message, gate received found to be an actor message, sent directly to the corresponding actor, the solution can be said to be beautiful. in fact, the client is still using session.send and call to send messages, send the message does not know that the message is an actor message, only to the gate, the gate judgment, refer to outermessagedispatcher.cs\n\n\n# actor location message processing\n\nactorlocation messages are sent\n\n// get the actorlocationsendercomponent from game.scene, then get the actorlocationsender via entity.id\nactorlocationsender actorlocationsender = game.scene.getcomponent<actorlocationsendercomponent>().get(unitid);\n// send the message through the actorlocationsender\nactorlocationsender.send(actorlocationmessage);\n// send the rpc message\niresponse response = await actorlocationsender.call(actorlocationrequest);\n\n\n1\n2\n3\n4\n5\n6\n\n\nactorlocation message processing is almost the same as actor messages, the difference is that the two abstract classes inherited are different, note that the abstract class of actorlocation has an additional location\n\n\t// the first generic parameter of the abstract class is the type of the actor, and the second parameter is the type of the message.\n\t[actormessagehandler(apptype.map)]\n\tpublic class frame_clickmaphandler : amactorlocationhandler<unit, frame_clickmap>\n\t{\n\t\tprotected override ettask run(unit unit, frame_clickmap message)\n\t\t{\n\t\t\tvector3 target = new vector3(message.x, message.y, message.z);\n\t\t\tunit.getcomponent<unitpathcomponent>().moveto(target).coroutine();\n\t\t\t\n\t\t}\n\t}\n\n\t// to handle rpc messages, you need to inherit the amactorrpchandler abstract class. the first generic parameter of the abstract class is the type of the actor, the second parameter is the type of the message, and the third parameter is the type of the returned message\n\t[actormessagehandler(apptype.map)]\n\tpublic class c2m_testactorrequesthandler : amactorlocationrpchandler<unit, c2m_testactorrequest, m2c_testactorresponse>\n\t{\n\t\tprotected override async ettask run(unit unit, c2m_testactorrequest message, action<m2c_testactorresponse> reply)\n\t\t{\n\t\t\treply(new m2c_testactorresponse(){info = \"actor rpc response\"});\n\t\t\tawait ettask.completedtask;\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\n\n# et's actor and actor location analogy\n\nthere are many cities (processes) in china, and many people (entity objects) living in the cities, each with an id number (entity.id). a person needs to apply for a residence permit in each city and is assigned a unique residence permit number (instanceid). the format of the residence permit number is 2 bytes city number + 4 bytes time + 2 bytes increment. the id number never changes, but the residence permit number changes every time you go to a city. now there is a china post (actor). suppose xiaoming wants to send a letter to his girlfriend xiaohong\n\n 1. xiaohong must mount a mailbox (mailboxcomponent) himself in order to receive the letter, and xiaohong will process the message when he receives it. note that processing is done here one by one. it is possible that hong will receive letters from many people at the same time. but she must read one letter at a time. let's say xiaoming and xiaobao both send letters to xiaohong, and xiaohong receives xiaoming's letter first, and then xiaobao's letter. xiaohong reads xiaoming's letter first, and xiaoming's letter asks xiaohong to make a phone call to her grandmother (to produce a concordance) and then write back to herself, noting that xiaohong also cannot read the next letter during this period, and must finish the phone call before she can read xiaobao's letter. of course xiao hong himself can choose to start reading xiao bao's letter without finishing the process, by opening a new concatenation for xiao ming's letter.\n 2. suppose xiaoming knows xiaohong's residence permit number, then the post (actor) can find the city (process) where xiaohong lives according to the two docks of the residence permit number, and then find xiaohong and deliver the message to xiaohong's mailbox (mailboxcomponent) according to xiaohong's residence permit number. this is the simplest native actor model\n 3. et also supports a set of actor location mechanism. suppose xiao ming doesn't know xiao hong's residence permit number, but he knows xiao hong's id number, what should he do? the postal service has developed a set of advanced post (actor location) to think of a way, if a person often moves, it still wants to receive letters, then he must report his residence permit and id card to the central government (location server) when he goes to a new city, so that the advanced post can send mail through the id card number. the method is to go to the central government to get hong's residence permit number, and then use the actor mechanism to send. 4.\n 4. suppose xiao hong was in guangzhou city before, and xiao ming used xiao hong's id card to send a letter to xiao hong. advanced post obtains xiao hong's residence permit number and sends a letter to xiao hong. during this process of sending the letter, xiaohong moved, from guangzhou to shenzhen, at which time xiaohong reported her new residence permit on the central government. when the letter from the senior post arrives in guangzhou, it is found that xiao hong is not in guangzhou. then the senior postal service will go to the central government again to get xiao hong's residence permit and resend it, which may succeed or fail again, this process will be repeated several times, if it is unsuccessful, it will tell xiao ming that the letter has failed to be sent.\n 5. senior postal mail is more expensive, and people do not move a lot, usually xiao ming will remember xiao hong's residence permit after sending letters with senior postal mail, and next time send letters directly with the residence permit, and then send letters with senior postal mail if it fails. there are two kinds of return receipts, one without content, just means xiao hong received the letter, and one with xiao hong's return letter. xiaoming can choose which return receipt form to use when he sends the letter. xiao ming cannot send two letters to xiao hong at the same time, he must wait for xiao hong's acknowledgement to arrive before xiao ming can continue sending the letter.",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Numerical component design",frontmatter:{title:"Numerical component design",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/ae8fe0/"},regularPath:"/02.Guide/01.ETBook_English/56.5.6Numerical%20component%20design.html",relativePath:"02.Guide/01.ETBook_English/56.5.6Numerical component design.md",key:"v-0cd550e5",path:"/pages/ae8fe0/",headers:[{level:2,title:"Common practice:",slug:"common-practice",normalizedTitle:"common practice:",charIndex:804},{level:2,title:"ET framework uses the Key Value form to save the value of the property",slug:"et-framework-uses-the-key-value-form-to-save-the-value-of-the-property",normalizedTitle:"et framework uses the key value form to save the value of the property",charIndex:3650}],headersStr:"Common practice: ET framework uses the Key Value form to save the value of the property",content:"Similar to world of warcraft, moba such skills are extremely complex, flexibility requires a very high skill system, must need a set of its flexible numerical structure to match. Numerical structure is well designed, the realization of the skill system will be very simple, otherwise it is a disaster. For example, in World of Warcraft, a character has many numerical attributes, such as movement speed, strength, anger, energy, concentration value, magic value, blood, maximum blood, physical attack, physical defense, spell attack, spell defense, etc. There are dozens of attributes. Attributes and attributes affect each other, buffs will add absolute value to attributes, increase the percentage, or some kind of buff will come back to you after counting all the increased value and doubling it.\n\n\n# Common practice:\n\nThe general is to write a value class.\n\nclass Numeric\n{\n    public int Hp;\n    public int MaxHp;\n    public int Speed;\n    // Energy\n    public int Energy;\n    public int MaxEnergy;\n    // Magic\n    public int Mp;\n    public int MaxMp;\n    .....\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nOn second thought, I'm a thief using energy why should I have a value of Mp? I am a mage using magic why should there be a field for energy? I'm not sure what to do with this, just pretend you didn't see it? I can not, I come to an inheritance?\n\n// Mage values\ncalss MageNumeric: Numeric\n{\n    // magic\n    public int Mp;\n    public int MaxMp;\n}\n\n// Thief value\ncalss RougeNumeric: Numeric\n{\n    // Energy\n    public int Energy;\n    public int MaxEnergy;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n10 races, each race 7, 8 kinds of heroes, just these values class inheritance relationship, you have to be confused it. Object-oriented is difficult to adapt to the needs of this flexible and complex.\n\nAnd look at the Numeric class, each value can not just design a field, for example, I have a buff will increase 10 points Speed, and a kind of buff to increase 50% of the speed, then I must add at least three secondary attribute fields\n\nclass Numeric\n{\n    // speed final value\n    public int Speed;\n    // Speed initial value\n    public int SpeedInit;\n    // Speed increase value\n    public int SpeedAdd;\n    // Speed increase percentage value\n    public int SpeedPct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nAfter SpeedAdd and SpeedPct are changed, a calculation is performed to calculate the final speed value. buff only needs to go to modify SpeedAdd and SpeedPct on the line.\n\nSpeed = (SpeedInit + SpeedAdd) * (100 + SpeedPct) / 100\n\n\n1\n\n\nEach property may have several indirect effects on the value, you can think about how large this class is, a rough estimate of more than 100 fields. The trouble is that the formula is basically the same, but just can not be unified into a function, such as MaxHp, also has a buff effect\n\nclass Numeric\n{\n    public int Speed;\n    public int SpeedInit;\n    public int SpeedAdd;\n    public int SpeedPct;\n    \n    public int MaxHp;\n    public int MaxHpInit;\n    public int MaxHpAdd;\n    public int MaxHpPct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nAlso have to write a formula for calculating Hp\n\nMaxHp = (MaxHpInit + MaxHpAdd) * (100 + MaxHpPct) / 100\n\n\n1\n\n\nDozens of properties, you have to write dozens of times, and each secondary property changes to correctly call the corresponding formula calculation. Very troublesome! This design also has a big problem, buff configuration table to fill the corresponding attribute field is not very good to fill, for example, sprint buff (increase speed 50%), how to configure the buff table to make the program simple to find and operate the SpeedPct field? Not a good idea.\n\n\n# ET framework uses the Key Value form to save the value of the property\n\nUsing System.Collections.Generic;\n\nGeneric; namespace Model\nGeneric; namespace Model {\n    public enum NumericType\n    {\n\t\tMax = 10000,\n\n\t\tSpeed = 1000,\n\t\tSpeedBase = Speed * 10 + 1,\n\t    SpeedAdd = Speed * 10 + 2,\n\t    SpeedPct = Speed * 10 + 3,\n\t    SpeedFinalAdd = Speed * 10 + 4,\n\t    SpeedFinalPct = Speed * 10 + 5,\n\n\t    Hp = 1001,\n\t    HpBase = Hp * 10 + 1,\n\n\t    MaxHp = 1002,\n\t    MaxHpBase = MaxHp * 10 + 1,\n\t    MaxHpAdd = MaxHp * 10 + 2,\n\t    MaxHpPct = MaxHp * 10 + 3,\n\t    MaxHpFinalAdd = MaxHp * 10 + 4,\n\t\tMaxHpFinalPct = MaxHp * 10 + 5,\n\t}\n\n\tpublic class NumericComponent: Component\n\t{\n\t\tpublic readonly Dictionary<int, int> NumericDic = new Dictionary<int, int>();\n\n\t\tpublic void Awake()\n\t\t{\n\t\t\t// initialize base value here\n\t\t}\n\n\t\tpublic float GetAsFloat(NumericType numericType)\n\t\t{\n\t\t\treturn (float)GetByKey((int)numericType) / 10000;\n\t\t}\n\n\t\tpublic int GetAsInt(NumericType numericType)\n\t\t{\n\t\t\treturn GetByKey((int)numericType);\n\t\t}\n\n\t\tpublic void Set(NumericType nt, float value)\n\t\t{\n\t\t\tthis[nt] = (int) (value * 10000);\n\t\t}\n\n\t\tpublic void Set(NumericType nt, int value)\n\t\t{\n\t\t\tthis[nt] = value;\n\t\t}\n\n\t\tpublic int this[NumericType numericType]\n\t\t{\n\t\t\tget\n\t\t\t{\n\t\t\t\treturn this.GetByKey((int) numericType);\n\t\t\t}\n\t\t\tset\n\t\t\t{\n\t\t\t\tint v = this.GetByKey((int) numericType);\n\t\t\t\tif (v == value)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tNumericDic[(int)numericType] = value;\n\n\t\t\t\tUpdate(numericType);\n\t\t\t}\n\t\t}\n\n\t\tprivate int GetByKey(int key)\n\t\t{\n\t\t\tint value = 0;\n\t\t\tThis.NumericDic.TryGetValue(key, out value);\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic void Update(NumericType numericType)\n\t\t{\n\t\t\tif (numericType > NumericType.Max)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tint final = (int) numericType / 10;\n\t\t\tint bas = final * 10 + 1; \n\t\t\tint add = final * 10 + 2;\n\t\t\tint pct = final * 10 + 3;\n\t\t\tint finalAdd = final * 10 + 4;\n\t\t\tint finalPct = final * 10 + 5;\n\n\t\t\t// A value may be affected by a variety of circumstances, such as speed, adding a buff may increase the speed of the absolute value of 100, but also some buffs increase the speed of 10%, so a value can be controlled by 5 values of the final result\n\t\t\t// final = (((base + add) * (100 + pct) / 100) + finalAdd) * (100 + finalPct) / 100;\n\t\t\tthis.NumericDic[final] = ((this.GetByKey(base) + this.GetByKey(add)) * (100 + this.GetByKey(pct)) / 100 + this.GetByKey(finalAdd)) * (100 + this. GetByKey(finalPct)) / 100;\n\t\t\tGame.EventSystem.Run(EventIdType.NumbericChange, this.Entity.Id, numericType, final);\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n\n\n 1. values are saved with key value, key is the type of value, defined by NumericType, value are integers, float type can also be converted to integers, for example, multiply by 1000; key value to save properties will become very flexible, for example, mage no energy properties, then initialize the mage object does not add energy key value It's fine. Thieves do not have mana, no spell damage, etc., the initialization will not need to add these.\n\n 2. world of warcraft, a value by 5 values to influence, you can unify the use of a formula.\n\nfinal = (((base + add) * (100 + pct) / 100) + finalAdd) * (100 + finalPct) / 100;\n\n\n1\n\n\nFor example, the speed value speed, there is an initial value speedbase, there is a buff1 to increase the absolute speed by 10 points, then buff1 will add 10 to speedadd when it is created, buff1 minus 10 to speedadd when it is deleted, buff2 increases the speed by 20%, then buff2 adds to speedpct when it is created The 5 values are changed and the corresponding properties can be recalculated by using the Update function in a unified way. buff configuration is quite simple. If the corresponding NumericType is filled in the buff configuration, the program can easily manipulate the corresponding value.\n\n 3. Changes in properties can be uniformly thrown to other modules to subscribe to the event, writing a property change monitor becomes very simple. For example, the achievement module needs to develop an achievement life value over 1000, will get the achievement of longevity master. Then the person developing the achievement module will subscribe to the HP changes as follows.\n\n\t/// Monitor hp value changes\n\t[NumericWatcher(NumericType.Hp)\n\tpublic class NumericWatcher_Hp : INumericWatcher\n\t{\n\t\tpublic void Run(long id, int value)\n\t\t{\n\t\t    if (value > 1000)\n\t\t    {\n\t\t        // get achievement longevity master achievement\n\t\t    }\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nSimilarly, recording an exception log for a gold change greater than 10,000 at a time, etc. can be done this way.\n\nWith this numerical component, a moba skill system can be said to be half complete.",normalizedContent:"similar to world of warcraft, moba such skills are extremely complex, flexibility requires a very high skill system, must need a set of its flexible numerical structure to match. numerical structure is well designed, the realization of the skill system will be very simple, otherwise it is a disaster. for example, in world of warcraft, a character has many numerical attributes, such as movement speed, strength, anger, energy, concentration value, magic value, blood, maximum blood, physical attack, physical defense, spell attack, spell defense, etc. there are dozens of attributes. attributes and attributes affect each other, buffs will add absolute value to attributes, increase the percentage, or some kind of buff will come back to you after counting all the increased value and doubling it.\n\n\n# common practice:\n\nthe general is to write a value class.\n\nclass numeric\n{\n    public int hp;\n    public int maxhp;\n    public int speed;\n    // energy\n    public int energy;\n    public int maxenergy;\n    // magic\n    public int mp;\n    public int maxmp;\n    .....\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\non second thought, i'm a thief using energy why should i have a value of mp? i am a mage using magic why should there be a field for energy? i'm not sure what to do with this, just pretend you didn't see it? i can not, i come to an inheritance?\n\n// mage values\ncalss magenumeric: numeric\n{\n    // magic\n    public int mp;\n    public int maxmp;\n}\n\n// thief value\ncalss rougenumeric: numeric\n{\n    // energy\n    public int energy;\n    public int maxenergy;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n10 races, each race 7, 8 kinds of heroes, just these values class inheritance relationship, you have to be confused it. object-oriented is difficult to adapt to the needs of this flexible and complex.\n\nand look at the numeric class, each value can not just design a field, for example, i have a buff will increase 10 points speed, and a kind of buff to increase 50% of the speed, then i must add at least three secondary attribute fields\n\nclass numeric\n{\n    // speed final value\n    public int speed;\n    // speed initial value\n    public int speedinit;\n    // speed increase value\n    public int speedadd;\n    // speed increase percentage value\n    public int speedpct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nafter speedadd and speedpct are changed, a calculation is performed to calculate the final speed value. buff only needs to go to modify speedadd and speedpct on the line.\n\nspeed = (speedinit + speedadd) * (100 + speedpct) / 100\n\n\n1\n\n\neach property may have several indirect effects on the value, you can think about how large this class is, a rough estimate of more than 100 fields. the trouble is that the formula is basically the same, but just can not be unified into a function, such as maxhp, also has a buff effect\n\nclass numeric\n{\n    public int speed;\n    public int speedinit;\n    public int speedadd;\n    public int speedpct;\n    \n    public int maxhp;\n    public int maxhpinit;\n    public int maxhpadd;\n    public int maxhppct;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nalso have to write a formula for calculating hp\n\nmaxhp = (maxhpinit + maxhpadd) * (100 + maxhppct) / 100\n\n\n1\n\n\ndozens of properties, you have to write dozens of times, and each secondary property changes to correctly call the corresponding formula calculation. very troublesome! this design also has a big problem, buff configuration table to fill the corresponding attribute field is not very good to fill, for example, sprint buff (increase speed 50%), how to configure the buff table to make the program simple to find and operate the speedpct field? not a good idea.\n\n\n# et framework uses the key value form to save the value of the property\n\nusing system.collections.generic;\n\ngeneric; namespace model\ngeneric; namespace model {\n    public enum numerictype\n    {\n\t\tmax = 10000,\n\n\t\tspeed = 1000,\n\t\tspeedbase = speed * 10 + 1,\n\t    speedadd = speed * 10 + 2,\n\t    speedpct = speed * 10 + 3,\n\t    speedfinaladd = speed * 10 + 4,\n\t    speedfinalpct = speed * 10 + 5,\n\n\t    hp = 1001,\n\t    hpbase = hp * 10 + 1,\n\n\t    maxhp = 1002,\n\t    maxhpbase = maxhp * 10 + 1,\n\t    maxhpadd = maxhp * 10 + 2,\n\t    maxhppct = maxhp * 10 + 3,\n\t    maxhpfinaladd = maxhp * 10 + 4,\n\t\tmaxhpfinalpct = maxhp * 10 + 5,\n\t}\n\n\tpublic class numericcomponent: component\n\t{\n\t\tpublic readonly dictionary<int, int> numericdic = new dictionary<int, int>();\n\n\t\tpublic void awake()\n\t\t{\n\t\t\t// initialize base value here\n\t\t}\n\n\t\tpublic float getasfloat(numerictype numerictype)\n\t\t{\n\t\t\treturn (float)getbykey((int)numerictype) / 10000;\n\t\t}\n\n\t\tpublic int getasint(numerictype numerictype)\n\t\t{\n\t\t\treturn getbykey((int)numerictype);\n\t\t}\n\n\t\tpublic void set(numerictype nt, float value)\n\t\t{\n\t\t\tthis[nt] = (int) (value * 10000);\n\t\t}\n\n\t\tpublic void set(numerictype nt, int value)\n\t\t{\n\t\t\tthis[nt] = value;\n\t\t}\n\n\t\tpublic int this[numerictype numerictype]\n\t\t{\n\t\t\tget\n\t\t\t{\n\t\t\t\treturn this.getbykey((int) numerictype);\n\t\t\t}\n\t\t\tset\n\t\t\t{\n\t\t\t\tint v = this.getbykey((int) numerictype);\n\t\t\t\tif (v == value)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnumericdic[(int)numerictype] = value;\n\n\t\t\t\tupdate(numerictype);\n\t\t\t}\n\t\t}\n\n\t\tprivate int getbykey(int key)\n\t\t{\n\t\t\tint value = 0;\n\t\t\tthis.numericdic.trygetvalue(key, out value);\n\t\t\treturn value;\n\t\t}\n\n\t\tpublic void update(numerictype numerictype)\n\t\t{\n\t\t\tif (numerictype > numerictype.max)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tint final = (int) numerictype / 10;\n\t\t\tint bas = final * 10 + 1; \n\t\t\tint add = final * 10 + 2;\n\t\t\tint pct = final * 10 + 3;\n\t\t\tint finaladd = final * 10 + 4;\n\t\t\tint finalpct = final * 10 + 5;\n\n\t\t\t// a value may be affected by a variety of circumstances, such as speed, adding a buff may increase the speed of the absolute value of 100, but also some buffs increase the speed of 10%, so a value can be controlled by 5 values of the final result\n\t\t\t// final = (((base + add) * (100 + pct) / 100) + finaladd) * (100 + finalpct) / 100;\n\t\t\tthis.numericdic[final] = ((this.getbykey(base) + this.getbykey(add)) * (100 + this.getbykey(pct)) / 100 + this.getbykey(finaladd)) * (100 + this. getbykey(finalpct)) / 100;\n\t\t\tgame.eventsystem.run(eventidtype.numbericchange, this.entity.id, numerictype, final);\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n\n\n 1. values are saved with key value, key is the type of value, defined by numerictype, value are integers, float type can also be converted to integers, for example, multiply by 1000; key value to save properties will become very flexible, for example, mage no energy properties, then initialize the mage object does not add energy key value it's fine. thieves do not have mana, no spell damage, etc., the initialization will not need to add these.\n\n 2. world of warcraft, a value by 5 values to influence, you can unify the use of a formula.\n\nfinal = (((base + add) * (100 + pct) / 100) + finaladd) * (100 + finalpct) / 100;\n\n\n1\n\n\nfor example, the speed value speed, there is an initial value speedbase, there is a buff1 to increase the absolute speed by 10 points, then buff1 will add 10 to speedadd when it is created, buff1 minus 10 to speedadd when it is deleted, buff2 increases the speed by 20%, then buff2 adds to speedpct when it is created the 5 values are changed and the corresponding properties can be recalculated by using the update function in a unified way. buff configuration is quite simple. if the corresponding numerictype is filled in the buff configuration, the program can easily manipulate the corresponding value.\n\n 3. changes in properties can be uniformly thrown to other modules to subscribe to the event, writing a property change monitor becomes very simple. for example, the achievement module needs to develop an achievement life value over 1000, will get the achievement of longevity master. then the person developing the achievement module will subscribe to the hp changes as follows.\n\n\t/// monitor hp value changes\n\t[numericwatcher(numerictype.hp)\n\tpublic class numericwatcher_hp : inumericwatcher\n\t{\n\t\tpublic void run(long id, int value)\n\t\t{\n\t\t    if (value > 1000)\n\t\t    {\n\t\t        // get achievement longevity master achievement\n\t\t    }\n\t\t}\n\t}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nsimilarly, recording an exception log for a gold change greater than 10,000 at a time, etc. can be done this way.\n\nwith this numerical component, a moba skill system can be said to be half complete.",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"AI Framwork",frontmatter:{title:"AI Framwork",date:"2022-05-31T19:10:27.000Z",permalink:"/pages/58cf5c/"},regularPath:"/02.Guide/01.ETBook_English/61.6.1.AI%20Framwork.html",relativePath:"02.Guide/01.ETBook_English/61.6.1.AI Framwork.md",key:"v-4d16eb48",path:"/pages/58cf5c/",headers:[{level:2,title:"1. Several AI designs",slug:"_1-several-ai-designs",normalizedTitle:"1. several ai designs",charIndex:19},{level:3,title:"a. State machine",slug:"a-state-machine",normalizedTitle:"a. state machine",charIndex:254},{level:3,title:"b. Behavior tree",slug:"b-behavior-tree",normalizedTitle:"b. behavior tree",charIndex:1690},{level:2,title:"2. my approach",slug:"_2-my-approach",normalizedTitle:"2. my approach",charIndex:2855}],headersStr:"1. Several AI designs a. State machine b. Behavior tree 2. my approach",content:"# AI framework\n\n\n# 1. Several AI designs\n\nAI in the game a lot, but why do people always feel ai writing up very difficult, I later thought about it, the main reason is the use of improper methods. Before people write ai mainly have several options.\n\n\n# a. State machine\n\nI do not know who came up with this approach, really powerless to complain. Originally any data on the object is the state, this method and to define some state into a new kind of node, the object on the state change will cause the conversion between nodes, the implementation of the corresponding method, such as OnEnter OnExit and so on. Here is an example of a monster, monsters can be divided into a variety of states, patrol, attack, chase, return. The state changes of the monster are:\n\nPatrol->Chase Patrol state found a distant enemy to chase state\nPatrol->Attack Patrol find enemy can be attacked to attack state\nAttack->Chase The attack state finds an enemy in the distance and goes after it.\nAttack->Return Attack state find the enemy is too far to return state\nchase->return chase state found too far from the enemy to return to the state\n\nThere are so many state transitions that it's hard to find out if I've missed them here. Once there are more nodes, any two nodes may need to be connected, and it will become a super complex mesh structure, the complexity is the square of N, and it is very difficult to maintain. In order to solve the problem of complex mesh structure and then upgraded to a hierarchical state machine and so on. Of course, various patching methods still do not solve the essential problem. It is not your problem to use bad state machines, it is the problem of state machines.\n\n\n# b. Behavior tree\n\nThe ai of the behavior tree is responsive ai, the tree from top to bottom (or from left to right execution, here from top to bottom for example) is actually the action node ranked a priority, the action above the first to determine whether to meet the conditions, meet the implementation. We won't go into details here. The complexity of the behavior tree is N, greatly simplified than the state machine, but there are still many defects, ai too complex when the tree will become very large, and difficult to reconfigure. For example, in our own project, we want to make a robot ai similar to a human, automatically do tasks, fight monsters, play the system in the game, chat with people, and even attack others. Imagine how complex this tree will become! Another drawback of the behavior tree is that some action nodes are a persistent process, that is to say, a concurrent process, behavior tree management up concurrent process is not very good, such as the above example, need to move to the target side, this move is made into a concurrent process it, or every frame move it? This is a difficult problem, how to do it is not comfortable.\n\n\n# 2. my approach\n\nWhat is ai? Very simple, ai is constantly based on the current state, perform the appropriate behavior. Remember these two sentences, it is important, this is the essence of ai! These two sentences are divided into two parts, one is the state judgment, the second is the execution of behavior. State judgment is well understood, what is the behavior? Take the above example of the monster state machine, the behavior of the monster is Patrol, attack the enemy, return to the patrol point. For example.\n\nPatrol (when the monster is within the patrol range, there is no enemy around, choose the next patrol point, move)\nattack the enemy (when the monster found within the guard range of the enemy, if the attack distance enough to attack, not enough to move over to attack)\nReturn (when the monster found more than a certain distance from the birth point, plus the invincibility buff, move to the birth point, to the birth point, remove the invincibility buff)\n\nUnlike the state machine, these three state changes do not care about what the last state is, only about whether the current conditions are met, meet the implementation of the behavior. Behavior may be able to perform instantly, but also may be a continuous process, such as patrol, choose the next patrol point to move over, go to a point and then choose a point, and so on and so forth. For example, attacking the enemy, may need to move to the target to attack.\n\nHow to design this ai framework? Here it is very simple, abstract ai nodes, each node contains a conditional judgment, with the implementation of behavior. The behavior method should be a concurrent process\n\npublic class AINode\n{\n\tpublic virtual bool Check(Unit unit) // test whether the condition is met\n\t{\t\t\n\t}\n\n\tpublic virtual ETTask Run(Unit unit)\n\t{\t\t\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nThinking further, if the monster is on patrol and finds an enemy, then the monster should interrupt the current patrol and go on to perform the act of attacking the enemy instead. So our behavior should need to support being interrupted, which means that the behavior concurrent should support cancellation, and this is especially important to note that any concurrent in the behavior Run method should support the cancellation operation!\n\npublic class AINode\n{\n\tpublic virtual bool Check(Unit unit)\n\t{\t\t\n\t}\n\n\tpublic virtual ETVoid Run(Unit unit, ETCancelToken cancelToken)\n\t{\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nImplement three ai nodes XunLuoNode(patrol) GongjiNode(attack) FanHuiNode(return)\n\npublic class XunLuoNode: AINode\n{\n\tpublic virtual bool Check(Unit unit)\n\t{\n\t\tif (not in patrol range)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (there are enemies around)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic virtual ETVoid Run(Unit unit, ETCancelToken cancelToken)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tVector3 nextPoint = FindNextPoint();\n\t\t\tbool ret = await MoveToAsync(nextPoint, cancelToken); // move to the target point, return false means the process is canceled\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// stay for two seconds, note that any concurrent process must be able to be cancelled here\n\t\t\tWait(2000, cancelToken). bool ret = await TimeComponent;\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\nThe same can be achieved for the other two nodes. It's not enough to design the nodes, you also need to string the nodes together so that the ai can rotate\n\nAINode[] aiNodes = {xunLuoNode, gongjiNode, fanHuiNode};\nAINode current;\nETCancelToken cancelToken;\nwhile(true)\n{\n\t// Every second you need to re-determine if the new behavior is satisfied, this time can be set by yourself\n\tawait TimeComponent.Instance.Wait(1000);\n\n\tAINode next;\n\tforeach(var node in aiNodes)\n\t{\n\t\tif (node.Check())\n\t\t{\n\t\t\tnext = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (next == null)\n\t{\n\t\tcontinue;\n\t}\n\n\t// If the next node is the same as the current one, then it is not executed\n\tif (next == current)\n\t{\n\t\tcontinue;\n\t}\n\n\t// Stop the current concurrent process\n\tcancelToken.Cancel();\n\n\t// Execute the next concurrent process\n\tcancelToken = new ETCancelToken();\n\tnext.Run(unit, cancelToken).Coroutine();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\nThis code is very simple, meaning that it iterates through the nodes every second until it finds a node that satisfies the conditions and then executes it, waiting for the next second to determine, before executing the next node, interrupting the currently executing concurrent process. A few misconceptions about the use:\n\n 1. behavior if there is a concurrent process must be able to cancel, and pass in cancelToken, otherwise something will go wrong, because once the monster meets the execution of the next node, you need to cancel the current concurrent process.\n 2. different from the behavior tree and state machine, the role of the node is only a piece of logic, the node does not need to share. Shared is the concurrent methods, such as MoveToAsync, monster patrol node can be used, the monster attack enemy node in pursuit of the enemy can also be used.\n 3. nodes can do very large, such as automatically do the task node, move to the npc, pick up the task, according to the task of subtasks to do subtasks, such as moving to the monster point to fight monsters, move to the collection of things to collect, etc., after doing all the subtasks, move to the task npc to turn in the task. All of this is written in a while loop, using a concurrent string.\n\nThinking about a big question, how do you design a piezo bot? What does a piezo bot need to do? Automatically do tasks, automatically play various systems, automatically attack enemies, will counterattack, will find people to chat, etc.. Just make an ai node for each of the above mentioned. Brothers, AI simple or not?",normalizedContent:"# ai framework\n\n\n# 1. several ai designs\n\nai in the game a lot, but why do people always feel ai writing up very difficult, i later thought about it, the main reason is the use of improper methods. before people write ai mainly have several options.\n\n\n# a. state machine\n\ni do not know who came up with this approach, really powerless to complain. originally any data on the object is the state, this method and to define some state into a new kind of node, the object on the state change will cause the conversion between nodes, the implementation of the corresponding method, such as onenter onexit and so on. here is an example of a monster, monsters can be divided into a variety of states, patrol, attack, chase, return. the state changes of the monster are:\n\npatrol->chase patrol state found a distant enemy to chase state\npatrol->attack patrol find enemy can be attacked to attack state\nattack->chase the attack state finds an enemy in the distance and goes after it.\nattack->return attack state find the enemy is too far to return state\nchase->return chase state found too far from the enemy to return to the state\n\nthere are so many state transitions that it's hard to find out if i've missed them here. once there are more nodes, any two nodes may need to be connected, and it will become a super complex mesh structure, the complexity is the square of n, and it is very difficult to maintain. in order to solve the problem of complex mesh structure and then upgraded to a hierarchical state machine and so on. of course, various patching methods still do not solve the essential problem. it is not your problem to use bad state machines, it is the problem of state machines.\n\n\n# b. behavior tree\n\nthe ai of the behavior tree is responsive ai, the tree from top to bottom (or from left to right execution, here from top to bottom for example) is actually the action node ranked a priority, the action above the first to determine whether to meet the conditions, meet the implementation. we won't go into details here. the complexity of the behavior tree is n, greatly simplified than the state machine, but there are still many defects, ai too complex when the tree will become very large, and difficult to reconfigure. for example, in our own project, we want to make a robot ai similar to a human, automatically do tasks, fight monsters, play the system in the game, chat with people, and even attack others. imagine how complex this tree will become! another drawback of the behavior tree is that some action nodes are a persistent process, that is to say, a concurrent process, behavior tree management up concurrent process is not very good, such as the above example, need to move to the target side, this move is made into a concurrent process it, or every frame move it? this is a difficult problem, how to do it is not comfortable.\n\n\n# 2. my approach\n\nwhat is ai? very simple, ai is constantly based on the current state, perform the appropriate behavior. remember these two sentences, it is important, this is the essence of ai! these two sentences are divided into two parts, one is the state judgment, the second is the execution of behavior. state judgment is well understood, what is the behavior? take the above example of the monster state machine, the behavior of the monster is patrol, attack the enemy, return to the patrol point. for example.\n\npatrol (when the monster is within the patrol range, there is no enemy around, choose the next patrol point, move)\nattack the enemy (when the monster found within the guard range of the enemy, if the attack distance enough to attack, not enough to move over to attack)\nreturn (when the monster found more than a certain distance from the birth point, plus the invincibility buff, move to the birth point, to the birth point, remove the invincibility buff)\n\nunlike the state machine, these three state changes do not care about what the last state is, only about whether the current conditions are met, meet the implementation of the behavior. behavior may be able to perform instantly, but also may be a continuous process, such as patrol, choose the next patrol point to move over, go to a point and then choose a point, and so on and so forth. for example, attacking the enemy, may need to move to the target to attack.\n\nhow to design this ai framework? here it is very simple, abstract ai nodes, each node contains a conditional judgment, with the implementation of behavior. the behavior method should be a concurrent process\n\npublic class ainode\n{\n\tpublic virtual bool check(unit unit) // test whether the condition is met\n\t{\t\t\n\t}\n\n\tpublic virtual ettask run(unit unit)\n\t{\t\t\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nthinking further, if the monster is on patrol and finds an enemy, then the monster should interrupt the current patrol and go on to perform the act of attacking the enemy instead. so our behavior should need to support being interrupted, which means that the behavior concurrent should support cancellation, and this is especially important to note that any concurrent in the behavior run method should support the cancellation operation!\n\npublic class ainode\n{\n\tpublic virtual bool check(unit unit)\n\t{\t\t\n\t}\n\n\tpublic virtual etvoid run(unit unit, etcanceltoken canceltoken)\n\t{\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nimplement three ai nodes xunluonode(patrol) gongjinode(attack) fanhuinode(return)\n\npublic class xunluonode: ainode\n{\n\tpublic virtual bool check(unit unit)\n\t{\n\t\tif (not in patrol range)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (there are enemies around)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic virtual etvoid run(unit unit, etcanceltoken canceltoken)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tvector3 nextpoint = findnextpoint();\n\t\t\tbool ret = await movetoasync(nextpoint, canceltoken); // move to the target point, return false means the process is canceled\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// stay for two seconds, note that any concurrent process must be able to be cancelled here\n\t\t\twait(2000, canceltoken). bool ret = await timecomponent;\n\t\t\tif (!ret)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\nthe same can be achieved for the other two nodes. it's not enough to design the nodes, you also need to string the nodes together so that the ai can rotate\n\nainode[] ainodes = {xunluonode, gongjinode, fanhuinode};\nainode current;\netcanceltoken canceltoken;\nwhile(true)\n{\n\t// every second you need to re-determine if the new behavior is satisfied, this time can be set by yourself\n\tawait timecomponent.instance.wait(1000);\n\n\tainode next;\n\tforeach(var node in ainodes)\n\t{\n\t\tif (node.check())\n\t\t{\n\t\t\tnext = node;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (next == null)\n\t{\n\t\tcontinue;\n\t}\n\n\t// if the next node is the same as the current one, then it is not executed\n\tif (next == current)\n\t{\n\t\tcontinue;\n\t}\n\n\t// stop the current concurrent process\n\tcanceltoken.cancel();\n\n\t// execute the next concurrent process\n\tcanceltoken = new etcanceltoken();\n\tnext.run(unit, canceltoken).coroutine();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\nthis code is very simple, meaning that it iterates through the nodes every second until it finds a node that satisfies the conditions and then executes it, waiting for the next second to determine, before executing the next node, interrupting the currently executing concurrent process. a few misconceptions about the use:\n\n 1. behavior if there is a concurrent process must be able to cancel, and pass in canceltoken, otherwise something will go wrong, because once the monster meets the execution of the next node, you need to cancel the current concurrent process.\n 2. different from the behavior tree and state machine, the role of the node is only a piece of logic, the node does not need to share. shared is the concurrent methods, such as movetoasync, monster patrol node can be used, the monster attack enemy node in pursuit of the enemy can also be used.\n 3. nodes can do very large, such as automatically do the task node, move to the npc, pick up the task, according to the task of subtasks to do subtasks, such as moving to the monster point to fight monsters, move to the collection of things to collect, etc., after doing all the subtasks, move to the task npc to turn in the task. all of this is written in a while loop, using a concurrent string.\n\nthinking about a big question, how do you design a piezo bot? what does a piezo bot need to do? automatically do tasks, automatically play various systems, automatically attack enemies, will counterattack, will find people to chat, etc.. just make an ai node for each of the above mentioned. brothers, ai simple or not?",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"test2",frontmatter:{title:"test2",date:"2022-07-26T09:52:17.000Z",permalink:"/pages/b70448/"},regularPath:"/02.Guide/01.ETBook_English/98.test2.html",relativePath:"02.Guide/01.ETBook_English/98.test2.md",key:"v-708b622a",path:"/pages/b70448/",headersStr:null,content:"zzzz http://etgame.cn/pages/8643c5/",normalizedContent:"zzzz http://etgame.cn/pages/8643c5/",charsets:{},lastUpdated:"2022/07/26, 00:34:47",lastUpdatedTimestamp:1658766887e3},{title:"test",frontmatter:{title:"test",author:{name:"å°å¼",href:"https://www.yuque.com/et-xd/docs"},date:"2022-07-26T00:42:02.000Z",permalink:"/pages/578b97/"},regularPath:"/02.Guide/01.ETBook_English/99.test.html",relativePath:"02.Guide/01.ETBook_English/99.test.md",key:"v-8d136732",path:"/pages/578b97/",headersStr:null,content:"Test!~\n\nTest!~Test!~Test!~Test!~Test!~",normalizedContent:"test!~\n\ntest!~test!~test!~test!~test!~",charsets:{},lastUpdated:"2022/07/26, 00:34:47",lastUpdatedTimestamp:1658766887e3},{title:"Todo",frontmatter:{permalink:"/doc/todo",date:"2022-07-26T11:30:11.000Z",title:"Todo"},regularPath:"/30.%E6%96%87%E6%A1%A3/01.Todo.html",relativePath:"30.ææ¡£/01.Todo.md",key:"v-96f85bb2",path:"/doc/todo/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/26, 13:09:23",lastUpdatedTimestamp:1658812163e3},{title:"Todo",frontmatter:{permalink:"/doc/todo_en",title:"Todo",date:"2022-07-26T11:30:55.000Z"},regularPath:"/31.Doc/01.Todo.html",relativePath:"31.Doc/01.Todo.md",key:"v-5b320bc2",path:"/doc/todo_en/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/26, 13:09:23",lastUpdatedTimestamp:1658812163e3},{title:"ææ¡£ä»åºæäº¤è¯´æ",frontmatter:{title:"ææ¡£ä»åºæäº¤è¯´æ",author:{name:"å°å¼",href:"https://www.yuque.com/et-xd/docs"},date:"2022-07-26T01:03:04.000Z",permalink:"/doc/notes/"},regularPath:"/99.%E6%96%87%E6%A1%A3%E7%BC%96%E5%86%99/01.%E6%96%87%E6%A1%A3%E4%BB%93%E5%BA%93%E6%8F%90%E4%BA%A4%E8%AF%B4%E6%98%8E.html",relativePath:"99.ææ¡£ç¼å/01.ææ¡£ä»åºæäº¤è¯´æ.md",key:"v-4ec77c26",path:"/doc/notes/",headers:[{level:2,title:"åä½æµç¨",slug:"åä½æµç¨",normalizedTitle:"åä½æµç¨",charIndex:2},{level:2,title:"ææ¡£å­æ¾ç®å½",slug:"ææ¡£å­æ¾ç®å½",normalizedTitle:"ææ¡£å­æ¾ç®å½",charIndex:424},{level:2,title:"ç®å½çº§å«è¯´æ",slug:"ç®å½çº§å«è¯´æ",normalizedTitle:"ç®å½çº§å«è¯´æ",charIndex:649},{level:3,title:"ä¸çº§ç®å½",slug:"ä¸çº§ç®å½",normalizedTitle:"ä¸çº§ç®å½",charIndex:778},{level:3,title:"äºçº§/ä¸çº§ç®å½",slug:"äºçº§-ä¸çº§ç®å½",normalizedTitle:"äºçº§/ä¸çº§ç®å½",charIndex:1650},{level:3,title:"åçº§ç®å½",slug:"åçº§ç®å½",normalizedTitle:"åçº§ç®å½",charIndex:1011},{level:2,title:"æä»¶çfront matter (éè¦)",slug:"æä»¶çfront-matter-éè¦",normalizedTitle:"æä»¶çfront matter (éè¦)",charIndex:1741},{level:2,title:"å·¥å·",slug:"å·¥å·",normalizedTitle:"å·¥å·",charIndex:2101},{level:2,title:"Markdownç¸å³",slug:"markdownç¸å³",normalizedTitle:"markdownç¸å³",charIndex:2166},{level:3,title:"ç®å½æ é¢",slug:"ç®å½æ é¢",normalizedTitle:"ç®å½æ é¢",charIndex:2181},{level:3,title:"ä»£ç çæ®µ",slug:"ä»£ç çæ®µ",normalizedTitle:"ä»£ç çæ®µ",charIndex:2330},{level:3,title:"å¾ç",slug:"å¾ç",normalizedTitle:"å¾ç",charIndex:2453},{level:3,title:"ææ¬é«äº®",slug:"ææ¬é«äº®",normalizedTitle:"ææ¬é«äº®",charIndex:2539},{level:3,title:"åç½®æ è®°",slug:"åç½®æ è®°",normalizedTitle:"åç½®æ è®°",charIndex:2580},{level:3,title:"å¤é¨æ è®°",slug:"å¤é¨æ è®°",normalizedTitle:"å¤é¨æ è®°",charIndex:2652},{level:3,title:"æå åè¡¨",slug:"æå åè¡¨",normalizedTitle:"æå åè¡¨",charIndex:2727},{level:3,title:"æç»´å¯¼å¾ & æµç¨å¾",slug:"æç»´å¯¼å¾-æµç¨å¾",normalizedTitle:"æç»´å¯¼å¾ &amp; æµç¨å¾",charIndex:null},{level:2,title:"æ´å¤æ ¼å¼æå·§",slug:"æ´å¤æ ¼å¼æå·§",normalizedTitle:"æ´å¤æ ¼å¼æå·§",charIndex:3057}],headersStr:"åä½æµç¨ ææ¡£å­æ¾ç®å½ ç®å½çº§å«è¯´æ ä¸çº§ç®å½ äºçº§/ä¸çº§ç®å½ åçº§ç®å½ æä»¶çfront matter (éè¦) å·¥å· Markdownç¸å³ ç®å½æ é¢ ä»£ç çæ®µ å¾ç ææ¬é«äº® åç½®æ è®° å¤é¨æ è®° æå åè¡¨ æç»´å¯¼å¾ & æµç¨å¾ æ´å¤æ ¼å¼æå·§",content:'# åä½æµç¨\n\n 1. é¦åæ¯åå»º.mdæä»¶ï¼å¦æå¨ç»æåç®å½ä¸åéè¦æ·»å ç¸åºçåºå·\n 2. å¦æä½ æ³æå¨æå®æç« çåç±»ãæ ç­¾ï¼åéè¦å¨å¤´é¨front matterå¡«åç¸åºçå­æ®µã\n 3. æç« åé¨æ é¢ä»¥äºçº§æ é¢(## äºçº§æ é¢) å¼å§\n 4. æåï¼å°±å¯ä»¥æ­£å¼å¼å§åä½å¦ã\n    * å¨githubåå®¢æºç ä»åºç¸åºçæç« ç®å½ä¸ï¼æ°å»º.mdæä»¶ï¼ç¼è¾å¥½æç« å¹¶æäº¤åä¼è§¦åGitHub Actionsèªå¨é¨ç½²ã\n\nfront matteræ¨¡æ¿\n\n---\ntitle: æ é¢\ndate: 2022-7-26 11:24:31\npermalink: /xxx/xxxx/\ncategories:\n  - åç±»1\n  - åç±»2\ntags:\n  - æ ç­¾1\ntitleTag: åå\nauthor:\n name: ä½è\n link: https://xxx.com\n---\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# ææ¡£å­æ¾ç®å½\n\nå­äºET-homepage/tree/main/docså¯¹åºæä»¶å¤¹ä¸\n\næ è®ºæ¯æä»¶è¿æ¯æä»¶å¤¹ï¼è¯·ä¸ºå¶åç§°æ·»å ä¸æ­£ç¡®çæ­£æ´æ°åºå·å.ï¼ä»00æ01å¼å§ç´¯è®¡ï¼å¦01.æä»¶å¤¹ã02.æä»¶.md\n\n> åºå·åªæ¯ç¨äºå³å®ååé¡ºåºï¼å¹¶ä¸ä¸å®éè¦è¿çï¼å¦01ã02ã03...ï¼å®éå·¥ä½ä¸­å¯è½ä¼å¨ä¸¤ä¸ªæç« ä¸­é´æå¥ä¸ç¯æ°çæç« ï¼å æ­¤ä¸ºäºæ¹ä¾¿å¯ä»¥éç¨é´éåºå·10ã20ã30...ï¼åé¢å¦æéè¦å¨10å20ä¸­é´æå¥ä¸ç¯æ°æç« ï¼å¯ä»¥ç»å®åºå·15\n\n\n# ç®å½çº§å«è¯´æ\n\n.\nâââ docs\nâ   â  (ä¸åä¸æ°æ®çæ)\nâ   âââ .vuepress\nâ   âââ @pages\nâ   âââ index.md\nâ   â\nâ   â (ä»¥ä¸é¨ååä¸æ°æ®çæ)\nâ   âââ ãxxæç¨ãä¸æ  (ä¸çº§ç®å½)\nâ   â   âââ 01.ç« è1 (äºçº§ç®å½)\nâ   â   |   âââ 01.js1.md (ä¸çº§ç®å½-æä»¶)\nâ   â   |   âââ 02.js2.md\nâ   â   |   âââ 03.js3.md\nâ   â   âââ 02.ç« è2 (äºçº§ç®å½)\nâ   â   |   âââ 01.jsa.md\nâ   â   |   âââ 02.å°è (ä¸çº§ç®å½)\nâ   â   |   |   âââ 01.jsxx.md (åçº§ç®å½-æä»¶)\nâ   âââ 01.åç«¯\nâ   â   âââ 01.JavaScript\nâ   â   |   âââ 01.js1.md\nâ   â   |   âââ 02.js2.md\nâ   â   |   âââ 03.js3.md\nâ   â   âââ 02.vue\nâ   â   |   âââ 01.vue1.md\nâ   â   |   âââ 02.vue2.md\nâ   âââ 02.å¶ä»\nâ   â   âââ 01.å­¦ä¹ \nâ   â   |   âââ 01.xxa.md\nâ   â   |   âââ 02.xxb.md\nâ   â   âââ 02.å­¦ä¹ ç¬è®°\nâ   â   |   âââ 01.xxa.md\nâ   â   |   âââ 02.xxb.md\nâ   â   âââ 03.æä»¶x.md\nâ   â   âââ 04.æä»¶xx.md\nâ   âââ 03.å³äºæ\nâ   â   âââ 01.å³äºæ.md\n.   .\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n\n\n\n# ä¸çº§ç®å½\n\n * .vuepressã@pagesã_postsãindex.md æ README.md è¿äºæä»¶(æä»¶å¤¹)ä¸åä¸æ°æ®çæã\n * åºå·éå¿é¡»ã\n\n\n# äºçº§/ä¸çº§ç®å½\n\n * è¯¥çº§å«ä¸å¯ä»¥åæ¶æ¾æä»¶å¤¹å.mdæä»¶ï¼ä½æ¯ä¸¤èåºå·è¦è¿è´¯ã\n * å¿é¡»æåºå·\n\n\n# åçº§ç®å½\n\n * è¯¥çº§å«ä¸åªè½æ¾.mdæä»¶ã\n * å¿é¡»æåºå·\n\n\n# æä»¶çfront matter (éè¦)\n\næ·»å å¨mdæä»¶çå¼å¤´\n\n * [å¿è¦] permalink æ°¸ä¹é¾æ¥ï¼å¦æä¸æ æ³¨æ°¸ä¹é¾æ¥ï¼ä¸æ¬¡çæææ¡£å°åå°±ä¼åå\n\n---\npermalink: /xxx/xxxx/\n---\n\n\n1\n2\n3\n\n\næ åæ¨¡æ¿\n\n---\ntitle: æ é¢\ndate: 2022-7-26 11:24:31\npermalink: /A/a1/\ncategories:\n  - åç±»1\n  - åç±»2\ntags:\n  - æ ç­¾1\ntitleTag: åå\nsidebar: auto \narticle: false\nauthor:\n name: ä½è\n link: https://xxx.com\n---\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n\n# å·¥å·\n\nlocal_deploy.sh æ¬å°æµè¯, è¿è¡åè®¿é® http://localhost:8080/ å¯é¢è§ææ\n\n\n# Markdownç¸å³\n\n\n# ç®å½æ é¢\n\n * Markdown æä»¶çä¸çº§æ é¢(# ä¸çº§æ é¢) å®éæ¾ç¤ºçæç« æ é¢æ¯åèªfront matterä¸­çtitleï¼ç¶åæ.mdä¸­çä¸çº§æ é¢éèäºã\n * Markdown æä»¶ç äºçº§è³å­çº§ æ é¢ä¼è¢«æåå°ä¾§è¾¹ç®å½æ \n * æç« åé¨æ é¢ä»¥äºçº§æ é¢(## äºçº§æ é¢) å¼å§\n\n\n# ä»£ç çæ®µ\n\n    ```csharp\n    Console.WriteLine("Hello, World!");\n    ```\n\n\n1\n2\n3\n\n\nConsole.WriteLine("Hello, World!");\n\n\n1\n\n\n\n# å¾ç\n\nå¾çç®å½æ¾äºdocs/.vuepress/public/img\n\n![å¾ç](../.vuepress/public/img/bg.jpg)\n\n\n1\n\n\n\n\n\n# ææ¬é«äº®\n\n<mark>é«äº®</mark> ææ¬\n\n\n1\n\n\né«äº® ææ¬\n\n\n# åç½®æ è®°\n\n<Badge text="beta" type="warning"/>\n<Badge text="æ è®°"/>\n\n\n1\n2\n\n\n\n# å¤é¨æ è®°\n\n\n\n![star](https://img.shields.io/github/stars/egametang/ET)\n\n\n1\n\n\n\n# æå åè¡¨\n\nç¹å»æ¥ç\n\næå åå®¹\n\n::: details\næå åå®¹\n:::\n\n\n1\n2\n3\n\n\n\n# æç»´å¯¼å¾ & æµç¨å¾\n\n 1. ä½¿ç¨Markmap (opens new window)çææç»´å¯¼å¾htmlæä»¶\n 2. å°htmlæä»¶æ¾å¨docs/.vuepress/public/markmap/\n 3. éè¿<iframe>æå¥å°Markdown\n\n<iframe :src="$withBase(\'/markmap/01.html\')" width="100%" height="400" frameborder="0" scrolling="No" leftmargin="0" topmargin="0"></iframe>\n\n\n1\n\n\n\n# æ´å¤æ ¼å¼æå·§\n\nMarkdown æå±\n\nMarkdown å®¹å¨\n\nå¦ä½è®©ä½ çç¬è®°æ´æè¡¨ç°å',normalizedContent:'# åä½æµç¨\n\n 1. é¦åæ¯åå»º.mdæä»¶ï¼å¦æå¨ç»æåç®å½ä¸åéè¦æ·»å ç¸åºçåºå·\n 2. å¦æä½ æ³æå¨æå®æç« çåç±»ãæ ç­¾ï¼åéè¦å¨å¤´é¨front matterå¡«åç¸åºçå­æ®µã\n 3. æç« åé¨æ é¢ä»¥äºçº§æ é¢(## äºçº§æ é¢) å¼å§\n 4. æåï¼å°±å¯ä»¥æ­£å¼å¼å§åä½å¦ã\n    * å¨githubåå®¢æºç ä»åºç¸åºçæç« ç®å½ä¸ï¼æ°å»º.mdæä»¶ï¼ç¼è¾å¥½æç« å¹¶æäº¤åä¼è§¦ågithub actionsèªå¨é¨ç½²ã\n\nfront matteræ¨¡æ¿\n\n---\ntitle: æ é¢\ndate: 2022-7-26 11:24:31\npermalink: /xxx/xxxx/\ncategories:\n  - åç±»1\n  - åç±»2\ntags:\n  - æ ç­¾1\ntitletag: åå\nauthor:\n name: ä½è\n link: https://xxx.com\n---\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# ææ¡£å­æ¾ç®å½\n\nå­äºet-homepage/tree/main/docså¯¹åºæä»¶å¤¹ä¸\n\næ è®ºæ¯æä»¶è¿æ¯æä»¶å¤¹ï¼è¯·ä¸ºå¶åç§°æ·»å ä¸æ­£ç¡®çæ­£æ´æ°åºå·å.ï¼ä»00æ01å¼å§ç´¯è®¡ï¼å¦01.æä»¶å¤¹ã02.æä»¶.md\n\n> åºå·åªæ¯ç¨äºå³å®ååé¡ºåºï¼å¹¶ä¸ä¸å®éè¦è¿çï¼å¦01ã02ã03...ï¼å®éå·¥ä½ä¸­å¯è½ä¼å¨ä¸¤ä¸ªæç« ä¸­é´æå¥ä¸ç¯æ°çæç« ï¼å æ­¤ä¸ºäºæ¹ä¾¿å¯ä»¥éç¨é´éåºå·10ã20ã30...ï¼åé¢å¦æéè¦å¨10å20ä¸­é´æå¥ä¸ç¯æ°æç« ï¼å¯ä»¥ç»å®åºå·15\n\n\n# ç®å½çº§å«è¯´æ\n\n.\nâââ docs\nâ   â  (ä¸åä¸æ°æ®çæ)\nâ   âââ .vuepress\nâ   âââ @pages\nâ   âââ index.md\nâ   â\nâ   â (ä»¥ä¸é¨ååä¸æ°æ®çæ)\nâ   âââ ãxxæç¨ãä¸æ  (ä¸çº§ç®å½)\nâ   â   âââ 01.ç« è1 (äºçº§ç®å½)\nâ   â   |   âââ 01.js1.md (ä¸çº§ç®å½-æä»¶)\nâ   â   |   âââ 02.js2.md\nâ   â   |   âââ 03.js3.md\nâ   â   âââ 02.ç« è2 (äºçº§ç®å½)\nâ   â   |   âââ 01.jsa.md\nâ   â   |   âââ 02.å°è (ä¸çº§ç®å½)\nâ   â   |   |   âââ 01.jsxx.md (åçº§ç®å½-æä»¶)\nâ   âââ 01.åç«¯\nâ   â   âââ 01.javascript\nâ   â   |   âââ 01.js1.md\nâ   â   |   âââ 02.js2.md\nâ   â   |   âââ 03.js3.md\nâ   â   âââ 02.vue\nâ   â   |   âââ 01.vue1.md\nâ   â   |   âââ 02.vue2.md\nâ   âââ 02.å¶ä»\nâ   â   âââ 01.å­¦ä¹ \nâ   â   |   âââ 01.xxa.md\nâ   â   |   âââ 02.xxb.md\nâ   â   âââ 02.å­¦ä¹ ç¬è®°\nâ   â   |   âââ 01.xxa.md\nâ   â   |   âââ 02.xxb.md\nâ   â   âââ 03.æä»¶x.md\nâ   â   âââ 04.æä»¶xx.md\nâ   âââ 03.å³äºæ\nâ   â   âââ 01.å³äºæ.md\n.   .\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n\n\n\n# ä¸çº§ç®å½\n\n * .vuepressã@pagesã_postsãindex.md æ readme.md è¿äºæä»¶(æä»¶å¤¹)ä¸åä¸æ°æ®çæã\n * åºå·éå¿é¡»ã\n\n\n# äºçº§/ä¸çº§ç®å½\n\n * è¯¥çº§å«ä¸å¯ä»¥åæ¶æ¾æä»¶å¤¹å.mdæä»¶ï¼ä½æ¯ä¸¤èåºå·è¦è¿è´¯ã\n * å¿é¡»æåºå·\n\n\n# åçº§ç®å½\n\n * è¯¥çº§å«ä¸åªè½æ¾.mdæä»¶ã\n * å¿é¡»æåºå·\n\n\n# æä»¶çfront matter (éè¦)\n\næ·»å å¨mdæä»¶çå¼å¤´\n\n * [å¿è¦] permalink æ°¸ä¹é¾æ¥ï¼å¦æä¸æ æ³¨æ°¸ä¹é¾æ¥ï¼ä¸æ¬¡çæææ¡£å°åå°±ä¼åå\n\n---\npermalink: /xxx/xxxx/\n---\n\n\n1\n2\n3\n\n\næ åæ¨¡æ¿\n\n---\ntitle: æ é¢\ndate: 2022-7-26 11:24:31\npermalink: /a/a1/\ncategories:\n  - åç±»1\n  - åç±»2\ntags:\n  - æ ç­¾1\ntitletag: åå\nsidebar: auto \narticle: false\nauthor:\n name: ä½è\n link: https://xxx.com\n---\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n\n# å·¥å·\n\nlocal_deploy.sh æ¬å°æµè¯, è¿è¡åè®¿é® http://localhost:8080/ å¯é¢è§ææ\n\n\n# markdownç¸å³\n\n\n# ç®å½æ é¢\n\n * markdown æä»¶çä¸çº§æ é¢(# ä¸çº§æ é¢) å®éæ¾ç¤ºçæç« æ é¢æ¯åèªfront matterä¸­çtitleï¼ç¶åæ.mdä¸­çä¸çº§æ é¢éèäºã\n * markdown æä»¶ç äºçº§è³å­çº§ æ é¢ä¼è¢«æåå°ä¾§è¾¹ç®å½æ \n * æç« åé¨æ é¢ä»¥äºçº§æ é¢(## äºçº§æ é¢) å¼å§\n\n\n# ä»£ç çæ®µ\n\n    ```csharp\n    console.writeline("hello, world!");\n    ```\n\n\n1\n2\n3\n\n\nconsole.writeline("hello, world!");\n\n\n1\n\n\n\n# å¾ç\n\nå¾çç®å½æ¾äºdocs/.vuepress/public/img\n\n![å¾ç](../.vuepress/public/img/bg.jpg)\n\n\n1\n\n\n\n\n\n# ææ¬é«äº®\n\n<mark>é«äº®</mark> ææ¬\n\n\n1\n\n\né«äº® ææ¬\n\n\n# åç½®æ è®°\n\n<badge text="beta" type="warning"/>\n<badge text="æ è®°"/>\n\n\n1\n2\n\n\n\n# å¤é¨æ è®°\n\n\n\n![star](https://img.shields.io/github/stars/egametang/et)\n\n\n1\n\n\n\n# æå åè¡¨\n\nç¹å»æ¥ç\n\næå åå®¹\n\n::: details\næå åå®¹\n:::\n\n\n1\n2\n3\n\n\n\n# æç»´å¯¼å¾ & æµç¨å¾\n\n 1. ä½¿ç¨markmap (opens new window)çææç»´å¯¼å¾htmlæä»¶\n 2. å°htmlæä»¶æ¾å¨docs/.vuepress/public/markmap/\n 3. éè¿<iframe>æå¥å°markdown\n\n<iframe :src="$withbase(\'/markmap/01.html\')" width="100%" height="400" frameborder="0" scrolling="no" leftmargin="0" topmargin="0"></iframe>\n\n\n1\n\n\n\n# æ´å¤æ ¼å¼æå·§\n\nmarkdown æå±\n\nmarkdown å®¹å¨\n\nå¦ä½è®©ä½ çç¬è®°æ´æè¡¨ç°å',charsets:{cjk:!0},lastUpdated:"2022/07/26, 13:09:23",lastUpdatedTimestamp:1658812163e3},{title:"åå®¢æç« ",frontmatter:{archivesPage:!0,title:"åå®¢æç« ",permalink:"/blog/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-36c869aa",path:"/blog/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3},{title:"Home",frontmatter:{home:!0,heroImage:"/img/logo1.png",heroText:"ET",tagline:"ETæ¯ä¸ä¸ªå¼æºçæ¸¸æå®¢æ·ç«¯(åºäºUnity)æå¡ç«¯åç«¯æ¡æ¶",actionText:"å¼å§ä½¿ç¨ ð",actionLink:"/pages/a2f161/",bannerBg:"none",features:[{title:"ETTask",details:"âETTaskå°±æ¯ETççµé­ï¼æ´ä¸ªETæ¶æå¨ETTaskè·åç¨éä¸ãâ"},{title:"åç¨é",details:"âETTask ãåç¨éåETtask.WaitAllè¿ä¸ä¸ªæ¯ä¸å¥ç»åæ³ï¼å¨åæ ç©·ï¼å®å¨è§£å³äºæææå¡ç«¯åå¸å¼å¼åä¸­çåè°é¾é¢ãåé»è¾åä¹ä¸ç¨callbackäºâ"},{title:"EventSystem",details:"âETæ¡æ¶çé»è¾å°±æ¯ç±åç§äºä»¶æ¥é©±å¨çãâ"},{title:"MongoBson",details:"âMongoBsonåæ¶æ¯è·éç½®åºååï¼æ­éæ°æ®åºç®ç´å®ç¾ãåå­ï¼æ¶æ¯ï¼éç½®ï¼æ°æ®åºï¼ET6æ¯å®å¨ç»ä¸çåºååï¼éå¸¸æ¹ä¾¿ãâ"},{title:"ç­éè½½",details:"å®¢æ·ç«¯æå¡ç«¯åå¯ç­éè½½ï¼å¼åä¸ç¨éå¯å®¢æ·ç«¯æå¡ç«¯å³å¯ä¿®æ¹é»è¾ä»£ç ï¼å¼åæå¶æ¹ä¾¿"},{title:"æºå¨äººæ¡æ¶",details:"âä»ä¹å«ååç«¯å±äº«ä»£ç ççäº§åï¼ç´æ¥ä½¿ç¨å®¢æ·ç«¯ä»£ç åå»ºæºå¨äººãé»è¾è·è¡¨ç°åç¦»ï¼æºå¨äººç¨åºç´æ¥å±äº«å©ç¨å®¢æ·ç«¯çé»è¾å±ä»£ç ååæµï¼åªéè¦æå°ä»£ç å³å¯ååºæºå¨äººï¼æ¹ä¾¿åæµæå¡ç«¯â"},{title:"åå¤ç½kcpç½ç»",details:"æ§è½å¼ºå²ï¼æ­éè½¯è·¯ç±æ¨¡åï¼å¯ä»¥é²åç§ç½ç»æ»å»"},{title:"AIæ¡æ¶-è¡ä¸ºæº",details:"è¡ä¸ºæºæ¯æåæçä¸ä¸ªè¯ï¼å¯¹åºç¶ææºï¼çäºä¹åä¿è¯ï¼åaiæ¯åuiè¿ç®å"},{title:"æ°å¼ç»ä»¶",details:"ä¸å¥æå¶çµæ´»çæ°å¼ç»æ"}],postList:"none"},regularPath:"/",relativePath:"index.md",key:"v-7d4c8dc4",path:"/",headers:[{level:2,title:"ðä¸æ°æ¨è",slug:"ðä¸æ°æ¨è",normalizedTitle:"ðä¸æ°æ¨è",charIndex:15},{level:2,title:"â¡ï¸æªæ¥...",slug:"â¡ï¸æªæ¥",normalizedTitle:"â¡ï¸æªæ¥...",charIndex:59},{level:2,title:"â¡ åé¦ä¸äº¤æµ",slug:"â¡-åé¦ä¸äº¤æµ",normalizedTitle:"â¡ åé¦ä¸äº¤æµ",charIndex:84}],headersStr:"ðä¸æ°æ¨è â¡ï¸æªæ¥... â¡ åé¦ä¸äº¤æµ",content:"ç»é¡¹ç®ç¹ä¸ªâ­\n\n\n\n\n\n\n# ðä¸æ°æ¨è\n\n * v6.0ï¼æ´æ°è®°å½ ...\n\næ´å¤ä¸æ°è¯·æ¥éï¼æ´æ°æ¥å¿\n\n\n\n# â¡ï¸æªæ¥...\n\næç¤º\n\næç»­å³æ³¨å§~\n\n\n\n# â¡ åé¦ä¸äº¤æµ\n\nå¨ä½¿ç¨è¿ç¨ä¸­æä»»ä½é®é¢åæ³æ³ï¼è¯·æ Issueã ä½ ä¹å¯ä»¥å¨Issueæ¥çå«äººæçé®é¢åç»åºè§£å³æ¹æ¡ã\n\næèå å¥æä»¬çäº¤æµç¾¤ï¼474643097",normalizedContent:"ç»é¡¹ç®ç¹ä¸ªâ­\n\n\n\n\n\n\n# ðä¸æ°æ¨è\n\n * v6.0ï¼æ´æ°è®°å½ ...\n\næ´å¤ä¸æ°è¯·æ¥éï¼æ´æ°æ¥å¿\n\n\n\n# â¡ï¸æªæ¥...\n\næç¤º\n\næç»­å³æ³¨å§~\n\n\n\n# â¡ åé¦ä¸äº¤æµ\n\nå¨ä½¿ç¨è¿ç¨ä¸­æä»»ä½é®é¢åæ³æ³ï¼è¯·æ issueã ä½ ä¹å¯ä»¥å¨issueæ¥çå«äººæçé®é¢åç»åºè§£å³æ¹æ¡ã\n\næèå å¥æä»¬çäº¤æµç¾¤ï¼474643097",charsets:{cjk:!0},lastUpdated:"2022/07/25, 23:10:19",lastUpdatedTimestamp:1658761819e3}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"æå",link:"",items:[{text:"æå",link:"/pages/a2f161/"},{text:"Guide",link:"/pages/1e1b9a/"},{text:"æäº¤ææ¡£",link:"/doc/notes/"}]},{text:"è®ºå",link:"https://et-framework.cn"},{text:"ðET-Github",link:"https://github.com/egametang/ET"}],sidebarDepth:2,logo:"/img/logo1.png",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",repo:"zxt385189207/ET-homepage",docsBranch:"main",docsDir:"docs",editLinks:!0,editLinkText:"å¨Githubä¸ç¼è¾æ­¤é¡µé¢!",sidebar:{"/01.æå/":[{title:"ETBbook_ä¸­æ",collapsable:!1,children:[["01.ETBbook_ä¸­æ/01.ä»ç».md","ä»ç»","/pages/a2f161"],["01.ETBbook_ä¸­æ/02.1.1è¿è¡æå.md","è¿è¡æå","/pages/52d5c3"],["01.ETBbook_ä¸­æ/03.ç®å½ç»æ.md","ç®å½ç»æ","/pages/ff62ec/"],["01.ETBbook_ä¸­æ/12.1.2ä¸ºä»ä¹ä½¿ç¨.net core.md","1.2ä¸ºä»ä¹ä½¿ç¨.net core","/pages/f62a4d/"],["01.ETBbook_ä¸­æ/21.2.1CSharpçåç¨.md","2.1CSharpçåç¨","/pages/500d39/"],["01.ETBbook_ä¸­æ/22.2.2æ´å¥½çåç¨.md","2.2æ´å¥½çåç¨","/pages/0f0a88/"],["01.ETBbook_ä¸­æ/23.2.3åçº¿ç¨å¼æ­¥.md","2.3åçº¿ç¨å¼æ­¥","/pages/d3ef38/"],["01.ETBbook_ä¸­æ/32.3.2å¼ºå¤§çMongoBsonåº.md","3.2å¼ºå¤§çMongoBsonåº","/pages/037ea6/"],["01.ETBbook_ä¸­æ/33.3.3ä¸åçç»ä»¶.md","3.3ä¸åçç»ä»¶","/pages/81bdb3/"],["01.ETBbook_ä¸­æ/34.3.3ä¸åçå®ä½.md","3.3ä¸åçå®ä½","/pages/c77b6a/"],["01.ETBbook_ä¸­æ/35.3.4äºä»¶æºå¶EventSystem.md","3.4äºä»¶æºå¶EventSystem","/pages/e49330/"],["01.ETBbook_ä¸­æ/41.4.1ç»ä»¶å¼è®¾è®¡.md","4.1ç»ä»¶å¼è®¾è®¡","/pages/002c9b/"],["01.ETBbook_ä¸­æ/54.5.4Actoræ¨¡å.md","5.4Actoræ¨¡å","/pages/96869e/"],["01.ETBbook_ä¸­æ/55.5.5Actor Location-ZH.md","5.5Actor Location-ZH","/pages/9f7296/"],["01.ETBbook_ä¸­æ/56.5.6æ°å¼ç»ä»¶è®¾è®¡.md","5.6æ°å¼ç»ä»¶è®¾è®¡","/pages/1dc51a/"],["01.ETBbook_ä¸­æ/61.6.1AIæ¡æ¶.md","6.1AIæ¡æ¶","/pages/d9bb29/"]]}],catalogue:{},"/02.Guide/":[{title:"ETBook_English",collapsable:!1,children:[["01.ETBook_English/02.1.1RunGuide.md","RunGuide","/pages/1e1b9a/"],["01.ETBook_English/12.1.2Why use .net core.md","Why use .net core","/pages/f9f601/"],["01.ETBook_English/21.2.1CSharp Coroutine.md","CSharp Coroutine","/pages/97d2cf/"],["01.ETBook_English/22.2.2Better Coroutine.md","Better Coroutine","/pages/e03bce/"],["01.ETBook_English/23.2.3Single-threaded asynchronous.md","Single-threaded asynchronous","/pages/735741/"],["01.ETBook_English/32.3.2The powerful MongoBson library.md","The powerful MongoBson library","/pages/947d76/"],["01.ETBook_English/33.3.3Everything is Entity.md","Everything is Entity","/pages/b631b2/"],["01.ETBook_English/35.3.4EventSystem.md","EventSystem","/pages/53296b/"],["01.ETBook_English/41.4.1Component-based design.md","Component-based design","/pages/66fec6/"],["01.ETBook_English/54.5.4Actor Model.md","Actor Model","/pages/a3279e/"],["01.ETBook_English/55.5.5Actor Location-EN.md","Actor Location-EN","/pages/d00821/"],["01.ETBook_English/56.5.6Numerical component design.md","Numerical component design","/pages/ae8fe0/"],["01.ETBook_English/61.6.1.AI Framwork.md","AI Framwork","/pages/58cf5c/"],["01.ETBook_English/98.test2.md","test2","/pages/b70448/"],["01.ETBook_English/99.test.md","test","/pages/578b97/"]]}],"/30.ææ¡£/":[["01.Todo.md","Todo","/doc/todo"]],"/31.Doc/":[["01.Todo.md","Todo","/doc/todo_en"]],"/99.ææ¡£ç¼å/":[["01.ææ¡£ä»åºæäº¤è¯´æ.md","ææ¡£ä»åºæäº¤è¯´æ","/doc/notes/"]]},updateBar:{showToArticle:!1},category:!1,tag:!1,author:{name:"çç«",href:"https://github.com/egametang/ET"},social:{icons:[{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:385189207@qq.com"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/egametang/ET"}]},footer:{createYear:2022,copyrightInfo:"d | MIT License"},htmlModules:{}}};var wc=t(92),kc=t(93),xc=t(11);var Tc={computed:{$filterPosts(){return this.$site.pages.filter(n=>{const{frontmatter:{pageComponent:e,article:t,home:o}}=n;return!(e||!1===t||!0===o)})},$sortPosts(){return(n=this.$filterPosts).sort((n,e)=>{const t=n.frontmatter.sticky,o=e.frontmatter.sticky;return t&&o?t==o?Object(xc.a)(n,e):t-o:t&&!o?-1:!t&&o?1:Object(xc.a)(n,e)}),n;var n},$sortPostsByDate(){return(n=this.$filterPosts).sort((n,e)=>Object(xc.a)(n,e)),n;var n},$groupPosts(){return function(n){const e={},t={};for(let o=0,a=n.length;o<a;o++){const{frontmatter:{categories:a,tags:i}}=n[o];"array"===Object(xc.n)(a)&&a.forEach(t=>{t&&(e[t]||(e[t]=[]),e[t].push(n[o]))}),"array"===Object(xc.n)(i)&&i.forEach(e=>{e&&(t[e]||(t[e]=[]),t[e].push(n[o]))})}return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags(){return function(n){const e=[],t=[];for(let t in n.categories)e.push({key:t,length:n.categories[t].length});for(let e in n.tags)t.push({key:e,length:n.tags[e].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Ft.component(wc.default),Ft.component(kc.default);function _c(n){return n.toString().padStart(2,"0")}t(235);Ft.component("Badge",()=>Promise.all([t.e(0),t.e(3)]).then(t.bind(null,350))),Ft.component("CodeBlock",()=>Promise.resolve().then(t.bind(null,92))),Ft.component("CodeGroup",()=>Promise.resolve().then(t.bind(null,93)));t(236);var Cc=[({Vue:n,options:e,router:t,siteData:o,isServer:a})=>{a||t.afterEach(()=>{var n;n=function(){setTimeout((function(){void 0===window._AdBlockInit&&function(){const n=document.getElementsByClassName("wwads-cn"),e=document.querySelector(".wwads-content");n[0]&&!e&&(n[0].innerHTML="<style>.wwads-horizontal,.wwads-vertical{background-color:#f4f8fa;padding:5px;min-height:120px;margin-top:20px;box-sizing:border-box;border-radius:3px;font-family:sans-serif;display:flex;min-width:150px;position:relative;overflow:hidden;}.wwads-horizontal{flex-wrap:wrap;justify-content:center}.wwads-vertical{flex-direction:column;align-items:center;padding-bottom:32px}.wwads-horizontal a,.wwads-vertical a{text-decoration:none}.wwads-horizontal .wwads-img,.wwads-vertical .wwads-img{margin:5px}.wwads-horizontal .wwads-content,.wwads-vertical .wwads-content{margin:5px}.wwads-horizontal .wwads-content{flex:130px}.wwads-vertical .wwads-content{margin-top:10px}.wwads-horizontal .wwads-text,.wwads-content .wwads-text{font-size:14px;line-height:1.4;color:#0e1011;-webkit-font-smoothing:antialiased}.wwads-horizontal .wwads-poweredby,.wwads-vertical .wwads-poweredby{display:block;font-size:11px;color:#a6b7bf;margin-top:1em}.wwads-vertical .wwads-poweredby{position:absolute;left:10px;bottom:10px}.wwads-horizontal .wwads-poweredby span,.wwads-vertical .wwads-poweredby span{transition:all 0.2s ease-in-out;margin-left:-1em}.wwads-horizontal .wwads-poweredby span:first-child,.wwads-vertical .wwads-poweredby span:first-child{opacity:0}.wwads-horizontal:hover .wwads-poweredby span,.wwads-vertical:hover .wwads-poweredby span{opacity:1;margin-left:0}.wwads-horizontal .wwads-hide,.wwads-vertical .wwads-hide{position:absolute;right:-23px;bottom:-23px;width:46px;height:46px;border-radius:23px;transition:all 0.3s ease-in-out;cursor:pointer;}.wwads-horizontal .wwads-hide:hover,.wwads-vertical .wwads-hide:hover{background:rgb(0 0 0 /0.05)}.wwads-horizontal .wwads-hide svg,.wwads-vertical .wwads-hide svg{position:absolute;left:10px;top:10px;fill:#a6b7bf}.wwads-horizontal .wwads-hide:hover svg,.wwads-vertical .wwads-hide:hover svg{fill:#3E4546}</style><a href='https://wwads.cn/page/whitelist-wwads' class='wwads-img' target='_blank' rel='nofollow'><img src='https://cdn.jsdelivr.net/gh/xugaoyi/image_store@master/blog/wwads.2a3pidhlh4ys.webp' width='130'></a><div class='wwads-content'><a href='https://wwads.cn/page/whitelist-wwads' class='wwads-text' target='_blank' rel='nofollow'>ä¸ºäºæ¬ç«çé¿æè¿è¥ï¼è¯·å°æä»¬çç½ç«å å¥å¹¿åæ¦æªå¨çç½ååï¼æè°¢æ¨çæ¯æï¼<span style='color: #11a8cd'>å¦ä½æ·»å ç½åå?</span></a><a href='https://wwads.cn/page/end-user-privacy' class='wwads-poweredby' title='ä¸ç»´å¹¿å ï½ è®©å¹¿åæ´ä¼éï¼ä¸æç¨' target='_blank'><span>ä¸ç»´</span><span>å¹¿å</span></a></div><a class='wwads-hide' onclick='parentNode.remove()' title='éèå¹¿å'><svg xmlns='http://www.w3.org/2000/svg' width='6' height='7'><path d='M.879.672L3 2.793 5.121.672a.5.5 0 11.707.707L3.708 3.5l2.12 2.121a.5.5 0 11-.707.707l-2.12-2.12-2.122 2.12a.5.5 0 11-.707-.707l2.121-2.12L.172 1.378A.5.5 0 01.879.672z'></path></svg></a>")}()}),3e3)},"complete"===document.readyState||"interactive"===document.readyState?setTimeout(n,1):document.addEventListener("DOMContentLoaded",n),setTimeout(()=>{const n=document.querySelector(".page-ad");if(!n)return;const e=n.querySelector(".wwads-hide");e&&(e.onclick=()=>{n.style.display="none"}),"none"===n.style.display&&(n.style.display="flex")},900)})},({Vue:n,options:e,router:t,siteData:o})=>{o.pages.map(n=>{const{frontmatter:{date:e,author:t}}=n;"string"==typeof e&&"Z"===e.charAt(e.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return`${n.getUTCFullYear()}-${_c(n.getUTCMonth()+1)}-${_c(n.getUTCDate())} ${_c(n.getUTCHours())}:${_c(n.getUTCMinutes())}:${_c(n.getUTCSeconds())}`}(e)),t?n.author=t:o.themeConfig.author&&(n.author=o.themeConfig.author)}),n.mixin(Tc)},{},({Vue:n})=>{n.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{},({router:n})=>{"undefined"!=typeof window&&(window._hmt=window._hmt||[],function(){var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?01293bffa6c3962016c08ba685c79d78";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),n.afterEach((function(n){_hmt.push(["_trackPageview",n.fullPath])})))}],Ec=[];class Sc extends class{constructor(){this.store=new Ft({data:{state:{}}})}$get(n){return this.store.state[n]}$set(n,e){Ft.set(this.store.state,n,e)}$emit(...n){this.store.$emit(...n)}$on(...n){this.store.$on(...n)}}{}Object.assign(Sc.prototype,{getPageAsyncComponent:is,getLayoutAsyncComponent:rs,getAsyncComponent:ss,getVueComponent:cs});var Ac={install(n){const e=new Sc;n.$vuepress=e,n.prototype.$vuepress=e}};function Ic(n,e){const t=e.toLowerCase();return n.options.routes.some(n=>n.path.toLowerCase()===t)}var jc={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(n){const e=this.pageKey||this.$parent.$page.key;return ds("pageKey",e),Ft.component(e)||Ft.component(e,is(e)),Ft.component(e)?n(e):n("")}},Pc={functional:!0,props:{slotKey:String,required:!0},render:(n,{props:e,slots:t})=>n("div",{class:["content__"+e.slotKey]},t()[e.slotKey])},zc={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Mc=(t(237),t(238),Object(gc.a)(zc,(function(){var n=this._self._c;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),Oc={functional:!0,render(n,{parent:e,children:t}){if(e._isMounted)return t;e.$once("hook:mounted",()=>{e.$forceUpdate()})}};Ft.config.productionTip=!1,Ft.use(Hr),Ft.use(Ac),Ft.mixin(function(n,e,t=Ft){!function(n){n.locales&&Object.keys(n.locales).forEach(e=>{n.locales[e].path=e});Object.freeze(n)}(e),t.$vuepress.$set("siteData",e);const o=new(n(t.$vuepress.$get("siteData"))),a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),i={};return Object.keys(a).reduce((n,e)=>(e.startsWith("$")&&(n[e]=a[e].get),n),i),{computed:i}}(n=>class{setPage(n){this.__page=n}get $site(){return n}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:n={}}=this.$site;let e,t;for(const o in n)"/"===o?t=n[o]:0===this.$page.path.indexOf(o)&&(e=n[o]);return e||t||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:n}=this.$page.frontmatter;return"string"==typeof n&&n}get $title(){const n=this.$page,{metaTitle:e}=this.$page.frontmatter;if("string"==typeof e)return e;const t=this.$siteTitle,o=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?o?o+" | "+t:t:o||"VuePress"}get $description(){const n=function(n){if(n){const e=n.filter(n=>"description"===n.name)[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(n,e){for(let t=0;t<n.length;t++){const o=n[t];if(o.path.toLowerCase()===e.toLowerCase())return o}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},bc)),Ft.component("Content",jc),Ft.component("ContentSlotsDistributor",Pc),Ft.component("OutboundLink",Mc),Ft.component("ClientOnly",Oc),Ft.component("Layout",rs("Layout")),Ft.component("NotFound",rs("NotFound")),Ft.prototype.$withBase=function(n){const e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.5",hash:"15f3255"},async function(n){const e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:bc.routerBase||bc.base,t=new Hr({base:e,mode:"history",fallback:!1,routes:vc,scrollBehavior:(n,e,t)=>t||(n.hash?!Ft.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})});!function(n){n.beforeEach((e,t,o)=>{if(Ic(n,e.path))o();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){const t=e.path.replace(/\/$/,"")+".html";Ic(n,t)?o(t):o()}else o();else{const t=e.path+"/",a=e.path+".html";Ic(n,a)?o(a):Ic(n,t)?o(t):o()}})}(t);const o={};try{await Promise.all(Cc.filter(n=>"function"==typeof n).map(e=>e({Vue:Ft,options:o,router:t,siteData:bc,isServer:n})))}catch(n){console.error(n)}return{app:new Ft(Object.assign(o,{router:t,render:n=>n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},Ec.map(e=>n(e)))])})),router:t}}(!1).then(({app:n,router:e})=>{e.onReady(()=>{n.$mount("#app")})})}]);